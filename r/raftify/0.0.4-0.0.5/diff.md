# Comparing `tmp/raftify-0.0.4-py3-none-any.whl.zip` & `tmp/raftify-0.0.5-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,27 +1,27 @@
-Zip file size: 27926 bytes, number of entries: 25
--rw-r--r--  2.0 unx        6 b- defN 23-Aug-07 04:25 raftify/VERSION
--rw-r--r--  2.0 unx      819 b- defN 23-Aug-07 04:25 raftify/__init__.py
--rw-r--r--  2.0 unx       86 b- defN 23-Jul-31 06:54 raftify/error.py
+Zip file size: 28174 bytes, number of entries: 25
+-rw-r--r--  2.0 unx        6 b- defN 23-Aug-07 06:29 raftify/VERSION
+-rw-r--r--  2.0 unx      819 b- defN 23-Aug-07 05:15 raftify/__init__.py
+-rw-r--r--  2.0 unx       86 b- defN 23-Aug-07 06:52 raftify/error.py
 -rw-r--r--  2.0 unx      368 b- defN 23-Jul-31 06:54 raftify/fsm.py
--rw-r--r--  2.0 unx    10934 b- defN 23-Jul-31 06:54 raftify/lmdb.py
--rw-r--r--  2.0 unx     2828 b- defN 23-Jul-31 07:10 raftify/mailbox.py
+-rw-r--r--  2.0 unx    10934 b- defN 23-Aug-07 06:34 raftify/lmdb.py
+-rw-r--r--  2.0 unx     2834 b- defN 23-Aug-07 06:28 raftify/mailbox.py
 -rw-r--r--  2.0 unx     1408 b- defN 23-Aug-03 04:08 raftify/message_sender.py
--rw-r--r--  2.0 unx     7907 b- defN 23-Jul-31 06:55 raftify/pb_adapter.py
--rw-r--r--  2.0 unx     2551 b- defN 23-Jul-31 06:55 raftify/raft_client.py
--rw-r--r--  2.0 unx     4693 b- defN 23-Aug-07 04:24 raftify/raft_facade.py
--rw-r--r--  2.0 unx    14379 b- defN 23-Aug-03 06:39 raftify/raft_node.py
--rw-r--r--  2.0 unx     1425 b- defN 23-Jul-31 06:55 raftify/raft_server.py
--rw-r--r--  2.0 unx     3621 b- defN 23-Jul-31 06:55 raftify/raft_service.py
+-rw-r--r--  2.0 unx     7907 b- defN 23-Aug-07 06:16 raftify/pb_adapter.py
+-rw-r--r--  2.0 unx     2573 b- defN 23-Aug-07 06:52 raftify/raft_client.py
+-rw-r--r--  2.0 unx     5160 b- defN 23-Aug-07 06:54 raftify/raft_facade.py
+-rw-r--r--  2.0 unx    14379 b- defN 23-Aug-07 06:24 raftify/raft_node.py
+-rw-r--r--  2.0 unx     1085 b- defN 23-Aug-07 06:34 raftify/raft_server.py
+-rw-r--r--  2.0 unx     4101 b- defN 23-Aug-07 06:50 raftify/raft_service.py
 -rw-r--r--  2.0 unx      985 b- defN 23-Aug-07 04:23 raftify/request_message.py
--rw-r--r--  2.0 unx      753 b- defN 23-Jul-31 06:55 raftify/response_message.py
--rw-r--r--  2.0 unx     1503 b- defN 23-Jul-31 06:54 raftify/utils.py
--rw-r--r--  2.0 unx     5208 b- defN 23-Jul-31 06:54 raftify/protos/eraftpb_pb2.py
--rw-r--r--  2.0 unx      173 b- defN 23-Jul-31 06:54 raftify/protos/eraftpb_pb2_grpc.py
--rw-r--r--  2.0 unx     2859 b- defN 23-Jul-31 06:54 raftify/protos/raft_service_pb2.py
--rw-r--r--  2.0 unx     7331 b- defN 23-Jul-31 06:54 raftify/protos/raft_service_pb2_grpc.py
--rw-r--r--  2.0 unx    10349 b- defN 23-Aug-07 04:30 raftify-0.0.4.dist-info/LICENSE
--rw-r--r--  2.0 unx     6098 b- defN 23-Aug-07 04:30 raftify-0.0.4.dist-info/METADATA
--rw-r--r--  2.0 unx       92 b- defN 23-Aug-07 04:30 raftify-0.0.4.dist-info/WHEEL
--rw-r--r--  2.0 unx        8 b- defN 23-Aug-07 04:30 raftify-0.0.4.dist-info/top_level.txt
--rw-rw-r--  2.0 unx     1975 b- defN 23-Aug-07 04:30 raftify-0.0.4.dist-info/RECORD
-25 files, 88359 bytes uncompressed, 24772 bytes compressed:  72.0%
+-rw-r--r--  2.0 unx      753 b- defN 23-Aug-07 06:17 raftify/response_message.py
+-rw-r--r--  2.0 unx     1480 b- defN 23-Aug-07 06:34 raftify/utils.py
+-rw-r--r--  2.0 unx     5208 b- defN 23-Aug-07 06:51 raftify/protos/eraftpb_pb2.py
+-rw-r--r--  2.0 unx      173 b- defN 23-Aug-07 06:51 raftify/protos/eraftpb_pb2_grpc.py
+-rw-r--r--  2.0 unx     3468 b- defN 23-Aug-07 06:51 raftify/protos/raft_service_pb2.py
+-rw-r--r--  2.0 unx     7397 b- defN 23-Aug-07 06:51 raftify/protos/raft_service_pb2_grpc.py
+-rw-r--r--  2.0 unx    10349 b- defN 23-Aug-07 06:54 raftify-0.0.5.dist-info/LICENSE
+-rw-r--r--  2.0 unx     6098 b- defN 23-Aug-07 06:54 raftify-0.0.5.dist-info/METADATA
+-rw-r--r--  2.0 unx       92 b- defN 23-Aug-07 06:54 raftify-0.0.5.dist-info/WHEEL
+-rw-r--r--  2.0 unx        8 b- defN 23-Aug-07 06:54 raftify-0.0.5.dist-info/top_level.txt
+-rw-rw-r--  2.0 unx     1975 b- defN 23-Aug-07 06:54 raftify-0.0.5.dist-info/RECORD
+25 files, 89646 bytes uncompressed, 25020 bytes compressed:  72.1%
```

## zipnote {}

```diff
@@ -54,23 +54,23 @@
 
 Filename: raftify/protos/raft_service_pb2.py
 Comment: 
 
 Filename: raftify/protos/raft_service_pb2_grpc.py
 Comment: 
 
-Filename: raftify-0.0.4.dist-info/LICENSE
+Filename: raftify-0.0.5.dist-info/LICENSE
 Comment: 
 
-Filename: raftify-0.0.4.dist-info/METADATA
+Filename: raftify-0.0.5.dist-info/METADATA
 Comment: 
 
-Filename: raftify-0.0.4.dist-info/WHEEL
+Filename: raftify-0.0.5.dist-info/WHEEL
 Comment: 
 
-Filename: raftify-0.0.4.dist-info/top_level.txt
+Filename: raftify-0.0.5.dist-info/top_level.txt
 Comment: 
 
-Filename: raftify-0.0.4.dist-info/RECORD
+Filename: raftify-0.0.5.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## raftify/VERSION

```diff
@@ -1 +1 @@
-0.0.4
+0.0.5
```

## raftify/__init__.py

```diff
@@ -1,19 +1,19 @@
 from pathlib import Path
 
-from .fsm import FSM  # noqa: F401
 from .error import ClusterJoinError, UnknownError  # noqa: F401
+from .fsm import FSM  # noqa: F401
 from .lmdb import LMDBStorage, LMDBStorageCore  # noqa: F401
 from .mailbox import Mailbox  # noqa: F401
 from .message_sender import MessageSender  # noqa: F401
 from .raft_client import RaftClient  # noqa: F401
-from .raft_facade import RaftCluster, FollowerRole  # noqa: F401
+from .raft_facade import FollowerRole, RaftCluster  # noqa: F401
 from .raft_node import RaftNode  # noqa: F401
 from .raft_server import RaftServer  # noqa: F401
-from .utils import SocketAddr, PickleSerializer  # noqa: F401
+from .utils import PickleSerializer, SocketAddr  # noqa: F401
 
 __all__ = [
     "lmdb",
     "error",
     "mailbox",
     "message_sender",
     "message",
```

## raftify/mailbox.py

```diff
@@ -26,31 +26,31 @@
         self.sender = sender
         self.raft_node = raft_node
 
     async def __handle_response(
         self,
         response: RaftResponse,
         *,
+        reroute_msg_type: raft_service_pb2.RerouteMsgType,
         proposed_data: Optional[bytes] = None,
         confchange: Optional[raft_service_pb2.ConfChange] = None,
-        reroute_msg_type: raft_service_pb2.RerouteMsgType,
     ) -> Optional[bytes]:
         if isinstance(response, RaftRespOk):
             return None
         if isinstance(response, RaftRespResponse):
             return response.data
         elif isinstance(response, RaftRespWrongLeader):
             leader_id = self.raft_node.get_leader_id()
             resp_from_leader = await self.raft_node.peers[leader_id].reroute_message(
                 reroute_msg_type=reroute_msg_type,
                 confchange=confchange,
                 msg_bytes=proposed_data,
             )
-            if isinstance(resp_from_leader, raft_service_pb2.RaftResponse):
-                return resp_from_leader.inner
+            if isinstance(resp_from_leader, raft_service_pb2.RaftMessageResponse):
+                return resp_from_leader.data
             else:
                 # TODO: handle this case. The leader might change in the meanwhile.
                 assert False
 
         raise UnknownError(f"Unknown response type: {resp_from_leader}")
 
     async def send(self, message: bytes) -> bytes:
```

## raftify/raft_client.py

```diff
@@ -22,46 +22,46 @@
     def __create_channel(self) -> grpc.aio.Channel:
         if credentials := self.credentials:
             return grpc.aio.secure_channel(str(self.addr), credentials)
         return grpc.aio.insecure_channel(str(self.addr))
 
     async def change_config(
         self, cc: ConfChange, timeout: float = 5.0
-    ) -> raft_service_pb2.RaftResponse:
+    ) -> raft_service_pb2.ChangeConfigResponse:
         request = ConfChangeAdapter.to_pb(cc)
 
         async with self.__create_channel() as channel:
             stub = raft_service_pb2_grpc.RaftServiceStub(channel)
             return await asyncio.wait_for(stub.ChangeConfig(request), timeout)
 
     async def send_message(
         self, msg: Message, timeout: float = 5.0
-    ) -> raft_service_pb2.RaftResponse:
+    ) -> raft_service_pb2.RaftMessageResponse:
         request = MessageAdapter.to_pb(msg)
 
         async with self.__create_channel() as channel:
             stub = raft_service_pb2_grpc.RaftServiceStub(channel)
             return await asyncio.wait_for(stub.SendMessage(request), timeout)
 
     async def request_id(
         self, addr: SocketAddr, timeout: float = 5.0
     ) -> raft_service_pb2.IdRequestResponse:
-        request = raft_service_pb2.RequestIdArgs(addr=str(addr))
+        request = raft_service_pb2.IdRequestArgs(addr=str(addr))
 
         async with self.__create_channel() as channel:
             stub = raft_service_pb2_grpc.RaftServiceStub(channel)
             return await asyncio.wait_for(stub.RequestId(request), timeout)
 
     async def reroute_message(
         self,
         reroute_msg_type: raft_service_pb2.RerouteMsgType,
         msg_bytes: Optional[bytes] = None,
         confchange: Optional[raft_service_pb2.ConfChange] = None,
         timeout: float = 5.0,
-    ) -> raft_service_pb2.RaftResponse:
+    ) -> raft_service_pb2.RaftMessageResponse:
         request = raft_service_pb2.RerouteMessageArgs(
             proposed_data=msg_bytes or b"",
             conf_change=confchange,
             type=reroute_msg_type,
         )
 
         async with self.__create_channel() as channel:
```

## raftify/raft_facade.py

```diff
@@ -81,33 +81,33 @@
                 client = RaftClient(peer_addr)
                 try:
                     resp = await client.request_id(raft_addr)
                 except grpc.aio.AioRpcError:
                     seek_next = True
                     break
 
-                match resp.code:
-                    case raft_service_pb2.Ok:
+                match resp.result:
+                    case raft_service_pb2.IdRequest_Success:
                         leader_addr = peer_addr
                         leader_id, node_id, peer_addrs = pickle.loads(resp.data)
                         break
-                    case raft_service_pb2.WrongLeader:
+                    case raft_service_pb2.IdRequest_WrongLeader:
                         _, peer_addr, _ = pickle.loads(resp.data)
                         logging.info(
                             f"Sent message to the wrong leader, retrying with the leader at {peer_addr}"
                         )
                         continue
-                    case raft_service_pb2.Error | _:
+                    case raft_service_pb2.IdRequest_Error | _:
                         raise UnknownError("Failed to join the cluster!")
 
             if not seek_next:
                 break
         else:
             raise ClusterJoinError(
-                "Could not join the cluster. Check your raft configuration and check to make sure that any of them is alive."
+                "Could not join the cluster. Check your Raft configuration and check to make sure that any of them is alive."
             )
 
         assert leader_id is not None and node_id is not None
 
         logging.info(
             f"Cluster join succeeded. Obtained node id {node_id} from the leader node {leader_id}."
         )
@@ -128,9 +128,19 @@
         # 3. Join the cluster
         conf_change = ConfChange.default()
         conf_change.set_node_id(node_id)
         conf_change.set_change_type(role.to_changetype())
         conf_change.set_context(pickle.dumps(self.addr))
 
         # TODO: Should handle wrong leader error here because the leader might change in the meanwhile.
-        await client.change_config(conf_change)
+        # But it might be already handled by the rerouting logic. So, it should be tested first.
+        while True:
+            resp = await client.change_config(conf_change)
+
+            if resp.result == raft_service_pb2.ChangeConfig_Success:
+                break
+            elif resp.result == raft_service_pb2.ChangeConfig_TimeoutError:
+                logging.info("Join request timeout. Retrying...")
+                await asyncio.sleep(0.25)
+                continue
+
         await raft_node_handle
```

## raftify/raft_server.py

```diff
@@ -1,10 +1,10 @@
 import logging
 from asyncio import Queue
-from typing import Coroutine, List, Optional
+from typing import Optional
 
 import grpc
 
 from raftify.protos import raft_service_pb2_grpc
 from raftify.raft_service import RaftService
 from raftify.utils import SocketAddr
 
@@ -12,20 +12,18 @@
 class RaftServer:
     def __init__(
         self,
         addr: SocketAddr,
         sender: Queue,
         *,
         credentials: Optional[grpc.ServerCredentials] = None,
-        cleanup_coroutines: Optional[List[Coroutine]] = None,
     ):
         self.addr = addr
         self.sender = sender
         self.credentials = credentials
-        self.cleanup_coroutines = cleanup_coroutines
 
     async def run(self) -> None:
         grpc_server = grpc.aio.server()
 
         if self.credentials:
             grpc_server.add_secure_port(str(self.addr), self.credentials)
         else:
@@ -36,14 +34,8 @@
         raft_service_pb2_grpc.add_RaftServiceServicer_to_server(
             RaftService(self.sender), grpc_server
         )
 
         await grpc_server.start()
         await grpc_server.wait_for_termination()
 
-        async def server_graceful_shutdown():
-            await grpc_server.stop(5)
-
-        if self.cleanup_coroutines is not None:
-            self.cleanup_coroutines.insert(0, server_graceful_shutdown())
-
         logging.warning("gRPC server has been terminated.")
```

## raftify/raft_service.py

```diff
@@ -23,91 +23,98 @@
 
 
 class RaftService:
     def __init__(self, sender: Queue) -> None:
         self.sender = sender
 
     async def RequestId(
-        self, request: raft_service_pb2.RequestIdArgs, context: grpc.aio.ServicerContext
+        self, request: raft_service_pb2.IdRequestArgs, context: grpc.aio.ServicerContext
     ) -> raft_service_pb2.IdRequestResponse:
         receiver = Queue()
         try:
             await self.sender.put(MessageRequestId(request.addr, receiver))
         except Exception:
             pass
 
         response = await receiver.get()
 
         if isinstance(response, RaftRespWrongLeader):
             leader_id, leader_addr = response.leader_id, response.leader_addr
 
             return raft_service_pb2.IdRequestResponse(
-                code=raft_service_pb2.WrongLeader,
+                result=raft_service_pb2.IdRequest_WrongLeader,
                 data=pickle.dumps(tuple([leader_id, leader_addr, None])),
             )
         elif isinstance(response, RaftRespIdReserved):
             reserved_id = response.reserved_id
             peer_addrs = response.peer_addrs
             leader_id = response.leader_id
 
             return raft_service_pb2.IdRequestResponse(
-                code=raft_service_pb2.Ok,
+                result=raft_service_pb2.IdRequest_Success,
                 data=pickle.dumps(tuple([leader_id, reserved_id, peer_addrs])),
             )
         else:
             assert False, "Unreachable"
 
     async def ChangeConfig(
         self, request: eraftpb_pb2.ConfChange, context: grpc.aio.ServicerContext
-    ) -> raft_service_pb2.RaftResponse:
+    ) -> raft_service_pb2.ChangeConfigResponse:
         receiver = Queue()
         await self.sender.put(MessageConfigChange(request, receiver))
-        reply = raft_service_pb2.RaftResponse()
+        reply = raft_service_pb2.ChangeConfigResponse()
 
         try:
             if raft_response := await asyncio.wait_for(receiver.get(), 2):
-                if isinstance(raft_response, RaftRespOk) or isinstance(
-                    raft_response, RaftRespJoinSuccess
-                ):
-                    reply.inner = raft_response.encode()
+                if isinstance(raft_response, RaftRespOk):
+                    reply.data = b""
+                if isinstance(raft_response, RaftRespJoinSuccess):
+                    reply.data = raft_response.encode()
+                elif isinstance(raft_response, RaftRespWrongLeader):
+                    leader_id, leader_addr = (
+                        raft_response.leader_id,
+                        raft_response.leader_addr,
+                    )
+                    reply.data = (pickle.dumps(tuple([leader_id, leader_addr, None])),)
 
         except asyncio.TimeoutError:
-            reply.inner = RaftRespError().encode()
+            reply.result = raft_service_pb2.ChangeConfig_TimeoutError
+            reply.data = RaftRespError().encode()
             logging.error("Timeout waiting for reply")
 
         finally:
             return reply
 
     async def SendMessage(
         self, request: eraftpb_pb2.Message, context: grpc.aio.ServicerContext
-    ) -> raft_service_pb2.RaftResponse:
+    ) -> raft_service_pb2.RaftMessageResponse:
         await self.sender.put(MessageRaft(request))
-        return raft_service_pb2.RaftResponse(inner=RaftRespOk().encode())
+        return raft_service_pb2.RaftMessageResponse(data=RaftRespOk().encode())
 
     async def RerouteMessage(
         self,
         request: raft_service_pb2.RerouteMessageArgs,
         context: grpc.aio.ServicerContext,
-    ) -> raft_service_pb2.RaftResponse:
+    ) -> raft_service_pb2.RaftMessageResponse:
         receiver = Queue()
 
         await self.sender.put(
             MessageRerouteToLeader(
                 confchange=request.conf_change,
                 proposed_data=request.proposed_data,
                 type=request.type,
                 chan=receiver,
             )
         )
-        reply = raft_service_pb2.RaftResponse()
+        reply = raft_service_pb2.RaftMessageResponse()
 
         try:
             if raft_response := await asyncio.wait_for(receiver.get(), 2):
                 if isinstance(raft_response, RaftRespResponse):
-                    reply.inner = raft_response.data
+                    reply.data = raft_response.data
 
         except asyncio.TimeoutError:
-            reply.inner = RaftRespError().encode()
+            reply.data = RaftRespError().encode()
             logging.error("Timeout waiting for reply")
 
         finally:
             return reply
```

## raftify/utils.py

```diff
@@ -1,25 +1,26 @@
 import pickle
 import threading
+from dataclasses import dataclass
 from typing import Union
 
 
 class PickleSerializer:
     def encode(self):
         return pickle.dumps(self)
 
     @classmethod
     def decode(cls, data: bytes):
         return cls(*pickle.loads(data))
 
 
+@dataclass
 class SocketAddr:
-    def __init__(self, host: str, port: str):
-        self.host = host
-        self.port = port
+    host: str
+    port: int
 
     def __repr__(self) -> str:
         return f"{self.host}:{self.port}"
 
     @staticmethod
     def from_str(s: str):
         return SocketAddr(*s.split(":"))
```

## raftify/protos/raft_service_pb2.py

```diff
@@ -12,33 +12,37 @@
 
 _sym_db = _symbol_database.Default()
 
 
 from . import eraftpb_pb2 as eraftpb__pb2
 
 DESCRIPTOR = _descriptor_pool.Default().AddSerializedFile(
-    b'\n\x12raft_service.proto\x12\x0braftservice\x1a\reraftpb.proto"\x19\n\x08Proposal\x12\r\n\x05inner\x18\x01 \x01(\x0c"#\n\x05\x45ntry\x12\x0b\n\x03key\x18\x01 \x01(\x04\x12\r\n\x05value\x18\x02 \x01(\t"\x1d\n\x0cRaftResponse\x12\r\n\x05inner\x18\x02 \x01(\x0c"H\n\x11IdRequestResponse\x12%\n\x04\x63ode\x18\x01 \x01(\x0e\x32\x17.raftservice.ResultCode\x12\x0c\n\x04\x64\x61ta\x18\x02 \x01(\x0c"\x1d\n\rRequestIdArgs\x12\x0c\n\x04\x61\x64\x64r\x18\x01 \x01(\t"\x80\x01\n\x12RerouteMessageArgs\x12\x15\n\rproposed_data\x18\x01 \x01(\x0c\x12(\n\x0b\x63onf_change\x18\x02 \x01(\x0b\x32\x13.eraftpb.ConfChange\x12)\n\x04type\x18\x03 \x01(\x0e\x32\x1b.raftservice.RerouteMsgType*0\n\nResultCode\x12\x06\n\x02Ok\x10\x00\x12\t\n\x05\x45rror\x10\x01\x12\x0f\n\x0bWrongLeader\x10\x02*-\n\x0eRerouteMsgType\x12\x0e\n\nConfChange\x10\x00\x12\x0b\n\x07Propose\x10\x01\x32\xa8\x02\n\x0bRaftService\x12I\n\tRequestId\x12\x1a.raftservice.RequestIdArgs\x1a\x1e.raftservice.IdRequestResponse"\x00\x12@\n\x0c\x43hangeConfig\x12\x13.eraftpb.ConfChange\x1a\x19.raftservice.RaftResponse"\x00\x12<\n\x0bSendMessage\x12\x10.eraftpb.Message\x1a\x19.raftservice.RaftResponse"\x00\x12N\n\x0eRerouteMessage\x12\x1f.raftservice.RerouteMessageArgs\x1a\x19.raftservice.RaftResponse"\x00\x62\x06proto3'
+    b'\n\x12raft_service.proto\x12\x0braftservice\x1a\reraftpb.proto"\x19\n\x08Proposal\x12\r\n\x05inner\x18\x01 \x01(\x0c"#\n\x05\x45ntry\x12\x0b\n\x03key\x18\x01 \x01(\x04\x12\r\n\x05value\x18\x02 \x01(\t"#\n\x13RaftMessageResponse\x12\x0c\n\x04\x64\x61ta\x18\x01 \x01(\x0c"U\n\x14\x43hangeConfigResponse\x12/\n\x06result\x18\x01 \x01(\x0e\x32\x1f.raftservice.ChangeConfigResult\x12\x0c\n\x04\x64\x61ta\x18\x02 \x01(\x0c"O\n\x11IdRequestResponse\x12,\n\x06result\x18\x01 \x01(\x0e\x32\x1c.raftservice.IdRequestResult\x12\x0c\n\x04\x64\x61ta\x18\x02 \x01(\x0c"\x1d\n\rIdRequestArgs\x12\x0c\n\x04\x61\x64\x64r\x18\x01 \x01(\t"\x80\x01\n\x12RerouteMessageArgs\x12\x15\n\rproposed_data\x18\x01 \x01(\x0c\x12(\n\x0b\x63onf_change\x18\x02 \x01(\x0b\x32\x13.eraftpb.ConfChange\x12)\n\x04type\x18\x03 \x01(\x0e\x32\x1b.raftservice.RerouteMsgType*k\n\x12\x43hangeConfigResult\x12\x18\n\x14\x43hangeConfig_Success\x10\x00\x12\x1d\n\x19\x43hangeConfig_TimeoutError\x10\x01\x12\x1c\n\x18\x43hangeConfig_WrongLeader\x10\x02*X\n\x0fIdRequestResult\x12\x15\n\x11IdRequest_Success\x10\x00\x12\x13\n\x0fIdRequest_Error\x10\x01\x12\x19\n\x15IdRequest_WrongLeader\x10\x02*-\n\x0eRerouteMsgType\x12\x0e\n\nConfChange\x10\x00\x12\x0b\n\x07Propose\x10\x01\x32\xbe\x02\n\x0bRaftService\x12I\n\tRequestId\x12\x1a.raftservice.IdRequestArgs\x1a\x1e.raftservice.IdRequestResponse"\x00\x12H\n\x0c\x43hangeConfig\x12\x13.eraftpb.ConfChange\x1a!.raftservice.ChangeConfigResponse"\x00\x12\x43\n\x0bSendMessage\x12\x10.eraftpb.Message\x1a .raftservice.RaftMessageResponse"\x00\x12U\n\x0eRerouteMessage\x12\x1f.raftservice.RerouteMessageArgs\x1a .raftservice.RaftMessageResponse"\x00\x62\x06proto3'
 )
 
 _builder.BuildMessageAndEnumDescriptors(DESCRIPTOR, globals())
 _builder.BuildTopDescriptorsAndMessages(DESCRIPTOR, "raft_service_pb2", globals())
 if _descriptor._USE_C_DESCRIPTORS == False:
     DESCRIPTOR._options = None
-    _RESULTCODE._serialized_start = 381
-    _RESULTCODE._serialized_end = 429
-    _REROUTEMSGTYPE._serialized_start = 431
-    _REROUTEMSGTYPE._serialized_end = 476
+    _CHANGECONFIGRESULT._serialized_start = 481
+    _CHANGECONFIGRESULT._serialized_end = 588
+    _IDREQUESTRESULT._serialized_start = 590
+    _IDREQUESTRESULT._serialized_end = 678
+    _REROUTEMSGTYPE._serialized_start = 680
+    _REROUTEMSGTYPE._serialized_end = 725
     _PROPOSAL._serialized_start = 50
     _PROPOSAL._serialized_end = 75
     _ENTRY._serialized_start = 77
     _ENTRY._serialized_end = 112
-    _RAFTRESPONSE._serialized_start = 114
-    _RAFTRESPONSE._serialized_end = 143
-    _IDREQUESTRESPONSE._serialized_start = 145
-    _IDREQUESTRESPONSE._serialized_end = 217
-    _REQUESTIDARGS._serialized_start = 219
-    _REQUESTIDARGS._serialized_end = 248
-    _REROUTEMESSAGEARGS._serialized_start = 251
-    _REROUTEMESSAGEARGS._serialized_end = 379
-    _RAFTSERVICE._serialized_start = 479
-    _RAFTSERVICE._serialized_end = 775
+    _RAFTMESSAGERESPONSE._serialized_start = 114
+    _RAFTMESSAGERESPONSE._serialized_end = 149
+    _CHANGECONFIGRESPONSE._serialized_start = 151
+    _CHANGECONFIGRESPONSE._serialized_end = 236
+    _IDREQUESTRESPONSE._serialized_start = 238
+    _IDREQUESTRESPONSE._serialized_end = 317
+    _IDREQUESTARGS._serialized_start = 319
+    _IDREQUESTARGS._serialized_end = 348
+    _REROUTEMESSAGEARGS._serialized_start = 351
+    _REROUTEMESSAGEARGS._serialized_end = 479
+    _RAFTSERVICE._serialized_start = 728
+    _RAFTSERVICE._serialized_end = 1046
 # @@protoc_insertion_point(module_scope)
```

## raftify/protos/raft_service_pb2_grpc.py

```diff
@@ -14,31 +14,31 @@
         """Constructor.
 
         Args:
             channel: A grpc.Channel.
         """
         self.RequestId = channel.unary_unary(
             "/raftservice.RaftService/RequestId",
-            request_serializer=raft__service__pb2.RequestIdArgs.SerializeToString,
+            request_serializer=raft__service__pb2.IdRequestArgs.SerializeToString,
             response_deserializer=raft__service__pb2.IdRequestResponse.FromString,
         )
         self.ChangeConfig = channel.unary_unary(
             "/raftservice.RaftService/ChangeConfig",
             request_serializer=eraftpb__pb2.ConfChange.SerializeToString,
-            response_deserializer=raft__service__pb2.RaftResponse.FromString,
+            response_deserializer=raft__service__pb2.ChangeConfigResponse.FromString,
         )
         self.SendMessage = channel.unary_unary(
             "/raftservice.RaftService/SendMessage",
             request_serializer=eraftpb__pb2.Message.SerializeToString,
-            response_deserializer=raft__service__pb2.RaftResponse.FromString,
+            response_deserializer=raft__service__pb2.RaftMessageResponse.FromString,
         )
         self.RerouteMessage = channel.unary_unary(
             "/raftservice.RaftService/RerouteMessage",
             request_serializer=raft__service__pb2.RerouteMessageArgs.SerializeToString,
-            response_deserializer=raft__service__pb2.RaftResponse.FromString,
+            response_deserializer=raft__service__pb2.RaftMessageResponse.FromString,
         )
 
 
 class RaftServiceServicer(object):
     """Missing associated documentation comment in .proto file."""
 
     def RequestId(self, request, context):
@@ -66,31 +66,31 @@
         raise NotImplementedError("Method not implemented!")
 
 
 def add_RaftServiceServicer_to_server(servicer, server):
     rpc_method_handlers = {
         "RequestId": grpc.unary_unary_rpc_method_handler(
             servicer.RequestId,
-            request_deserializer=raft__service__pb2.RequestIdArgs.FromString,
+            request_deserializer=raft__service__pb2.IdRequestArgs.FromString,
             response_serializer=raft__service__pb2.IdRequestResponse.SerializeToString,
         ),
         "ChangeConfig": grpc.unary_unary_rpc_method_handler(
             servicer.ChangeConfig,
             request_deserializer=eraftpb__pb2.ConfChange.FromString,
-            response_serializer=raft__service__pb2.RaftResponse.SerializeToString,
+            response_serializer=raft__service__pb2.ChangeConfigResponse.SerializeToString,
         ),
         "SendMessage": grpc.unary_unary_rpc_method_handler(
             servicer.SendMessage,
             request_deserializer=eraftpb__pb2.Message.FromString,
-            response_serializer=raft__service__pb2.RaftResponse.SerializeToString,
+            response_serializer=raft__service__pb2.RaftMessageResponse.SerializeToString,
         ),
         "RerouteMessage": grpc.unary_unary_rpc_method_handler(
             servicer.RerouteMessage,
             request_deserializer=raft__service__pb2.RerouteMessageArgs.FromString,
-            response_serializer=raft__service__pb2.RaftResponse.SerializeToString,
+            response_serializer=raft__service__pb2.RaftMessageResponse.SerializeToString,
         ),
     }
     generic_handler = grpc.method_handlers_generic_handler(
         "raftservice.RaftService", rpc_method_handlers
     )
     server.add_generic_rpc_handlers((generic_handler,))
 
@@ -112,15 +112,15 @@
         timeout=None,
         metadata=None,
     ):
         return grpc.experimental.unary_unary(
             request,
             target,
             "/raftservice.RaftService/RequestId",
-            raft__service__pb2.RequestIdArgs.SerializeToString,
+            raft__service__pb2.IdRequestArgs.SerializeToString,
             raft__service__pb2.IdRequestResponse.FromString,
             options,
             channel_credentials,
             insecure,
             call_credentials,
             compression,
             wait_for_ready,
@@ -142,15 +142,15 @@
         metadata=None,
     ):
         return grpc.experimental.unary_unary(
             request,
             target,
             "/raftservice.RaftService/ChangeConfig",
             eraftpb__pb2.ConfChange.SerializeToString,
-            raft__service__pb2.RaftResponse.FromString,
+            raft__service__pb2.ChangeConfigResponse.FromString,
             options,
             channel_credentials,
             insecure,
             call_credentials,
             compression,
             wait_for_ready,
             timeout,
@@ -171,15 +171,15 @@
         metadata=None,
     ):
         return grpc.experimental.unary_unary(
             request,
             target,
             "/raftservice.RaftService/SendMessage",
             eraftpb__pb2.Message.SerializeToString,
-            raft__service__pb2.RaftResponse.FromString,
+            raft__service__pb2.RaftMessageResponse.FromString,
             options,
             channel_credentials,
             insecure,
             call_credentials,
             compression,
             wait_for_ready,
             timeout,
@@ -200,15 +200,15 @@
         metadata=None,
     ):
         return grpc.experimental.unary_unary(
             request,
             target,
             "/raftservice.RaftService/RerouteMessage",
             raft__service__pb2.RerouteMessageArgs.SerializeToString,
-            raft__service__pb2.RaftResponse.FromString,
+            raft__service__pb2.RaftMessageResponse.FromString,
             options,
             channel_credentials,
             insecure,
             call_credentials,
             compression,
             wait_for_ready,
             timeout,
```

## Comparing `raftify-0.0.4.dist-info/LICENSE` & `raftify-0.0.5.dist-info/LICENSE`

 * *Files identical despite different names*

## Comparing `raftify-0.0.4.dist-info/METADATA` & `raftify-0.0.5.dist-info/METADATA`

 * *Files 0% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: raftify
-Version: 0.0.4
+Version: 0.0.5
 Home-page: https://github.com/lablup/raftify
 Author: Lablup Inc.
 Maintainer: jopemachine
 Maintainer-email: gbl@lablup.com
 License: Apache License 2.0
 Requires-Python: >=3.10
 Description-Content-Type: text/markdown
```

## Comparing `raftify-0.0.4.dist-info/RECORD` & `raftify-0.0.5.dist-info/RECORD`

 * *Files 10% similar despite different names*

```diff
@@ -1,25 +1,25 @@
-raftify/VERSION,sha256=zB0CuD59wiXTB4TyqnZ2-bf39oY5trlB9bcyQlkC92M,6
-raftify/__init__.py,sha256=yNkV274kN7Y2HxZQXxGBdbzsTwILWHMz8Qy7tiVAO54,819
+raftify/VERSION,sha256=robnkGeKzH_BTxjlWcL4xJcmNNWxt0oqKXVluMkPgEo,6
+raftify/__init__.py,sha256=AmZaMAIzPo2ZlbCC_V_SDvQ54l4KaEs5Y2ndqmUXku8,819
 raftify/error.py,sha256=phpDb13pDFlOGcbafx5lIPlRoSeHhXYYL9a2ozaNw7k,86
 raftify/fsm.py,sha256=Frq-qi5sYcmXEx-WS37XO-so7dbktD6gU_xMeQdFPo4,368
 raftify/lmdb.py,sha256=cL7imRjRHYevEG8_fv5WdVvySA2s2ob4RTq8lij2dOk,10934
-raftify/mailbox.py,sha256=9oEl0cSRf4KZHmqQ39rAulUbDUqZmKl6rajhfdbPAEo,2828
+raftify/mailbox.py,sha256=BXcTd_65_AYW7LqhpLxNK8H3TTE1JgpyPXbdzadJJtI,2834
 raftify/message_sender.py,sha256=NYxJv9hkk4cywKaLnXx-WcMk2MSr78C3Ff2zH_9lAGk,1408
 raftify/pb_adapter.py,sha256=XrhEFIu_Wal0RpIFnQpuA4iWTLXbduSXVpTlg0lCWsM,7907
-raftify/raft_client.py,sha256=v7VsNsLge4mPs1Yrw3klhlK_weW3A13G_mmUXEBWZ-Y,2551
-raftify/raft_facade.py,sha256=UxWxwEHGLkrtixgSzYY-NdV9RUasR1mozsqbPkvzuAA,4693
+raftify/raft_client.py,sha256=5pG1uiK0BWAIvOfYP3dxjH6XShnm9ri6_0lAqBXvsdE,2573
+raftify/raft_facade.py,sha256=rGb6pH1pYO8mpVPW9DkN31OU336dp7YI3_5YMfeL9GY,5160
 raftify/raft_node.py,sha256=95lOD4zsHXTGS6YyPpfsPvbA7vTlnqvCuWgLqkaVFIU,14379
-raftify/raft_server.py,sha256=0HC2uI7zFU1PFjhrQ1_lu9tpAEf0i1LyAJk5F9LqSa0,1425
-raftify/raft_service.py,sha256=qqAUknA1a-96LNvysEc-dwL38fUKDhz-uDIa7EbuS9c,3621
+raftify/raft_server.py,sha256=1MU7AyrtmXldX3TvKsEMkDNJ6FKum0POfT2b6k6S1KE,1085
+raftify/raft_service.py,sha256=EZZzI-nWPrspe2Mwk6DRtNUt_yjaSXjiFYsCrkxCgxc,4101
 raftify/request_message.py,sha256=N0BvOhoUY42NNXkbPL756GxdV-0couVibTBKB6u7Uk0,985
 raftify/response_message.py,sha256=yXhYIlsEdX7ctu3b-ULjjgDpPSb9zORPaP8P_pGLSMU,753
-raftify/utils.py,sha256=QBF8srLCLMJCe-vpLSWqY_e8cDb5AtLiQZb_CcYJs38,1503
+raftify/utils.py,sha256=OpI9rhcznLvHLPltxzMDN8mnkFEuxG8Zc-GLVyAJfgU,1480
 raftify/protos/eraftpb_pb2.py,sha256=hMZpRF6ZdPRgCtiDeQjM13nFkeQH33oFuk_lQ7pYtQY,5208
 raftify/protos/eraftpb_pb2_grpc.py,sha256=D9D_GNbjWDVKDVCox27Wikgacjp7CYgT8pdeAjuug9Y,173
-raftify/protos/raft_service_pb2.py,sha256=I0dzlC82NYpA8DPLX4H5Z6Vyz2T9HWNshycaoBMWPHs,2859
-raftify/protos/raft_service_pb2_grpc.py,sha256=kjdu8QGZu4pOd5Ju-oOpqkt-rD_3667CfT3KU4QjHns,7331
-raftify-0.0.4.dist-info/LICENSE,sha256=PUjIIdfw8YHSoqpovKE5A2TDoWV3l593vG_vCBlEED0,10349
-raftify-0.0.4.dist-info/METADATA,sha256=9XBPsSrbwZMJDRVlroLMFzprDJ6jmBAGww4N15XGcF4,6098
-raftify-0.0.4.dist-info/WHEEL,sha256=5sUXSg9e4bi7lTLOHcm6QEYwO5TIF1TNbTSVFVjcJcc,92
-raftify-0.0.4.dist-info/top_level.txt,sha256=LQc7dejSGExc0jttlvaa0RJl9XQ7Ye3_-Ik_oWPcqCE,8
-raftify-0.0.4.dist-info/RECORD,,
+raftify/protos/raft_service_pb2.py,sha256=ubgWvJP8tOlEcMU1RhJZgfdpaKWeBrDszzEHeUVcODA,3468
+raftify/protos/raft_service_pb2_grpc.py,sha256=JyJpCltIKmk3UXUvvno732TK14rvV1HkZopHQAOfEaI,7397
+raftify-0.0.5.dist-info/LICENSE,sha256=PUjIIdfw8YHSoqpovKE5A2TDoWV3l593vG_vCBlEED0,10349
+raftify-0.0.5.dist-info/METADATA,sha256=WfyNyt8rb2ZDYyittPJx7hdc4l9I-ADQy63Jav-qcsg,6098
+raftify-0.0.5.dist-info/WHEEL,sha256=5sUXSg9e4bi7lTLOHcm6QEYwO5TIF1TNbTSVFVjcJcc,92
+raftify-0.0.5.dist-info/top_level.txt,sha256=LQc7dejSGExc0jttlvaa0RJl9XQ7Ye3_-Ik_oWPcqCE,8
+raftify-0.0.5.dist-info/RECORD,,
```

