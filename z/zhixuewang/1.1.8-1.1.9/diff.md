# Comparing `tmp/zhixuewang-1.1.8-py3-none-any.whl.zip` & `tmp/zhixuewang-1.1.9-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,34 +1,22 @@
-Zip file size: 29350 bytes, number of entries: 32
--rw-rw-rw-  2.0 fat      584 b- defN 23-Jul-06 13:58 zhixuewang/__init__.py
--rw-rw-rw-  2.0 fat     4955 b- defN 22-Apr-29 09:52 zhixuewang/account.py
--rw-rw-rw-  2.0 fat     3212 b- defN 22-May-01 14:27 zhixuewang/deleted.py
--rw-rw-rw-  2.0 fat      945 b- defN 23-Jul-06 12:52 zhixuewang/exceptions.py
--rw-rw-rw-  2.0 fat     8333 b- defN 23-Jul-06 13:49 zhixuewang/models.py
--rw-rw-rw-  2.0 fat     4508 b- defN 23-Jul-06 13:50 zhixuewang/session.py
--rw-rw-rw-  2.0 fat     2172 b- defN 22-May-01 14:27 zhixuewang/test_student.py
--rw-rw-rw-  2.0 fat      375 b- defN 22-Apr-28 08:16 zhixuewang/urls.py
--rw-rw-rw-  2.0 fat     8074 b- defN 22-Apr-28 05:41 zhixuewang/zxw.py
--rw-rw-rw-  2.0 fat      630 b- defN 21-Jul-28 09:46 zhixuewang/__pycache__/__init__.cpython-37.pyc
+Zip file size: 21486 bytes, number of entries: 20
+-rw-rw-rw-  2.0 fat      593 b- defN 23-Jul-26 04:23 zhixuewang/__init__.py
+-rw-rw-rw-  2.0 fat     4955 b- defN 23-Jul-26 03:18 zhixuewang/account.py
+-rw-rw-rw-  2.0 fat      941 b- defN 23-Jul-26 03:18 zhixuewang/exceptions.py
+-rw-rw-rw-  2.0 fat     8750 b- defN 23-Jul-26 03:51 zhixuewang/models.py
+-rw-rw-rw-  2.0 fat     4506 b- defN 23-Jul-26 03:18 zhixuewang/session.py
+-rw-rw-rw-  2.0 fat      377 b- defN 23-Jul-26 03:18 zhixuewang/urls.py
 -rw-rw-rw-  2.0 fat       87 b- defN 23-Jul-06 13:22 zhixuewang/student/__init__.py
--rw-rw-rw-  2.0 fat     2165 b- defN 21-Jun-13 07:13 zhixuewang/student/models.py
--rw-rw-rw-  2.0 fat    23129 b- defN 23-Jul-06 13:52 zhixuewang/student/student.py
--rw-rw-rw-  2.0 fat     1984 b- defN 23-Jul-06 13:22 zhixuewang/student/urls.py
--rw-rw-rw-  2.0 fat       94 b- defN 21-Jun-13 07:14 zhixuewang/teacher/__init__.py
--rw-rw-rw-  2.0 fat      831 b- defN 23-Jul-06 13:27 zhixuewang/teacher/models.py
--rw-rw-rw-  2.0 fat     5888 b- defN 23-Jul-06 13:53 zhixuewang/teacher/teacher.py
--rw-rw-rw-  2.0 fat     5142 b- defN 22-May-04 14:37 zhixuewang/teacher/tools.py
--rw-rw-rw-  2.0 fat     1045 b- defN 22-Apr-28 05:57 zhixuewang/teacher/urls.py
--rw-rw-rw-  2.0 fat       94 b- defN 23-Jul-06 13:49 zhixuewang/tools/__init__.py
--rw-rw-rw-  2.0 fat      737 b- defN 22-Apr-29 01:04 zhixuewang/tools/account.py
--rw-rw-rw-  2.0 fat      248 b- defN 22-Apr-29 09:52 zhixuewang/tools/cookies.py
+-rw-rw-rw-  2.0 fat    23567 b- defN 23-Jul-26 03:18 zhixuewang/student/student.py
+-rw-rw-rw-  2.0 fat     1982 b- defN 23-Jul-26 03:18 zhixuewang/student/urls.py
+-rw-rw-rw-  2.0 fat       98 b- defN 23-Jul-26 03:18 zhixuewang/teacher/__init__.py
+-rw-rw-rw-  2.0 fat     1150 b- defN 23-Jul-26 03:46 zhixuewang/teacher/models.py
+-rw-rw-rw-  2.0 fat    13229 b- defN 23-Jul-26 03:55 zhixuewang/teacher/teacher.py
+-rw-rw-rw-  2.0 fat     1285 b- defN 23-Jul-26 03:21 zhixuewang/teacher/urls.py
+-rw-rw-rw-  2.0 fat       96 b- defN 23-Jul-26 03:18 zhixuewang/tools/__init__.py
 -rw-rw-rw-  2.0 fat      433 b- defN 20-Aug-05 14:04 zhixuewang/tools/datetime_tool.py
--rw-rw-rw-  2.0 fat     2392 b- defN 22-Aug-22 10:53 zhixuewang/tools/excel_helper.py
--rw-rw-rw-  2.0 fat     1475 b- defN 22-May-03 07:18 zhixuewang/tools/password_helper.py
--rw-rw-rw-  2.0 fat      306 b- defN 22-May-04 14:47 zhixuewang/tools/rank.py
--rw-rw-rw-  2.0 fat      236 b- defN 22-Apr-29 09:36 zhixuewang/tools/session.py
--rw-rw-rw-  2.0 fat     1085 b- defN 23-Jul-06 13:59 zhixuewang-1.1.8.dist-info/LICENSE
--rw-rw-rw-  2.0 fat      277 b- defN 23-Jul-06 13:59 zhixuewang-1.1.8.dist-info/METADATA
--rw-rw-rw-  2.0 fat       92 b- defN 23-Jul-06 13:59 zhixuewang-1.1.8.dist-info/WHEEL
--rw-rw-rw-  2.0 fat       11 b- defN 23-Jul-06 13:59 zhixuewang-1.1.8.dist-info/top_level.txt
-?rw-rw-r--  2.0 fat     2646 b- defN 23-Jul-06 13:59 zhixuewang-1.1.8.dist-info/RECORD
-32 files, 84185 bytes uncompressed, 25104 bytes compressed:  70.2%
+-rw-rw-rw-  2.0 fat     1085 b- defN 23-Jul-26 04:23 zhixuewang-1.1.9.dist-info/LICENSE
+-rw-rw-rw-  2.0 fat      302 b- defN 23-Jul-26 04:23 zhixuewang-1.1.9.dist-info/METADATA
+-rw-rw-rw-  2.0 fat       92 b- defN 23-Jul-26 04:23 zhixuewang-1.1.9.dist-info/WHEEL
+-rw-rw-rw-  2.0 fat       11 b- defN 23-Jul-26 04:23 zhixuewang-1.1.9.dist-info/top_level.txt
+?rw-rw-r--  2.0 fat     1632 b- defN 23-Jul-26 04:23 zhixuewang-1.1.9.dist-info/RECORD
+20 files, 65171 bytes uncompressed, 18826 bytes compressed:  71.1%
```

## zipnote {}

```diff
@@ -1,43 +1,28 @@
 Filename: zhixuewang/__init__.py
 Comment: 
 
 Filename: zhixuewang/account.py
 Comment: 
 
-Filename: zhixuewang/deleted.py
-Comment: 
-
 Filename: zhixuewang/exceptions.py
 Comment: 
 
 Filename: zhixuewang/models.py
 Comment: 
 
 Filename: zhixuewang/session.py
 Comment: 
 
-Filename: zhixuewang/test_student.py
-Comment: 
-
 Filename: zhixuewang/urls.py
 Comment: 
 
-Filename: zhixuewang/zxw.py
-Comment: 
-
-Filename: zhixuewang/__pycache__/__init__.cpython-37.pyc
-Comment: 
-
 Filename: zhixuewang/student/__init__.py
 Comment: 
 
-Filename: zhixuewang/student/models.py
-Comment: 
-
 Filename: zhixuewang/student/student.py
 Comment: 
 
 Filename: zhixuewang/student/urls.py
 Comment: 
 
 Filename: zhixuewang/teacher/__init__.py
@@ -45,53 +30,32 @@
 
 Filename: zhixuewang/teacher/models.py
 Comment: 
 
 Filename: zhixuewang/teacher/teacher.py
 Comment: 
 
-Filename: zhixuewang/teacher/tools.py
-Comment: 
-
 Filename: zhixuewang/teacher/urls.py
 Comment: 
 
 Filename: zhixuewang/tools/__init__.py
 Comment: 
 
-Filename: zhixuewang/tools/account.py
-Comment: 
-
-Filename: zhixuewang/tools/cookies.py
-Comment: 
-
 Filename: zhixuewang/tools/datetime_tool.py
 Comment: 
 
-Filename: zhixuewang/tools/excel_helper.py
-Comment: 
-
-Filename: zhixuewang/tools/password_helper.py
-Comment: 
-
-Filename: zhixuewang/tools/rank.py
-Comment: 
-
-Filename: zhixuewang/tools/session.py
-Comment: 
-
-Filename: zhixuewang-1.1.8.dist-info/LICENSE
+Filename: zhixuewang-1.1.9.dist-info/LICENSE
 Comment: 
 
-Filename: zhixuewang-1.1.8.dist-info/METADATA
+Filename: zhixuewang-1.1.9.dist-info/METADATA
 Comment: 
 
-Filename: zhixuewang-1.1.8.dist-info/WHEEL
+Filename: zhixuewang-1.1.9.dist-info/WHEEL
 Comment: 
 
-Filename: zhixuewang-1.1.8.dist-info/top_level.txt
+Filename: zhixuewang-1.1.9.dist-info/top_level.txt
 Comment: 
 
-Filename: zhixuewang-1.1.8.dist-info/RECORD
+Filename: zhixuewang-1.1.9.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## zhixuewang/__init__.py

```diff
@@ -1,14 +1,15 @@
 __author__ = "anwenhu"
-__date__ = "2023/7/7 7:7"
-__version__ = "1.1.8"
+__date__ = "2023/7/26 12:30"
+__version__ = "1.1.9"
 
 from zhixuewang.account import (login, login_id, rewrite_str, login_student, login_teacher,
-                            login_student_id, login_teacher_id, load_account)
+                                login_student_id, login_teacher_id, load_account)
 from zhixuewang.session import get_session, get_session_id
+
 VERSION = tuple(map(int, __version__.split('.')))
 __all__ = [
     "login",
     "login_id",
     "rewrite_str",
     "login_student",
     "login_teacher",
```

## zhixuewang/account.py

```diff
@@ -1,17 +1,16 @@
-
-
 import base64
 import pickle
 from zhixuewang.exceptions import RoleError
 from zhixuewang.models import Account, AccountData, Role
 from zhixuewang.session import check_is_student, get_session, get_session_id
 from zhixuewang.student.student import StudentAccount
 from zhixuewang.teacher.teacher import TeacherAccount
 
+
 def load_account(path: str = "user.data") -> Account:
     with open(path, "rb") as f:
         data = base64.b64decode(f.read())
         account_data: AccountData = pickle.loads(data)
         session = get_session(account_data.username, account_data.encoded_password)
         if account_data.role == Role.student:
             return StudentAccount(session).set_base_info()
@@ -97,15 +96,14 @@
         TeacherAccount
     """
     session = get_session(username, password)
     teacher = TeacherAccount(session)
     return teacher.set_base_info()
 
 
-
 def login_id(user_id: str, password: str) -> Account:
     """通过用户id和密码登录智学网
 
     Args:
         user_id (str): 用户id
         password (str): 密码(包括加密后的密码)
 
@@ -157,12 +155,13 @@
         >>> from zhixuewang.models import School
         >>> @rewrite_str(School)
         >>> def _(self: School):
         >>>     return f"<id: {self.id}, name: {self.name}>"
         >>> print(School("test id", "test school"))
         <id: test id, name: test school>
     """
+
     def str_decorator(func):
         model.__str__ = func
         return func
 
-    return str_decorator
+    return str_decorator
```

## zhixuewang/exceptions.py

```diff
@@ -34,9 +34,7 @@
     def __init__(self, value=None):
         self.value = value or "请输入正确的参数!"
 
 
 class PageConnectionError(Error):
     def __init__(self, value):
         self.value = value
-
-
```

## zhixuewang/models.py

```diff
@@ -50,16 +50,16 @@
 
 T = TypeVar("T")
 
 
 class ExtendedList(List[T]):
     """扩展列表, 方便找到列表里的元素"""
 
-    def __init__(self, l: List[T] = list()):
-        super().__init__(l or list())
+    def __init__(self, ls: List[T] = None):
+        super().__init__(list() if ls is None else ls)
 
     def foreach(self, f: Callable[[T], None]):
         for each in self:
             f(each)
 
     def find(self, f: Callable[[T], bool]) -> Union[T, None]:
         """返回列表里满足函数f的第一个元素"""
@@ -78,21 +78,21 @@
         """返回列表里第一个特定名字的元素, 没有则返回None"""
         return self.find(lambda d: d.name == name)
 
     def find_all_by_name(self, name: str) -> "ExtendedList[T]":
         """返回列表里所有特定名字的元素"""
         return self.find_all(lambda d: d.name == name)
 
-    def find_by_id(self, id: str) -> Union[T, None]:
+    def find_by_id(self, spec_id: str) -> Union[T, None]:
         """返回列表里第一个特定id的元素, 没有则返回None"""
-        return self.find(lambda d: d.id == id)
+        return self.find(lambda d: d.id == spec_id)
 
-    def find_all_by_id(self, id: str) -> "ExtendedList[T]":
+    def find_all_by_id(self, spec_id: str) -> "ExtendedList[T]":
         """返回列表里所有特定id的元素"""
-        return self.find_all(lambda d: d.id == id)
+        return self.find_all(lambda d: d.id == spec_id)
 
 
 @dataclass
 class Grade:
     """年级"""
 
     name: str = ""
@@ -176,34 +176,49 @@
     """学科"""
 
     id: str = ""
     standard_score: float = 0
     status: str = field(default="", repr=False)
     exam_id: str = field(default="", repr=False)
     create_user: Person = field(default_factory=Person, repr=False)
-    _create_timestamp: float = field(default=0, repr=False)
-    create_time = get_property("_create_timestamp")
+    create_time: float = field(default=0, repr=False)
 
     def __eq__(self, other):
         return type(other) == type(self) and other.id == self.id
 
 
+@dataclass
+class TextBook:
+    """教科书属性"""
+    code: str = None
+    """教科书编号"""
+    name: int = None
+    """教科书名称"""
+    version: str = None
+    """教科书版本，如北师大、人教、部编等"""
+    versionCode: int = None
+    """教科书版本编号"""
+    bindSubject: Subject = None
+    def __str__(self) -> str:
+        return (
+            f"{self.bindSubject.name} {self.name}（{self.version}）"
+        )
+
 @dataclass(eq=False)
 class Exam:
     """考试"""
 
     id: str = ""
     name: str = ""
     status: str = ""
     grade_code: str = ""
     subjects: ExtendedList[Subject] = field(default_factory=ExtendedList, repr=False)
     schools: ExtendedList[School] = field(default_factory=ExtendedList, repr=False)
     create_user: Person = field(default_factory=Person, repr=False)
-    _create_timestamp: float = field(default=0, repr=False)
-    create_time = get_property("_create_timestamp")
+    create_time: float = field(default=0, repr=False)
     class_rank: int = field(default=0, repr=False)
     grade_rank: int = field(default=0, repr=False)
     is_final: bool = False
 
     def __bool__(self):
         return bool(self.id)
 
@@ -231,17 +246,18 @@
         return self.__repr__()
 
 
 class Mark(ExtendedList[SubjectScore]):
     """一场考试的成绩"""
 
     def __init__(
-        self, l: list = list(), exam: Exam = Exam(), person: StuPerson = StuPerson()
+            self, ls: list = None, exam: Exam = Exam(), person: StuPerson = StuPerson()
     ):
-        super().__init__(l)
+
+        super().__init__([] if ls is None else ls)
         self.exam = exam
         self.person = person
 
     def __repr__(self):
         if self.exam and self.person:
             msg = f"{self.person.name}-{self.exam.name}\n" + "".join(
                 [f"{subject}\n" for subject in self]
```

## zhixuewang/session.py

```diff
@@ -37,15 +37,15 @@
             pow(
                 int.from_bytes(password.encode()[::-1], "big"),
                 65537,
                 186198350384465244738867467156319743461,
             )
             .to_bytes(16, "big")
             .hex()
-        )  ### by immoses648
+        )  # by immoses648
     session = get_basic_session()
     r = session.get(Url.SSO_URL)
     json_obj = json.loads(r.text.strip().replace("\\", "").replace("'", "")[1:-1])
     if json_obj["code"] != 1000:
         raise LoginError(json_obj["data"])
     lt = json_obj["data"]["lt"]
     execution = json_obj["data"]["execution"]
```

## zhixuewang/urls.py

 * *Ordering differences only*

```diff
@@ -2,8 +2,8 @@
 
 
 class Url:
     SERVICE_URL = f"{BASE_URL}:443/ssoservice.jsp"
     SSO_URL = f"https://sso.zhixue.com/sso_alpha/login?service={SERVICE_URL}"
     TEST_PASSWORD_URL = f"{BASE_URL}/weakPwdLogin/?from=web_login"
     TEST_URL = f"{BASE_URL}/container/container/teacher/teacherAccountNew"
-    GET_LOGIN_STATE = f"{BASE_URL}/loginState/"
+    GET_LOGIN_STATE = f"{BASE_URL}/loginState/"
```

## zhixuewang/student/student.py

```diff
@@ -1,16 +1,16 @@
 import hashlib
 import json
-import math
+# import math
 import time
 import uuid
 from typing import List, Tuple, Union
 from zhixuewang.models import (
     Account,
-    BasicSubject,
+    # BasicSubject,
     ErrorBookTopic,
     ExtendedList,
     Exam,
     HwResource,
     HwType,
     Mark,
     Role,
@@ -29,42 +29,46 @@
 )
 from zhixuewang.student.urls import Url
 
 
 def _check_is_uuid(msg: str):
     """判断msg是否为uuid"""
     return (
-        len(msg) == 36
-        and msg[14] == "4"
-        and msg[8] == msg[13] == msg[18] == msg[23] == "-"
+            len(msg) == 36
+            and msg[14] == "4"
+            and msg[8] == msg[13] == msg[18] == msg[23] == "-"
     )
 
 
 def _md5_encode(msg: str) -> str:
     md5 = hashlib.md5()
     md5.update(msg.encode(encoding="utf-8"))
     return md5.hexdigest()
 
 
-
 class StudentAccount(Account, StuPerson):
     """学生账号"""
 
     def __init__(self, session):
         super().__init__(session, Role.student)
-        self._token_timestamp = ["", 0]
+        # self._token_timestamp = ["", 0]
+        self._auth = {
+            "token": "",
+            "timestamp": 0.0
+        }
         self.exams: ExtendedList[Exam] = ExtendedList()
 
     def _get_auth_header(self) -> dict:
         """获取header"""
         self.update_login_status()
         auth_guid = str(uuid.uuid4())
         auth_time_stamp = str(int(time.time() * 1000))
         auth_token = _md5_encode(auth_guid + auth_time_stamp + "iflytek!@#123student")
-        token, cur_time = self._token_timestamp
+        # token, cur_time = self._token_timestamp
+        token, cur_time = self._auth["token"], self._auth["timestamp"]
         if token and time.time() - cur_time < 600:  # 判断token是否过期
             return {
                 "authbizcode": "0001",
                 "authguid": auth_guid,
                 "authtimestamp": auth_time_stamp,
                 "authtoken": auth_token,
                 "XToken": token,
@@ -76,16 +80,18 @@
                 "authguid": auth_guid,
                 "authtimestamp": auth_time_stamp,
                 "authtoken": auth_token,
             },
         )
         if not r.ok:
             raise PageConnectionError(f"_get_auth_header中出错, 状态码为{r.status_code}")
-        self._token_timestamp[0] = r.json()["result"]
-        self._token_timestamp[1] = time.time()
+        # self._token_timestamp[0] = r.json()["result"]
+        self._auth["token"] = r.json()["result"]
+        # self._token_timestamp[1] = time.time()
+        self._auth["timestamp"] = time.time()
         return self._get_auth_header()
 
     def set_base_info(self):
         """设置账户基本信息, 如用户id, 姓名, 学校等"""
         self.update_login_status()
         r = self._session.get(Url.INFO_URL)
         if not r.ok:
@@ -153,16 +159,16 @@
         if not r.ok:
             raise PageConnectionError(f"get_page_exam中出错, 状态码为{r.status_code}")
         json_data = r.json()["result"]
         for exam_data in json_data["examList"]:
             exam = Exam(id=exam_data["examId"], name=exam_data["examName"])
             exam.create_time = exam_data["examCreateDateTime"]
             exams.append(exam)
-        hasNextPage: bool = json_data["hasNextPage"]
-        return exams, hasNextPage
+        has_next_page: bool = json_data["hasNextPage"]
+        return exams, has_next_page
 
     def get_latest_exam(self) -> Exam:
         """获取最新考试"""
         self.update_login_status()
         r = self._session.get(Url.GET_RECENT_EXAM_URL, headers=self._get_auth_header())
         if not r.ok:
             raise PageConnectionError(f"get_latest_exam中出错, 状态码为{r.status_code}")
@@ -252,15 +258,15 @@
                 grade_rank=exam.grade_rank,
             )
             mark.append(subject_score)
         self._set_exam_rank(mark)
         return mark
 
     def get_self_mark(
-        self, exam_data: Union[Exam, str] = "", has_total_score: bool = True
+            self, exam_data: Union[Exam, str] = "", has_total_score: bool = True
     ) -> Mark:
         """获取指定考试的成绩
 
         Args:
             exam_data (Union[Exam, str]): 考试id 或 考试名称 或 Exam实例, 默认值为最新考试
             has_total_score (bool): 是否计算总分, 默认为True
 
@@ -315,15 +321,15 @@
         if _check_is_uuid(subject_data):  # 判断为id还是名称
             subject = subjects.find_by_id(subject_data)  # 为id
         else:
             subject = subjects.find_by_name(subject_data)  # 为名称
         return subject
 
     def get_subject(
-        self, subject_data: Union[Subject, str], exam_data: Union[Exam, str] = ""
+            self, subject_data: Union[Subject, str], exam_data: Union[Exam, str] = ""
     ) -> Subject:
         """获取指定考试的学科
 
         Args:
             subject_data (Union[Subject, str]): 学科id 或 学科名称, 为Subject实例时直接返回
             exam_data (Union[Exam, str]): 考试id 或 考试名称 或 Exam实例, 默认值为最新考试
 
@@ -355,15 +361,15 @@
             print(json_data)
         image_urls = []
         for image_url in json.loads(json_data["result"]["sheetImages"]):
             image_urls.append(image_url)
         return image_urls
 
     def get_original(
-        self, subject_data: Union[Subject, str], exam_data: Union[Exam, str] = ""
+            self, subject_data: Union[Subject, str], exam_data: Union[Exam, str] = ""
     ) -> List[str]:
         """获得指定考试学科的原卷地址
 
         Args:
             subject_data (Union[Subject, str]): 学科id 或 学科名称 或 Subject实例
             exam_data (Union[Exam, str]): 考试id 或 考试名称, 默认为最新考试
 
@@ -436,23 +442,23 @@
                     grade=self.clazz.grade,
                     school=School(
                         id=classmate_data["clazz"]["school"]["id"],
                         name=classmate_data["clazz"]["school"]["name"],
                     ),
                 ),
                 code=classmate_data.get("code"),
-                email=classmate_data["email"],
+                # email=classmate_data["email"],
                 gender=Sex.BOY if classmate_data["gender"] == "1" else Sex.GIRL,
                 mobile=classmate_data["mobile"],
             )
             classmates.append(classmate)
         return classmates
 
     def get_classmates(
-        self, clazz_data: Union[StuClass, str] = ""
+            self, clazz_data: Union[StuClass, str] = ""
     ) -> ExtendedList[StuPerson]:
         """获取指定班级里学生列表
 
         Args:
             clazz_data (Union[StuClass, str]): 班级id 或 班级名称 或 StuClass实例, 为空时获取本班学生列表
 
         Returns:
@@ -460,40 +466,40 @@
         """
         clazz = self.get_clazz(clazz_data)
         if clazz is None:
             return ExtendedList([])
         return self.__get_classmates(clazz.id)
 
     def get_homeworks(
-        self,
-        size: int = 20,
-        is_complete: bool = False,
-        subject_code: str = "-1",
-        createTime: int = 0,
+            self,
+            size: int = 20,
+            is_complete: bool = False,
+            subject_code: str = "-1",
+            create_time: int = 0,
     ) -> ExtendedList[StuHomework]:
         """获取指定数量的作业(暂时不支持获取所有作业)
 
         Args:
             size (int): 返回的数量
             is_complete (bool): True 表示取已完成的作业, False 表示取未完成的作业
             subject_code (code): "01" 表示取语文作业, "02"表示取数学作业, 以此类推
-            createTime (int): 取创建时间在多久以前的作业, 0表示从最新取 (暂时用不到)
+            create_time (int): 取创建时间在多久以前的作业, 0表示从最新取 (暂时用不到)
         Returns:
             ExtendedList[StuHomework]: 作业(不包含作业资源)
         """
         self.update_login_status()
         r = self._session.get(
             Url.GET_HOMEWORK_URL,
             params={
                 "pageIndex": 2,
                 "completeStatus": 1 if is_complete else 0,
                 "pageSize": size,  # 取几个
                 "subjectCode": subject_code,
                 "token": self._get_auth_header()["XToken"],
-                "createTime": createTime,  # 创建时间在多久以前的 0 为从最新开始
+                "createTime": create_time,  # 创建时间在多久以前的 0 为从最新开始
             },
         )
         homeworks: ExtendedList[StuHomework] = ExtendedList()
         data = r.json()["result"]
         for each in data["list"]:
             homeworks.append(
                 StuHomework(
@@ -502,17 +508,17 @@
                     type=HwType(
                         name=each["homeWorkTypeDTO"]["typeName"],
                         code=each["homeWorkTypeDTO"]["typeCode"],
                     ),
                     begin_time=each["beginTime"] / 1000,
                     end_time=each["endTime"] / 1000,
                     create_time=each["createTime"] / 1000,
-                    subject=BasicSubject(
-                        name=each["subjectName"], code=each["subjectCode"]
-                    ),
+                    # subject=BasicSubject(
+                    #     name=each["subjectName"], code=each["subjectCode"]
+                    # ),
                     is_allow_makeup=bool(each["isAllowMakeup"]),
                     class_id=each["classId"],
                     stu_hwid=each["stuHwId"],
                 )
             )
         return homeworks
 
@@ -568,29 +574,30 @@
         )
         data = r.json()
         if data["errorCode"] != 0:
             return
         for each in data["result"]["list"]:
             each_mark = mark.find(lambda t: t.subject.code == each["subjectCode"])
             if each_mark is not None:
-                if each["myRank"] == 0:
-                    each_mark.class_rank = 1
-                else:
-                    each_mark.class_rank = math.ceil(each["myRank"] / 100 * num)
+                # if each["myRank"] == 0:
+                #     each_mark.class_rank = 1
+                # else:
+                #     each_mark.class_rank = math.ceil(each["myRank"] / 100 * num)
+                each_mark.class_rank = round(num - (100 - each["myRank"]) / 100 * (num - 1))
 
     def get_errorbook(self, exam_id, subject_id: str) -> List[ErrorBookTopic]:
         r = self._session.get(
             Url.GET_ERRORBOOK_URL,
             params={"examId": exam_id, "paperId": subject_id},
             headers=self._get_auth_header(),
         )
         data = r.json()
         if (
-            data["errorCode"] != 0
-        ):  #  {'errorCode': 40217, 'errorInfo': '暂时未收集到试题信息,无法查看', 'result': ''}
+                data["errorCode"] != 0
+        ):  # {'errorCode': 40217, 'errorInfo': '暂时未收集到试题信息,无法查看', 'result': ''}
             raise Exception(data)
         result = []
         for each in data["result"]["wrongTopicAnalysis"]["topicList"]:
             result.append(
                 ErrorBookTopic(
                     analysis_html=each["analysisHtml"],
                     answer_html=each["answerHtml"],
```

## zhixuewang/student/urls.py

```diff
@@ -28,14 +28,14 @@
     GET_CLASSMATES_URL = f"{BASE_URL}/container/contact/student/students"
     GET_TEACHERS_URL = f"{BASE_URL}/container/contact/student/teachers"
 
     APP_BASE_URL = "https://mhw.zhixue.com"
     # Homework
     GET_HOMEWORK_URL = f"{APP_BASE_URL}/homework_middle_service/stuapp/getStudentHomeWorkList"
     GET_HOMEWORK_RESOURCE_URL = f"{APP_BASE_URL}/hw/manage/homework/redeploy"
-    
+
     GET_EXAM_LEVEL_TREND_URL = f"{BASE_URL}/zhixuebao/report/exam/getLevelTrend"
 
     GET_PAPER_LEVEL_TREND_URL = f"{BASE_URL}/zhixuebao/report/paper/getLevelTrend"
     GET_LOST_TOPIC_URL = f"{BASE_URL}/zhixuebao/report/paper/getExamPointsAndScoringAbility"
     GET_ERRORBOOK_URL = f"{BASE_URL}/zhixuebao/report/paper/getLostTopicAndAnalysis"
-    GET_SUBJECT_DIAGNOSIS = f"{BASE_URL}/zhixuebao/report/exam/getSubjectDiagnosis"
+    GET_SUBJECT_DIAGNOSIS = f"{BASE_URL}/zhixuebao/report/exam/getSubjectDiagnosis"
```

## zhixuewang/teacher/__init__.py

```diff
@@ -1,5 +1,6 @@
 from zhixuewang.teacher.teacher import TeacherAccount
 
 __all__ = [
     "TeacherAccount",
-]
+
+]
```

## zhixuewang/teacher/models.py

```diff
@@ -1,41 +1,54 @@
 from dataclasses import dataclass
 from enum import Enum
+from typing import List
 from zhixuewang.models import (
+    Exam,
     Person,
-    School,
+    # School,
     StuClass,
     Sex,
 )
 
 
 class TeacherRole(Enum):
     TEACHER = "老师"
     HEADMASTER = "校长"
+    HEADTEACHER = "班主任"
+    SCHOOL_ADMINISTRATOR = "校管理员"
     GRADE_DIRECTER = "年级组长"
+    SUBJECT_LEADER = "备课组长"
 
     def __str__(self):
         return self._value_
 
 
 class TeaPerson(Person):
     def __init__(
-        self,
-        name: str = "",
-        id: str = "",
-        gender: Sex = Sex.GIRL,
-        mobile: str = "",
-        avatar: str = "",
-        code: str = "",
-        clazz: StuClass = None,
+            self,
+            name: str = "",
+            id: str = "",
+            gender: Sex = Sex.GIRL,
+            mobile: str = "",
+            avatar: str = "",
+            code: str = "",
+            clazz: StuClass = None,
     ):
         super().__init__(name, id, gender, mobile, avatar)
         self.code = code
         self.clazz = clazz
 
 
 @dataclass
 class MarkingProgress:
     topic_number: str
     complete_rate: float
     complete_count: int
     all_count: int
+
+@dataclass
+class PageExam:
+    exams: List[Exam]
+    page_index: int
+    page_size: int
+    all_pages: int
+    has_next_page: bool
```

## zhixuewang/teacher/teacher.py

```diff
@@ -1,46 +1,111 @@
 import asyncio
+from datetime import datetime
 from typing import List
 
 import httpx
 from zhixuewang.models import (
     Account,
     Exam,
     ExtendedList,
     Role,
     School,
     StuClass,
     Subject,
+    Grade,
+    TextBook,
+    StuPerson,
 )
 from zhixuewang.teacher.models import (
     MarkingProgress,
+    PageExam,
     TeaPerson,
 )
 from zhixuewang.teacher.urls import Url
 
 
 class TeacherAccount(Account, TeaPerson):
     """老师账号"""
 
+    #! Advanced Information
+    currentTeachClasses: list = []
+    """当前教授的班级"""
+    inProvince: str = None
+    """教师所在的省份"""
+    inCity: str = None
+    """教师所在的城市"""
+    currentSubject: Subject = None
+    """当前教授的学科"""
+    currentTeachingGrade: Grade = None
+    """当前教授的年级"""
+    currentTeachingTextbook: TextBook = None
+    """当前使用的教科书"""
+    currentSchool: School = None
+    """当前的学校"""
+
     def __init__(self, session):
         super().__init__(session, Role.teacher)
+        self.roles = None
         self._token = None
 
     def set_base_info(self):
         r = self._session.get(
             Url.TEST_URL,
             headers={
                 "referer": "https://www.zhixue.com/container/container/teacher/index/"
             },
         )
         json_data = r.json()["teacher"]
         self.id = json_data.get("id")
         self.mobile = json_data.get("mobile")
         self.name = json_data.get("name")
         self.roles = json_data["roles"]
+
+        advanced_info = self._session.get(
+            Url.GET_ADVANCED_INFORMATION_URL,
+            headers={
+                "referer": "https://www.zhixue.com/paperfresh/dist/assets/expertPaper.html"
+            },
+        )
+
+        adv_result = advanced_info.json()["result"]
+        self.inProvince = adv_result["province"]["name"]
+        self.inCity = adv_result["city"]["name"]
+        self.currentSchool = School(
+            name=adv_result["school"]["name"], id=adv_result["school"]["id"]
+        )
+        self.currentSubject = Subject(
+            adv_result["curSubject"]["name"], code=adv_result["curSubject"]["code"]
+        )
+        self.currentTeachingGrade = Grade(
+            adv_result["grade"]["name"], code=adv_result["grade"]["code"]
+        )
+        self.currentTeachingTextbook = TextBook(
+            code=adv_result["textBookVersion"]["code"],
+            name=adv_result["textBookVersion"]["name"],
+            version=adv_result["bookVersion"]["name"],
+            versionCode=adv_result["bookVersion"]["code"],
+            #!TODO 暂无法通过对应的Code获取学科，暂时使用教师绑定的学科
+            bindSubject=self.currentSubject,
+        )
+        teacGrade: Grade = None
+        for i in adv_result["curTeachingGrades"]:
+            teacGrade = Grade(name=i["name"], code=i["code"])
+            for j in i["clazzs"]:
+                #!TODO 暂无法获取班级所在学校，暂时使用教师绑定的学校
+                self.currentTeachClasses.append(
+                    StuClass(
+                        id=j["code"],
+                        name=j["name"],
+                        grade=teacGrade,
+                        school=self.currentSchool,
+                    )
+                )
+            # 清空grade缓存
+            teacGrade = None
         return self
 
     async def __get_school_exam_classes(
         self, school_id: str, subject_id: str
     ) -> List[StuClass]:
         async with httpx.AsyncClient(cookies=self._session.cookies) as client:
             r = await client.get(
@@ -58,39 +123,96 @@
                         id=each["classId"],
                         name=each["className"],
                         school=School(id=each["schoolId"]),
                     )
                 )
             return classes
 
+    def get_student_status(
+        self, clazzId: str, subjectCode: int, gradeCode: int, roleType: str = "teacher"
+    ):
+        """获取学生信息（如进步，退步等），返回临近生，下滑生，波动生"""
+        self.update_login_status()
+        r = self._session.get(
+            Url.GET_STUDENT_STATUS_URL,
+            headers={"referers": "https://www.zhixue.com/api-teacher/home/index"},
+            params={
+                "roleType": roleType,
+                "gradeCode": str(gradeCode),
+                "classId": clazzId,
+                "subjectCode": str(subjectCode),
+            },
+        )
+        data = r.json()["result"]
+        critical_student: list = []  # 临近生
+        backword_student: list = []  # 下滑
+        unstable_student: list = []  # 波动
+        if data["criticalStudents"] != None:
+            for i in data["criticalStudents"]:
+                critical_student.append(StuPerson(id=i["userId"], name=i["userName"]))
+        if data["backwordStudents"] != None:
+            for i in data["backwordStudents"]:
+                backword_student.append(StuPerson(id=i["userId"], name=i["userName"]))
+        if data["unstableStudents"] != None:
+            for i in data["unstableStudents"]:
+                unstable_student.append(StuPerson(id=i["userId"], name=i["userName"]))
+        return (critical_student, backword_student, unstable_student)
+
     def get_school_exam_classes(
         self, school_id: str, subject_id: str
     ) -> List[StuClass]:
         self.update_login_status()
         return asyncio.run(self.__get_school_exam_classes(school_id, subject_id))
 
-    def get_original_paper(self, userId: str, paperId: str, saveToPath: str) -> bool:
+    def get_original_paper(
+        self, user_id: str, paper_id: str, save_to_path: str
+    ) -> bool:
         """
         获得原卷
         Args:
-            userId (str): 为需要查询原卷的userId
-            paperId (str): 为需要查询的学科ID(topicSetId)
-            saveToPath (str): 为原卷保存位置(html文件), 精确到文件名
+            user_id (str): 为需要查询原卷的userId
+            paper_id (str): 为需要查询的学科ID(topicSetId)
+            save_to_path (str): 为原卷保存位置(html文件), 精确到文件名
         Return:
             bool: 正常会返回True
         """
         data = self._session.get(
-            Url.ORIGINAL_PAPER_URL, params={"userId": userId, "paperId": paperId}
+            Url.ORIGINAL_PAPER_URL, params={"userId": user_id, "paperId": paper_id}
         )
-        with open(saveToPath, encoding="utf-8", mode="w+") as fhandle:
+        with open(save_to_path, encoding="utf-8", mode="w+") as fhandle:
             fhandle.writelines(
                 data.text.replace("//static.zhixue.com", "https://static.zhixue.com")
             )
         return True
 
+    def get_teacher_roleText(self) -> list:
+        """
+        获得教师的角色文本
+        Return:
+            list: 教师的所有角色名称
+        Raises:
+            ValueError: 未知的角色
+        """
+        str_roles = []
+        for role in self.roles:
+            if role == "teacher":
+                str_roles.append("教师")
+            elif role == "subjectLeader":
+                str_roles.append("备课组长")
+            elif role == "gradeDirecter":
+                str_roles.append("年级组长")
+            elif role == "headteacher":
+                str_roles.append("班主任")
+            elif role == "headmaster":
+                str_roles.append("校长")
+            elif role == "schoolAdministrator":
+                str_roles.append("校管理员")
+            else:
+                raise ValueError(f"教师角色{role}未知。已忽略。")
+
     def get_exam_subjects(self, exam_id: str) -> ExtendedList[Subject]:
         """
         获取某个考试的考试科目
         Args:
             exam_id (str): 为需要查询考试的id
         Return:
             bool: 正常会返回True
@@ -147,28 +269,92 @@
             subject_id (str): 科目id
         Return:
             List[MarkingProgress]
         """
         r = self._session.post(
             "https://pt-ali-bj-re.zhixue.com/marking/marking/markingTopicProgress/",
             data={"markingPaperId": subject_id},
-            headers={"token": self.get_token()}
+            headers={"token": self.get_token()},
         )
         data = r.json()
         result = []
         for each in data:
             result.append(
                 MarkingProgress(
                     topic_number=each["topicNumber"],
                     complete_rate=each["comleteRate"],
                     complete_count=each["completeCount"],
                     all_count=each["allCount"],
                 )
             )
         return result
 
+    def get_exams(
+        self,
+        class_id: str = "all",
+        start_time: datetime = datetime(2020, 1, 1),
+        end_time: datetime = datetime.now(),
+        page_size: int = 15,
+        page_index: int = 1,
+    ) -> PageExam:
+        """
+        获取考试
+        Args:
+            class_id (str): 指定查看考试的班级, 默认为全部班级
+            start_time (datetime): 指定查看考试的开始时间, 默认为2020年1月1日
+            end_time (datetime): 指定查看考试的结束时间, 默认为现在
+            page_size (int): 指定一页考试数
+            page_index (int): 指定页数
+        Return:
+            PageExam: 考试信息和页数信息
+        """
+        r = self._session.get(
+            Url.GET_EXAMS_URL,
+            params={
+                "examName": "",
+                "gradeCode": "all",
+                "classId": class_id,
+                "subjectCode": "all",
+                "searchType": "schoolYearType",
+                "circlesYear": "",
+                "examTypeCode": "all",
+                "termId": "",
+                "teachingCycleId": "",
+                "startTime": int(start_time.timestamp() * 1000),
+                "endTime": int(end_time.timestamp() * 1000),
+                "pageSize": page_size,
+                "pageIndex": page_index,
+            },
+        )
+        exams = []
+        data = r.json()["result"]
+        for each in data["classPaperSummaryList"]:
+            exams.append(
+                Exam(
+                    id=each["data"]["examId"],
+                    name=each["data"]["examName"],
+                    grade_code=each["data"]["gradeCode"],
+                    subjects=ExtendedList(
+                        [
+                            Subject(name=one["name"])
+                            for one in each["zxSubjects"]
+                            if not one["isMultiSubject"]  # 排除复合学科如理综
+                        ]
+                    ),
+                    create_time=each["data"]["createDateTime"] / 1000,
+                    is_final=each["data"]["isFinal"]
+                )
+            )
+        return PageExam(
+            exams=exams,
+            page_index=page_index,
+            page_size=page_size,
+            all_pages=data["pageInfo"]["allPages"][-1],
+            has_next_page=page_index < data["pageInfo"]["allPages"][-1],
+        )
+
     def get_token(self) -> str:
         if self._token is not None:
             return self._token
         r = self._session.get("https://www.zhixue.com/container/app/token/getToken")
         self._token = r.json()["result"]
         return self._token
```

## zhixuewang/teacher/urls.py

```diff
@@ -10,14 +10,18 @@
 
     GET_EXAM_URL = f"{BASE_URL}/classreport/class/classReportList/"
     GET_AcademicTermTeachingCycle_URL = f"{BASE_URL}/classreport/class/getAcademicTermTeachingCycle/"
 
     GET_REPORT_URL = f"{BASE_URL}/exportpaper/class/getExportStudentInfo"
     GET_MARKING_PROGRESS_URL = f"{BASE_URL}/marking/marking/markingProgressDetail"
 
+    GET_EXAMS_URL = f"{BASE_URL}/api-classreport/class/classReportList/"
     GET_EXAM_DETAIL_URL = f"{BASE_URL}/scanmuster/cloudRec/scanrecognition"
-    
+
     GET_EXAM_SCHOOLS_URL = f"{BASE_URL}/exam/marking/schoolClass"
     GET_EXAM_SUBJECTS_URL = f"{BASE_URL}/configure/class/getSubjectsIncludeSubAndGroup"
-    #后必须接上paperId
+    # 后必须接上paperId
     # ORIGINAL_PAPER_URL = f"{BASE_URL}/classreport/class/student/checksheet/?userId="
-    ORIGINAL_PAPER_URL = f"{BASE_URL}/classreport/class/student/checksheet/"
+    ORIGINAL_PAPER_URL = f"{BASE_URL}/classreport/class/student/checksheet/"
+
+    GET_ADVANCED_INFORMATION_URL = f"{BASE_URL}/paperfresh/api/common/getCurrentUser"
+    GET_STUDENT_STATUS_URL = f"{BASE_URL}/api-teacher/home/getStudentStatus"
```

## zhixuewang/tools/__init__.py

 * *Ordering differences only*

```diff
@@ -1,5 +1,5 @@
 from zhixuewang.tools.datetime_tool import get_property
 
 __all__ = [
     "get_property",
-]
+]
```

## Comparing `zhixuewang-1.1.8.dist-info/LICENSE` & `zhixuewang-1.1.9.dist-info/LICENSE`

 * *Files identical despite different names*

