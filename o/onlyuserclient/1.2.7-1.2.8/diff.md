# Comparing `tmp/onlyuserclient-1.2.7-py3-none-any.whl.zip` & `tmp/onlyuserclient-1.2.8-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,35 +1,35 @@
-Zip file size: 34887 bytes, number of entries: 33
--rw-rw-rw-  2.0 fat       83 b- defN 22-Nov-24 07:57 onlyuserclient/__init__.py
+Zip file size: 34909 bytes, number of entries: 33
+-rw-rw-rw-  2.0 fat       83 b- defN 23-Aug-07 08:26 onlyuserclient/__init__.py
 -rw-rw-rw-  2.0 fat      108 b- defN 21-Nov-23 02:20 onlyuserclient/apps.py
 -rw-rw-rw-  2.0 fat     3115 b- defN 21-Nov-23 02:20 onlyuserclient/exceptions.py
 -rw-rw-rw-  2.0 fat       30 b- defN 21-Nov-23 02:20 onlyuserclient/models.py
 -rw-rw-rw-  2.0 fat     1879 b- defN 22-Apr-25 04:33 onlyuserclient/settings.py
 -rw-rw-rw-  2.0 fat     9535 b- defN 21-Apr-23 05:11 onlyuserclient/viewsets.py
 -rw-rw-rw-  2.0 fat       74 b- defN 21-Nov-23 02:20 onlyuserclient/api/__init__.py
 -rw-rw-rw-  2.0 fat     1146 b- defN 21-Nov-23 02:20 onlyuserclient/api/base.py
 -rw-rw-rw-  2.0 fat     8982 b- defN 22-Oct-19 08:00 onlyuserclient/api/billing.py
--rw-rw-rw-  2.0 fat     8854 b- defN 22-Nov-24 02:25 onlyuserclient/api/onlyuser.py
+-rw-rw-rw-  2.0 fat     8854 b- defN 23-Jun-01 03:33 onlyuserclient/api/onlyuser.py
 -rw-rw-rw-  2.0 fat       22 b- defN 21-Nov-23 02:20 onlyuserclient/decorator/__init__.py
 -rw-rw-rw-  2.0 fat     1031 b- defN 21-Nov-23 02:20 onlyuserclient/decorator/billing.py
 -rw-rw-rw-  2.0 fat        0 b- defN 22-Apr-25 04:33 onlyuserclient/grpc/__init__.py
 -rw-rw-rw-  2.0 fat        0 b- defN 22-Apr-25 04:33 onlyuserclient/grpc/billing/__init__.py
--rw-rw-rw-  2.0 fat    10413 b- defN 22-Nov-24 07:47 onlyuserclient/grpc/billing/counter.py
+-rw-rw-rw-  2.0 fat    10519 b- defN 23-Aug-07 06:20 onlyuserclient/grpc/billing/counter.py
 -rw-rw-rw-  2.0 fat        0 b- defN 22-Apr-25 04:33 onlyuserclient/grpc/billing/proto/__init__.py
 -rw-rw-rw-  2.0 fat    13744 b- defN 22-Oct-14 05:09 onlyuserclient/grpc/billing/proto/counter_pb2.py
 -rw-rw-rw-  2.0 fat    16584 b- defN 22-Oct-14 05:09 onlyuserclient/grpc/billing/proto/counter_pb2_grpc.py
 -rw-rw-rw-  2.0 fat       22 b- defN 21-Nov-23 02:20 onlyuserclient/handler/__init__.py
 -rw-rw-rw-  2.0 fat    12301 b- defN 22-Oct-19 08:00 onlyuserclient/handler/billing.py
 -rw-rw-rw-  2.0 fat       47 b- defN 21-Nov-23 02:20 onlyuserclient/middleware/__init__.py
 -rw-rw-rw-  2.0 fat     1879 b- defN 21-Nov-23 02:20 onlyuserclient/middleware/billing.py
 -rw-rw-rw-  2.0 fat     1057 b- defN 21-Nov-23 02:20 onlyuserclient/middleware/onlyuser.py
 -rw-rw-rw-  2.0 fat        0 b- defN 21-Nov-23 02:20 onlyuserclient/rpc/__init__.py
 -rw-rw-rw-  2.0 fat       21 b- defN 21-Mar-12 03:15 onlyuserclient/serializers/__init__.py
 -rw-rw-rw-  2.0 fat     5772 b- defN 21-Apr-23 05:11 onlyuserclient/serializers/fields.py
 -rw-rw-rw-  2.0 fat        0 b- defN 21-Nov-23 02:20 onlyuserclient/utils/__init__.py
 -rw-rw-rw-  2.0 fat     1710 b- defN 21-Nov-23 02:20 onlyuserclient/utils/functions.py
--rw-rw-rw-  2.0 fat     1112 b- defN 22-Nov-24 07:58 onlyuserclient-1.2.7.dist-info/LICENSE
--rw-rw-rw-  2.0 fat    20801 b- defN 22-Nov-24 07:58 onlyuserclient-1.2.7.dist-info/METADATA
--rw-rw-rw-  2.0 fat       92 b- defN 22-Nov-24 07:58 onlyuserclient-1.2.7.dist-info/WHEEL
--rw-rw-rw-  2.0 fat       15 b- defN 22-Nov-24 07:58 onlyuserclient-1.2.7.dist-info/top_level.txt
-?rw-rw-r--  2.0 fat     2930 b- defN 22-Nov-24 07:58 onlyuserclient-1.2.7.dist-info/RECORD
-33 files, 123359 bytes uncompressed, 30093 bytes compressed:  75.6%
+-rw-rw-rw-  2.0 fat     1112 b- defN 23-Aug-07 08:44 onlyuserclient-1.2.8.dist-info/LICENSE
+-rw-rw-rw-  2.0 fat    20775 b- defN 23-Aug-07 08:44 onlyuserclient-1.2.8.dist-info/METADATA
+-rw-rw-rw-  2.0 fat       92 b- defN 23-Aug-07 08:44 onlyuserclient-1.2.8.dist-info/WHEEL
+-rw-rw-rw-  2.0 fat       15 b- defN 23-Aug-07 08:44 onlyuserclient-1.2.8.dist-info/top_level.txt
+?rw-rw-r--  2.0 fat     2930 b- defN 23-Aug-07 08:44 onlyuserclient-1.2.8.dist-info/RECORD
+33 files, 123439 bytes uncompressed, 30115 bytes compressed:  75.6%
```

## zipnote {}

```diff
@@ -78,23 +78,23 @@
 
 Filename: onlyuserclient/utils/__init__.py
 Comment: 
 
 Filename: onlyuserclient/utils/functions.py
 Comment: 
 
-Filename: onlyuserclient-1.2.7.dist-info/LICENSE
+Filename: onlyuserclient-1.2.8.dist-info/LICENSE
 Comment: 
 
-Filename: onlyuserclient-1.2.7.dist-info/METADATA
+Filename: onlyuserclient-1.2.8.dist-info/METADATA
 Comment: 
 
-Filename: onlyuserclient-1.2.7.dist-info/WHEEL
+Filename: onlyuserclient-1.2.8.dist-info/WHEEL
 Comment: 
 
-Filename: onlyuserclient-1.2.7.dist-info/top_level.txt
+Filename: onlyuserclient-1.2.8.dist-info/top_level.txt
 Comment: 
 
-Filename: onlyuserclient-1.2.7.dist-info/RECORD
+Filename: onlyuserclient-1.2.8.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## onlyuserclient/__init__.py

```diff
@@ -1,6 +1,6 @@
 '''onlyuser 客户端开发包
 '''
 
-__version__='1.2.7'
+__version__='1.2.8'
 
 VERSION = __version__
```

## onlyuserclient/grpc/billing/counter.py

```diff
@@ -1,9 +1,10 @@
 import json
 import grpc
+import atexit
 from onlyuserclient.grpc.billing.proto import counter_pb2
 from onlyuserclient.grpc.billing.proto import counter_pb2_grpc
 
 # 默认计费服务器 gRPC 地址
 DEFAULT_GRPC_ADDRESS = 'localhost:50051'
 # 默认服务器最大重连次数
 DEFAULT_MAX_RETRES = 5
@@ -55,14 +56,18 @@
             })
             options.append(("grpc.service_config", service_config_json))
         else:
             options.append(("grpc.enable_retries", 0)) 
             
         self._channel = grpc.insecure_channel(self._server_addr, options=options)
         self._stub = counter_pb2_grpc.CounterServiceStub(self._channel)
+        atexit.register(self.close)
+
+    def close(self):
+        self._channel.stop()
 
     def create_account(
         self, 
         owner, 
         kind, 
         name
         ):
```

## Comparing `onlyuserclient-1.2.7.dist-info/LICENSE` & `onlyuserclient-1.2.8.dist-info/LICENSE`

 * *Files identical despite different names*

## Comparing `onlyuserclient-1.2.7.dist-info/METADATA` & `onlyuserclient-1.2.8.dist-info/METADATA`

 * *Files 1% similar despite different names*

```diff
@@ -1,27 +1,26 @@
 Metadata-Version: 2.1
 Name: onlyuserclient
-Version: 1.2.7
+Version: 1.2.8
 Summary: onlyuser client
 Home-page: https://github.com/tangdyy/onlyuserclient
 Author: Tang dayong
 Author-email: tangdyy@126.com
 License: UNKNOWN
 Platform: UNKNOWN
 Classifier: Programming Language :: Python :: 3
 Classifier: License :: OSI Approved :: MIT License
 Classifier: Operating System :: OS Independent
 Requires-Python: >=3.6
 Description-Content-Type: text/markdown
-License-File: LICENSE
 Requires-Dist: django
 Requires-Dist: djangorestframework
-Requires-Dist: simple-rest-client (==1.1.1)
+Requires-Dist: simple-rest-client (>=1.1.1)
 Requires-Dist: django-objectid (>=1.0.6)
-Requires-Dist: grpcio (==1.49.1)
+Requires-Dist: grpcio (>=1.49.1)
 
 # onlyuserclient
 
 统一认证服务Onlyuser客户端开发包,配合Onlyuser在微服务中实现：    
 + 角色权限控制，包括数据记录和字段权限控制。
 + 计费相关功能
 
@@ -44,15 +43,15 @@
 
 ## 快速开始
 
 ### 1.修改配置文件`settings.py`   
 
 #### 1.1.添加中间件到配置中
   ```python
-  
+
   MIDDLEWARE = [
       '....',
       # 角色权限中间件
       'onlyuserclient.middleware.RoleMiddleware',
       # 计费控制中间件
       'onlyuserclient.middleware.BillingMiddleware',
   ]  
@@ -202,15 +201,15 @@
   * `list`对象，自定义字段名，第一个元素是创建者字段名，第二个是创建时间字段名。    
 + `reviser`   
   **v1.0.10 增加**。     
   可选，记录修改者字段名，如果有这个属性，将根据登录用户自动填充修改者和修改时间字段。    
   属性值：    
   * `True`, 默认字段名`reviser`、`modify_time`。   
   * `list`对象，自定义字段名，第一个元素是修改者字段名，第二个是修改时间字段名。       
-  
+
 
 ```python
 from onlyuserclient.viewsets import RoleModelViewSet
 from .serializers import DefaultDemoSerializer, CompleteDemoSerializer, HideDemoSerializer
 from .models import RoleDemo
 
 class RoleViewSet(RoleModelViewSet):
```

## Comparing `onlyuserclient-1.2.7.dist-info/RECORD` & `onlyuserclient-1.2.8.dist-info/RECORD`

 * *Files 11% similar despite different names*

```diff
@@ -1,33 +1,33 @@
-onlyuserclient/__init__.py,sha256=rm4ZgzzyHtkpr4HCVwFw31b50DUv_D5U5TuI6N0QfNo,83
+onlyuserclient/__init__.py,sha256=TlOlypV0eYFJ-u6g40B_BT4IQuwdIV-n3tJ4DmmdGBY,83
 onlyuserclient/apps.py,sha256=LmXP_dvFSPZ6_LGQMMacfGplw6rts7CO6fGLEI0RxiA,108
 onlyuserclient/exceptions.py,sha256=pG6oIss8Eer801IP6d25xdq-5MUXwN3b5yTsvZTusm4,3115
 onlyuserclient/models.py,sha256=rSUWra3oKaxjQiuj-lQOX4WH2zd5gPwKnJooNwUecZM,30
 onlyuserclient/settings.py,sha256=Hyakj17HhoF-AWTYK4HxH4G10gASmplrV3nqJIC33ik,1879
 onlyuserclient/viewsets.py,sha256=eK_y8rGK-KubELFPBhwBo1z7_qms8AOIXN8smTzKJOI,9535
 onlyuserclient/api/__init__.py,sha256=tfE4pSeWHXNM88I9pmo9hnztsucTK1bvKyaNp9w_hbE,74
 onlyuserclient/api/base.py,sha256=uDmUTirbMQdz6e1qlawYW9m_vPm6rY-SxBg_YVfpEeg,1146
 onlyuserclient/api/billing.py,sha256=AGkYc_93rHPR8XPU4mNeJZUwoMFvp9jQ6N1WJwXyekY,8982
 onlyuserclient/api/onlyuser.py,sha256=aml9F8L8aHIk4Hr1my3ZNybxXa7KdMqmiNtqH_JGFgk,8854
 onlyuserclient/decorator/__init__.py,sha256=vdBseujoTVk_BVVam2viJiVJ4c5SHT6h-XE_XHKYi28,22
 onlyuserclient/decorator/billing.py,sha256=eQP278gKfMutkVf45ct8sULfPTbzYZPFd0hGjW5J3Rc,1031
 onlyuserclient/grpc/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 onlyuserclient/grpc/billing/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
-onlyuserclient/grpc/billing/counter.py,sha256=u_CnUcM59diOPN35Ryij5-WH63tDiW2yrZYgLjBekoE,10413
+onlyuserclient/grpc/billing/counter.py,sha256=E-F0_RzOYrPtbUQylBtoWzrWFkBd4r12F7XhznbjkI4,10519
 onlyuserclient/grpc/billing/proto/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 onlyuserclient/grpc/billing/proto/counter_pb2.py,sha256=G-r7QfNDF0lY4NnWQmdQIHlFLHSLwWnbC__eJbVjKHk,13744
 onlyuserclient/grpc/billing/proto/counter_pb2_grpc.py,sha256=0N2bEADMRv1zK3FKCZwcmpp-LtIfk9cpxZp8lPBRmC0,16584
 onlyuserclient/handler/__init__.py,sha256=vdBseujoTVk_BVVam2viJiVJ4c5SHT6h-XE_XHKYi28,22
 onlyuserclient/handler/billing.py,sha256=9NLyG3SlMz9kwMsyVdJyP3Uw2B-0sMzKP_ZgDhBPNsM,12301
 onlyuserclient/middleware/__init__.py,sha256=-XpLadBalUtjQj4-YukNssF7PmNLs1-7Dm0Hv3skhAk,47
 onlyuserclient/middleware/billing.py,sha256=goW2n2IYoqMx19B_hppm-92KhTgDv7j5Dc3Hfv_ASq8,1879
 onlyuserclient/middleware/onlyuser.py,sha256=7XKUQtDwqwmt20gKmTiSthK3KSWnUhbQeOLzi_4ylfs,1057
 onlyuserclient/rpc/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 onlyuserclient/serializers/__init__.py,sha256=EJ8xYx6F3RiAbmCvDEJs1YlalGf6xjn4F20xPVPMQrQ,21
 onlyuserclient/serializers/fields.py,sha256=WM3mF4Hvkm9oZ0P9e9E2neRJbYtfbHK-WFIXmAqkFBA,5772
 onlyuserclient/utils/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 onlyuserclient/utils/functions.py,sha256=m2t1kNrY4GScHZWnI4qAXwdYYToZTCC73SrCD5Fw7pQ,1710
-onlyuserclient-1.2.7.dist-info/LICENSE,sha256=AVviKFjo38UGDPwN18Ry8JgdplTkrwdWN_MUQG026ps,1112
-onlyuserclient-1.2.7.dist-info/METADATA,sha256=P3lBQca4dcpxAYuXxGWZ5QGAouj0WL9nT8FxOWecpU4,20801
-onlyuserclient-1.2.7.dist-info/WHEEL,sha256=ewwEueio1C2XeHTvT17n8dZUJgOvyCWCt0WVNLClP9o,92
-onlyuserclient-1.2.7.dist-info/top_level.txt,sha256=szZ8VluvTniv_FeDJe0AIi4MbuRX4COCYRZ4MvnOOzU,15
-onlyuserclient-1.2.7.dist-info/RECORD,,
+onlyuserclient-1.2.8.dist-info/LICENSE,sha256=AVviKFjo38UGDPwN18Ry8JgdplTkrwdWN_MUQG026ps,1112
+onlyuserclient-1.2.8.dist-info/METADATA,sha256=EN_WrENrRquedqwv6CIzvY4bJFDBQAtSEg6UREOIqXI,20775
+onlyuserclient-1.2.8.dist-info/WHEEL,sha256=OqRkF0eY5GHssMorFjlbTIq072vpHpF60fIQA6lS9xA,92
+onlyuserclient-1.2.8.dist-info/top_level.txt,sha256=szZ8VluvTniv_FeDJe0AIi4MbuRX4COCYRZ4MvnOOzU,15
+onlyuserclient-1.2.8.dist-info/RECORD,,
```

