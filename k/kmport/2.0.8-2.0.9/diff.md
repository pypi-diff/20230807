# Comparing `tmp/kmport-2.0.8.tar.gz` & `tmp/kmport-2.0.9.tar.gz`

## filetype from file(1)

```diff
@@ -1 +1 @@
-gzip compressed data, was "dist/kmport-2.0.8.tar", last modified: Thu Jan 12 17:27:46 2023, max compression
+gzip compressed data, was "dist/kmport-2.0.9.tar", last modified: Thu Jan 12 19:17:35 2023, max compression
```

## Comparing `kmport-2.0.8.tar` & `kmport-2.0.9.tar`

### file list

```diff
@@ -1,12 +1,12 @@
-drwxrwxr-x   0 kage      (1000) kage      (1000)        0 2023-01-12 17:27:46.000000 kmport-2.0.8/
-drwxrwxr-x   0 kage      (1000) kage      (1000)        0 2023-01-12 17:27:46.000000 kmport-2.0.8/kmport/
--rw-rw-r--   0 kage      (1000) kage      (1000)   159394 2023-01-12 17:25:18.000000 kmport-2.0.8/kmport/__init__.py
-drwxrwxr-x   0 kage      (1000) kage      (1000)        0 2023-01-12 17:27:46.000000 kmport-2.0.8/kmport.egg-info/
--rw-rw-r--   0 kage      (1000) kage      (1000)    31556 2023-01-12 17:27:46.000000 kmport-2.0.8/kmport.egg-info/PKG-INFO
--rw-rw-r--   0 kage      (1000) kage      (1000)      157 2023-01-12 17:27:46.000000 kmport-2.0.8/kmport.egg-info/SOURCES.txt
--rw-rw-r--   0 kage      (1000) kage      (1000)        1 2023-01-12 17:27:46.000000 kmport-2.0.8/kmport.egg-info/dependency_links.txt
--rw-rw-r--   0 kage      (1000) kage      (1000)        7 2023-01-12 17:27:46.000000 kmport-2.0.8/kmport.egg-info/top_level.txt
--rw-rw-r--   0 kage      (1000) kage      (1000)    25593 2022-12-30 02:48:56.000000 kmport-2.0.8/README.md
--rw-rw-r--   0 kage      (1000) kage      (1000)     1975 2022-03-19 17:08:26.000000 kmport-2.0.8/setup.py
--rw-rw-r--   0 kage      (1000) kage      (1000)    31556 2023-01-12 17:27:46.000000 kmport-2.0.8/PKG-INFO
--rw-rw-r--   0 kage      (1000) kage      (1000)       38 2023-01-12 17:27:46.000000 kmport-2.0.8/setup.cfg
+drwxrwxr-x   0 kage      (1000) kage      (1000)        0 2023-01-12 19:17:35.000000 kmport-2.0.9/
+drwxrwxr-x   0 kage      (1000) kage      (1000)        0 2023-01-12 19:17:35.000000 kmport-2.0.9/kmport/
+-rw-rw-r--   0 kage      (1000) kage      (1000)   160142 2023-01-12 19:14:43.000000 kmport-2.0.9/kmport/__init__.py
+drwxrwxr-x   0 kage      (1000) kage      (1000)        0 2023-01-12 19:17:35.000000 kmport-2.0.9/kmport.egg-info/
+-rw-rw-r--   0 kage      (1000) kage      (1000)    31556 2023-01-12 19:17:35.000000 kmport-2.0.9/kmport.egg-info/PKG-INFO
+-rw-rw-r--   0 kage      (1000) kage      (1000)      157 2023-01-12 19:17:35.000000 kmport-2.0.9/kmport.egg-info/SOURCES.txt
+-rw-rw-r--   0 kage      (1000) kage      (1000)        1 2023-01-12 19:17:35.000000 kmport-2.0.9/kmport.egg-info/dependency_links.txt
+-rw-rw-r--   0 kage      (1000) kage      (1000)        7 2023-01-12 19:17:35.000000 kmport-2.0.9/kmport.egg-info/top_level.txt
+-rw-rw-r--   0 kage      (1000) kage      (1000)    25593 2022-12-30 02:48:56.000000 kmport-2.0.9/README.md
+-rw-rw-r--   0 kage      (1000) kage      (1000)     1975 2022-03-19 17:08:26.000000 kmport-2.0.9/setup.py
+-rw-rw-r--   0 kage      (1000) kage      (1000)    31556 2023-01-12 19:17:35.000000 kmport-2.0.9/PKG-INFO
+-rw-rw-r--   0 kage      (1000) kage      (1000)       38 2023-01-12 19:17:35.000000 kmport-2.0.9/setup.cfg
```

### Comparing `kmport-2.0.8/kmport/__init__.py` & `kmport-2.0.9/kmport/__init__.py`

 * *Files 0% similar despite different names*

```diff
@@ -4950,5014 +4950,5060 @@
 00013550: 746f 2069 6e70 7574 2064 6174 612e 2053  to input data. S
 00013560: 6f2c 2069 6e74 2069 6478 2063 616e 2067  o, int idx can g
 00013570: 6574 206b 6579 7328 6c69 7374 2920 6e61  et keys(list) na
 00013580: 6d65 0a20 2020 2020 205f 7479 7065 5f20  me.      _type_ 
 00013590: 203a 2064 6566 696e 6520 746f 2069 6e70   : define to inp
 000135a0: 7574 2064 6174 6127 7320 6461 7461 2066  ut data's data f
 000135b0: 6f72 6d61 7420 2865 783a 2028 6c69 7374  ormat (ex: (list
-000135c0: 2c74 7570 6c65 2929 0a20 2020 2027 2727  ,tuple)).    '''
-000135d0: 0a20 2020 2064 6566 6175 6c74 3d6f 7074  .    default=opt
-000135e0: 732e 6765 7428 2764 6566 6175 6c74 2729  s.get('default')
-000135f0: 0a20 2020 2065 7272 3d6f 7074 732e 6765  .    err=opts.ge
-00013600: 7428 2765 7272 272c 6f70 7473 2e67 6574  t('err',opts.get
-00013610: 2827 6572 726f 7227 2c46 616c 7365 2929  ('error',False))
-00013620: 0a20 2020 2066 696c 6c5f 7570 3d6f 7074  .    fill_up=opt
-00013630: 732e 6765 7428 2766 696c 6c5f 7570 272c  s.get('fill_up',
-00013640: 275f 6641 6c73 455f 2729 0a20 2020 2069  '_fAlsE_').    i
-00013650: 6478 5f6f 6e6c 793d 6f70 7473 2e67 6574  dx_only=opts.get
-00013660: 2827 6964 785f 6f6e 6c79 272c 6f70 7473  ('idx_only',opts
-00013670: 2e67 6574 2827 696e 6465 785f 6f6e 6c79  .get('index_only
-00013680: 272c 4661 6c73 6529 290a 2020 2020 5f74  ',False)).    _t
-00013690: 7970 653d 6f70 7473 2e67 6574 2827 5f74  ype=opts.get('_t
-000136a0: 7970 655f 272c 6f70 7473 2e67 6574 2827  ype_',opts.get('
-000136b0: 7479 7065 2729 290a 2020 2020 6f75 743d  type')).    out=
-000136c0: 6f70 7473 2e67 6574 2827 6f75 7427 2c6f  opts.get('out',o
-000136d0: 7074 732e 6765 7428 276f 7574 5f66 6f72  pts.get('out_for
-000136e0: 6d27 2c27 7261 7727 2929 0a20 2020 2070  m','raw')).    p
-000136f0: 6565 6c3d 6f70 7473 2e67 6574 2827 7065  eel=opts.get('pe
-00013700: 656c 2729 0a0a 2020 2020 6966 206c 656e  el')..    if len
-00013710: 2869 6e70 7329 203d 3d20 303a 0a20 2020  (inps) == 0:.   
-00013720: 2020 2020 2072 6574 7572 6e20 4465 6661       return Defa
-00013730: 756c 7428 696e 7073 2c64 6566 6175 6c74  ult(inps,default
-00013740: 290a 2020 2020 6966 206c 656e 2869 6e70  ).    if len(inp
-00013750: 7329 203d 3d20 313a 0a20 2020 2020 2020  s) == 1:.       
-00013760: 2069 6620 696e 7073 5b30 5d20 696e 205b   if inps[0] in [
-00013770: 2777 686f 616d 6927 2c27 6d79 6e61 6d65  'whoami','myname
-00013780: 272c 2766 756e 636e 616d 6527 2c27 6675  ','funcname','fu
-00013790: 6e63 7469 6f6e 6e61 6d65 272c 2746 756e  nctionname','Fun
-000137a0: 6374 696f 6e4e 616d 6527 5d3a 0a20 2020  ctionName']:.   
-000137b0: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-000137c0: 4675 6e63 7469 6f6e 4e61 6d65 2870 6172  FunctionName(par
-000137d0: 656e 743d 6f70 7473 2e67 6574 2827 7061  ent=opts.get('pa
-000137e0: 7265 6e74 272c 3129 2920 2320 6d79 2070  rent',1)) # my p
-000137f0: 6172 656e 7427 7320 6675 6e63 7469 6f6e  arent's function
-00013800: 206e 616d 650a 2020 2020 2020 2020 656c   name.        el
-00013810: 6966 2069 7369 6e73 7461 6e63 6528 696e  if isinstance(in
-00013820: 7073 5b30 5d2c 7374 7229 3a0a 2020 2020  ps[0],str):.    
-00013830: 2020 2020 2020 2020 6966 2069 6e70 735b          if inps[
-00013840: 305d 2e6c 6f77 6572 2829 2069 6e20 5b27  0].lower() in ['
-00013850: 6675 6e63 272c 2766 756e 6374 696f 6e27  func','function'
-00013860: 2c27 6675 6e63 7469 6f6e 7327 2c27 6675  ,'functions','fu
-00013870: 6e63 6c69 7374 272c 2766 756e 635f 6c69  nclist','func_li
-00013880: 7374 272c 276c 6973 7427 5d3a 0a20 2020  st','list']:.   
-00013890: 2020 2020 2020 2020 2020 2020 2072 6574               ret
-000138a0: 7572 6e20 4675 6e63 7469 6f6e 4c69 7374  urn FunctionList
-000138b0: 2870 6172 656e 743d 6f70 7473 2e67 6574  (parent=opts.get
-000138c0: 2827 7061 7265 6e74 272c 2d31 2929 2023  ('parent',-1)) #
-000138d0: 2064 6566 6175 6c74 3a20 6d79 2070 6167   default: my pag
-000138e0: 6527 7320 6675 6e63 7469 6f6e 206c 6973  e's function lis
-000138f0: 740a 2020 2020 2020 2020 2020 2020 7265  t.            re
-00013900: 7475 726e 2056 6172 6961 626c 6528 696e  turn Variable(in
-00013910: 7073 5b30 5d2c 7061 7265 6e74 3d6f 7074  ps[0],parent=opt
-00013920: 732e 6765 7428 2770 6172 656e 7427 2c31  s.get('parent',1
-00013930: 2929 2023 206d 7920 7061 7265 6e74 2773  )) # my parent's
-00013940: 2076 6172 6961 626c 650a 2020 2020 696e   variable.    in
-00013950: 7073 3d6c 6973 7428 696e 7073 290a 2020  ps=list(inps).  
-00013960: 2020 6f62 6a3d 696e 7073 5b30 5d0a 2020    obj=inps[0].  
-00013970: 2020 6966 2049 734e 6f6e 6528 6f62 6a29    if IsNone(obj)
-00013980: 3a0a 2020 2020 2020 2020 7265 7475 726e  :.        return
-00013990: 2044 6566 6175 6c74 286f 626a 2c64 6566   Default(obj,def
-000139a0: 6175 6c74 290a 2020 2020 6465 6c20 696e  ault).    del in
-000139b0: 7073 5b30 5d0a 2020 2020 6966 206c 656e  ps[0].    if len
-000139c0: 2869 6e70 7329 203d 3d20 313a 0a20 2020  (inps) == 1:.   
-000139d0: 2020 2020 2069 6478 3d69 6e70 735b 305d       idx=inps[0]
-000139e0: 0a20 2020 2065 6c69 6620 6c65 6e28 696e  .    elif len(in
-000139f0: 7073 2920 3e20 313a 0a20 2020 2020 2020  ps) > 1:.       
-00013a00: 2069 6478 3d69 6e70 735b 3a5d 0a20 2020   idx=inps[:].   
-00013a10: 2065 6c73 653a 0a20 2020 2020 2020 2069   else:.        i
-00013a20: 6478 3d4e 6f6e 650a 2020 2020 2357 6865  dx=None.    #Whe
-00013a30: 6e20 6368 6563 6b20 7479 7065 0a20 2020  n check type.   
-00013a40: 2069 6620 5f74 7970 6520 6973 206e 6f74   if _type is not
-00013a50: 204e 6f6e 653a 0a20 2020 2020 2020 2069   None:.        i
-00013a60: 6620 6e6f 7420 5479 7065 286f 626a 2c5f  f not Type(obj,_
-00013a70: 7479 7065 293a 0a20 2020 2020 2020 2020  type):.         
-00013a80: 2020 2072 6574 7572 6e20 4465 6661 756c     return Defaul
-00013a90: 7428 6f62 6a2c 6465 6661 756c 7429 0a20  t(obj,default). 
-00013aa0: 2020 206f 6b2c 6e69 6478 3d49 6e64 6578     ok,nidx=Index
-00013ab0: 466f 726d 2869 6478 2c69 6478 5f6f 6e6c  Form(idx,idx_onl
-00013ac0: 793d 6964 785f 6f6e 6c79 290a 2020 2020  y=idx_only).    
-00013ad0: 6964 785f 7479 7065 3d54 7970 654e 616d  idx_type=TypeNam
-00013ae0: 6528 6e69 6478 290a 2020 2020 6966 206f  e(nidx).    if o
-00013af0: 626a 203d 3d20 275f 7468 6973 5f27 3a0a  bj == '_this_':.
-00013b00: 2020 2020 2020 2020 6f62 6a5f 7479 7065          obj_type
-00013b10: 3d27 6675 6e63 7469 6f6e 270a 2020 2020  ='function'.    
-00013b20: 656c 7365 3a0a 2020 2020 2020 2020 6f62  else:.        ob
-00013b30: 6a5f 7479 7065 3d54 7970 654e 616d 6528  j_type=TypeName(
-00013b40: 6f62 6a29 0a20 2020 2064 6566 205f 6d61  obj).    def _ma
-00013b50: 785f 286f 626a 2c69 6478 2c65 7272 3d54  x_(obj,idx,err=T
-00013b60: 7275 6529 3a0a 2020 2020 2020 2020 6f62  rue):.        ob
-00013b70: 6a5f 6c65 6e3d 6c65 6e28 6f62 6a29 0a20  j_len=len(obj). 
-00013b80: 2020 2020 2020 2069 6620 6f62 6a5f 6c65         if obj_le
-00013b90: 6e20 3d3d 2030 3a20 7265 7475 726e 204e  n == 0: return N
-00013ba0: 6f6e 650a 2020 2020 2020 2020 6966 2074  one.        if t
-00013bb0: 7970 6528 6964 7829 2e5f 5f6e 616d 655f  ype(idx).__name_
-00013bc0: 5f20 213d 2027 696e 7427 3a0a 2020 2020  _ != 'int':.    
-00013bd0: 2020 2020 2020 2020 6966 2065 7272 2069          if err i
-00013be0: 7320 5472 7565 3a20 7265 7475 726e 2046  s True: return F
-00013bf0: 616c 7365 0a20 2020 2020 2020 2020 2020  alse.           
-00013c00: 2072 6574 7572 6e20 6f62 6a5f 6c65 6e2d   return obj_len-
-00013c10: 310a 2020 2020 2020 2020 6966 2069 6478  1.        if idx
-00013c20: 203e 3d20 303a 0a20 2020 2020 2020 2020   >= 0:.         
-00013c30: 2020 2069 6620 6f62 6a5f 6c65 6e20 3c3d     if obj_len <=
-00013c40: 2069 6478 3a0a 2020 2020 2020 2020 2020   idx:.          
-00013c50: 2020 2020 2020 6966 2065 7272 2069 7320        if err is 
-00013c60: 5472 7565 3a20 7265 7475 726e 2046 616c  True: return Fal
-00013c70: 7365 0a20 2020 2020 2020 2020 2020 2020  se.             
-00013c80: 2020 2072 6574 7572 6e20 6f62 6a5f 6c65     return obj_le
-00013c90: 6e2d 310a 2020 2020 2020 2020 2020 2020  n-1.            
-00013ca0: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
-00013cb0: 2020 2020 2020 7265 7475 726e 2069 6478        return idx
-00013cc0: 0a20 2020 2020 2020 2065 6c73 653a 0a20  .        else:. 
-00013cd0: 2020 2020 2020 2020 2020 2069 6620 6f62             if ob
-00013ce0: 6a5f 6c65 6e20 3c20 6162 7328 6964 7829  j_len < abs(idx)
-00013cf0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00013d00: 2020 6966 2065 7272 2069 7320 5472 7565    if err is True
-00013d10: 3a20 7265 7475 726e 2046 616c 7365 0a20  : return False. 
-00013d20: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-00013d30: 6574 7572 6e20 300a 2020 2020 2020 2020  eturn 0.        
-00013d40: 2020 2020 7265 7475 726e 2069 6478 0a20      return idx. 
-00013d50: 2020 2020 2020 200a 2020 2020 6966 206f         .    if o
-00013d60: 6b20 616e 6420 6f62 6a5f 7479 7065 2069  k and obj_type i
-00013d70: 6e20 2827 6c69 7374 272c 2774 7570 6c65  n ('list','tuple
-00013d80: 272c 2773 7472 272c 2762 7974 6573 2729  ','str','bytes')
-00013d90: 3a0a 2020 2020 2020 2020 6966 2069 6478  :.        if idx
-00013da0: 5f74 7970 6520 3d3d 2027 7475 706c 6527  _type == 'tuple'
-00013db0: 3a0a 2020 2020 2020 2020 2020 2020 7373  :.            ss
-00013dc0: 3d5f 6d61 785f 286f 626a 2c49 6e74 286e  =_max_(obj,Int(n
-00013dd0: 6964 785b 305d 292c 6572 7229 0a20 2020  idx[0]),err).   
-00013de0: 2020 2020 2020 2020 2065 653d 5f6d 6178           ee=_max
-00013df0: 5f28 6f62 6a2c 496e 7428 6e69 6478 5b31  _(obj,Int(nidx[1
-00013e00: 5d29 2c65 7272 290a 2020 2020 2020 2020  ]),err).        
-00013e10: 2020 2020 6966 2054 7970 6528 7373 2c69      if Type(ss,i
-00013e20: 6e74 2920 616e 6420 5479 7065 2865 652c  nt) and Type(ee,
-00013e30: 696e 7429 3a0a 2020 2020 2020 2020 2020  int):.          
-00013e40: 2020 2020 2020 7265 7475 726e 206f 626a        return obj
-00013e50: 5b73 733a 6565 2b31 5d0a 2020 2020 2020  [ss:ee+1].      
-00013e60: 2020 656c 6966 2069 6478 5f74 7970 6520    elif idx_type 
-00013e70: 3d3d 2027 6c69 7374 273a 0a20 2020 2020  == 'list':.     
-00013e80: 2020 2020 2020 2072 743d 5b5d 0a20 2020         rt=[].   
-00013e90: 2020 2020 2020 2020 2066 6f72 2069 2069           for i i
-00013ea0: 6e20 6e69 6478 3a0a 2020 2020 2020 2020  n nidx:.        
-00013eb0: 2020 2020 2020 2020 2369 6620 6e6f 7420          #if not 
-00013ec0: 4973 496e 7428 6929 3a0a 2020 2020 2020  IsInt(i):.      
-00013ed0: 2020 2020 2020 2020 2020 2320 2020 2069            #    i
-00013ee0: 6620 6669 6c6c 5f75 7020 3d3d 2027 5f66  f fill_up == '_f
-00013ef0: 416c 7345 5f27 3a0a 2020 2020 2020 2020  AlsE_':.        
-00013f00: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00013f10: 2063 6f6e 7469 6e75 650a 2020 2020 2020   continue.      
-00013f20: 2020 2020 2020 2020 2020 2320 2020 2065            #    e
-00013f30: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
-00013f40: 2020 2020 2023 2020 2020 2020 2020 7274       #        rt
-00013f50: 2e61 7070 656e 6428 6669 6c6c 5f75 7029  .append(fill_up)
-00013f60: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00013f70: 2069 783d 5f6d 6178 5f28 6f62 6a2c 496e   ix=_max_(obj,In
-00013f80: 7428 692c 6465 6661 756c 743d 4661 6c73  t(i,default=Fals
-00013f90: 652c 6572 723d 5472 7565 292c 6572 7229  e,err=True),err)
-00013fa0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00013fb0: 2069 6620 5479 7065 2869 782c 696e 7429   if Type(ix,int)
-00013fc0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00013fd0: 2020 2020 2020 7274 2e61 7070 656e 6428        rt.append(
-00013fe0: 6f62 6a5b 6978 5d29 0a20 2020 2020 2020  obj[ix]).       
-00013ff0: 2020 2020 2020 2020 2065 6c69 6620 6669           elif fi
-00014000: 6c6c 5f75 7020 213d 2027 5f66 416c 7345  ll_up != '_fAlsE
-00014010: 5f27 3a0a 2020 2020 2020 2020 2020 2020  _':.            
-00014020: 2020 2020 2020 2020 7274 2e61 7070 656e          rt.appen
-00014030: 6428 6669 6c6c 5f75 7029 0a20 2020 2020  d(fill_up).     
-00014040: 2020 2020 2020 2072 6574 7572 6e20 4f75         return Ou
-00014050: 7446 6f72 6d61 7428 7274 2c6f 7574 3d6f  tFormat(rt,out=o
-00014060: 7574 2c64 6566 6175 6c74 3d64 6566 6175  ut,default=defau
-00014070: 6c74 2c6f 7267 3d6f 626a 2c70 6565 6c3d  lt,org=obj,peel=
-00014080: 7065 656c 290a 2020 2020 2020 2020 656c  peel).        el
-00014090: 6966 2069 6478 5f74 7970 6520 3d3d 2027  if idx_type == '
-000140a0: 696e 7427 3a0a 2020 2020 2020 2020 2020  int':.          
-000140b0: 2020 6978 3d5f 6d61 785f 286f 626a 2c6e    ix=_max_(obj,n
-000140c0: 6964 782c 6572 7229 0a20 2020 2020 2020  idx,err).       
-000140d0: 2020 2020 2069 6620 5479 7065 2869 782c       if Type(ix,
-000140e0: 696e 7429 3a20 7265 7475 726e 206f 626a  int): return obj
-000140f0: 5b69 785d 0a20 2020 2020 2020 2072 6574  [ix].        ret
-00014100: 7572 6e20 4465 6661 756c 7428 6f62 6a2c  urn Default(obj,
-00014110: 6465 6661 756c 7429 0a20 2020 2065 6c69  default).    eli
-00014120: 6620 6f62 6a5f 7479 7065 2069 6e20 2827  f obj_type in ('
-00014130: 6469 6374 2729 3a0a 2020 2020 2020 2020  dict'):.        
-00014140: 6966 206f 6b20 6973 2054 7275 653a 0a20  if ok is True:. 
-00014150: 2020 2020 2020 2020 2020 206f 626a 5f69             obj_i
-00014160: 7465 6d73 3d6c 6973 7428 6f62 6a2e 6974  tems=list(obj.it
-00014170: 656d 7328 2929 0a20 2020 2020 2020 2020  ems()).         
-00014180: 2020 2069 6620 6964 785f 7479 7065 203d     if idx_type =
-00014190: 3d20 2774 7570 6c65 273a 2023 5261 6e67  = 'tuple': #Rang
-000141a0: 6520 496e 6465 780a 2020 2020 2020 2020  e Index.        
-000141b0: 2020 2020 2020 2020 7373 3d5f 6d61 785f          ss=_max_
-000141c0: 286f 626a 5f69 7465 6d73 2c49 6e74 286e  (obj_items,Int(n
-000141d0: 6964 785b 305d 292c 6572 7229 0a20 2020  idx[0]),err).   
-000141e0: 2020 2020 2020 2020 2020 2020 2065 653d               ee=
-000141f0: 5f6d 6178 5f28 6f62 6a5f 6974 656d 732c  _max_(obj_items,
-00014200: 496e 7428 6e69 6478 5b31 5d29 2c65 7272  Int(nidx[1]),err
-00014210: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-00014220: 2020 6966 2054 7970 6528 7373 2c69 6e74    if Type(ss,int
-00014230: 2920 616e 6420 5479 7065 2865 652c 696e  ) and Type(ee,in
-00014240: 7429 3a0a 2020 2020 2020 2020 2020 2020  t):.            
-00014250: 2020 2020 2020 2020 7265 7475 726e 2064          return d
-00014260: 6963 7428 6f62 6a5f 6974 656d 735b 7373  ict(obj_items[ss
-00014270: 3a65 652b 315d 290a 2020 2020 2020 2020  :ee+1]).        
-00014280: 2020 2020 656c 6966 2069 6478 5f74 7970      elif idx_typ
-00014290: 6520 3d3d 2027 6c69 7374 273a 2023 4f52  e == 'list': #OR
-000142a0: 2049 6e64 6578 0a20 2020 2020 2020 2020   Index.         
-000142b0: 2020 2020 2020 2072 743d 5b5d 0a20 2020         rt=[].   
-000142c0: 2020 2020 2020 2020 2020 2020 2066 6f72               for
-000142d0: 2069 2069 6e20 6e69 6478 3a0a 2020 2020   i in nidx:.    
-000142e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000142f0: 6966 2069 6478 5f6f 6e6c 793a 0a20 2020  if idx_only:.   
-00014300: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00014310: 2020 2020 2069 783d 5f6d 6178 5f28 6f62       ix=_max_(ob
-00014320: 6a5f 6974 656d 732c 496e 7428 692c 6465  j_items,Int(i,de
-00014330: 6661 756c 743d 4661 6c73 652c 6572 723d  fault=False,err=
-00014340: 5472 7565 292c 6572 7229 0a20 2020 2020  True),err).     
-00014350: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00014360: 2020 2069 6620 5479 7065 2869 782c 696e     if Type(ix,in
-00014370: 7429 3a0a 2020 2020 2020 2020 2020 2020  t):.            
-00014380: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00014390: 7274 2e61 7070 656e 6428 6f62 6a5f 6974  rt.append(obj_it
-000143a0: 656d 735b 6978 5d29 0a20 2020 2020 2020  ems[ix]).       
-000143b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000143c0: 2065 6c69 6620 6669 6c6c 5f75 7020 213d   elif fill_up !=
-000143d0: 2027 5f66 416c 7345 5f27 3a0a 2020 2020   '_fAlsE_':.    
-000143e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000143f0: 2020 2020 2020 2020 7274 2e61 7070 656e          rt.appen
-00014400: 6428 6669 6c6c 5f75 7029 0a20 2020 2020  d(fill_up).     
-00014410: 2020 2020 2020 2020 2020 2020 2020 2065                 e
-00014420: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
-00014430: 2020 2020 2020 2020 2020 2020 2074 3d6f               t=o
-00014440: 626a 2e67 6574 2869 290a 2020 2020 2020  bj.get(i).      
-00014450: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00014460: 2020 6966 2074 2069 7320 6e6f 7420 4e6f    if t is not No
-00014470: 6e65 3a20 7274 2e61 7070 656e 6428 7429  ne: rt.append(t)
-00014480: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00014490: 2072 6574 7572 6e20 4f75 7446 6f72 6d61   return OutForma
-000144a0: 7428 7274 2c6f 7574 3d6f 7574 2c64 6566  t(rt,out=out,def
-000144b0: 6175 6c74 3d64 6566 6175 6c74 2c6f 7267  ault=default,org
-000144c0: 3d6f 626a 2c70 6565 6c3d 7065 656c 290a  =obj,peel=peel).
-000144d0: 2020 2020 2020 2020 2020 2020 656c 7365              else
-000144e0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-000144f0: 2020 6966 2069 6478 5f6f 6e6c 793a 0a20    if idx_only:. 
-00014500: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00014510: 2020 2069 783d 5f6d 6178 5f28 6f62 6a5f     ix=_max_(obj_
-00014520: 6974 656d 732c 496e 7428 6964 7829 2c65  items,Int(idx),e
-00014530: 7272 290a 2020 2020 2020 2020 2020 2020  rr).            
-00014540: 2020 2020 2020 2020 6966 2054 7970 6528          if Type(
-00014550: 6978 2c69 6e74 293a 2072 6574 7572 6e20  ix,int): return 
-00014560: 6f62 6a5f 6974 656d 735b 6978 5d0a 2020  obj_items[ix].  
-00014570: 2020 2020 2020 2020 2020 2020 2020 7265                re
-00014580: 7475 726e 206f 626a 2e67 6574 2869 6478  turn obj.get(idx
-00014590: 2c44 6566 6175 6c74 286f 626a 2c64 6566  ,Default(obj,def
-000145a0: 6175 6c74 2929 0a20 2020 2020 2020 2065  ault)).        e
-000145b0: 6c69 6620 6f6b 2069 7320 4e6f 6e65 3a20  lif ok is None: 
-000145c0: 2350 6174 6820 496e 6465 780a 2020 2020  #Path Index.    
-000145d0: 2020 2020 2020 2020 666f 7220 6920 696e          for i in
-000145e0: 206e 6964 783a 0a20 2020 2020 2020 2020   nidx:.         
-000145f0: 2020 2020 2020 2069 6620 6920 6e6f 7420         if i not 
-00014600: 696e 206f 626a 3a20 7265 7475 726e 2044  in obj: return D
-00014610: 6566 6175 6c74 286f 626a 2c64 6566 6175  efault(obj,defau
-00014620: 6c74 290a 2020 2020 2020 2020 2020 2020  lt).            
-00014630: 2020 2020 6f62 6a3d 6f62 6a5b 695d 0a20      obj=obj[i]. 
-00014640: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-00014650: 6e20 6f62 6a0a 2020 2020 2020 2020 7265  n obj.        re
-00014660: 7475 726e 2044 6566 6175 6c74 286f 626a  turn Default(obj
-00014670: 2c64 6566 6175 6c74 290a 2020 2020 656c  ,default).    el
-00014680: 6966 206f 626a 5f74 7970 6520 696e 2028  if obj_type in (
-00014690: 2766 756e 6374 696f 6e27 293a 2023 3f3f  'function'): #??
-000146a0: 3f0a 2020 2020 2020 2020 6966 206f 6b3a  ?.        if ok:
-000146b0: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-000146c0: 6964 785f 7479 7065 203d 3d20 2773 7472  idx_type == 'str
-000146d0: 273a 0a20 2020 2020 2020 2020 2020 2020  ':.             
-000146e0: 2020 2069 6620 6e69 6478 2e6c 6f77 6572     if nidx.lower
-000146f0: 2829 2069 6e20 5b27 6172 6773 272c 2761  () in ['args','a
-00014700: 7267 756d 656e 7473 275d 3a0a 2020 2020  rguments']:.    
-00014710: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00014720: 6966 206f 626a 203d 3d20 275f 7468 6973  if obj == '_this
-00014730: 5f27 3a0a 2020 2020 2020 2020 2020 2020  _':.            
-00014740: 2020 2020 2020 2020 2020 2020 6f62 6a3d              obj=
-00014750: 696e 7370 6563 742e 6765 746d 656d 6265  inspect.getmembe
-00014760: 7273 284d 794d 6f64 756c 6528 2929 2e67  rs(MyModule()).g
-00014770: 6574 2843 616c 6c65 724e 616d 6528 2929  et(CallerName())
-00014780: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00014790: 2020 2020 2072 6574 7572 6e20 4675 6e63       return Func
-000147a0: 7469 6f6e 4172 6773 286f 626a 290a 2020  tionArgs(obj).  
-000147b0: 2020 2020 2020 2020 2020 2020 2020 656c                el
-000147c0: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
-000147d0: 2020 2020 2020 2020 6966 206f 626a 203d          if obj =
-000147e0: 3d20 275f 7468 6973 5f27 3a0a 2020 2020  = '_this_':.    
-000147f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00014800: 2020 2020 7265 7475 726e 2056 6172 6961      return Varia
-00014810: 626c 6528 6e69 6478 2c70 6172 656e 743d  ble(nidx,parent=
-00014820: 3129 0a20 2020 2020 2020 2020 2020 2020  1).             
-00014830: 2020 2020 2020 2072 6574 7572 6e20 5661         return Va
-00014840: 7261 626c 6528 6e69 6478 2c6f 626a 290a  rable(nidx,obj).
-00014850: 2020 2020 2020 2020 2020 2020 656c 6966              elif
-00014860: 2069 6478 5f74 7970 6520 3d3d 2027 6c69   idx_type == 'li
-00014870: 7374 273a 0a20 2020 2020 2020 2020 2020  st':.           
-00014880: 2020 2020 2072 743d 5b5d 0a20 2020 2020       rt=[].     
-00014890: 2020 2020 2020 2020 2020 2066 6f72 2069             for i
-000148a0: 2069 6e20 6e69 6478 3a0a 2020 2020 2020   in nidx:.      
-000148b0: 2020 2020 2020 2020 2020 2020 2020 6966                if
-000148c0: 2054 7970 6528 692c 7374 7229 2061 6e64   Type(i,str) and
-000148d0: 2069 2e6c 6f77 6572 2829 2069 6e20 5b27   i.lower() in ['
-000148e0: 6172 6773 272c 2761 7267 756d 656e 7473  args','arguments
-000148f0: 275d 3a0a 2020 2020 2020 2020 2020 2020  ']:.            
-00014900: 2020 2020 2020 2020 2020 2020 6966 206f              if o
-00014910: 626a 203d 3d20 275f 7468 6973 5f27 3a0a  bj == '_this_':.
-00014920: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00014930: 2020 2020 2020 2020 2020 2020 6f62 6a32              obj2
-00014940: 3d69 6e73 7065 6374 2e67 6574 6d65 6d62  =inspect.getmemb
-00014950: 6572 7328 4d79 4d6f 6475 6c65 2829 292e  ers(MyModule()).
-00014960: 6765 7428 4361 6c6c 6572 4e61 6d65 2829  get(CallerName()
-00014970: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-00014980: 2020 2020 2020 2020 2020 2020 2020 7274                rt
-00014990: 2e61 7070 656e 6428 4675 6e63 7469 6f6e  .append(Function
-000149a0: 4172 6773 286f 626a 3229 290a 2020 2020  Args(obj2)).    
-000149b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000149c0: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
-000149d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000149e0: 2020 2020 2020 7274 2e61 7070 656e 6428        rt.append(
-000149f0: 4675 6e63 7469 6f6e 4172 6773 286f 626a  FunctionArgs(obj
-00014a00: 2929 0a20 2020 2020 2020 2020 2020 2020  )).             
-00014a10: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
+000135c0: 2c74 7570 6c65 2929 0a20 2020 2020 206d  ,tuple)).      m
+000135d0: 6574 686f 6420 203a 2069 6620 696e 7075  ethod  : if inpu
+000135e0: 7420 6973 2072 6571 7565 7374 2074 6865  t is request the
+000135f0: 6e20 6361 6e20 6465 6669 6e65 206d 6574  n can define met
+00013600: 686f 6428 2747 4554 272c 2750 4f53 5427  hod('GET','POST'
+00013610: 2c2e 2e2e 290a 2020 2020 2020 7374 7269  ,...).      stri
+00013620: 7020 2020 3a20 6465 6661 756c 743a 2046  p   : default: F
+00013630: 616c 7365 2c20 6974 2063 616e 2073 7472  alse, it can str
+00013640: 6970 2077 6869 7465 2073 7061 6365 0a20  ip white space. 
+00013650: 2020 2020 2070 6565 6c20 2020 203a 200a       peel    : .
+00013660: 2020 2020 2020 2020 2020 666f 7263 653a            force:
+00013670: 206a 7573 7420 7461 6b65 2066 6972 7374   just take first
+00013680: 2064 6174 6120 696e 2074 6865 206c 6973   data in the lis
+00013690: 742c 7475 706c 6520 2869 6620 6461 7461  t,tuple (if data
+000136a0: 2066 6f72 6d61 7420 6861 7320 616e 7920   format has any 
+000136b0: 666f 726d 2061 6c73 6f20 4f4b 2c20 6a75  form also OK, ju
+000136c0: 7374 2072 6574 7572 6e20 7468 6520 6461  st return the da
+000136d0: 7461 290a 2020 2020 2020 2020 2020 5472  ta).          Tr
+000136e0: 7565 203a 2073 696e 676c 6520 6461 7461  ue : single data
+000136f0: 286c 6973 742c 7475 706c 652c 6469 6374  (list,tuple,dict
+00013700: 2920 7468 656e 2070 6565 6c20 746f 2064  ) then peel to d
+00013710: 6174 6120 2869 6620 6461 7461 2066 6f72  ata (if data for
+00013720: 6d61 7420 6973 206c 6973 742c 7475 706c  mat is list,tupl
+00013730: 652c 6469 6374 2e2e 2e20 7468 656e 2072  e,dict... then r
+00013740: 6574 7572 6e20 6465 6661 756c 7429 0a20  eturn default). 
+00013750: 2020 2020 2020 2020 2046 616c 7365 3a20           False: 
+00013760: 7265 7475 726e 2066 6f75 6e64 6564 2064  return founded d
+00013770: 6174 6120 2861 6e79 2066 6f72 6d61 7429  ata (any format)
+00013780: 0a20 2020 2020 206f 7574 2020 2020 203a  .      out     :
+00013790: 2064 6566 696e 6520 746f 206f 7574 7075   define to outpu
+000137a0: 7420 6461 7461 2028 6c69 7374 2d3e 206f  t data (list-> o
+000137b0: 7574 7075 7420 7769 6c6c 206c 6973 742c  utput will list,
+000137c0: 202e 2e2e 292c 2069 6620 7772 6f6e 6720   ...), if wrong 
+000137d0: 666f 726d 6174 2074 6865 6e20 7265 7475  format then retu
+000137e0: 726e 2064 6566 6175 6c74 0a20 2020 2027  rn default.    '
+000137f0: 2727 0a20 2020 2064 6566 6175 6c74 3d6f  ''.    default=o
+00013800: 7074 732e 6765 7428 2764 6566 6175 6c74  pts.get('default
+00013810: 2729 0a20 2020 2065 7272 3d6f 7074 732e  ').    err=opts.
+00013820: 6765 7428 2765 7272 272c 6f70 7473 2e67  get('err',opts.g
+00013830: 6574 2827 6572 726f 7227 2c46 616c 7365  et('error',False
+00013840: 2929 0a20 2020 2066 696c 6c5f 7570 3d6f  )).    fill_up=o
+00013850: 7074 732e 6765 7428 2766 696c 6c5f 7570  pts.get('fill_up
+00013860: 272c 275f 6641 6c73 455f 2729 0a20 2020  ','_fAlsE_').   
+00013870: 2069 6478 5f6f 6e6c 793d 6f70 7473 2e67   idx_only=opts.g
+00013880: 6574 2827 6964 785f 6f6e 6c79 272c 6f70  et('idx_only',op
+00013890: 7473 2e67 6574 2827 696e 6465 785f 6f6e  ts.get('index_on
+000138a0: 6c79 272c 4661 6c73 6529 290a 2020 2020  ly',False)).    
+000138b0: 5f74 7970 653d 6f70 7473 2e67 6574 2827  _type=opts.get('
+000138c0: 5f74 7970 655f 272c 6f70 7473 2e67 6574  _type_',opts.get
+000138d0: 2827 7479 7065 2729 290a 2020 2020 6f75  ('type')).    ou
+000138e0: 743d 6f70 7473 2e67 6574 2827 6f75 7427  t=opts.get('out'
+000138f0: 2c6f 7074 732e 6765 7428 276f 7574 5f66  ,opts.get('out_f
+00013900: 6f72 6d27 2c27 7261 7727 2929 0a20 2020  orm','raw')).   
+00013910: 2070 6565 6c3d 6f70 7473 2e67 6574 2827   peel=opts.get('
+00013920: 7065 656c 2729 0a20 2020 2073 7472 6970  peel').    strip
+00013930: 3d6f 7074 732e 6765 7428 2773 7472 6970  =opts.get('strip
+00013940: 272c 4661 6c73 6529 0a0a 2020 2020 6966  ',False)..    if
+00013950: 206c 656e 2869 6e70 7329 203d 3d20 303a   len(inps) == 0:
+00013960: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+00013970: 4465 6661 756c 7428 696e 7073 2c64 6566  Default(inps,def
+00013980: 6175 6c74 290a 2020 2020 6966 206c 656e  ault).    if len
+00013990: 2869 6e70 7329 203d 3d20 313a 0a20 2020  (inps) == 1:.   
+000139a0: 2020 2020 2069 6620 696e 7073 5b30 5d20       if inps[0] 
+000139b0: 696e 205b 2777 686f 616d 6927 2c27 6d79  in ['whoami','my
+000139c0: 6e61 6d65 272c 2766 756e 636e 616d 6527  name','funcname'
+000139d0: 2c27 6675 6e63 7469 6f6e 6e61 6d65 272c  ,'functionname',
+000139e0: 2746 756e 6374 696f 6e4e 616d 6527 5d3a  'FunctionName']:
+000139f0: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
+00013a00: 7572 6e20 4675 6e63 7469 6f6e 4e61 6d65  urn FunctionName
+00013a10: 2870 6172 656e 743d 6f70 7473 2e67 6574  (parent=opts.get
+00013a20: 2827 7061 7265 6e74 272c 3129 2920 2320  ('parent',1)) # 
+00013a30: 6d79 2070 6172 656e 7427 7320 6675 6e63  my parent's func
+00013a40: 7469 6f6e 206e 616d 650a 2020 2020 2020  tion name.      
+00013a50: 2020 656c 6966 2069 7369 6e73 7461 6e63    elif isinstanc
+00013a60: 6528 696e 7073 5b30 5d2c 7374 7229 3a0a  e(inps[0],str):.
+00013a70: 2020 2020 2020 2020 2020 2020 6966 2069              if i
+00013a80: 6e70 735b 305d 2e6c 6f77 6572 2829 2069  nps[0].lower() i
+00013a90: 6e20 5b27 6675 6e63 272c 2766 756e 6374  n ['func','funct
+00013aa0: 696f 6e27 2c27 6675 6e63 7469 6f6e 7327  ion','functions'
+00013ab0: 2c27 6675 6e63 6c69 7374 272c 2766 756e  ,'funclist','fun
+00013ac0: 635f 6c69 7374 272c 276c 6973 7427 5d3a  c_list','list']:
+00013ad0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00013ae0: 2072 6574 7572 6e20 4675 6e63 7469 6f6e   return Function
+00013af0: 4c69 7374 2870 6172 656e 743d 6f70 7473  List(parent=opts
+00013b00: 2e67 6574 2827 7061 7265 6e74 272c 2d31  .get('parent',-1
+00013b10: 2929 2023 2064 6566 6175 6c74 3a20 6d79  )) # default: my
+00013b20: 2070 6167 6527 7320 6675 6e63 7469 6f6e   page's function
+00013b30: 206c 6973 740a 2020 2020 2020 2020 2020   list.          
+00013b40: 2020 7265 7475 726e 2056 6172 6961 626c    return Variabl
+00013b50: 6528 696e 7073 5b30 5d2c 7061 7265 6e74  e(inps[0],parent
+00013b60: 3d6f 7074 732e 6765 7428 2770 6172 656e  =opts.get('paren
+00013b70: 7427 2c31 2929 2023 206d 7920 7061 7265  t',1)) # my pare
+00013b80: 6e74 2773 2076 6172 6961 626c 650a 2020  nt's variable.  
+00013b90: 2020 696e 7073 3d6c 6973 7428 696e 7073    inps=list(inps
+00013ba0: 290a 2020 2020 6f62 6a3d 696e 7073 5b30  ).    obj=inps[0
+00013bb0: 5d0a 2020 2020 6966 2049 734e 6f6e 6528  ].    if IsNone(
+00013bc0: 6f62 6a29 3a0a 2020 2020 2020 2020 7265  obj):.        re
+00013bd0: 7475 726e 2044 6566 6175 6c74 286f 626a  turn Default(obj
+00013be0: 2c64 6566 6175 6c74 290a 2020 2020 6465  ,default).    de
+00013bf0: 6c20 696e 7073 5b30 5d0a 2020 2020 6966  l inps[0].    if
+00013c00: 206c 656e 2869 6e70 7329 203d 3d20 313a   len(inps) == 1:
+00013c10: 0a20 2020 2020 2020 2069 6478 3d69 6e70  .        idx=inp
+00013c20: 735b 305d 0a20 2020 2065 6c69 6620 6c65  s[0].    elif le
+00013c30: 6e28 696e 7073 2920 3e20 313a 0a20 2020  n(inps) > 1:.   
+00013c40: 2020 2020 2069 6478 3d69 6e70 735b 3a5d       idx=inps[:]
+00013c50: 0a20 2020 2065 6c73 653a 0a20 2020 2020  .    else:.     
+00013c60: 2020 2069 6478 3d4e 6f6e 650a 2020 2020     idx=None.    
+00013c70: 2357 6865 6e20 6368 6563 6b20 7479 7065  #When check type
+00013c80: 0a20 2020 2069 6620 5f74 7970 6520 6973  .    if _type is
+00013c90: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
+00013ca0: 2020 2069 6620 6e6f 7420 5479 7065 286f     if not Type(o
+00013cb0: 626a 2c5f 7479 7065 293a 0a20 2020 2020  bj,_type):.     
+00013cc0: 2020 2020 2020 2072 6574 7572 6e20 4465         return De
+00013cd0: 6661 756c 7428 6f62 6a2c 6465 6661 756c  fault(obj,defaul
+00013ce0: 7429 0a20 2020 206f 6b2c 6e69 6478 3d49  t).    ok,nidx=I
+00013cf0: 6e64 6578 466f 726d 2869 6478 2c69 6478  ndexForm(idx,idx
+00013d00: 5f6f 6e6c 793d 6964 785f 6f6e 6c79 290a  _only=idx_only).
+00013d10: 2020 2020 6964 785f 7479 7065 3d54 7970      idx_type=Typ
+00013d20: 654e 616d 6528 6e69 6478 290a 2020 2020  eName(nidx).    
+00013d30: 6966 206f 626a 203d 3d20 275f 7468 6973  if obj == '_this
+00013d40: 5f27 3a0a 2020 2020 2020 2020 6f62 6a5f  _':.        obj_
+00013d50: 7479 7065 3d27 6675 6e63 7469 6f6e 270a  type='function'.
+00013d60: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+00013d70: 2020 6f62 6a5f 7479 7065 3d54 7970 654e    obj_type=TypeN
+00013d80: 616d 6528 6f62 6a29 0a20 2020 2064 6566  ame(obj).    def
+00013d90: 205f 6d61 785f 286f 626a 2c69 6478 2c65   _max_(obj,idx,e
+00013da0: 7272 3d54 7275 6529 3a0a 2020 2020 2020  rr=True):.      
+00013db0: 2020 6f62 6a5f 6c65 6e3d 6c65 6e28 6f62    obj_len=len(ob
+00013dc0: 6a29 0a20 2020 2020 2020 2069 6620 6f62  j).        if ob
+00013dd0: 6a5f 6c65 6e20 3d3d 2030 3a20 7265 7475  j_len == 0: retu
+00013de0: 726e 204e 6f6e 650a 2020 2020 2020 2020  rn None.        
+00013df0: 6966 2074 7970 6528 6964 7829 2e5f 5f6e  if type(idx).__n
+00013e00: 616d 655f 5f20 213d 2027 696e 7427 3a0a  ame__ != 'int':.
+00013e10: 2020 2020 2020 2020 2020 2020 6966 2065              if e
+00013e20: 7272 2069 7320 5472 7565 3a20 7265 7475  rr is True: retu
+00013e30: 726e 2046 616c 7365 0a20 2020 2020 2020  rn False.       
+00013e40: 2020 2020 2072 6574 7572 6e20 6f62 6a5f       return obj_
+00013e50: 6c65 6e2d 310a 2020 2020 2020 2020 6966  len-1.        if
+00013e60: 2069 6478 203e 3d20 303a 0a20 2020 2020   idx >= 0:.     
+00013e70: 2020 2020 2020 2069 6620 6f62 6a5f 6c65         if obj_le
+00013e80: 6e20 3c3d 2069 6478 3a0a 2020 2020 2020  n <= idx:.      
+00013e90: 2020 2020 2020 2020 2020 6966 2065 7272            if err
+00013ea0: 2069 7320 5472 7565 3a20 7265 7475 726e   is True: return
+00013eb0: 2046 616c 7365 0a20 2020 2020 2020 2020   False.         
+00013ec0: 2020 2020 2020 2072 6574 7572 6e20 6f62         return ob
+00013ed0: 6a5f 6c65 6e2d 310a 2020 2020 2020 2020  j_len-1.        
+00013ee0: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+00013ef0: 2020 2020 2020 2020 2020 7265 7475 726e            return
+00013f00: 2069 6478 0a20 2020 2020 2020 2065 6c73   idx.        els
+00013f10: 653a 0a20 2020 2020 2020 2020 2020 2069  e:.            i
+00013f20: 6620 6f62 6a5f 6c65 6e20 3c20 6162 7328  f obj_len < abs(
+00013f30: 6964 7829 3a0a 2020 2020 2020 2020 2020  idx):.          
+00013f40: 2020 2020 2020 6966 2065 7272 2069 7320        if err is 
+00013f50: 5472 7565 3a20 7265 7475 726e 2046 616c  True: return Fal
+00013f60: 7365 0a20 2020 2020 2020 2020 2020 2020  se.             
+00013f70: 2020 2072 6574 7572 6e20 300a 2020 2020     return 0.    
+00013f80: 2020 2020 2020 2020 7265 7475 726e 2069          return i
+00013f90: 6478 0a20 2020 2020 2020 200a 2020 2020  dx.        .    
+00013fa0: 6966 206f 6b20 616e 6420 6f62 6a5f 7479  if ok and obj_ty
+00013fb0: 7065 2069 6e20 2827 6c69 7374 272c 2774  pe in ('list','t
+00013fc0: 7570 6c65 272c 2773 7472 272c 2762 7974  uple','str','byt
+00013fd0: 6573 2729 3a0a 2020 2020 2020 2020 6966  es'):.        if
+00013fe0: 2069 6478 5f74 7970 6520 3d3d 2027 7475   idx_type == 'tu
+00013ff0: 706c 6527 3a0a 2020 2020 2020 2020 2020  ple':.          
+00014000: 2020 7373 3d5f 6d61 785f 286f 626a 2c49    ss=_max_(obj,I
+00014010: 6e74 286e 6964 785b 305d 292c 6572 7229  nt(nidx[0]),err)
+00014020: 0a20 2020 2020 2020 2020 2020 2065 653d  .            ee=
+00014030: 5f6d 6178 5f28 6f62 6a2c 496e 7428 6e69  _max_(obj,Int(ni
+00014040: 6478 5b31 5d29 2c65 7272 290a 2020 2020  dx[1]),err).    
+00014050: 2020 2020 2020 2020 6966 2054 7970 6528          if Type(
+00014060: 7373 2c69 6e74 2920 616e 6420 5479 7065  ss,int) and Type
+00014070: 2865 652c 696e 7429 3a0a 2020 2020 2020  (ee,int):.      
+00014080: 2020 2020 2020 2020 2020 7265 7475 726e            return
+00014090: 206f 626a 5b73 733a 6565 2b31 5d0a 2020   obj[ss:ee+1].  
+000140a0: 2020 2020 2020 656c 6966 2069 6478 5f74        elif idx_t
+000140b0: 7970 6520 3d3d 2027 6c69 7374 273a 0a20  ype == 'list':. 
+000140c0: 2020 2020 2020 2020 2020 2072 743d 5b5d             rt=[]
+000140d0: 0a20 2020 2020 2020 2020 2020 2066 6f72  .            for
+000140e0: 2069 2069 6e20 6e69 6478 3a0a 2020 2020   i in nidx:.    
+000140f0: 2020 2020 2020 2020 2020 2020 2369 6620              #if 
+00014100: 6e6f 7420 4973 496e 7428 6929 3a0a 2020  not IsInt(i):.  
+00014110: 2020 2020 2020 2020 2020 2020 2020 2320                # 
+00014120: 2020 2069 6620 6669 6c6c 5f75 7020 3d3d     if fill_up ==
+00014130: 2027 5f66 416c 7345 5f27 3a0a 2020 2020   '_fAlsE_':.    
+00014140: 2020 2020 2020 2020 2020 2020 2320 2020              #   
+00014150: 2020 2020 2063 6f6e 7469 6e75 650a 2020       continue.  
+00014160: 2020 2020 2020 2020 2020 2020 2020 2320                # 
+00014170: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
+00014180: 2020 2020 2020 2020 2023 2020 2020 2020           #      
+00014190: 2020 7274 2e61 7070 656e 6428 6669 6c6c    rt.append(fill
+000141a0: 5f75 7029 0a20 2020 2020 2020 2020 2020  _up).           
+000141b0: 2020 2020 2069 783d 5f6d 6178 5f28 6f62       ix=_max_(ob
+000141c0: 6a2c 496e 7428 692c 6465 6661 756c 743d  j,Int(i,default=
+000141d0: 4661 6c73 652c 6572 723d 5472 7565 292c  False,err=True),
+000141e0: 6572 7229 0a20 2020 2020 2020 2020 2020  err).           
+000141f0: 2020 2020 2069 6620 5479 7065 2869 782c       if Type(ix,
+00014200: 696e 7429 3a0a 2020 2020 2020 2020 2020  int):.          
+00014210: 2020 2020 2020 2020 2020 7274 2e61 7070            rt.app
+00014220: 656e 6428 6f62 6a5b 6978 5d29 0a20 2020  end(obj[ix]).   
+00014230: 2020 2020 2020 2020 2020 2020 2065 6c69               eli
+00014240: 6620 6669 6c6c 5f75 7020 213d 2027 5f66  f fill_up != '_f
+00014250: 416c 7345 5f27 3a0a 2020 2020 2020 2020  AlsE_':.        
+00014260: 2020 2020 2020 2020 2020 2020 7274 2e61              rt.a
+00014270: 7070 656e 6428 6669 6c6c 5f75 7029 0a20  ppend(fill_up). 
+00014280: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+00014290: 6e20 4f75 7446 6f72 6d61 7428 7274 2c6f  n OutFormat(rt,o
+000142a0: 7574 3d6f 7574 2c64 6566 6175 6c74 3d64  ut=out,default=d
+000142b0: 6566 6175 6c74 2c6f 7267 3d6f 626a 2c70  efault,org=obj,p
+000142c0: 6565 6c3d 7065 656c 2c73 7472 6970 3d73  eel=peel,strip=s
+000142d0: 7472 6970 290a 2020 2020 2020 2020 656c  trip).        el
+000142e0: 6966 2069 6478 5f74 7970 6520 3d3d 2027  if idx_type == '
+000142f0: 696e 7427 3a0a 2020 2020 2020 2020 2020  int':.          
+00014300: 2020 6978 3d5f 6d61 785f 286f 626a 2c6e    ix=_max_(obj,n
+00014310: 6964 782c 6572 7229 0a20 2020 2020 2020  idx,err).       
+00014320: 2020 2020 2069 6620 5479 7065 2869 782c       if Type(ix,
+00014330: 696e 7429 3a20 7265 7475 726e 206f 626a  int): return obj
+00014340: 5b69 785d 0a20 2020 2020 2020 2072 6574  [ix].        ret
+00014350: 7572 6e20 4465 6661 756c 7428 6f62 6a2c  urn Default(obj,
+00014360: 6465 6661 756c 7429 0a20 2020 2065 6c69  default).    eli
+00014370: 6620 6f62 6a5f 7479 7065 2069 6e20 2827  f obj_type in ('
+00014380: 6469 6374 2729 3a0a 2020 2020 2020 2020  dict'):.        
+00014390: 6966 206f 6b20 6973 2054 7275 653a 0a20  if ok is True:. 
+000143a0: 2020 2020 2020 2020 2020 206f 626a 5f69             obj_i
+000143b0: 7465 6d73 3d6c 6973 7428 6f62 6a2e 6974  tems=list(obj.it
+000143c0: 656d 7328 2929 0a20 2020 2020 2020 2020  ems()).         
+000143d0: 2020 2069 6620 6964 785f 7479 7065 203d     if idx_type =
+000143e0: 3d20 2774 7570 6c65 273a 2023 5261 6e67  = 'tuple': #Rang
+000143f0: 6520 496e 6465 780a 2020 2020 2020 2020  e Index.        
+00014400: 2020 2020 2020 2020 7373 3d5f 6d61 785f          ss=_max_
+00014410: 286f 626a 5f69 7465 6d73 2c49 6e74 286e  (obj_items,Int(n
+00014420: 6964 785b 305d 292c 6572 7229 0a20 2020  idx[0]),err).   
+00014430: 2020 2020 2020 2020 2020 2020 2065 653d               ee=
+00014440: 5f6d 6178 5f28 6f62 6a5f 6974 656d 732c  _max_(obj_items,
+00014450: 496e 7428 6e69 6478 5b31 5d29 2c65 7272  Int(nidx[1]),err
+00014460: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+00014470: 2020 6966 2054 7970 6528 7373 2c69 6e74    if Type(ss,int
+00014480: 2920 616e 6420 5479 7065 2865 652c 696e  ) and Type(ee,in
+00014490: 7429 3a0a 2020 2020 2020 2020 2020 2020  t):.            
+000144a0: 2020 2020 2020 2020 7265 7475 726e 2064          return d
+000144b0: 6963 7428 6f62 6a5f 6974 656d 735b 7373  ict(obj_items[ss
+000144c0: 3a65 652b 315d 290a 2020 2020 2020 2020  :ee+1]).        
+000144d0: 2020 2020 656c 6966 2069 6478 5f74 7970      elif idx_typ
+000144e0: 6520 3d3d 2027 6c69 7374 273a 2023 4f52  e == 'list': #OR
+000144f0: 2049 6e64 6578 0a20 2020 2020 2020 2020   Index.         
+00014500: 2020 2020 2020 2072 743d 5b5d 0a20 2020         rt=[].   
+00014510: 2020 2020 2020 2020 2020 2020 2066 6f72               for
+00014520: 2069 2069 6e20 6e69 6478 3a0a 2020 2020   i in nidx:.    
+00014530: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00014540: 6966 2069 6478 5f6f 6e6c 793a 0a20 2020  if idx_only:.   
+00014550: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00014560: 2020 2020 2069 783d 5f6d 6178 5f28 6f62       ix=_max_(ob
+00014570: 6a5f 6974 656d 732c 496e 7428 692c 6465  j_items,Int(i,de
+00014580: 6661 756c 743d 4661 6c73 652c 6572 723d  fault=False,err=
+00014590: 5472 7565 292c 6572 7229 0a20 2020 2020  True),err).     
+000145a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000145b0: 2020 2069 6620 5479 7065 2869 782c 696e     if Type(ix,in
+000145c0: 7429 3a0a 2020 2020 2020 2020 2020 2020  t):.            
+000145d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000145e0: 7274 2e61 7070 656e 6428 6f62 6a5f 6974  rt.append(obj_it
+000145f0: 656d 735b 6978 5d29 0a20 2020 2020 2020  ems[ix]).       
+00014600: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00014610: 2065 6c69 6620 6669 6c6c 5f75 7020 213d   elif fill_up !=
+00014620: 2027 5f66 416c 7345 5f27 3a0a 2020 2020   '_fAlsE_':.    
+00014630: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00014640: 2020 2020 2020 2020 7274 2e61 7070 656e          rt.appen
+00014650: 6428 6669 6c6c 5f75 7029 0a20 2020 2020  d(fill_up).     
+00014660: 2020 2020 2020 2020 2020 2020 2020 2065                 e
+00014670: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
+00014680: 2020 2020 2020 2020 2020 2020 2074 3d6f               t=o
+00014690: 626a 2e67 6574 2869 290a 2020 2020 2020  bj.get(i).      
+000146a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000146b0: 2020 6966 2074 2069 7320 6e6f 7420 4e6f    if t is not No
+000146c0: 6e65 3a20 7274 2e61 7070 656e 6428 7429  ne: rt.append(t)
+000146d0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000146e0: 2072 6574 7572 6e20 4f75 7446 6f72 6d61   return OutForma
+000146f0: 7428 7274 2c6f 7574 3d6f 7574 2c64 6566  t(rt,out=out,def
+00014700: 6175 6c74 3d64 6566 6175 6c74 2c6f 7267  ault=default,org
+00014710: 3d6f 626a 2c70 6565 6c3d 7065 656c 2c73  =obj,peel=peel,s
+00014720: 7472 6970 3d73 7472 6970 290a 2020 2020  trip=strip).    
+00014730: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
+00014740: 2020 2020 2020 2020 2020 2020 2020 6966                if
+00014750: 2069 6478 5f6f 6e6c 793a 0a20 2020 2020   idx_only:.     
+00014760: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+00014770: 783d 5f6d 6178 5f28 6f62 6a5f 6974 656d  x=_max_(obj_item
+00014780: 732c 496e 7428 6964 7829 2c65 7272 290a  s,Int(idx),err).
+00014790: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000147a0: 2020 2020 6966 2054 7970 6528 6978 2c69      if Type(ix,i
+000147b0: 6e74 293a 2072 6574 7572 6e20 6f62 6a5f  nt): return obj_
+000147c0: 6974 656d 735b 6978 5d0a 2020 2020 2020  items[ix].      
+000147d0: 2020 2020 2020 2020 2020 7265 7475 726e            return
+000147e0: 206f 626a 2e67 6574 2869 6478 2c44 6566   obj.get(idx,Def
+000147f0: 6175 6c74 286f 626a 2c64 6566 6175 6c74  ault(obj,default
+00014800: 2929 0a20 2020 2020 2020 2065 6c69 6620  )).        elif 
+00014810: 6f6b 2069 7320 4e6f 6e65 3a20 2350 6174  ok is None: #Pat
+00014820: 6820 496e 6465 780a 2020 2020 2020 2020  h Index.        
+00014830: 2020 2020 666f 7220 6920 696e 206e 6964      for i in nid
+00014840: 783a 0a20 2020 2020 2020 2020 2020 2020  x:.             
+00014850: 2020 2069 6620 6920 6e6f 7420 696e 206f     if i not in o
+00014860: 626a 3a20 7265 7475 726e 2044 6566 6175  bj: return Defau
+00014870: 6c74 286f 626a 2c64 6566 6175 6c74 290a  lt(obj,default).
+00014880: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00014890: 6f62 6a3d 6f62 6a5b 695d 0a20 2020 2020  obj=obj[i].     
+000148a0: 2020 2020 2020 2072 6574 7572 6e20 6f62         return ob
+000148b0: 6a0a 2020 2020 2020 2020 7265 7475 726e  j.        return
+000148c0: 2044 6566 6175 6c74 286f 626a 2c64 6566   Default(obj,def
+000148d0: 6175 6c74 290a 2020 2020 656c 6966 206f  ault).    elif o
+000148e0: 626a 5f74 7970 6520 696e 2028 2766 756e  bj_type in ('fun
+000148f0: 6374 696f 6e27 293a 2023 3f3f 3f0a 2020  ction'): #???.  
+00014900: 2020 2020 2020 6966 206f 6b3a 0a20 2020        if ok:.   
+00014910: 2020 2020 2020 2020 2069 6620 6964 785f           if idx_
+00014920: 7479 7065 203d 3d20 2773 7472 273a 0a20  type == 'str':. 
+00014930: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+00014940: 6620 6e69 6478 2e6c 6f77 6572 2829 2069  f nidx.lower() i
+00014950: 6e20 5b27 6172 6773 272c 2761 7267 756d  n ['args','argum
+00014960: 656e 7473 275d 3a0a 2020 2020 2020 2020  ents']:.        
+00014970: 2020 2020 2020 2020 2020 2020 6966 206f              if o
+00014980: 626a 203d 3d20 275f 7468 6973 5f27 3a0a  bj == '_this_':.
+00014990: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000149a0: 2020 2020 2020 2020 6f62 6a3d 696e 7370          obj=insp
+000149b0: 6563 742e 6765 746d 656d 6265 7273 284d  ect.getmembers(M
+000149c0: 794d 6f64 756c 6528 2929 2e67 6574 2843  yModule()).get(C
+000149d0: 616c 6c65 724e 616d 6528 2929 0a20 2020  allerName()).   
+000149e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000149f0: 2072 6574 7572 6e20 4675 6e63 7469 6f6e   return Function
+00014a00: 4172 6773 286f 626a 290a 2020 2020 2020  Args(obj).      
+00014a10: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
 00014a20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00014a30: 2020 2020 2069 6620 6f62 6a20 3d3d 2027       if obj == '
-00014a40: 5f74 6869 735f 273a 0a20 2020 2020 2020  _this_':.       
+00014a30: 2020 2020 6966 206f 626a 203d 3d20 275f      if obj == '_
+00014a40: 7468 6973 5f27 3a0a 2020 2020 2020 2020  this_':.        
 00014a50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00014a60: 2020 2020 2072 742e 6170 7065 6e64 2856       rt.append(V
-00014a70: 6172 6961 626c 6528 6e69 6478 2c70 6172  ariable(nidx,par
-00014a80: 656e 743d 3129 290a 2020 2020 2020 2020  ent=1)).        
-00014a90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00014aa0: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
-00014ab0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00014ac0: 2020 7274 2e61 7070 656e 6428 5661 7269    rt.append(Vari
-00014ad0: 6162 6c65 286e 6964 782c 6f62 6a29 290a  able(nidx,obj)).
-00014ae0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00014af0: 7265 7475 726e 204f 7574 466f 726d 6174  return OutFormat
-00014b00: 2872 742c 6f75 743d 6f75 742c 6465 6661  (rt,out=out,defa
-00014b10: 756c 743d 6465 6661 756c 742c 6f72 673d  ult=default,org=
-00014b20: 6f62 6a2c 7065 656c 3d70 6565 6c29 0a20  obj,peel=peel). 
-00014b30: 2020 2065 6c69 6620 6f62 6a5f 7479 7065     elif obj_type
-00014b40: 2069 6e20 2827 696e 7374 616e 6365 272c   in ('instance',
-00014b50: 2763 6c61 7373 6f62 6a27 2c27 6d6f 6475  'classobj','modu
-00014b60: 6c65 2729 3a0a 2020 2020 2020 2020 6966  le'):.        if
-00014b70: 2054 7970 6528 6964 782c 7374 7229 2061   Type(idx,str) a
-00014b80: 6e64 2069 6478 2e6c 6f77 6572 2829 2069  nd idx.lower() i
-00014b90: 6e20 5b27 6675 6e63 272c 2766 756e 6374  n ['func','funct
-00014ba0: 696f 6e27 2c27 6675 6e63 7469 6f6e 7327  ion','functions'
-00014bb0: 2c27 6675 6e63 6c69 7374 272c 2766 756e  ,'funclist','fun
-00014bc0: 635f 6c69 7374 272c 276c 6973 7427 5d3a  c_list','list']:
-00014bd0: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
-00014be0: 7572 6e20 4675 6e63 7469 6f6e 4c69 7374  urn FunctionList
-00014bf0: 286f 626a 290a 2020 2020 2020 2020 656c  (obj).        el
-00014c00: 6966 2069 6478 5f74 7970 6520 696e 205b  if idx_type in [
-00014c10: 276c 6973 7427 2c27 7475 706c 6527 5d3a  'list','tuple']:
-00014c20: 2023 4f52 2049 6e64 6578 0a20 2020 2020   #OR Index.     
-00014c30: 2020 2020 2020 2072 743d 5b5d 0a20 2020         rt=[].   
-00014c40: 2020 2020 2020 2020 2023 2067 6574 2066           # get f
-00014c50: 756e 6374 696f 6e20 6f62 6a65 6374 206f  unction object o
-00014c60: 6620 6669 6e64 696e 6720 7374 7269 6e67  f finding string
-00014c70: 206e 616d 6520 696e 2074 6865 2063 6c61   name in the cla
-00014c80: 7373 2f69 6e73 7461 6e63 650a 2020 2020  ss/instance.    
-00014c90: 2020 2020 2020 2020 666f 7220 6666 2069          for ff i
-00014ca0: 6e20 6e69 6478 3a0a 2020 2020 2020 2020  n nidx:.        
-00014cb0: 2020 2020 2020 2020 6966 2069 7369 6e73          if isins
-00014cc0: 7461 6e63 6528 6666 2c73 7472 293a 0a20  tance(ff,str):. 
-00014cd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00014ce0: 2020 2069 6620 6666 2069 6e20 5b27 5f5f     if ff in ['__
-00014cf0: 6e61 6d65 5f5f 272c 276d 6574 686f 645f  name__','method_
-00014d00: 6e61 6d65 272c 275f 5f6d 6574 686f 645f  name','__method_
-00014d10: 5f27 5d3a 2023 4765 7420 4d65 7468 6f64  _']: #Get Method
-00014d20: 206e 616d 6520 6c69 7374 2069 6e20 636c   name list in cl
-00014d30: 6173 730a 2020 2020 2020 2020 2020 2020  ass.            
-00014d40: 2020 2020 2020 2020 2020 2020 6966 206f              if o
-00014d50: 626a 5f74 7970 6520 696e 2028 2763 6c61  bj_type in ('cla
-00014d60: 7373 6f62 6a27 293a 206f 626a 3d6f 626a  ssobj'): obj=obj
-00014d70: 2829 2023 206d 6f76 6520 6672 6f6d 2043  () # move from C
-00014d80: 4c41 5353 2074 6f20 434c 4153 5328 290a  LASS to CLASS().
-00014d90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00014da0: 2020 2020 2020 2020 6966 2054 7970 6528          if Type(
-00014db0: 6f62 6a2c 2769 6e73 7461 6e63 6527 293a  obj,'instance'):
-00014dc0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00014dd0: 2020 2020 2020 2020 2020 2020 2072 743d               rt=
-00014de0: 7274 2b4d 6574 686f 6449 6e43 6c61 7373  rt+MethodInClass
-00014df0: 286f 626a 290a 2020 2020 2020 2020 2020  (obj).          
-00014e00: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
-00014e10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00014e20: 2020 2020 2020 2020 7274 2e61 7070 656e          rt.appen
-00014e30: 6428 6765 7461 7474 7228 6f62 6a2c 6666  d(getattr(obj,ff
-00014e40: 2c64 6566 6175 6c74 2929 0a20 2020 2020  ,default)).     
-00014e50: 2020 2020 2020 2072 6574 7572 6e20 4f75         return Ou
-00014e60: 7446 6f72 6d61 7428 7274 2c6f 7574 3d6f  tFormat(rt,out=o
-00014e70: 7574 2c64 6566 6175 6c74 3d64 6566 6175  ut,default=defau
-00014e80: 6c74 2c6f 7267 3d6f 626a 2c70 6565 6c3d  lt,org=obj,peel=
-00014e90: 7065 656c 290a 2020 2020 2020 2020 656c  peel).        el
-00014ea0: 6966 2069 6478 5f74 7970 6520 3d3d 2027  if idx_type == '
-00014eb0: 7374 7227 3a0a 2020 2020 2020 2020 2020  str':.          
-00014ec0: 2020 6966 206f 626a 5f74 7970 6520 3d3d    if obj_type ==
-00014ed0: 2027 636c 6173 736f 626a 273a 206f 626a   'classobj': obj
-00014ee0: 3d6f 626a 2829 2023 206d 6f76 6520 434c  =obj() # move CL
-00014ef0: 4153 5320 746f 2043 4c41 5353 2829 0a20  ASS to CLASS(). 
-00014f00: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-00014f10: 6e20 6765 7461 7474 7228 6f62 6a2c 6e69  n getattr(obj,ni
-00014f20: 6478 2c44 6566 6175 6c74 286f 626a 2c64  dx,Default(obj,d
-00014f30: 6566 6175 6c74 2929 0a20 2020 2020 2020  efault)).       
-00014f40: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
-00014f50: 2020 2069 6620 5479 7065 286f 626a 2c27     if Type(obj,'
-00014f60: 636c 6173 736f 626a 2729 3a20 6f62 6a3d  classobj'): obj=
-00014f70: 6f62 6a28 2920 2320 6d6f 7665 2066 726f  obj() # move fro
-00014f80: 6d20 434c 4153 5320 746f 2043 4c41 5353  m CLASS to CLASS
-00014f90: 2829 0a20 2020 2020 2020 2020 2020 2069  ().            i
-00014fa0: 6620 6f6b 2069 7320 4661 6c73 653a 0a20  f ok is False:. 
-00014fb0: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-00014fc0: 6574 7572 6e20 6f62 6a2e 5f5f 6469 6374  eturn obj.__dict
-00014fd0: 5f5f 0a20 2020 2020 2020 2020 2020 2065  __.            e
-00014fe0: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
-00014ff0: 2020 2020 2072 6574 7572 6e20 4765 7428       return Get(
-00015000: 6f62 6a2e 5f5f 6469 6374 5f5f 2c69 6478  obj.__dict__,idx
-00015010: 2c64 6566 6175 6c74 2c65 7272 2920 2320  ,default,err) # 
-00015020: 636f 6e76 6572 7465 6420 6f62 6a20 7769  converted obj wi
-00015030: 7468 206f 7269 6769 6e61 6c20 6964 780a  th original idx.
-00015040: 2020 2020 656c 6966 206f 626a 5f74 7970      elif obj_typ
-00015050: 6520 696e 2028 2772 6573 706f 6e73 6527  e in ('response'
-00015060: 293a 2023 2057 6562 2044 6174 610a 2020  ): # Web Data.  
-00015070: 2020 2020 2020 6966 206f 6b3a 0a20 2020        if ok:.   
-00015080: 2020 2020 2020 2020 2064 6566 205f 7765           def _we
-00015090: 625f 286f 626a 2c6e 6964 7829 3a0a 2020  b_(obj,nidx):.  
-000150a0: 2020 2020 2020 2020 2020 2020 2020 6966                if
-000150b0: 206e 6964 7820 696e 205b 2772 6327 2c27   nidx in ['rc','
-000150c0: 7374 6174 7573 272c 2763 6f64 6527 2c27  status','code','
-000150d0: 7374 6174 6527 2c27 7374 6174 7573 5f63  state','status_c
-000150e0: 6f64 6527 5d3a 0a20 2020 2020 2020 2020  ode']:.         
-000150f0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-00015100: 6e20 6f62 6a2e 7374 6174 7573 5f63 6f64  n obj.status_cod
-00015110: 650a 2020 2020 2020 2020 2020 2020 2020  e.              
-00015120: 2020 656c 6966 206e 6964 7820 696e 205b    elif nidx in [
-00015130: 2764 6174 6127 2c27 7661 6c75 6527 2c27  'data','value','
-00015140: 6a73 6f6e 275d 3a0a 2020 2020 2020 2020  json']:.        
-00015150: 2020 2020 2020 2020 2020 2020 7472 793a              try:
-00015160: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00015170: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-00015180: 466f 726d 4461 7461 286f 626a 2e74 6578  FormData(obj.tex
-00015190: 7429 0a20 2020 2020 2020 2020 2020 2020  t).             
-000151a0: 2020 2020 2020 2065 7863 6570 743a 0a20         except:. 
-000151b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000151c0: 2020 2020 2020 2069 6620 6572 7220 6973         if err is
-000151d0: 2054 7275 653a 2072 6574 7572 6e20 4465   True: return De
-000151e0: 6661 756c 7428 6f62 6a2c 6465 6661 756c  fault(obj,defaul
-000151f0: 7429 0a20 2020 2020 2020 2020 2020 2020  t).             
-00015200: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-00015210: 6e20 6f62 6a2e 7465 7874 0a20 2020 2020  n obj.text.     
-00015220: 2020 2020 2020 2020 2020 2065 6c69 6620             elif 
-00015230: 6e69 6478 2069 6e20 5b27 7465 7874 272c  nidx in ['text',
-00015240: 2773 7472 272c 2773 7472 696e 6727 5d3a  'str','string']:
-00015250: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00015260: 2020 2020 2072 6574 7572 6e20 6f62 6a2e       return obj.
-00015270: 7465 7874 0a20 2020 2020 2020 2020 2020  text.           
-00015280: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
-00015290: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-000152a0: 6574 7572 6e20 6f62 6a0a 2020 2020 2020  eturn obj.      
-000152b0: 2020 2020 2020 6966 2069 6478 5f74 7970        if idx_typ
-000152c0: 653d 3d27 7374 7227 3a0a 2020 2020 2020  e=='str':.      
-000152d0: 2020 2020 2020 2020 2020 7265 7475 726e            return
-000152e0: 205f 7765 625f 286f 626a 2c6e 6964 7829   _web_(obj,nidx)
-000152f0: 0a20 2020 2020 2020 2020 2020 2065 6c69  .            eli
-00015300: 6620 6964 785f 7479 7065 203d 3d20 276c  f idx_type == 'l
-00015310: 6973 7427 3a0a 2020 2020 2020 2020 2020  ist':.          
-00015320: 2020 2020 2020 7274 3d5b 5d0a 2020 2020        rt=[].    
-00015330: 2020 2020 2020 2020 2020 2020 666f 7220              for 
-00015340: 696b 6579 2069 6e20 6e69 6478 3a0a 2020  ikey in nidx:.  
-00015350: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00015360: 2020 7274 2e61 7070 656e 6428 5f77 6562    rt.append(_web
-00015370: 5f28 6f62 6a2c 696b 6579 2929 0a20 2020  _(obj,ikey)).   
-00015380: 2020 2020 2020 2020 2020 2020 2072 6574               ret
-00015390: 7572 6e20 4f75 7446 6f72 6d61 7428 7274  urn OutFormat(rt
-000153a0: 2c6f 7574 3d6f 7574 2c64 6566 6175 6c74  ,out=out,default
-000153b0: 3d64 6566 6175 6c74 2c6f 7267 3d6f 626a  =default,org=obj
-000153c0: 2c70 6565 6c3d 7065 656c 290a 2020 2020  ,peel=peel).    
-000153d0: 656c 6966 206f 626a 5f74 7970 6520 696e  elif obj_type in
-000153e0: 2028 2772 6571 7565 7374 2729 3a20 2320   ('request'): # 
-000153f0: 5765 6220 4461 7461 320a 2020 2020 2020  Web Data2.      
-00015400: 2020 7274 3d5b 5d0a 2020 2020 2020 2020    rt=[].        
-00015410: 6d65 7468 6f64 3d6f 7074 732e 6765 7428  method=opts.get(
-00015420: 276d 6574 686f 6427 2c4e 6f6e 6529 0a20  'method',None). 
-00015430: 2020 2020 2020 2069 6620 4973 4e6f 6e65         if IsNone
-00015440: 286d 6574 686f 6429 3a20 6d65 7468 6f64  (method): method
-00015450: 3d6f 626a 2e6d 6574 686f 642e 7570 7065  =obj.method.uppe
-00015460: 7228 290a 2020 2020 2020 2020 656c 6966  r().        elif
-00015470: 2069 7369 6e73 7461 6e63 6528 6d65 7468   isinstance(meth
-00015480: 6f64 2c73 7472 293a 206d 6574 686f 643d  od,str): method=
-00015490: 6d65 7468 6f64 2e75 7070 6572 2829 0a0a  method.upper()..
-000154a0: 2020 2020 2020 2020 6966 206f 6b3a 0a20          if ok:. 
-000154b0: 2020 2020 2020 2020 2020 2064 6566 205f             def _
-000154c0: 7765 625f 6461 7461 286f 626a 2c6e 6b65  web_data(obj,nke
-000154d0: 792c 6d65 7468 6f64 2c64 6566 6175 6c74  y,method,default
-000154e0: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
-000154f0: 2020 2069 6620 6e6b 6579 2e6c 6f77 6572     if nkey.lower
-00015500: 2829 203d 3d20 276d 6574 686f 6427 3a0a  () == 'method':.
-00015510: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00015520: 2020 2020 7265 7475 726e 206d 6574 686f      return metho
-00015530: 640a 2020 2020 2020 2020 2020 2020 2020  d.              
-00015540: 2020 6966 206d 6574 686f 643d 3d27 4745    if method=='GE
-00015550: 5427 3a0a 2020 2020 2020 2020 2020 2020  T':.            
-00015560: 2020 2020 2020 2020 7274 3d6f 626a 2e47          rt=obj.G
-00015570: 4554 2e67 6574 286e 6b65 7929 0a20 2020  ET.get(nkey).   
-00015580: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00015590: 2069 6620 6e6f 7420 4973 4e6f 6e65 2872   if not IsNone(r
-000155a0: 7429 3a20 7265 7475 726e 2072 740a 2020  t): return rt.  
-000155b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000155c0: 2020 7265 7475 726e 2044 6566 6175 6c74    return Default
-000155d0: 286f 626a 2c64 6566 6175 6c74 290a 2020  (obj,default).  
-000155e0: 2020 2020 2020 2020 2020 2020 2020 656c                el
-000155f0: 6966 206d 6574 686f 643d 3d27 4649 4c45  if method=='FILE
-00015600: 273a 0a20 2020 2020 2020 2020 2020 2020  ':.             
-00015610: 2020 2020 2020 2072 743d 6f62 6a2e 4649         rt=obj.FI
-00015620: 4c45 532e 6765 746c 6973 7428 6e6b 6579  LES.getlist(nkey
-00015630: 2c64 6566 6175 6c74 290a 2020 2020 2020  ,default).      
-00015640: 2020 2020 2020 2020 2020 2020 2020 6966                if
-00015650: 206e 6f74 2049 734e 6f6e 6528 7274 293a   not IsNone(rt):
-00015660: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00015670: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-00015680: 4f75 7446 6f72 6d61 7428 7274 2c6f 7574  OutFormat(rt,out
-00015690: 3d27 7261 7727 2c70 6565 6c3d 7065 656c  ='raw',peel=peel
-000156a0: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-000156b0: 2020 2020 2020 2369 6620 6e6f 7420 4973        #if not Is
-000156c0: 4e6f 6e65 2872 7429 3a20 7265 7475 726e  None(rt): return
-000156d0: 2072 740a 2020 2020 2020 2020 2020 2020   rt.            
-000156e0: 2020 2020 2020 2020 2372 743d 6f62 6a2e          #rt=obj.
-000156f0: 4649 4c45 532e 6765 7428 6e6b 6579 2c64  FILES.get(nkey,d
-00015700: 6566 6175 6c74 290a 2020 2020 2020 2020  efault).        
-00015710: 2020 2020 2020 2020 2020 2020 2369 6620              #if 
-00015720: 6e6f 7420 4973 4e6f 6e65 2872 7429 3a20  not IsNone(rt): 
-00015730: 7265 7475 726e 2072 740a 2020 2020 2020  return rt.      
-00015740: 2020 2020 2020 2020 2020 2020 2020 7265                re
-00015750: 7475 726e 2044 6566 6175 6c74 286f 626a  turn Default(obj
-00015760: 2c64 6566 6175 6c74 290a 2020 2020 2020  ,default).      
-00015770: 2020 2020 2020 2020 2020 656c 6966 206d            elif m
-00015780: 6574 686f 643d 3d27 504f 5354 273a 0a20  ethod=='POST':. 
+00014a60: 7265 7475 726e 2056 6172 6961 626c 6528  return Variable(
+00014a70: 6e69 6478 2c70 6172 656e 743d 3129 0a20  nidx,parent=1). 
+00014a80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00014a90: 2020 2072 6574 7572 6e20 5661 7261 626c     return Varabl
+00014aa0: 6528 6e69 6478 2c6f 626a 290a 2020 2020  e(nidx,obj).    
+00014ab0: 2020 2020 2020 2020 656c 6966 2069 6478          elif idx
+00014ac0: 5f74 7970 6520 3d3d 2027 6c69 7374 273a  _type == 'list':
+00014ad0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00014ae0: 2072 743d 5b5d 0a20 2020 2020 2020 2020   rt=[].         
+00014af0: 2020 2020 2020 2066 6f72 2069 2069 6e20         for i in 
+00014b00: 6e69 6478 3a0a 2020 2020 2020 2020 2020  nidx:.          
+00014b10: 2020 2020 2020 2020 2020 6966 2054 7970            if Typ
+00014b20: 6528 692c 7374 7229 2061 6e64 2069 2e6c  e(i,str) and i.l
+00014b30: 6f77 6572 2829 2069 6e20 5b27 6172 6773  ower() in ['args
+00014b40: 272c 2761 7267 756d 656e 7473 275d 3a0a  ','arguments']:.
+00014b50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00014b60: 2020 2020 2020 2020 6966 206f 626a 203d          if obj =
+00014b70: 3d20 275f 7468 6973 5f27 3a0a 2020 2020  = '_this_':.    
+00014b80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00014b90: 2020 2020 2020 2020 6f62 6a32 3d69 6e73          obj2=ins
+00014ba0: 7065 6374 2e67 6574 6d65 6d62 6572 7328  pect.getmembers(
+00014bb0: 4d79 4d6f 6475 6c65 2829 292e 6765 7428  MyModule()).get(
+00014bc0: 4361 6c6c 6572 4e61 6d65 2829 290a 2020  CallerName()).  
+00014bd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00014be0: 2020 2020 2020 2020 2020 7274 2e61 7070            rt.app
+00014bf0: 656e 6428 4675 6e63 7469 6f6e 4172 6773  end(FunctionArgs
+00014c00: 286f 626a 3229 290a 2020 2020 2020 2020  (obj2)).        
+00014c10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00014c20: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
+00014c30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00014c40: 2020 7274 2e61 7070 656e 6428 4675 6e63    rt.append(Func
+00014c50: 7469 6f6e 4172 6773 286f 626a 2929 0a20  tionArgs(obj)). 
+00014c60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00014c70: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
+00014c80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00014c90: 2069 6620 6f62 6a20 3d3d 2027 5f74 6869   if obj == '_thi
+00014ca0: 735f 273a 0a20 2020 2020 2020 2020 2020  s_':.           
+00014cb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00014cc0: 2072 742e 6170 7065 6e64 2856 6172 6961   rt.append(Varia
+00014cd0: 626c 6528 6e69 6478 2c70 6172 656e 743d  ble(nidx,parent=
+00014ce0: 3129 290a 2020 2020 2020 2020 2020 2020  1)).            
+00014cf0: 2020 2020 2020 2020 2020 2020 656c 7365              else
+00014d00: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00014d10: 2020 2020 2020 2020 2020 2020 2020 7274                rt
+00014d20: 2e61 7070 656e 6428 5661 7269 6162 6c65  .append(Variable
+00014d30: 286e 6964 782c 6f62 6a29 290a 2020 2020  (nidx,obj)).    
+00014d40: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+00014d50: 726e 204f 7574 466f 726d 6174 2872 742c  rn OutFormat(rt,
+00014d60: 6f75 743d 6f75 742c 6465 6661 756c 743d  out=out,default=
+00014d70: 6465 6661 756c 742c 6f72 673d 6f62 6a2c  default,org=obj,
+00014d80: 7065 656c 3d70 6565 6c2c 7374 7269 703d  peel=peel,strip=
+00014d90: 7374 7269 7029 0a20 2020 2065 6c69 6620  strip).    elif 
+00014da0: 6f62 6a5f 7479 7065 2069 6e20 2827 696e  obj_type in ('in
+00014db0: 7374 616e 6365 272c 2763 6c61 7373 6f62  stance','classob
+00014dc0: 6a27 2c27 6d6f 6475 6c65 2729 3a0a 2020  j','module'):.  
+00014dd0: 2020 2020 2020 6966 2054 7970 6528 6964        if Type(id
+00014de0: 782c 7374 7229 2061 6e64 2069 6478 2e6c  x,str) and idx.l
+00014df0: 6f77 6572 2829 2069 6e20 5b27 6675 6e63  ower() in ['func
+00014e00: 272c 2766 756e 6374 696f 6e27 2c27 6675  ','function','fu
+00014e10: 6e63 7469 6f6e 7327 2c27 6675 6e63 6c69  nctions','funcli
+00014e20: 7374 272c 2766 756e 635f 6c69 7374 272c  st','func_list',
+00014e30: 276c 6973 7427 5d3a 0a20 2020 2020 2020  'list']:.       
+00014e40: 2020 2020 2072 6574 7572 6e20 4675 6e63       return Func
+00014e50: 7469 6f6e 4c69 7374 286f 626a 290a 2020  tionList(obj).  
+00014e60: 2020 2020 2020 656c 6966 2069 6478 5f74        elif idx_t
+00014e70: 7970 6520 696e 205b 276c 6973 7427 2c27  ype in ['list','
+00014e80: 7475 706c 6527 5d3a 2023 4f52 2049 6e64  tuple']: #OR Ind
+00014e90: 6578 0a20 2020 2020 2020 2020 2020 2072  ex.            r
+00014ea0: 743d 5b5d 0a20 2020 2020 2020 2020 2020  t=[].           
+00014eb0: 2023 2067 6574 2066 756e 6374 696f 6e20   # get function 
+00014ec0: 6f62 6a65 6374 206f 6620 6669 6e64 696e  object of findin
+00014ed0: 6720 7374 7269 6e67 206e 616d 6520 696e  g string name in
+00014ee0: 2074 6865 2063 6c61 7373 2f69 6e73 7461   the class/insta
+00014ef0: 6e63 650a 2020 2020 2020 2020 2020 2020  nce.            
+00014f00: 666f 7220 6666 2069 6e20 6e69 6478 3a0a  for ff in nidx:.
+00014f10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00014f20: 6966 2069 7369 6e73 7461 6e63 6528 6666  if isinstance(ff
+00014f30: 2c73 7472 293a 0a20 2020 2020 2020 2020  ,str):.         
+00014f40: 2020 2020 2020 2020 2020 2069 6620 6666             if ff
+00014f50: 2069 6e20 5b27 5f5f 6e61 6d65 5f5f 272c   in ['__name__',
+00014f60: 276d 6574 686f 645f 6e61 6d65 272c 275f  'method_name','_
+00014f70: 5f6d 6574 686f 645f 5f27 5d3a 2023 4765  _method__']: #Ge
+00014f80: 7420 4d65 7468 6f64 206e 616d 6520 6c69  t Method name li
+00014f90: 7374 2069 6e20 636c 6173 730a 2020 2020  st in class.    
+00014fa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00014fb0: 2020 2020 6966 206f 626a 5f74 7970 6520      if obj_type 
+00014fc0: 696e 2028 2763 6c61 7373 6f62 6a27 293a  in ('classobj'):
+00014fd0: 206f 626a 3d6f 626a 2829 2023 206d 6f76   obj=obj() # mov
+00014fe0: 6520 6672 6f6d 2043 4c41 5353 2074 6f20  e from CLASS to 
+00014ff0: 434c 4153 5328 290a 2020 2020 2020 2020  CLASS().        
+00015000: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00015010: 6966 2054 7970 6528 6f62 6a2c 2769 6e73  if Type(obj,'ins
+00015020: 7461 6e63 6527 293a 0a20 2020 2020 2020  tance'):.       
+00015030: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00015040: 2020 2020 2072 743d 7274 2b4d 6574 686f       rt=rt+Metho
+00015050: 6449 6e43 6c61 7373 286f 626a 290a 2020  dInClass(obj).  
+00015060: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00015070: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
+00015080: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00015090: 7274 2e61 7070 656e 6428 6765 7461 7474  rt.append(getatt
+000150a0: 7228 6f62 6a2c 6666 2c64 6566 6175 6c74  r(obj,ff,default
+000150b0: 2929 0a20 2020 2020 2020 2020 2020 2072  )).            r
+000150c0: 6574 7572 6e20 4f75 7446 6f72 6d61 7428  eturn OutFormat(
+000150d0: 7274 2c6f 7574 3d6f 7574 2c64 6566 6175  rt,out=out,defau
+000150e0: 6c74 3d64 6566 6175 6c74 2c6f 7267 3d6f  lt=default,org=o
+000150f0: 626a 2c70 6565 6c3d 7065 656c 2c73 7472  bj,peel=peel,str
+00015100: 6970 3d73 7472 6970 290a 2020 2020 2020  ip=strip).      
+00015110: 2020 656c 6966 2069 6478 5f74 7970 6520    elif idx_type 
+00015120: 3d3d 2027 7374 7227 3a0a 2020 2020 2020  == 'str':.      
+00015130: 2020 2020 2020 6966 206f 626a 5f74 7970        if obj_typ
+00015140: 6520 3d3d 2027 636c 6173 736f 626a 273a  e == 'classobj':
+00015150: 206f 626a 3d6f 626a 2829 2023 206d 6f76   obj=obj() # mov
+00015160: 6520 434c 4153 5320 746f 2043 4c41 5353  e CLASS to CLASS
+00015170: 2829 0a20 2020 2020 2020 2020 2020 2072  ().            r
+00015180: 6574 7572 6e20 6765 7461 7474 7228 6f62  eturn getattr(ob
+00015190: 6a2c 6e69 6478 2c44 6566 6175 6c74 286f  j,nidx,Default(o
+000151a0: 626a 2c64 6566 6175 6c74 2929 0a20 2020  bj,default)).   
+000151b0: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
+000151c0: 2020 2020 2020 2069 6620 5479 7065 286f         if Type(o
+000151d0: 626a 2c27 636c 6173 736f 626a 2729 3a20  bj,'classobj'): 
+000151e0: 6f62 6a3d 6f62 6a28 2920 2320 6d6f 7665  obj=obj() # move
+000151f0: 2066 726f 6d20 434c 4153 5320 746f 2043   from CLASS to C
+00015200: 4c41 5353 2829 0a20 2020 2020 2020 2020  LASS().         
+00015210: 2020 2069 6620 6f6b 2069 7320 4661 6c73     if ok is Fals
+00015220: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
+00015230: 2020 2072 6574 7572 6e20 6f62 6a2e 5f5f     return obj.__
+00015240: 6469 6374 5f5f 0a20 2020 2020 2020 2020  dict__.         
+00015250: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
+00015260: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+00015270: 4765 7428 6f62 6a2e 5f5f 6469 6374 5f5f  Get(obj.__dict__
+00015280: 2c69 6478 2c64 6566 6175 6c74 2c65 7272  ,idx,default,err
+00015290: 2920 2320 636f 6e76 6572 7465 6420 6f62  ) # converted ob
+000152a0: 6a20 7769 7468 206f 7269 6769 6e61 6c20  j with original 
+000152b0: 6964 780a 2020 2020 656c 6966 206f 626a  idx.    elif obj
+000152c0: 5f74 7970 6520 696e 2028 2772 6573 706f  _type in ('respo
+000152d0: 6e73 6527 293a 2023 2057 6562 2044 6174  nse'): # Web Dat
+000152e0: 610a 2020 2020 2020 2020 6966 206f 6b3a  a.        if ok:
+000152f0: 0a20 2020 2020 2020 2020 2020 2064 6566  .            def
+00015300: 205f 7765 625f 286f 626a 2c6e 6964 7829   _web_(obj,nidx)
+00015310: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00015320: 2020 6966 206e 6964 7820 696e 205b 2772    if nidx in ['r
+00015330: 6327 2c27 7374 6174 7573 272c 2763 6f64  c','status','cod
+00015340: 6527 2c27 7374 6174 6527 2c27 7374 6174  e','state','stat
+00015350: 7573 5f63 6f64 6527 5d3a 0a20 2020 2020  us_code']:.     
+00015360: 2020 2020 2020 2020 2020 2020 2020 2072                 r
+00015370: 6574 7572 6e20 6f62 6a2e 7374 6174 7573  eturn obj.status
+00015380: 5f63 6f64 650a 2020 2020 2020 2020 2020  _code.          
+00015390: 2020 2020 2020 656c 6966 206e 6964 7820        elif nidx 
+000153a0: 696e 205b 2764 6174 6127 2c27 7661 6c75  in ['data','valu
+000153b0: 6527 2c27 6a73 6f6e 275d 3a0a 2020 2020  e','json']:.    
+000153c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000153d0: 7472 793a 0a20 2020 2020 2020 2020 2020  try:.           
+000153e0: 2020 2020 2020 2020 2020 2020 2072 6574               ret
+000153f0: 7572 6e20 466f 726d 4461 7461 286f 626a  urn FormData(obj
+00015400: 2e74 6578 7429 0a20 2020 2020 2020 2020  .text).         
+00015410: 2020 2020 2020 2020 2020 2065 7863 6570             excep
+00015420: 743a 0a20 2020 2020 2020 2020 2020 2020  t:.             
+00015430: 2020 2020 2020 2020 2020 2069 6620 6572             if er
+00015440: 7220 6973 2054 7275 653a 2072 6574 7572  r is True: retur
+00015450: 6e20 4465 6661 756c 7428 6f62 6a2c 6465  n Default(obj,de
+00015460: 6661 756c 7429 0a20 2020 2020 2020 2020  fault).         
+00015470: 2020 2020 2020 2020 2020 2020 2020 2072                 r
+00015480: 6574 7572 6e20 6f62 6a2e 7465 7874 0a20  eturn obj.text. 
+00015490: 2020 2020 2020 2020 2020 2020 2020 2065                 e
+000154a0: 6c69 6620 6e69 6478 2069 6e20 5b27 7465  lif nidx in ['te
+000154b0: 7874 272c 2773 7472 272c 2773 7472 696e  xt','str','strin
+000154c0: 6727 5d3a 0a20 2020 2020 2020 2020 2020  g']:.           
+000154d0: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+000154e0: 6f62 6a2e 7465 7874 0a20 2020 2020 2020  obj.text.       
+000154f0: 2020 2020 2020 2020 2065 6c73 653a 0a20           else:. 
+00015500: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00015510: 2020 2072 6574 7572 6e20 6f62 6a0a 2020     return obj.  
+00015520: 2020 2020 2020 2020 2020 6966 2069 6478            if idx
+00015530: 5f74 7970 653d 3d27 7374 7227 3a0a 2020  _type=='str':.  
+00015540: 2020 2020 2020 2020 2020 2020 2020 7265                re
+00015550: 7475 726e 205f 7765 625f 286f 626a 2c6e  turn _web_(obj,n
+00015560: 6964 7829 0a20 2020 2020 2020 2020 2020  idx).           
+00015570: 2065 6c69 6620 6964 785f 7479 7065 203d   elif idx_type =
+00015580: 3d20 276c 6973 7427 3a0a 2020 2020 2020  = 'list':.      
+00015590: 2020 2020 2020 2020 2020 7274 3d5b 5d0a            rt=[].
+000155a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000155b0: 666f 7220 696b 6579 2069 6e20 6e69 6478  for ikey in nidx
+000155c0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+000155d0: 2020 2020 2020 7274 2e61 7070 656e 6428        rt.append(
+000155e0: 5f77 6562 5f28 6f62 6a2c 696b 6579 2929  _web_(obj,ikey))
+000155f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00015600: 2072 6574 7572 6e20 4f75 7446 6f72 6d61   return OutForma
+00015610: 7428 7274 2c6f 7574 3d6f 7574 2c64 6566  t(rt,out=out,def
+00015620: 6175 6c74 3d64 6566 6175 6c74 2c6f 7267  ault=default,org
+00015630: 3d6f 626a 2c70 6565 6c3d 7065 656c 2c73  =obj,peel=peel,s
+00015640: 7472 6970 3d73 7472 6970 290a 2020 2020  trip=strip).    
+00015650: 656c 6966 206f 626a 5f74 7970 6520 696e  elif obj_type in
+00015660: 2028 2772 6571 7565 7374 2729 3a20 2320   ('request'): # 
+00015670: 5765 6220 4461 7461 320a 2020 2020 2020  Web Data2.      
+00015680: 2020 7274 3d5b 5d0a 2020 2020 2020 2020    rt=[].        
+00015690: 6d65 7468 6f64 3d6f 7074 732e 6765 7428  method=opts.get(
+000156a0: 276d 6574 686f 6427 2c4e 6f6e 6529 0a20  'method',None). 
+000156b0: 2020 2020 2020 2069 6620 4973 4e6f 6e65         if IsNone
+000156c0: 286d 6574 686f 6429 3a20 6d65 7468 6f64  (method): method
+000156d0: 3d6f 626a 2e6d 6574 686f 642e 7570 7065  =obj.method.uppe
+000156e0: 7228 290a 2020 2020 2020 2020 656c 6966  r().        elif
+000156f0: 2069 7369 6e73 7461 6e63 6528 6d65 7468   isinstance(meth
+00015700: 6f64 2c73 7472 293a 206d 6574 686f 643d  od,str): method=
+00015710: 6d65 7468 6f64 2e75 7070 6572 2829 0a0a  method.upper()..
+00015720: 2020 2020 2020 2020 6966 206f 6b3a 0a20          if ok:. 
+00015730: 2020 2020 2020 2020 2020 2064 6566 205f             def _
+00015740: 7765 625f 6461 7461 286f 626a 2c6e 6b65  web_data(obj,nke
+00015750: 792c 6d65 7468 6f64 2c64 6566 6175 6c74  y,method,default
+00015760: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
+00015770: 2020 2069 6620 6e6b 6579 2e6c 6f77 6572     if nkey.lower
+00015780: 2829 203d 3d20 276d 6574 686f 6427 3a0a  () == 'method':.
 00015790: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000157a0: 2020 2072 743d 6f62 6a2e 4649 4c45 532e     rt=obj.FILES.
-000157b0: 6765 746c 6973 7428 6e6b 6579 290a 2020  getlist(nkey).  
-000157c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000157d0: 2020 2372 7432 3d6f 626a 2e46 494c 4553    #rt2=obj.FILES
-000157e0: 2e67 6574 286e 6b65 7929 0a20 2020 2020  .get(nkey).     
-000157f0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-00015800: 6620 6e6f 7420 4973 4e6f 6e65 2872 7429  f not IsNone(rt)
-00015810: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00015820: 2020 2020 2020 2020 2020 7265 7475 726e            return
-00015830: 204f 7574 466f 726d 6174 2872 742c 6f75   OutFormat(rt,ou
-00015840: 743d 2772 6177 272c 7065 656c 3d70 6565  t='raw',peel=pee
-00015850: 6c29 0a20 2020 2020 2020 2020 2020 2020  l).             
-00015860: 2020 2020 2020 2072 743d 6f62 6a2e 504f         rt=obj.PO
-00015870: 5354 2e67 6574 6c69 7374 286e 6b65 7929  ST.getlist(nkey)
-00015880: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00015890: 2020 2020 2023 7274 3d6f 626a 2e50 4f53       #rt=obj.POS
-000158a0: 542e 6765 7428 6e6b 6579 290a 2020 2020  T.get(nkey).    
-000158b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000158c0: 6966 206e 6f74 2049 734e 6f6e 6528 7274  if not IsNone(rt
-000158d0: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
-000158e0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-000158f0: 6e20 4f75 7446 6f72 6d61 7428 7274 2c6f  n OutFormat(rt,o
-00015900: 7574 3d27 7261 7727 2c70 6565 6c3d 7065  ut='raw',peel=pe
-00015910: 656c 290a 2020 2020 2020 2020 2020 2020  el).            
-00015920: 2020 2020 2020 2020 7265 7475 726e 2044          return D
-00015930: 6566 6175 6c74 286f 626a 2c64 6566 6175  efault(obj,defau
-00015940: 6c74 290a 2020 2020 2020 2020 2020 2020  lt).            
-00015950: 6966 2069 6478 5f74 7970 6520 3d3d 2027  if idx_type == '
-00015960: 7374 7227 3a0a 2020 2020 2020 2020 2020  str':.          
-00015970: 2020 2020 2020 7265 7475 726e 205f 7765        return _we
-00015980: 625f 6461 7461 286f 626a 2c6e 6964 782c  b_data(obj,nidx,
-00015990: 6d65 7468 6f64 2c64 6566 6175 6c74 290a  method,default).
-000159a0: 2020 2020 2020 2020 2020 2020 656c 6966              elif
-000159b0: 2069 6478 5f74 7970 6520 3d3d 2027 6c69   idx_type == 'li
-000159c0: 7374 273a 0a20 2020 2020 2020 2020 2020  st':.           
-000159d0: 2020 2020 2072 743d 5b5d 0a20 2020 2020       rt=[].     
-000159e0: 2020 2020 2020 2020 2020 2066 6f72 2069             for i
-000159f0: 2069 6e20 6e69 6478 3a0a 2020 2020 2020   in nidx:.      
-00015a00: 2020 2020 2020 2020 2020 2020 2020 7274                rt
-00015a10: 2e61 7070 656e 6428 5f77 6562 5f64 6174  .append(_web_dat
-00015a20: 6128 6f62 6a2c 692c 6d65 7468 6f64 2c64  a(obj,i,method,d
-00015a30: 6566 6175 6c74 2929 0a20 2020 2020 2020  efault)).       
-00015a40: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-00015a50: 4f75 7446 6f72 6d61 7428 7274 2c6f 7574  OutFormat(rt,out
-00015a60: 3d6f 7574 2c64 6566 6175 6c74 3d64 6566  =out,default=def
-00015a70: 6175 6c74 2c6f 7267 3d6f 626a 2c70 6565  ault,org=obj,pee
-00015a80: 6c3d 7065 656c 290a 2020 2020 656c 6966  l=peel).    elif
-00015a90: 206f 626a 5f74 7970 6520 696e 2028 2749   obj_type in ('I
-00015aa0: 6d6d 7574 6162 6c65 4d75 6c74 6944 6963  mmutableMultiDic
-00015ab0: 7427 293a 2023 2046 6c61 736b 2057 6562  t'): # Flask Web
-00015ac0: 2044 6174 610a 2020 2020 2020 2020 746d   Data.        tm
-00015ad0: 703d 7b7d 0a20 2020 2020 2020 2069 6620  p={}.        if 
-00015ae0: 6f62 6a3a 0a20 2020 2020 2020 2020 2020  obj:.           
-00015af0: 2066 6f72 2069 6920 696e 206f 626a 3a0a   for ii in obj:.
-00015b00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00015b10: 746d 705b 6969 5d3d 6f62 6a5b 6969 5d0a  tmp[ii]=obj[ii].
-00015b20: 2020 2020 2020 2020 7265 7475 726e 2047          return G
-00015b30: 6574 2874 6d70 2c69 6478 2c64 6566 6175  et(tmp,idx,defau
-00015b40: 6c74 2c65 7272 2920 0a20 2020 2065 6c69  lt,err) .    eli
-00015b50: 6620 6f62 6a5f 7479 7065 2069 6e20 2827  f obj_type in ('
-00015b60: 6b44 6963 7427 2c27 6b4c 6973 7427 2c27  kDict','kList','
-00015b70: 4449 4354 2729 3a20 0a20 2020 2020 2020  DICT'): .       
-00015b80: 2072 6574 7572 6e20 4765 7428 6f62 6a2e   return Get(obj.
-00015b90: 4765 7428 292c 6964 782c 6465 6661 756c  Get(),idx,defaul
-00015ba0: 742c 6572 7229 200a 2020 2020 7265 7475  t,err) .    retu
-00015bb0: 726e 204f 7574 466f 726d 6174 285b 5d2c  rn OutFormat([],
-00015bc0: 6f75 743d 6f75 742c 6465 6661 756c 743d  out=out,default=
-00015bd0: 6465 6661 756c 742c 6f72 673d 6f62 6a2c  default,org=obj,
-00015be0: 7065 656c 3d70 6565 6c29 0a0a 0a64 6566  peel=peel)...def
-00015bf0: 2054 7279 436f 6465 2863 6f64 652c 6465   TryCode(code,de
-00015c00: 6661 756c 743d 4661 6c73 652c 5f72 6574  fault=False,_ret
-00015c10: 7572 6e5f 3d54 7275 6529 3a0a 2020 2020  urn_=True):.    
-00015c20: 2727 270a 2020 2020 5275 6e20 7374 7269  '''.    Run stri
-00015c30: 6e67 2063 6f64 650a 2020 2020 6465 6661  ng code.    defa
-00015c40: 756c 7420 3a46 616c 7365 0a20 2020 205f  ult :False.    _
-00015c50: 7265 7475 726e 5f3a 2054 7275 653a 2072  return_: True: r
-00015c60: 6574 7572 6e20 6f75 7470 7574 2c20 4661  eturn output, Fa
-00015c70: 6c73 653a 2070 7269 6e74 206f 6e20 7363  lse: print on sc
-00015c80: 7265 656e 0a20 2020 2027 2727 0a20 2020  reen.    '''.   
-00015c90: 2069 6620 5479 7065 2863 6f64 652c 7374   if Type(code,st
-00015ca0: 7229 3a0a 2020 2020 2020 2020 6572 723d  r):.        err=
-00015cb0: 4e6f 6e65 0a20 2020 2020 2020 2069 6620  None.        if 
-00015cc0: 5f72 6574 7572 6e5f 3a0a 2020 2020 2020  _return_:.      
-00015cd0: 2020 2020 2020 2320 6372 6561 7465 2066        # create f
-00015ce0: 696c 652d 6c69 6b65 2073 7472 696e 6720  ile-like string 
-00015cf0: 746f 2063 6170 7475 7265 206f 7574 7075  to capture outpu
-00015d00: 740a 2020 2020 2020 2020 2020 2020 636f  t.            co
-00015d10: 6465 4f75 7420 3d20 5374 7269 6e67 494f  deOut = StringIO
-00015d20: 2829 0a20 2020 2020 2020 2020 2020 2063  ().            c
-00015d30: 6f64 6545 7272 203d 2053 7472 696e 6749  odeErr = StringI
-00015d40: 4f28 290a 2020 2020 2020 2020 2020 2020  O().            
-00015d50: 7379 732e 7374 646f 7574 2e66 6c75 7368  sys.stdout.flush
-00015d60: 2829 0a20 2020 2020 2020 2020 2020 2073  ().            s
-00015d70: 7973 2e73 7464 6572 722e 666c 7573 6828  ys.stderr.flush(
-00015d80: 290a 2020 2020 2020 2020 2020 2020 7379  ).            sy
-00015d90: 732e 7374 646f 7574 3d63 6f64 654f 7574  s.stdout=codeOut
-00015da0: 2023 2053 7461 6e64 6172 6420 4f75 7420   # Standard Out 
-00015db0: 6672 6f6d 2061 7070 6c69 6361 7469 6f6e  from application
-00015dc0: 0a20 2020 2020 2020 2020 2020 2073 7973  .            sys
-00015dd0: 2e73 7464 6572 723d 636f 6465 4572 7220  .stderr=codeErr 
-00015de0: 2320 5374 616e 6461 7264 2045 7272 6f72  # Standard Error
-00015df0: 2066 726f 6d20 6170 706c 6963 6174 696f   from applicatio
-00015e00: 6e0a 2020 2020 2020 2020 7472 793a 0a20  n.        try:. 
-00015e10: 2020 2020 2020 2020 2020 2065 7865 6328             exec(
-00015e20: 636f 6465 290a 2020 2020 2020 2020 6578  code).        ex
-00015e30: 6365 7074 3a0a 2020 2020 2020 2020 2020  cept:.          
-00015e40: 2020 2343 6f64 6520 4572 726f 7220 6d65    #Code Error me
-00015e50: 7373 6167 650a 2020 2020 2020 2020 2020  ssage.          
-00015e60: 2020 6572 723d 4578 6365 7074 4d65 7373    err=ExceptMess
-00015e70: 6167 6528 290a 2020 2020 2020 2020 6669  age().        fi
-00015e80: 6e61 6c6c 793a 0a20 2020 2020 2020 2020  nally:.         
-00015e90: 2020 2069 6620 5f72 6574 7572 6e5f 3a0a     if _return_:.
-00015ea0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00015eb0: 7379 732e 7374 646f 7574 2e66 6c75 7368  sys.stdout.flush
-00015ec0: 2829 0a20 2020 2020 2020 2020 2020 2020  ().             
-00015ed0: 2020 2073 7973 2e73 7464 6572 722e 666c     sys.stderr.fl
-00015ee0: 7573 6828 290a 2020 2020 2020 2020 2020  ush().          
-00015ef0: 2020 2020 2020 2372 6563 6f76 6572 2f72        #recover/r
-00015f00: 6573 746f 7265 2073 7464 6f75 7420 616e  estore stdout an
-00015f10: 6420 7374 6465 7272 0a20 2020 2020 2020  d stderr.       
-00015f20: 2020 2020 2020 2020 2073 7973 2e73 7464           sys.std
-00015f30: 6f75 743d 7379 732e 5f5f 7374 646f 7574  out=sys.__stdout
-00015f40: 5f5f 0a20 2020 2020 2020 2020 2020 2020  __.             
-00015f50: 2020 2073 7973 2e73 7464 6572 723d 7379     sys.stderr=sy
-00015f60: 732e 5f5f 7374 6465 7272 5f5f 0a20 2020  s.__stderr__.   
-00015f70: 2020 2020 2020 2020 2020 2020 2023 4765               #Ge
-00015f80: 7420 7661 6c75 6520 0a20 2020 2020 2020  t value .       
-00015f90: 2020 2020 2020 2020 2072 743d 636f 6465           rt=code
-00015fa0: 4f75 742e 6765 7476 616c 7565 2829 0a20  Out.getvalue(). 
-00015fb0: 2020 2020 2020 2020 2020 2020 2020 2065                 e
-00015fc0: 723d 636f 6465 4572 722e 6765 7476 616c  r=codeErr.getval
-00015fd0: 7565 2829 0a20 2020 2020 2020 2020 2020  ue().           
-00015fe0: 2020 2020 2023 436c 6f73 6520 494f 0a20       #Close IO. 
-00015ff0: 2020 2020 2020 2020 2020 2020 2020 2063                 c
-00016000: 6f64 654f 7574 2e63 6c6f 7365 2829 0a20  odeOut.close(). 
-00016010: 2020 2020 2020 2020 2020 2020 2020 2063                 c
-00016020: 6f64 6545 7272 2e63 6c6f 7365 2829 0a20  odeErr.close(). 
-00016030: 2020 2020 2020 2020 2020 2069 6620 6572             if er
-00016040: 723a 2023 436f 6465 2045 7272 6f72 0a20  r: #Code Error. 
-00016050: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-00016060: 6620 5f72 6574 7572 6e5f 3a0a 2020 2020  f _return_:.    
-00016070: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016080: 7265 7475 726e 2046 616c 7365 2c65 7272  return False,err
-00016090: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000160a0: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
-000160b0: 2020 2020 2020 2020 2020 2053 7464 4572             StdEr
-000160c0: 7228 6572 7229 0a20 2020 2020 2020 2020  r(err).         
-000160d0: 2020 2069 6620 5f72 6574 7572 6e5f 3a0a     if _return_:.
-000160e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000160f0: 2320 5374 616e 6461 7264 204f 7574 2061  # Standard Out a
-00016100: 6e64 2045 7272 6f72 0a20 2020 2020 2020  nd Error.       
-00016110: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-00016120: 7274 2c65 720a 2020 2020 6966 205f 7265  rt,er.    if _re
-00016130: 7475 726e 5f3a 0a20 2020 2020 2020 2072  turn_:.        r
-00016140: 6574 7572 6e20 4661 6c73 652c 4e6f 6e65  eturn False,None
-00016150: 2020 234e 6f74 2061 2073 7472 696e 6720    #Not a string 
-00016160: 636f 6465 0a0a 6465 6620 4578 6365 7074  code..def Except
-00016170: 4d65 7373 6167 6528 6d73 673d 2727 2c64  Message(msg='',d
-00016180: 6566 6175 6c74 3d4e 6f6e 6529 3a0a 2020  efault=None):.  
-00016190: 2020 2727 270a 2020 2020 5472 793a 0a20    '''.    Try:. 
-000161a0: 2020 2020 2020 4141 410a 2020 2020 4578        AAA.    Ex
-000161b0: 6365 7074 3a0a 2020 2020 2020 2065 7272  cept:.       err
-000161c0: 3d45 7863 6570 744d 6573 7361 6765 2829  =ExceptMessage()
-000161d0: 203d 3e20 4966 2065 7863 6570 7469 6e67   => If excepting
-000161e0: 2074 6865 6e20 7461 6b65 6e20 6572 726f   then taken erro
-000161f0: 7220 6f72 2074 7261 6365 6261 636b 2063  r or traceback c
-00016200: 6f64 6520 616e 6420 7265 7475 726e 2069  ode and return i
-00016210: 740a 2020 2020 2727 270a 2020 2020 653d  t.    '''.    e=
-00016220: 7379 732e 6578 635f 696e 666f 2829 5b30  sys.exc_info()[0
-00016230: 5d0a 2020 2020 6572 3d74 7261 6365 6261  ].    er=traceba
-00016240: 636b 2e66 6f72 6d61 745f 6578 6328 290a  ck.format_exc().
-00016250: 2020 2020 6966 2065 206f 7220 6572 2021      if e or er !
-00016260: 3d20 274e 6f6e 6554 7970 653a 204e 6f6e  = 'NoneType: Non
-00016270: 655c 6e27 3a0a 2020 2020 2020 2020 6966  e\n':.        if
-00016280: 206d 7367 3a0a 2020 2020 2020 2020 2020   msg:.          
-00016290: 2020 6d73 673d 277b 7d5c 6e5c 6e7b 7d5c    msg='{}\n\n{}\
-000162a0: 6e5c 6e7b 7d27 2e66 6f72 6d61 7428 6d73  n\n{}'.format(ms
-000162b0: 672c 652c 6572 290a 2020 2020 2020 2020  g,e,er).        
-000162c0: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
-000162d0: 2020 6d73 673d 275c 6e5c 6e7b 7d5c 6e5c    msg='\n\n{}\n\
-000162e0: 6e7b 7d27 2e66 6f72 6d61 7428 652c 6572  n{}'.format(e,er
-000162f0: 290a 2020 2020 2020 2020 7265 7475 726e  ).        return
-00016300: 206d 7367 0a20 2020 2072 6574 7572 6e20   msg.    return 
-00016310: 6465 6661 756c 740a 0a64 6566 2049 7056  default..def IpV
-00016320: 3428 6970 2c6f 7574 3d27 7374 7227 2c64  4(ip,out='str',d
-00016330: 6566 6175 6c74 3d46 616c 7365 2c70 6f72  efault=False,por
-00016340: 743d 4e6f 6e65 2c62 6d63 3d46 616c 7365  t=None,bmc=False
-00016350: 2c75 7365 643d 4661 6c73 652c 706f 6f6c  ,used=False,pool
-00016360: 3d4e 6f6e 6529 3a0a 2020 2020 2727 270a  =None):.    '''.
-00016370: 2020 2020 6368 6563 6b2f 636f 6e76 6572      check/conver
-00016380: 7420 4950 0a20 2020 2069 7020 3a20 696e  t IP.    ip : in
-00016390: 742c 2073 7472 2c20 2e2e 2e0a 2020 2020  t, str, ....    
-000163a0: 6f75 743a 0a20 2020 2020 2073 7472 203a  out:.      str :
-000163b0: 2064 6566 6175 6c74 203a 2063 6f6e 7665   default : conve
-000163c0: 7274 2074 6f20 7878 782e 7878 782e 7878  rt to xxx.xxx.xx
-000163d0: 782e 7878 7820 666f 726d 6174 0a20 2020  x.xxx format.   
-000163e0: 2020 2069 6e74 203a 2063 6f6e 7665 7274     int : convert
-000163f0: 2074 6f20 696e 7420 666f 726d 6174 0a20   to int format. 
-00016400: 2020 2020 2068 6578 203a 2063 6f6e 7665       hex : conve
-00016410: 7274 2074 6f20 6865 7820 666f 726d 6174  rt to hex format
-00016420: 0a20 2020 2070 6f72 743a 2069 6620 796f  .    port: if yo
-00016430: 7520 7761 6e74 2063 6865 636b 2074 6865  u want check the
-00016440: 2049 5020 7769 7468 2070 6f72 7420 7468   IP with port th
-00016450: 656e 2074 7970 650a 2020 2020 626d 6320  en type.    bmc 
-00016460: 3a20 6465 6661 756c 7420 4661 6c73 652c  : default False,
-00016470: 2054 7275 653a 2063 6865 636b 2042 4d43   True: check BMC
-00016480: 2070 6f72 7420 2836 3233 2c36 3634 2c34   port (623,664,4
-00016490: 3433 290a 2020 2020 7265 7475 726e 203a  43).    return :
-000164a0: 2049 502c 2069 6620 6661 696c 2074 6865   IP, if fail the
-000164b0: 6e20 7265 7475 726e 2064 6566 6175 6c74  n return default
-000164c0: 2076 616c 7565 0a20 2020 2075 7365 643a   value.    used:
-000164d0: 0a20 2020 2020 202a 2072 6571 7569 7265  .      * require
-000164e0: 6420 706f 7274 206f 7074 696f 6e2c 2062  d port option, b
-000164f0: 7574 2063 6865 636b 2077 6974 6820 7369  ut check with si
-00016500: 6e67 6c65 2070 6f72 740a 2020 2020 2020  ngle port.      
-00016510: 4661 6c73 653a 2064 6566 6175 6c74 2028  False: default (
-00016520: 6e6f 7420 6368 6563 6b29 0a20 2020 2020  not check).     
-00016530: 2054 7275 653a 2043 6865 636b 2049 5020   True: Check IP 
-00016540: 616c 7265 6164 7920 7573 6564 2074 6865  already used the
-00016550: 2070 6f72 7428 7265 7475 726e 2054 7275   port(return Tru
-00016560: 6529 206f 7220 7374 696c 6c20 6176 6169  e) or still avai
-00016570: 6c61 626c 6528 7265 7475 726e 2046 616c  lable(return Fal
-00016580: 7365 290a 2020 2020 706f 6f6c 3a20 6966  se).    pool: if
-00016590: 2067 6976 6520 4950 2050 6f6f 6c28 7475   give IP Pool(tu
-000165a0: 706c 6529 2074 6865 6e20 6368 6563 6b20  ple) then check 
-000165b0: 7468 6520 4950 2069 7320 696e 2074 6865  the IP is in the
-000165c0: 2050 4f4f 4c20 6f72 206e 6f74 2e0a 2020   POOL or not..  
-000165d0: 2020 2727 270a 2020 2020 6465 6620 4973    '''.    def Is
-000165e0: 4f70 656e 506f 7274 2869 702c 706f 7274  OpenPort(ip,port
-000165f0: 293a 0a20 2020 2020 2020 2027 2727 0a20  ):.        '''. 
-00016600: 2020 2020 2020 2049 7420 636f 6e6e 6563         It connec
-00016610: 7469 6f6e 6162 6c65 2070 6f72 7428 3f29  tionable port(?)
-00016620: 206c 696b 6520 6173 2073 7368 2c20 6674   like as ssh, ft
-00016630: 702c 2074 656c 6e65 742c 2077 6562 2c20  p, telnet, web, 
-00016640: 2e2e 2e0a 2020 2020 2020 2020 2727 270a  ....        '''.
-00016650: 2020 2020 2020 2020 7463 705f 736b 203d          tcp_sk =
-00016660: 2073 6f63 6b65 742e 736f 636b 6574 2873   socket.socket(s
-00016670: 6f63 6b65 742e 4146 5f49 4e45 542c 2073  ocket.AF_INET, s
-00016680: 6f63 6b65 742e 534f 434b 5f53 5452 4541  ocket.SOCK_STREA
-00016690: 4d29 0a20 2020 2020 2020 2074 6370 5f73  M).        tcp_s
-000166a0: 6b2e 7365 7473 6f63 6b6f 7074 2873 6f63  k.setsockopt(soc
-000166b0: 6b65 742e 534f 4c5f 534f 434b 4554 2c20  ket.SOL_SOCKET, 
-000166c0: 736f 636b 6574 2e53 4f5f 5245 5553 4541  socket.SO_REUSEA
-000166d0: 4444 522c 2031 290a 2020 2020 2020 2020  DDR, 1).        
-000166e0: 7463 705f 736b 2e73 6574 7469 6d65 6f75  tcp_sk.settimeou
-000166f0: 7428 3129 0a20 2020 2020 2020 2072 743d  t(1).        rt=
-00016700: 5b5d 0a20 2020 2020 2020 2066 6f72 2070  [].        for p
-00016710: 7420 696e 2070 6f72 743a 0a20 2020 2020  t in port:.     
-00016720: 2020 2020 2020 2074 7279 3a0a 2020 2020         try:.    
-00016730: 2020 2020 2020 2020 2020 2020 7463 705f              tcp_
-00016740: 736b 2e63 6f6e 6e65 6374 2828 6970 2c70  sk.connect((ip,p
-00016750: 7429 290a 2020 2020 2020 2020 2020 2020  t)).            
-00016760: 2020 2020 7463 705f 736b 2e63 6c6f 7365      tcp_sk.close
-00016770: 2829 0a20 2020 2020 2020 2020 2020 2020  ().             
-00016780: 2020 2072 742e 6170 7065 6e64 2870 7429     rt.append(pt)
-00016790: 0a20 2020 2020 2020 2020 2020 2065 7863  .            exc
-000167a0: 6570 743a 0a20 2020 2020 2020 2020 2020  ept:.           
-000167b0: 2020 2020 2070 6173 730a 2020 2020 2020       pass.      
-000167c0: 2020 7265 7475 726e 2072 740a 2020 2020    return rt.    
-000167d0: 6465 6620 4973 5573 6564 506f 7274 2869  def IsUsedPort(i
-000167e0: 702c 706f 7274 293a 0a20 2020 2020 2020  p,port):.       
-000167f0: 2027 2727 0a20 2020 2020 2020 2054 6865   '''.        The
-00016800: 2049 5020 616c 7265 6164 7920 7573 6564   IP already used
-00016810: 2074 6865 2070 6f72 742c 2069 7420 6a75   the port, it ju
-00016820: 7374 2063 6865 636b 7570 2061 7661 696c  st checkup avail
-00016830: 6162 6c65 2070 6f72 7420 6f72 2061 6c72  able port or alr
-00016840: 6561 6420 7573 6564 0a20 2020 2020 2020  ead used.       
-00016850: 2027 2727 0a20 2020 2020 2020 2069 6620   '''.        if 
-00016860: 4973 4e6f 6e65 2869 702c 6368 6b5f 7661  IsNone(ip,chk_va
-00016870: 6c3d 5b4e 6f6e 652c 2727 2c27 6c6f 6361  l=[None,'','loca
-00016880: 6c68 6f73 7427 2c27 6c6f 6361 6c27 5d29  lhost','local'])
-00016890: 3a0a 2020 2020 2020 2020 2020 2020 6970  :.            ip
-000168a0: 3d27 3132 372e 302e 302e 3127 0a20 2020  ='127.0.0.1'.   
-000168b0: 2020 2020 2073 6f63 3d73 6f63 6b65 742e       soc=socket.
-000168c0: 736f 636b 6574 2873 6f63 6b65 742e 4146  socket(socket.AF
-000168d0: 5f49 4e45 542c 2073 6f63 6b65 742e 534f  _INET, socket.SO
-000168e0: 434b 5f53 5452 4541 4d29 0a20 2020 2020  CK_STREAM).     
-000168f0: 2020 2072 743d 5b5d 0a20 2020 2020 2020     rt=[].       
-00016900: 2066 6f72 2070 7420 696e 2070 6f72 743a   for pt in port:
-00016910: 0a20 2020 2020 2020 2020 2020 2074 7279  .            try
-00016920: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00016930: 2020 6c6f 6361 7469 6f6e 3d28 6970 2c70    location=(ip,p
-00016940: 7429 0a20 2020 2020 2020 2020 2020 2020  t).             
-00016950: 2020 2072 743d 736f 632e 636f 6e6e 6563     rt=soc.connec
-00016960: 745f 6578 286c 6f63 6174 696f 6e29 0a20  t_ex(location). 
-00016970: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-00016980: 6f63 2e63 6c6f 7365 2829 0a20 2020 2020  oc.close().     
-00016990: 2020 2020 2020 2020 2020 2023 7274 3d3d             #rt==
-000169a0: 3020 7468 656e 2061 6c72 6561 6479 2075  0 then already u
-000169b0: 7365 640a 2020 2020 2020 2020 2020 2020  sed.            
-000169c0: 2020 2020 6966 2072 7420 3d3d 2030 3a20      if rt == 0: 
-000169d0: 7274 2e61 7070 656e 6428 7074 290a 2020  rt.append(pt).  
-000169e0: 2020 2020 2020 2020 2020 6578 6365 7074            except
-000169f0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00016a00: 2020 7061 7373 0a20 2020 2020 2020 2072    pass.        r
-00016a10: 6574 7572 6e20 7274 0a20 2020 2069 6620  eturn rt.    if 
-00016a20: 626d 633a 2023 2055 7064 6174 6520 424d  bmc: # Update BM
-00016a30: 4320 506f 7274 0a20 2020 2020 2020 2064  C Port.        d
-00016a40: 6566 6175 6c74 5f62 6d63 5f70 6f72 743d  efault_bmc_port=
-00016a50: 5b36 3233 2c36 3634 2c34 3433 5d0a 2020  [623,664,443].  
-00016a60: 2020 2020 2020 6966 206e 6f74 2049 734e        if not IsN
-00016a70: 6f6e 6528 706f 7274 293a 0a20 2020 2020  one(port):.     
-00016a80: 2020 2020 2020 2070 6f72 743d 496e 7428         port=Int(
-00016a90: 706f 7274 2c64 6566 6175 6c74 3d46 616c  port,default=Fal
-00016aa0: 7365 290a 2020 2020 2020 2020 2020 2020  se).            
-00016ab0: 6966 2069 7369 6e73 7461 6e63 6528 706f  if isinstance(po
-00016ac0: 7274 2c28 6c69 7374 2c74 7570 6c65 2929  rt,(list,tuple))
-00016ad0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00016ae0: 2020 666f 7220 6920 696e 2070 6f72 743a    for i in port:
-00016af0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00016b00: 2020 2020 2069 6620 6920 6e6f 7420 696e       if i not in
-00016b10: 2064 6566 6175 6c74 5f62 6d63 5f70 6f72   default_bmc_por
-00016b20: 743a 2064 6566 6175 6c74 5f62 6d63 5f70  t: default_bmc_p
-00016b30: 6f72 742e 6170 7065 6e64 2869 290a 2020  ort.append(i).  
-00016b40: 2020 2020 2020 2020 2020 656c 6966 2069            elif i
-00016b50: 7369 6e73 7461 6e63 6528 706f 7274 2c69  sinstance(port,i
-00016b60: 6e74 293a 0a20 2020 2020 2020 2020 2020  nt):.           
-00016b70: 2020 2020 2069 6620 706f 7274 206e 6f74       if port not
-00016b80: 2069 6e20 6465 6661 756c 745f 626d 635f   in default_bmc_
-00016b90: 706f 7274 3a0a 2020 2020 2020 2020 2020  port:.          
-00016ba0: 2020 2020 2020 2020 2020 6465 6661 756c            defaul
-00016bb0: 745f 626d 635f 706f 7274 2e61 7070 656e  t_bmc_port.appen
-00016bc0: 6428 706f 7274 290a 2020 2020 2020 2020  d(port).        
-00016bd0: 706f 7274 3d74 7570 6c65 2864 6566 6175  port=tuple(defau
-00016be0: 6c74 5f62 6d63 5f70 6f72 7429 0a20 2020  lt_bmc_port).   
-00016bf0: 2069 6620 706f 7274 3a0a 2020 2020 2020   if port:.      
-00016c00: 2020 706f 7274 3d49 6e74 2870 6f72 742c    port=Int(port,
-00016c10: 6465 6661 756c 743d 4661 6c73 6529 0a20  default=False). 
-00016c20: 2020 2020 2020 2069 6620 706f 7274 2069         if port i
-00016c30: 7320 4661 6c73 653a 2072 6574 7572 6e20  s False: return 
-00016c40: 6465 6661 756c 740a 2020 2020 2020 2020  default.        
-00016c50: 6966 2054 7970 6528 706f 7274 2c69 6e74  if Type(port,int
-00016c60: 293a 2070 6f72 743d 5b70 6f72 745d 0a20  ): port=[port]. 
-00016c70: 2020 2069 705f 696e 743d 4e6f 6e65 0a20     ip_int=None. 
-00016c80: 2020 2069 6620 6973 696e 7374 616e 6365     if isinstance
-00016c90: 2869 702c 7374 7229 3a0a 2020 2020 2020  (ip,str):.      
-00016ca0: 2020 6970 7374 723d 6970 2e73 7472 6970    ipstr=ip.strip
-00016cb0: 2829 0a20 2020 2020 2020 2069 6620 2730  ().        if '0
-00016cc0: 7827 2069 6e20 6970 7374 723a 0a20 2020  x' in ipstr:.   
-00016cd0: 2020 2020 2020 2020 2069 705f 696e 743d           ip_int=
-00016ce0: 696e 7428 6970 7374 722c 3136 290a 2020  int(ipstr,16).  
-00016cf0: 2020 2020 2020 656c 6966 2069 7073 7472        elif ipstr
-00016d00: 2e69 7364 6967 6974 2829 3a0a 2020 2020  .isdigit():.    
-00016d10: 2020 2020 2020 2020 6970 5f69 6e74 3d69          ip_int=i
-00016d20: 6e74 2869 7073 7472 290a 2020 2020 2020  nt(ipstr).      
-00016d30: 2020 656c 6966 2027 2e27 2069 6e20 6970    elif '.' in ip
-00016d40: 7374 723a 0a20 2020 2020 2020 2020 2020  str:.           
-00016d50: 2074 7279 3a0a 2020 2020 2020 2020 2020   try:.          
-00016d60: 2020 2020 2020 6970 5f69 6e74 3d73 7472        ip_int=str
-00016d70: 7563 742e 756e 7061 636b 2822 2149 222c  uct.unpack("!I",
-00016d80: 2073 6f63 6b65 742e 696e 6574 5f61 746f   socket.inet_ato
-00016d90: 6e28 6970 7374 7229 295b 305d 2023 2063  n(ipstr))[0] # c
-00016da0: 6f6e 7665 7274 2049 6e74 2049 500a 2020  onvert Int IP.  
-00016db0: 2020 2020 2020 2020 2020 2020 2020 2373                #s
-00016dc0: 7472 7563 742e 756e 7061 636b 2822 214c  truct.unpack("!L
-00016dd0: 222c 2073 6f63 6b65 742e 696e 6574 5f61  ", socket.inet_a
-00016de0: 746f 6e28 6970 2929 5b30 5d0a 2020 2020  ton(ip))[0].    
-00016df0: 2020 2020 2020 2020 6578 6365 7074 3a0a          except:.
-00016e00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016e10: 7265 7475 726e 2064 6566 6175 6c74 0a20  return default. 
-00016e20: 2020 2065 6c69 6620 6973 696e 7374 616e     elif isinstan
-00016e30: 6365 2869 702c 696e 7429 3a0a 2020 2020  ce(ip,int):.    
-00016e40: 2020 2020 7472 793a 0a20 2020 2020 2020      try:.       
-00016e50: 2020 2020 2073 6f63 6b65 742e 696e 6574       socket.inet
-00016e60: 5f6e 746f 6128 7374 7275 6374 2e70 6163  _ntoa(struct.pac
-00016e70: 6b28 2221 4922 2c20 6970 2929 2023 2063  k("!I", ip)) # c
-00016e80: 6865 636b 2069 6e74 2069 7320 4950 206f  heck int is IP o
-00016e90: 7220 6e6f 740a 2020 2020 2020 2020 2020  r not.          
-00016ea0: 2020 6970 5f69 6e74 3d69 700a 2020 2020    ip_int=ip.    
-00016eb0: 2020 2020 6578 6365 7074 3a0a 2020 2020      except:.    
-00016ec0: 2020 2020 2020 2020 7265 7475 726e 2064          return d
-00016ed0: 6566 6175 6c74 0a20 2020 2065 6c69 6620  efault.    elif 
-00016ee0: 6973 696e 7374 616e 6365 2869 702c 7479  isinstance(ip,ty
-00016ef0: 7065 2868 6578 2929 3a0a 2020 2020 2020  pe(hex)):.      
-00016f00: 2020 6970 5f69 6e74 3d69 6e74 2869 702c    ip_int=int(ip,
-00016f10: 3136 290a 0a20 2020 2069 6620 6e6f 7420  16)..    if not 
-00016f20: 4973 4e6f 6e65 2869 705f 696e 7429 3a0a  IsNone(ip_int):.
-00016f30: 2020 2020 2020 2020 7472 793a 0a20 2020          try:.   
-00016f40: 2020 2020 2020 2020 2069 6620 6f75 7420           if out 
-00016f50: 696e 205b 2769 6e74 272c 696e 745d 3a0a  in ['int',int]:.
-00016f60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016f70: 7265 7475 726e 2069 705f 696e 740a 2020  return ip_int.  
-00016f80: 2020 2020 2020 2020 2020 656c 6966 206f            elif o
-00016f90: 7574 2069 6e20 5b27 6865 7827 2c68 6578  ut in ['hex',hex
-00016fa0: 5d3a 0a20 2020 2020 2020 2020 2020 2020  ]:.             
-00016fb0: 2020 2072 6574 7572 6e20 6865 7828 6970     return hex(ip
-00016fc0: 5f69 6e74 290a 2020 2020 2020 2020 2020  _int).          
-00016fd0: 2020 656c 6966 2069 7369 6e73 7461 6e63    elif isinstanc
-00016fe0: 6528 706f 6f6c 2c28 6c69 7374 2c74 7570  e(pool,(list,tup
-00016ff0: 6c65 2929 2061 6e64 206c 656e 2870 6f6f  le)) and len(poo
-00017000: 6c29 203d 3d20 323a 0a20 2020 2020 2020  l) == 2:.       
-00017010: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-00017020: 4970 5634 2870 6f6f 6c5b 305d 2c6f 7574  IpV4(pool[0],out
-00017030: 3d69 6e74 2920 3c3d 2069 705f 696e 7420  =int) <= ip_int 
-00017040: 3c3d 2049 7056 3428 706f 6f6c 5b31 5d2c  <= IpV4(pool[1],
-00017050: 6f75 743d 696e 7429 0a20 2020 2020 2020  out=int).       
-00017060: 2020 2020 2065 6c73 653a 2023 6465 6661       else: #defa
-00017070: 756c 7420 746f 2073 7472 0a20 2020 2020  ult to str.     
-00017080: 2020 2020 2020 2020 2020 2069 705f 7374             ip_st
-00017090: 723d 736f 636b 6574 2e69 6e65 745f 6e74  r=socket.inet_nt
-000170a0: 6f61 2873 7472 7563 742e 7061 636b 2822  oa(struct.pack("
-000170b0: 2149 222c 2069 705f 696e 7429 290a 2020  !I", ip_int)).  
-000170c0: 2020 2020 2020 2020 2020 2020 2020 6966                if
-000170d0: 2070 6f72 743a 2023 2049 6620 6269 6e67   port: # If bing
-000170e0: 2050 6f72 7420 7468 656e 2063 6865 636b   Port then check
-000170f0: 2074 6865 2070 6f72 740a 2020 2020 2020   the port.      
-00017100: 2020 2020 2020 2020 2020 2020 2020 6966                if
-00017110: 2075 7365 643a 0a20 2020 2020 2020 2020   used:.         
-00017120: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-00017130: 743d 4973 5573 6564 506f 7274 2869 705f  t=IsUsedPort(ip_
-00017140: 7374 722c 706f 7274 290a 2020 2020 2020  str,port).      
-00017150: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00017160: 2020 6966 2072 743a 2072 6574 7572 6e20    if rt: return 
-00017170: 7274 0a20 2020 2020 2020 2020 2020 2020  rt.             
-00017180: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
-00017190: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000171a0: 2020 2020 2072 743d 4973 4f70 656e 506f       rt=IsOpenPo
-000171b0: 7274 2869 705f 7374 722c 706f 7274 290a  rt(ip_str,port).
-000171c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000171d0: 2020 2020 2020 2020 6966 2072 743a 2072          if rt: r
-000171e0: 6574 7572 6e20 7274 0a20 2020 2020 2020  eturn rt.       
-000171f0: 2020 2020 2020 2020 2065 6c73 653a 0a20           else:. 
-00017200: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00017210: 2020 2072 6574 7572 6e20 6970 5f73 7472     return ip_str
-00017220: 0a20 2020 2020 2020 2065 7863 6570 743a  .        except:
-00017230: 0a20 2020 2020 2020 2020 2020 2070 6173  .            pas
-00017240: 730a 2020 2020 7265 7475 726e 2064 6566  s.    return def
-00017250: 6175 6c74 0a0a 6465 6620 7069 6e67 2868  ault..def ping(h
-00017260: 6f73 742c 2a2a 6f70 7473 293a 0a20 2020  ost,**opts):.   
-00017270: 2027 2727 0a20 2020 2073 616d 6520 6173   '''.    same as
-00017280: 2070 696e 6720 636f 6d6d 616e 640a 2020   ping command.  
-00017290: 2020 2727 270a 2020 2020 636f 756e 743d    '''.    count=
-000172a0: 6f70 7473 2e67 6574 2827 636f 756e 7427  opts.get('count'
-000172b0: 2c30 290a 2020 2020 696e 7465 7276 616c  ,0).    interval
-000172c0: 3d6f 7074 732e 6765 7428 2769 6e74 6572  =opts.get('inter
-000172d0: 7661 6c27 2c31 290a 2020 2020 6b65 6570  val',1).    keep
-000172e0: 5f67 6f6f 643d 6f70 7473 2e67 6574 2827  _good=opts.get('
-000172f0: 6b65 6570 5f67 6f6f 6427 2c30 290a 2020  keep_good',0).  
-00017300: 2020 7469 6d65 6f75 743d 6f70 7473 2e67    timeout=opts.g
-00017310: 6574 2827 7469 6d65 6f75 7427 2c6f 7074  et('timeout',opt
-00017320: 732e 6765 7428 2774 696d 656f 7574 5f73  s.get('timeout_s
-00017330: 6563 272c 3029 290a 2020 2020 6c6f 7374  ec',0)).    lost
-00017340: 5f6d 6f6e 3d6f 7074 732e 6765 7428 276c  _mon=opts.get('l
-00017350: 6f73 745f 6d6f 6e27 2c46 616c 7365 290a  ost_mon',False).
-00017360: 2020 2020 6c6f 673d 6f70 7473 2e67 6574      log=opts.get
-00017370: 2827 6c6f 6727 2c4e 6f6e 6529 0a20 2020  ('log',None).   
-00017380: 2073 746f 705f 6675 6e63 3d6f 7074 732e   stop_func=opts.
-00017390: 6765 7428 2773 746f 705f 6675 6e63 272c  get('stop_func',
-000173a0: 4e6f 6e65 290a 2020 2020 6c6f 675f 666f  None).    log_fo
-000173b0: 726d 6174 3d6f 7074 732e 6765 7428 276c  rmat=opts.get('l
-000173c0: 6f67 5f66 6f72 6d61 7427 2c27 2e27 290a  og_format','.').
-000173d0: 2020 2020 616c 6976 655f 706f 7274 3d6f      alive_port=o
-000173e0: 7074 732e 6765 7428 2761 6c69 7665 5f70  pts.get('alive_p
-000173f0: 6f72 7427 290a 2020 2020 6361 6e63 656c  ort').    cancel
-00017400: 5f66 756e 633d 6f70 7473 2e67 6574 2827  _func=opts.get('
-00017410: 6361 6e63 656c 5f66 756e 6327 2c4e 6f6e  cancel_func',Non
-00017420: 6529 0a0a 2020 2020 4943 4d50 5f45 4348  e)..    ICMP_ECH
-00017430: 4f5f 5245 5155 4553 5420 3d20 3820 2320  O_REQUEST = 8 # 
-00017440: 5365 656d 7320 746f 2062 6520 7468 6520  Seems to be the 
-00017450: 7361 6d65 206f 6e20 536f 6c61 7269 732e  same on Solaris.
-00017460: 2046 726f 6d20 2f75 7372 2f69 6e63 6c75   From /usr/inclu
-00017470: 6465 2f6c 696e 7578 2f69 636d 702e 683b  de/linux/icmp.h;
-00017480: 0a20 2020 2049 434d 505f 434f 4445 203d  .    ICMP_CODE =
-00017490: 2073 6f63 6b65 742e 6765 7470 726f 746f   socket.getproto
-000174a0: 6279 6e61 6d65 2827 6963 6d70 2729 0a20  byname('icmp'). 
-000174b0: 2020 2045 5252 4f52 5f44 4553 4352 203d     ERROR_DESCR =
-000174c0: 207b 0a20 2020 2020 2020 2031 3a20 2720   {.        1: ' 
-000174d0: 2d20 4e6f 7465 2074 6861 7420 4943 4d50  - Note that ICMP
-000174e0: 206d 6573 7361 6765 7320 6361 6e20 6f6e   messages can on
-000174f0: 6c79 2062 6520 270a 2020 2020 2020 2020  ly be '.        
-00017500: 2020 2027 7365 6e74 2066 726f 6d20 7072     'sent from pr
-00017510: 6f63 6573 7365 7320 7275 6e6e 696e 6720  ocesses running 
-00017520: 6173 2072 6f6f 742e 272c 0a20 2020 2020  as root.',.     
-00017530: 2020 2031 3030 3133 3a20 2720 2d20 4e6f     10013: ' - No
-00017540: 7465 2074 6861 7420 4943 4d50 206d 6573  te that ICMP mes
-00017550: 7361 6765 7320 6361 6e20 6f6e 6c79 2062  sages can only b
-00017560: 6520 7365 6e74 2062 7927 0a20 2020 2020  e sent by'.     
-00017570: 2020 2020 2020 2020 2020 2720 7573 6572            ' user
-00017580: 7320 6f72 2070 726f 6365 7373 6573 2077  s or processes w
-00017590: 6974 6820 6164 6d69 6e69 7374 7261 746f  ith administrato
-000175a0: 7220 7269 6768 7473 2e27 0a20 2020 2020  r rights.'.     
-000175b0: 2020 207d 0a0a 2020 2020 6465 6620 6368     }..    def ch
-000175c0: 6563 6b73 756d 286d 7367 293a 0a20 2020  ecksum(msg):.   
-000175d0: 2020 2020 2073 756d 203d 2030 0a20 2020       sum = 0.   
-000175e0: 2020 2020 2073 697a 6520 3d20 286c 656e       size = (len
-000175f0: 286d 7367 2920 2f2f 2032 2920 2a20 320a  (msg) // 2) * 2.
-00017600: 2020 2020 2020 2020 666f 7220 6320 696e          for c in
-00017610: 2072 616e 6765 2830 2c73 697a 652c 2032   range(0,size, 2
-00017620: 293a 0a20 2020 2020 2020 2020 2020 2073  ):.            s
-00017630: 756d 203d 2028 7375 6d20 2b20 6f72 6428  um = (sum + ord(
-00017640: 6d73 675b 6320 2b20 315d 292a 3235 362b  msg[c + 1])*256+
-00017650: 6f72 6428 6d73 675b 635d 2929 2026 2030  ord(msg[c])) & 0
-00017660: 7866 6666 6666 6666 660a 2020 2020 2020  xffffffff.      
-00017670: 2020 6966 2073 697a 6520 3c20 6c65 6e28    if size < len(
-00017680: 6d73 6729 3a0a 2020 2020 2020 2020 2020  msg):.          
-00017690: 2020 7375 6d20 3d20 2873 756d 2b6f 7264    sum = (sum+ord
-000176a0: 286d 7367 5b6c 656e 286d 7367 2920 2d20  (msg[len(msg) - 
-000176b0: 315d 2929 2026 2030 7866 6666 6666 6666  1])) & 0xfffffff
-000176c0: 660a 2020 2020 2020 2020 7261 203d 207e  f.        ra = ~
-000176d0: 2828 7375 6d20 3e3e 2031 3629 202b 2028  ((sum >> 16) + (
-000176e0: 7375 6d20 2620 3078 6666 6666 2920 2b20  sum & 0xffff) + 
-000176f0: 2873 756d 203e 3e20 3136 2929 2026 2030  (sum >> 16)) & 0
-00017700: 7866 6666 660a 2020 2020 2020 2020 7261  xffff.        ra
-00017710: 203d 2072 6120 3e3e 2038 207c 2028 7261   = ra >> 8 | (ra
-00017720: 203c 3c20 3820 2620 3078 6666 3030 290a   << 8 & 0xff00).
-00017730: 2020 2020 2020 2020 7265 7475 726e 2072          return r
-00017740: 610a 0a20 2020 2064 6566 206d 6b5f 7061  a..    def mk_pa
-00017750: 636b 6574 2873 697a 6529 3a0a 2020 2020  cket(size):.    
-00017760: 2020 2020 2222 224d 616b 6520 6120 6e65      """Make a ne
-00017770: 7720 6563 686f 2072 6571 7565 7374 2070  w echo request p
-00017780: 6163 6b65 7420 6163 636f 7264 696e 6720  acket according 
-00017790: 746f 2073 697a 6522 2222 0a20 2020 2020  to size""".     
-000177a0: 2020 2023 2048 6561 6465 7220 6973 2074     # Header is t
-000177b0: 7970 6520 2838 292c 2063 6f64 6520 2838  ype (8), code (8
-000177c0: 292c 2063 6865 636b 7375 6d20 2831 3629  ), checksum (16)
-000177d0: 2c20 6964 2028 3136 292c 2073 6571 7565  , id (16), seque
-000177e0: 6e63 6520 2831 3629 0a20 2020 2020 2020  nce (16).       
-000177f0: 2068 6561 6465 7220 3d20 7374 7275 6374   header = struct
-00017800: 2e70 6163 6b28 2762 6248 4868 272c 2049  .pack('bbHHh', I
-00017810: 434d 505f 4543 484f 5f52 4551 5545 5354  CMP_ECHO_REQUEST
-00017820: 2c20 302c 2030 2c20 7369 7a65 2c20 3129  , 0, 0, size, 1)
-00017830: 0a20 2020 2020 2020 2023 6461 7461 203d  .        #data =
-00017840: 2073 7472 7563 742e 6361 6c63 7369 7a65   struct.calcsize
-00017850: 2827 6262 4848 6827 2920 2a20 2751 270a  ('bbHHh') * 'Q'.
-00017860: 2020 2020 2020 2020 6461 7461 203d 2073          data = s
-00017870: 697a 6520 2a20 2751 270a 2020 2020 2020  ize * 'Q'.      
-00017880: 2020 6d79 5f63 6865 636b 7375 6d20 3d20    my_checksum = 
-00017890: 6368 6563 6b73 756d 2853 7472 2868 6561  checksum(Str(hea
-000178a0: 6465 7229 202b 2064 6174 6129 0a20 2020  der) + data).   
-000178b0: 2020 2020 2068 6561 6465 7220 3d20 7374       header = st
-000178c0: 7275 6374 2e70 6163 6b28 2762 6248 4868  ruct.pack('bbHHh
-000178d0: 272c 2049 434d 505f 4543 484f 5f52 4551  ', ICMP_ECHO_REQ
-000178e0: 5545 5354 2c20 302c 0a20 2020 2020 2020  UEST, 0,.       
-000178f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00017900: 2020 2020 2020 736f 636b 6574 2e68 746f        socket.hto
-00017910: 6e73 286d 795f 6368 6563 6b73 756d 292c  ns(my_checksum),
-00017920: 2073 697a 652c 2031 290a 2020 2020 2020   size, 1).      
-00017930: 2020 7265 7475 726e 2068 6561 6465 7220    return header 
-00017940: 2b20 4279 7465 7328 6461 7461 290a 0a20  + Bytes(data).. 
-00017950: 2020 2064 6566 2072 6563 6569 7665 286d     def receive(m
-00017960: 795f 736f 636b 6574 2c20 7373 697a 652c  y_socket, ssize,
-00017970: 2073 7469 6d65 2c20 7469 6d65 6f75 7429   stime, timeout)
-00017980: 3a0a 2020 2020 2020 2020 7768 696c 6520  :.        while 
-00017990: 5472 7565 3a0a 2020 2020 2020 2020 2020  True:.          
-000179a0: 2020 6966 2074 696d 656f 7574 203c 3d20    if timeout <= 
-000179b0: 303a 0a20 2020 2020 2020 2020 2020 2020  0:.             
-000179c0: 2020 2072 6574 7572 6e0a 2020 2020 2020     return.      
-000179d0: 2020 2020 2020 7265 6164 7920 3d20 7365        ready = se
-000179e0: 6c65 6374 2e73 656c 6563 7428 5b6d 795f  lect.select([my_
-000179f0: 736f 636b 6574 5d2c 205b 5d2c 205b 5d2c  socket], [], [],
-00017a00: 2074 696d 656f 7574 290a 2020 2020 2020   timeout).      
-00017a10: 2020 2020 2020 6966 2072 6561 6479 5b30        if ready[0
-00017a20: 5d20 3d3d 205b 5d3a 2023 2054 696d 656f  ] == []: # Timeo
-00017a30: 7574 0a20 2020 2020 2020 2020 2020 2020  ut.             
-00017a40: 2020 2072 6574 7572 6e0a 2020 2020 2020     return.      
-00017a50: 2020 2020 2020 7265 6365 6976 6564 5f74        received_t
-00017a60: 696d 6520 3d20 7469 6d65 2e74 696d 6528  ime = time.time(
-00017a70: 290a 2020 2020 2020 2020 2020 2020 7061  ).            pa
-00017a80: 636b 6574 2c20 6164 6472 203d 206d 795f  cket, addr = my_
-00017a90: 736f 636b 6574 2e72 6563 7666 726f 6d28  socket.recvfrom(
-00017aa0: 3130 3234 290a 2020 2020 2020 2020 2020  1024).          
-00017ab0: 2020 7479 7065 2c20 636f 6465 2c20 6368    type, code, ch
-00017ac0: 6563 6b73 756d 2c20 6773 697a 652c 2073  ecksum, gsize, s
-00017ad0: 6571 203d 2073 7472 7563 742e 756e 7061  eq = struct.unpa
-00017ae0: 636b 2827 6262 4848 6827 2c20 7061 636b  ck('bbHHh', pack
-00017af0: 6574 5b32 303a 3238 5d29 2023 2047 6574  et[20:28]) # Get
-00017b00: 2048 6561 6465 720a 2020 2020 2020 2020   Header.        
-00017b10: 2020 2020 6966 2067 7369 7a65 203d 3d20      if gsize == 
-00017b20: 7373 697a 653a 0a20 2020 2020 2020 2020  ssize:.         
-00017b30: 2020 2020 2020 2072 6574 7572 6e20 7265         return re
-00017b40: 6365 6976 6564 5f74 696d 6520 2d20 7374  ceived_time - st
-00017b50: 696d 650a 2020 2020 2020 2020 2020 2020  ime.            
-00017b60: 7469 6d65 6f75 7420 2d3d 2072 6563 6569  timeout -= recei
-00017b70: 7665 645f 7469 6d65 202d 2073 7469 6d65  ved_time - stime
-00017b80: 0a0a 2020 2020 6465 6620 7069 6e67 696e  ..    def pingin
-00017b90: 6728 6970 2c74 696d 656f 7574 3d31 2c73  g(ip,timeout=1,s
-00017ba0: 697a 653d 3634 293a 0a20 2020 2020 2020  ize=64):.       
-00017bb0: 2074 7279 3a0a 2020 2020 2020 2020 2020   try:.          
-00017bc0: 2020 6d79 5f73 6f63 6b65 7420 3d20 736f    my_socket = so
-00017bd0: 636b 6574 2e73 6f63 6b65 7428 736f 636b  cket.socket(sock
-00017be0: 6574 2e41 465f 494e 4554 2c20 736f 636b  et.AF_INET, sock
-00017bf0: 6574 2e53 4f43 4b5f 5241 572c 2049 434d  et.SOCK_RAW, ICM
-00017c00: 505f 434f 4445 290a 2020 2020 2020 2020  P_CODE).        
-00017c10: 6578 6365 7074 2073 6f63 6b65 742e 6572  except socket.er
-00017c20: 726f 7220 6173 2065 3a0a 2020 2020 2020  ror as e:.      
-00017c30: 2020 2020 2020 6966 2065 2e65 7272 6e6f        if e.errno
-00017c40: 2069 6e20 4552 524f 525f 4445 5343 523a   in ERROR_DESCR:
-00017c50: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00017c60: 2072 6169 7365 2073 6f63 6b65 742e 6572   raise socket.er
-00017c70: 726f 7228 2727 2e6a 6f69 6e28 2865 2e61  ror(''.join((e.a
-00017c80: 7267 735b 315d 2c20 4552 524f 525f 4445  rgs[1], ERROR_DE
-00017c90: 5343 525b 652e 6572 726e 6f5d 2929 290a  SCR[e.errno]))).
-00017ca0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00017cb0: 2372 6169 7365 2073 6f63 6b65 742e 6572  #raise socket.er
-00017cc0: 726f 7228 4a6f 696e 2828 652e 6172 6773  ror(Join((e.args
-00017cd0: 5b31 5d2c 2045 5252 4f52 5f44 4553 4352  [1], ERROR_DESCR
-00017ce0: 5b65 2e65 7272 6e6f 5d29 2c73 796d 626f  [e.errno]),symbo
-00017cf0: 6c3d 2727 2929 0a20 2020 2020 2020 2020  l='')).         
-00017d00: 2020 2072 6169 7365 0a20 2020 2020 2020     raise.       
-00017d10: 2069 6620 7369 7a65 2069 6e20 5b27 726e   if size in ['rn
-00017d20: 6427 2c27 7261 6e64 6f6d 275d 3a0a 2020  d','random']:.  
-00017d30: 2020 2020 2020 2020 2020 2320 4d61 7869            # Maxi
-00017d40: 6d75 6d20 7369 7a65 2066 6f72 2061 6e20  mum size for an 
-00017d50: 756e 7369 676e 6564 2073 686f 7274 2069  unsigned short i
-00017d60: 6e74 2063 206f 626a 6563 7428 3635 3533  nt c object(6553
-00017d70: 3529 0a20 2020 2020 2020 2020 2020 2073  5).            s
-00017d80: 697a 6520 3d20 696e 7428 2869 6428 7469  ize = int((id(ti
-00017d90: 6d65 6f75 7429 202a 2072 616e 646f 6d2e  meout) * random.
-00017da0: 7261 6e64 6f6d 2829 2920 2520 3635 3533  random()) % 6553
-00017db0: 3529 0a20 2020 2020 2020 2070 6163 6b65  5).        packe
-00017dc0: 7420 3d20 6d6b 5f70 6163 6b65 7428 7369  t = mk_packet(si
-00017dd0: 7a65 290a 2020 2020 2020 2020 7768 696c  ze).        whil
-00017de0: 6520 7061 636b 6574 3a0a 2020 2020 2020  e packet:.      
-00017df0: 2020 2020 2020 7365 6e74 203d 206d 795f        sent = my_
-00017e00: 736f 636b 6574 2e73 656e 6474 6f28 7061  socket.sendto(pa
-00017e10: 636b 6574 2c20 2869 702c 2031 2929 2023  cket, (ip, 1)) #
-00017e20: 2049 434d 5020 6861 7665 206e 6f20 706f   ICMP have no po
-00017e30: 7274 2c20 536f 206a 7573 7420 7075 7420  rt, So just put 
-00017e40: 6475 6d6d 7920 706f 7274 2031 0a20 2020  dummy port 1.   
-00017e50: 2020 2020 2020 2020 2070 6163 6b65 7420           packet 
-00017e60: 3d20 7061 636b 6574 5b73 656e 743a 5d0a  = packet[sent:].
-00017e70: 2020 2020 2020 2020 6465 6c61 7920 3d20          delay = 
-00017e80: 7265 6365 6976 6528 6d79 5f73 6f63 6b65  receive(my_socke
-00017e90: 742c 2073 697a 652c 2054 494d 4528 292e  t, size, TIME().
-00017ea0: 5469 6d65 2829 2c20 7469 6d65 6f75 7429  Time(), timeout)
-00017eb0: 0a20 2020 2020 2020 206d 795f 736f 636b  .        my_sock
-00017ec0: 6574 2e63 6c6f 7365 2829 0a20 2020 2020  et.close().     
-00017ed0: 2020 2069 6620 6465 6c61 793a 0a20 2020     if delay:.   
-00017ee0: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-00017ef0: 6465 6c61 792c 7369 7a65 0a0a 2020 2020  delay,size..    
-00017f00: 6465 6620 646f 5f70 696e 6728 6970 2c74  def do_ping(ip,t
-00017f10: 696d 656f 7574 3d31 2c73 697a 653d 3634  imeout=1,size=64
-00017f20: 2c63 6f75 6e74 3d4e 6f6e 652c 696e 7465  ,count=None,inte
-00017f30: 7276 616c 3d30 2e37 2c6c 6f67 5f66 6f72  rval=0.7,log_for
-00017f40: 6d61 743d 2770 696e 6727 2c63 616e 6365  mat='ping',cance
-00017f50: 6c5f 6675 6e63 3d46 616c 7365 293a 0a20  l_func=False):. 
-00017f60: 2020 2020 2020 206f 6b3d 310a 2020 2020         ok=1.    
-00017f70: 2020 2020 693d 310a 2020 2020 2020 2020      i=1.        
-00017f80: 7069 6e67 5f63 6d64 3d66 696e 645f 6578  ping_cmd=find_ex
-00017f90: 6563 7574 6162 6c65 2827 7069 6e67 2729  ecutable('ping')
-00017fa0: 0a20 2020 2020 2020 2077 6869 6c65 2054  .        while T
-00017fb0: 7275 653a 0a20 2020 2020 2020 2020 2020  rue:.           
-00017fc0: 2069 6620 4973 4361 6e63 656c 2863 616e   if IsCancel(can
-00017fd0: 6365 6c5f 6675 6e63 293a 0a20 2020 2020  cel_func):.     
-00017fe0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-00017ff0: 6e20 2d31 2c27 6361 6e63 656c 6564 270a  n -1,'canceled'.
-00018000: 2020 2020 2020 2020 2020 2020 6966 2070              if p
-00018010: 696e 675f 636d 643a 0a20 2020 2020 2020  ing_cmd:.       
-00018020: 2020 2020 2020 2020 2070 696e 675f 733d           ping_s=
-00018030: 7369 7a65 2d38 2069 6620 7369 7a65 203e  size-8 if size >
-00018040: 3d20 3820 656c 7365 2030 0a20 2020 2020  = 8 else 0.     
-00018050: 2020 2020 2020 2020 2020 2072 633d 7273             rc=rs
-00018060: 6865 6c6c 2822 7069 6e67 202d 7320 7b7d  hell("ping -s {}
-00018070: 202d 6320 3120 7b7d 222e 666f 726d 6174   -c 1 {}".format
-00018080: 2870 696e 675f 732c 686f 7374 2929 0a20  (ping_s,host)). 
-00018090: 2020 2020 2020 2020 2020 2020 2020 2064                 d
-000180a0: 656c 6179 3d5b 5d0a 2020 2020 2020 2020  elay=[].        
-000180b0: 2020 2020 2020 2020 6966 2072 635b 305d          if rc[0]
-000180c0: 203d 3d20 303a 0a20 2020 2020 2020 2020   == 0:.         
-000180d0: 2020 2020 2020 2020 2020 2064 656c 6179             delay
-000180e0: 3d5b 5d0a 2020 2020 2020 2020 2020 2020  =[].            
-000180f0: 2020 2020 2020 2020 7474 3d72 635b 315d          tt=rc[1]
-00018100: 2e73 706c 6974 2827 5c6e 2729 5b31 5d2e  .split('\n')[1].
-00018110: 7370 6c69 7428 290a 2020 2020 2020 2020  split().        
-00018120: 2020 2020 2020 2020 2020 2020 6465 6c61              dela
-00018130: 793d 5b66 6c6f 6174 2874 745b 365d 2e73  y=[float(tt[6].s
-00018140: 706c 6974 2827 3d27 295b 315d 292f 3130  plit('=')[1])/10
-00018150: 3030 2c74 745b 305d 5d0a 2020 2020 2020  00,tt[0]].      
-00018160: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
-00018170: 2020 2020 2020 2020 2020 2064 656c 6179             delay
-00018180: 3d70 696e 6769 6e67 2869 702c 7469 6d65  =pinging(ip,time
-00018190: 6f75 742c 7369 7a65 290a 2020 2020 2020  out,size).      
-000181a0: 2020 2020 2020 6966 2064 656c 6179 3a0a        if delay:.
-000181b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000181c0: 6f6b 3d30 0a20 2020 2020 2020 2020 2020  ok=0.           
-000181d0: 2020 2020 2069 6620 6c6f 675f 666f 726d       if log_form
-000181e0: 6174 203d 3d20 272e 273a 0a20 2020 2020  at == '.':.     
-000181f0: 2020 2020 2020 2020 2020 2020 2020 2053                 S
-00018200: 7464 4f75 7428 272e 2729 0a20 2020 2020  tdOut('.').     
-00018210: 2020 2020 2020 2020 2020 2065 6c69 6620             elif 
-00018220: 6c6f 675f 666f 726d 6174 203d 3d20 2770  log_format == 'p
-00018230: 696e 6727 3a0a 2020 2020 2020 2020 2020  ing':.          
-00018240: 2020 2020 2020 2020 2020 5374 644f 7574            StdOut
-00018250: 2827 7b7d 2062 7974 6573 2066 726f 6d20  ('{} bytes from 
-00018260: 7b7d 3a20 6963 6d70 5f73 6571 3d7b 7d20  {}: icmp_seq={} 
-00018270: 7474 6c3d 7b7d 2074 696d 653d 7b7d 206d  ttl={} time={} m
-00018280: 735c 6e27 2e66 6f72 6d61 7428 6465 6c61  s\n'.format(dela
-00018290: 795b 315d 2c69 702c 692c 7369 7a65 2c72  y[1],ip,i,size,r
-000182a0: 6f75 6e64 2864 656c 6179 5b30 5d2a 3130  ound(delay[0]*10
-000182b0: 3030 2e30 2c34 2929 290a 2020 2020 2020  00.0,4))).      
-000182c0: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
-000182d0: 2020 2020 2020 2020 2020 2020 6f6b 3d31              ok=1
-000182e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000182f0: 2069 6620 6c6f 675f 666f 726d 6174 203d   if log_format =
-00018300: 3d20 272e 273a 0a20 2020 2020 2020 2020  = '.':.         
-00018310: 2020 2020 2020 2020 2020 2053 7464 4f75             StdOu
-00018320: 7428 2778 2729 0a20 2020 2020 2020 2020  t('x').         
-00018330: 2020 2020 2020 2065 6c69 6620 6c6f 675f         elif log_
-00018340: 666f 726d 6174 203d 3d20 2770 696e 6727  format == 'ping'
-00018350: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00018360: 2020 2020 2020 5374 644f 7574 2827 7b7d        StdOut('{}
-00018370: 2069 636d 705f 7365 713d 7b7d 2074 696d   icmp_seq={} tim
-00018380: 656f 7574 2028 7b7d 2073 6563 6f6e 6429  eout ({} second)
-00018390: 5c6e 272e 666f 726d 6174 2869 702c 692c  \n'.format(ip,i,
-000183a0: 7469 6d65 6f75 7429 290a 2020 2020 2020  timeout)).      
-000183b0: 2020 2020 2020 6966 2063 6f75 6e74 3a0a        if count:.
-000183c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000183d0: 636f 756e 742d 3d31 0a20 2020 2020 2020  count-=1.       
-000183e0: 2020 2020 2020 2020 2069 6620 636f 756e           if coun
-000183f0: 7420 3c20 313a 0a20 2020 2020 2020 2020  t < 1:.         
-00018400: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-00018410: 6e20 6f6b 2c27 7b7d 2069 7320 616c 6976  n ok,'{} is aliv
-00018420: 6527 2e66 6f72 6d61 7428 6970 290a 2020  e'.format(ip).  
-00018430: 2020 2020 2020 2020 2020 692b 3d31 0a20            i+=1. 
-00018440: 2020 2020 2020 2020 2020 2074 696d 652e             time.
-00018450: 736c 6565 7028 696e 7465 7276 616c 290a  sleep(interval).
-00018460: 0a20 2020 2069 6620 6c6f 675f 666f 726d  .    if log_form
-00018470: 6174 3d3d 2770 696e 6727 3a0a 2020 2020  at=='ping':.    
-00018480: 2020 2020 6966 206e 6f74 2063 6f75 6e74      if not count
-00018490: 3a20 636f 756e 743d 310a 2020 2020 2020  : count=1.      
-000184a0: 2020 646f 5f70 696e 6728 686f 7374 2c74    do_ping(host,t
-000184b0: 696d 656f 7574 3d74 696d 656f 7574 2c73  imeout=timeout,s
-000184c0: 697a 653d 3634 2c63 6f75 6e74 3d63 6f75  ize=64,count=cou
-000184d0: 6e74 2c6c 6f67 5f66 6f72 6d61 743d 2770  nt,log_format='p
-000184e0: 696e 6727 2c63 616e 6365 6c5f 6675 6e63  ing',cancel_func
-000184f0: 3d63 616e 6365 6c5f 6675 6e63 290a 2020  =cancel_func).  
-00018500: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
-00018510: 6966 2061 6c69 7665 5f70 6f72 743a 0a20  if alive_port:. 
-00018520: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-00018530: 6e20 5472 7565 2069 6620 4970 5634 2868  n True if IpV4(h
-00018540: 6f73 742c 706f 7274 3d61 6c69 7665 5f70  ost,port=alive_p
-00018550: 6f72 7429 2065 6c73 6520 4661 6c73 650a  ort) else False.
-00018560: 2020 2020 2020 2020 5469 6d65 3d54 494d          Time=TIM
-00018570: 4528 290a 2020 2020 2020 2020 696e 6974  E().        init
-00018580: 5f73 6563 3d30 0a20 2020 2020 2020 2069  _sec=0.        i
-00018590: 6e66 696e 6974 3d46 616c 7365 0a20 2020  nfinit=False.   
-000185a0: 2020 2020 2069 6620 6e6f 7420 636f 756e       if not coun
-000185b0: 7420 616e 6420 6e6f 7420 7469 6d65 6f75  t and not timeou
-000185c0: 743a 0a20 2020 2020 2020 2020 2020 2063  t:.            c
-000185d0: 6f75 6e74 3d31 0a20 2020 2020 2020 2020  ount=1.         
-000185e0: 2020 2069 6e66 696e 6974 3d54 7275 650a     infinit=True.
-000185f0: 2020 2020 2020 2020 6966 206e 6f74 2069          if not i
-00018600: 6e66 696e 6974 2061 6e64 206e 6f74 2063  nfinit and not c
-00018610: 6f75 6e74 3a0a 2020 2020 2020 2020 2020  ount:.          
-00018620: 2020 696e 6974 5f73 6563 3d54 696d 652e    init_sec=Time.
-00018630: 496e 6974 2829 0a20 2020 2020 2020 2020  Init().         
-00018640: 2020 2069 6620 6b65 6570 5f67 6f6f 6420     if keep_good 
-00018650: 616e 6420 6b65 6570 5f67 6f6f 6420 3e20  and keep_good > 
-00018660: 7469 6d65 6f75 743a 0a20 2020 2020 2020  timeout:.       
-00018670: 2020 2020 2020 2020 2074 696d 656f 7574           timeout
-00018680: 3d6b 6565 705f 676f 6f64 202b 2074 696d  =keep_good + tim
-00018690: 656f 7574 0a20 2020 2020 2020 2020 2020  eout.           
-000186a0: 2063 6f75 6e74 3d74 696d 656f 7574 0a20   count=timeout. 
-000186b0: 2020 2020 2020 2020 2020 206f 636f 756e             ocoun
-000186c0: 743d 7469 6d65 6f75 740a 2020 2020 2020  t=timeout.      
-000186d0: 2020 6368 6b5f 7365 633d 5469 6d65 2e49    chk_sec=Time.I
-000186e0: 6e69 7428 290a 2020 2020 2020 2020 6c6f  nit().        lo
-000186f0: 675f 7479 7065 3d74 7970 6528 6c6f 6729  g_type=type(log)
-00018700: 2e5f 5f6e 616d 655f 5f0a 2020 2020 2020  .__name__.      
-00018710: 2020 666f 756e 645f 6c6f 7374 3d46 616c    found_lost=Fal
-00018720: 7365 0a20 2020 2020 2020 2067 6f6f 643d  se.        good=
-00018730: 4661 6c73 650a 2020 2020 2020 2020 7768  False.        wh
-00018740: 696c 6520 636f 756e 7420 3e20 303a 0a20  ile count > 0:. 
-00018750: 2020 2020 2020 2020 2020 6966 2049 7343            if IsC
-00018760: 616e 6365 6c28 6361 6e63 656c 5f66 756e  ancel(cancel_fun
-00018770: 6329 206f 7220 4973 4361 6e63 656c 2873  c) or IsCancel(s
-00018780: 746f 705f 6675 6e63 293a 0a20 2020 2020  top_func):.     
-00018790: 2020 2020 2020 2020 2020 6c6f 6728 2720            log(' 
-000187a0: 2d20 4361 6e63 656c 6564 2f53 746f 7070  - Canceled/Stopp
-000187b0: 6564 2070 696e 6727 290a 2020 2020 2020  ed ping').      
-000187c0: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-000187d0: 4661 6c73 650a 2020 2020 2020 2020 2020  False.          
-000187e0: 2072 633d 646f 5f70 696e 6728 686f 7374   rc=do_ping(host
-000187f0: 2c74 696d 656f 7574 3d31 2c73 697a 653d  ,timeout=1,size=
-00018800: 3634 2c63 6f75 6e74 3d31 2c6c 6f67 5f66  64,count=1,log_f
-00018810: 6f72 6d61 743d 4e6f 6e65 290a 2020 2020  ormat=None).    
-00018820: 2020 2020 2020 2069 6620 7263 5b30 5d20         if rc[0] 
-00018830: 3d3d 2030 3a0a 2020 2020 2020 2020 2020  == 0:.          
-00018840: 2020 2020 676f 6f64 3d54 7275 650a 2020      good=True.  
-00018850: 2020 2020 2020 2020 2020 2020 6966 206b              if k
-00018860: 6565 705f 676f 6f64 3a0a 2020 2020 2020  eep_good:.      
-00018870: 2020 2020 2020 2020 2020 2020 6966 2067              if g
-00018880: 6f6f 6420 616e 6420 6b65 6570 5f67 6f6f  ood and keep_goo
-00018890: 6420 616e 6420 5449 4d45 2829 2e4e 6f77  d and TIME().Now
-000188a0: 2869 6e74 2920 2d20 6368 6b5f 7365 6320  (int) - chk_sec 
-000188b0: 3e3d 206b 6565 705f 676f 6f64 3a0a 2020  >= keep_good:.  
-000188c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000188d0: 2020 2020 7265 7475 726e 2054 7275 650a      return True.
-000188e0: 2020 2020 2020 2020 2020 2020 2020 656c                el
-000188f0: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
-00018900: 2020 2020 2020 7265 7475 726e 2054 7275        return Tru
-00018910: 650a 2020 2020 2020 2020 2020 2020 2020  e.              
-00018920: 6966 206c 6f67 5f74 7970 6520 3d3d 2027  if log_type == '
-00018930: 6675 6e63 7469 6f6e 273a 0a20 2020 2020  function':.     
-00018940: 2020 2020 2020 2020 2020 2020 206c 6f67               log
-00018950: 2827 2e27 2c64 6972 6563 743d 5472 7565  ('.',direct=True
-00018960: 2c6c 6f67 5f6c 6576 656c 3d31 290a 2020  ,log_level=1).  
-00018970: 2020 2020 2020 2020 2020 2020 656c 7365              else
-00018980: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00018990: 2020 2020 5374 644f 7574 2827 2e27 290a      StdOut('.').
-000189a0: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
-000189b0: 0a20 2020 2020 2020 2020 2020 2020 2067  .              g
-000189c0: 6f6f 643d 4661 6c73 650a 2020 2020 2020  ood=False.      
-000189d0: 2020 2020 2020 2020 6368 6b5f 7365 633d          chk_sec=
-000189e0: 5449 4d45 2829 2e4e 6f77 2869 6e74 290a  TIME().Now(int).
-000189f0: 2020 2020 2020 2020 2020 2020 2020 6966                if
-00018a00: 206c 6f67 5f74 7970 6520 3d3d 2027 6675   log_type == 'fu
-00018a10: 6e63 7469 6f6e 273a 0a20 2020 2020 2020  nction':.       
-00018a20: 2020 2020 2020 2020 2020 206c 6f67 2827             log('
-00018a30: 7827 2c64 6972 6563 743d 5472 7565 2c6c  x',direct=True,l
-00018a40: 6f67 5f6c 6576 656c 3d31 290a 2020 2020  og_level=1).    
-00018a50: 2020 2020 2020 2020 2020 656c 6966 206c            elif l
-00018a60: 6f67 5f66 6f72 6d61 7420 3d3d 2027 2e27  og_format == '.'
-00018a70: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00018a80: 2020 2020 5374 644f 7574 2827 7827 290a      StdOut('x').
-00018a90: 2020 2020 2020 2020 2020 2069 6620 696e             if in
-00018aa0: 6974 5f73 6563 3a0a 2020 2020 2020 2020  it_sec:.        
-00018ab0: 2020 2020 2020 2063 6f75 6e74 3d6f 636f         count=oco
-00018ac0: 756e 742d 2854 494d 4528 292e 4e6f 7728  unt-(TIME().Now(
-00018ad0: 696e 7429 2d69 6e69 745f 7365 6329 0a20  int)-init_sec). 
-00018ae0: 2020 2020 2020 2020 2020 656c 6966 206e            elif n
-00018af0: 6f74 2069 6e66 696e 6974 3a0a 2020 2020  ot infinit:.    
-00018b00: 2020 2020 2020 2020 2020 2063 6f75 6e74             count
-00018b10: 2d3d 310a 2020 2020 2020 2020 2020 2054  -=1.           T
-00018b20: 494d 4528 292e 536c 6565 7028 696e 7465  IME().Sleep(inte
-00018b30: 7276 616c 290a 2020 2020 2020 2020 7265  rval).        re
-00018b40: 7475 726e 2067 6f6f 640a 0a63 6c61 7373  turn good..class
-00018b50: 2057 4542 3a0a 2020 2020 2727 270a 2020   WEB:.    '''.  
-00018b60: 2020 4765 7449 503a 2067 6574 2073 6572    GetIP: get ser
-00018b70: 7665 7220 6f72 2063 6c69 656e 7420 4950  ver or client IP
-00018b80: 0a20 2020 2052 6571 7565 7374 3a20 7265  .    Request: re
-00018b90: 7175 6573 7428 290a 2020 2020 7374 7232  quest().    str2
-00018ba0: 7572 6c3a 2063 6f6e 7665 7274 2073 7472  url: convert str
-00018bb0: 696e 6720 746f 2055 524c 2066 6f72 6d61  ing to URL forma
-00018bc0: 740a 2020 2020 666f 726d 3264 6963 743a  t.    form2dict:
-00018bd0: 2063 6f6e 7665 7274 2066 6f72 6d20 6461   convert form da
-00018be0: 7461 2074 6f20 6469 6374 696f 6e61 7279  ta to dictionary
-00018bf0: 2066 6f72 6d61 740a 2020 2020 2727 270a   format.    '''.
-00018c00: 2020 2020 6465 6620 5f5f 696e 6974 5f5f      def __init__
-00018c10: 2873 656c 662c 7265 7175 6573 743d 4e6f  (self,request=No
-00018c20: 6e65 293a 0a20 2020 2020 2020 2049 6d70  ne):.        Imp
-00018c30: 6f72 7428 2769 6d70 6f72 7420 7265 7175  ort('import requ
-00018c40: 6573 7473 2729 0a20 2020 2020 2020 2069  ests').        i
-00018c50: 6620 7265 7175 6573 743a 0a20 2020 2020  f request:.     
-00018c60: 2020 2020 2020 2073 656c 662e 7265 7175         self.requ
-00018c70: 6573 7473 3d72 6571 7565 7374 0a20 2020  ests=request.   
-00018c80: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
-00018c90: 2020 2020 2020 2073 656c 662e 7265 7175         self.requ
-00018ca0: 6573 7473 3d72 6571 7565 7374 730a 0a20  ests=requests.. 
-00018cb0: 2020 2064 6566 2053 6573 7369 6f6e 2873     def Session(s
-00018cc0: 656c 6629 3a0a 2020 2020 2020 2020 7265  elf):.        re
-00018cd0: 7475 726e 2073 656c 662e 7265 7175 6573  turn self.reques
-00018ce0: 7473 2e73 6573 7369 6f6e 2e5f 6765 745f  ts.session._get_
-00018cf0: 6f72 5f63 7265 6174 655f 7365 7373 696f  or_create_sessio
-00018d00: 6e5f 6b65 7928 290a 0a20 2020 2064 6566  n_key()..    def
-00018d10: 2047 6574 4950 2873 656c 662c 6d6f 6465   GetIP(self,mode
-00018d20: 3d27 7365 7276 6572 2729 3a0a 2020 2020  ='server'):.    
-00018d30: 2020 2020 2727 2720 0a20 2020 2020 2020      ''' .       
-00018d40: 206d 6f64 653a 0a20 2020 2020 2020 2020   mode:.         
-00018d50: 2073 6572 7665 7220 3a20 6765 7420 7365   server : get se
-00018d60: 7276 6572 2049 5020 2864 6566 6175 6c74  rver IP (default
-00018d70: 290a 2020 2020 2020 2020 2020 636c 6965  ).          clie
-00018d80: 6e74 203a 2067 6574 2063 6c69 656e 7420  nt : get client 
-00018d90: 4950 0a20 2020 2020 2020 2027 2727 0a20  IP.        '''. 
-00018da0: 2020 2020 2020 2069 6620 6d6f 6465 203d         if mode =
-00018db0: 3d20 2773 6572 7665 7227 3a0a 2020 2020  = 'server':.    
-00018dc0: 2020 2020 2020 2020 7265 7475 726e 2073          return s
-00018dd0: 656c 662e 7265 7175 6573 7473 2e67 6574  elf.requests.get
-00018de0: 5f68 6f73 7428 292e 7370 6c69 7428 273a  _host().split(':
-00018df0: 2729 0a20 2020 2020 2020 2065 6c73 653a  ').        else:
-00018e00: 0a20 2020 2020 2020 2020 2020 2078 5f66  .            x_f
-00018e10: 6f72 7761 7264 6564 5f66 6f72 203d 2073  orwarded_for = s
-00018e20: 656c 662e 7265 7175 6573 7473 2e4d 4554  elf.requests.MET
-00018e30: 412e 6765 7428 2748 5454 505f 585f 464f  A.get('HTTP_X_FO
-00018e40: 5257 4152 4445 445f 464f 5227 290a 2020  RWARDED_FOR').  
-00018e50: 2020 2020 2020 2020 2020 6966 2078 5f66            if x_f
-00018e60: 6f72 7761 7264 6564 5f66 6f72 3a0a 2020  orwarded_for:.  
-00018e70: 2020 2020 2020 2020 2020 2020 2020 7265                re
-00018e80: 7475 726e 2078 5f66 6f72 7761 7264 6564  turn x_forwarded
-00018e90: 5f66 6f72 2e73 706c 6974 2827 2c27 295b  _for.split(',')[
-00018ea0: 305d 0a20 2020 2020 2020 2020 2020 2065  0].            e
-00018eb0: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
-00018ec0: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
-00018ed0: 2e72 6571 7565 7374 732e 4d45 5441 2e67  .requests.META.g
-00018ee0: 6574 2827 5245 4d4f 5445 5f41 4444 5227  et('REMOTE_ADDR'
-00018ef0: 290a 0a20 2020 2064 6566 204d 6574 686f  )..    def Metho
-00018f00: 6428 7365 6c66 2c6d 6574 686f 645f 6e61  d(self,method_na
-00018f10: 6d65 3d4e 6f6e 652c 6d6f 6465 3d27 6c6f  me=None,mode='lo
-00018f20: 7765 7227 293a 0a20 2020 2020 2020 206d  wer'):.        m
-00018f30: 6574 686f 645f 6e3d 7365 6c66 2e72 6571  ethod_n=self.req
-00018f40: 7565 7374 732e 6d65 7468 6f64 0a20 2020  uests.method.   
-00018f50: 2020 2020 2069 6620 6d65 7468 6f64 5f6e       if method_n
-00018f60: 616d 653a 0a20 2020 2020 2020 2020 2020  ame:.           
-00018f70: 2072 6574 7572 6e20 6d65 7468 6f64 5f6e   return method_n
-00018f80: 616d 652e 6c6f 7765 7228 2920 3d3d 206d  ame.lower() == m
-00018f90: 6574 686f 645f 6e2e 6c6f 7765 7228 290a  ethod_n.lower().
-00018fa0: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
-00018fb0: 2020 2020 2020 2020 2020 6966 206d 6f64            if mod
-00018fc0: 6520 3d3d 2027 7570 7065 7227 3a0a 2020  e == 'upper':.  
-00018fd0: 2020 2020 2020 2020 2020 2020 2020 7265                re
-00018fe0: 7475 726e 206d 6574 686f 645f 6e2e 7570  turn method_n.up
-00018ff0: 7065 7228 290a 2020 2020 2020 2020 2020  per().          
-00019000: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
-00019010: 2020 2020 2020 2020 7265 7475 726e 206d          return m
-00019020: 6574 686f 645f 6e2e 6c6f 7765 7228 290a  ethod_n.lower().
-00019030: 0a20 2020 2064 6566 2052 6571 7565 7374  .    def Request
-00019040: 2873 656c 662c 686f 7374 5f75 726c 2c2a  (self,host_url,*
-00019050: 2a6f 7074 7329 3a0a 2020 2020 2020 2020  *opts):.        
-00019060: 2727 270a 2020 2020 2020 2020 7573 6572  '''.        user
-00019070: 2026 2070 6173 7377 6f72 643a 2073 7472   & password: str
-00019080: 696e 6720 666f 726d 6174 0a20 2020 2020  ing format.     
-00019090: 2020 2061 7574 683a 2074 7570 6c65 2066     auth: tuple f
-000190a0: 6f72 6d61 740a 2020 2020 2020 2020 6461  ormat.        da
-000190b0: 7461 3a20 6469 6374 696f 6e61 7279 2066  ta: dictionary f
-000190c0: 6f72 6d61 740a 2020 2020 2020 2020 6a73  ormat.        js
-000190d0: 6f6e 3a20 6469 6374 696f 6e61 7279 202f  on: dictionary /
-000190e0: 204a 534f 4e20 666f 726d 6174 0a20 2020   JSON format.   
-000190f0: 2020 2020 2066 696c 6573 3a20 6469 6374       files: dict
-00019100: 696f 6e61 7279 2066 6f72 6d61 740a 2020  ionary format.  
-00019110: 2020 2020 2020 2020 2065 7829 2066 696c           ex) fil
-00019120: 6573 203d 207b 2027 3c66 696c 6520 7061  es = { '<file pa
-00019130: 7261 6d65 7465 7220 6e61 6d65 3e27 3a20  rameter name>': 
-00019140: 283c 6669 6c65 6e61 6d65 3e2c 206f 7065  (<filename>, ope
-00019150: 6e28 3c66 696c 656e 616d 653e 2c27 7262  n(<filename>,'rb
-00019160: 2729 297d 0a20 2020 2020 2020 2068 6561  '))}.        hea
-00019170: 6465 7273 3a20 7374 7269 6e67 206f 7220  ders: string or 
-00019180: 6469 6374 696f 6e61 7279 2066 6f72 6d61  dictionary forma
-00019190: 740a 2020 2020 2020 2020 2020 202d 2073  t.           - s
-000191a0: 7472 696e 6720 6578 616d 706c 650a 2020  tring example.  
-000191b0: 2020 2020 2020 2020 2020 2068 6561 6465             heade
-000191c0: 7273 3d27 6a73 6f6e 270a 2020 2020 2020  rs='json'.      
-000191d0: 2020 2020 2020 2072 6571 7569 7265 6420         required 
-000191e0: 6461 7461 206f 7220 6a73 6f6e 200a 2020  data or json .  
-000191f0: 2020 2020 2020 2020 202d 2064 6963 7469           - dicti
-00019200: 6f6e 6172 7920 6578 616d 706c 650a 2020  onary example.  
-00019210: 2020 2020 2020 2020 2020 2068 6561 6465             heade
-00019220: 7273 203d 207b 2022 436f 6e74 656e 742d  rs = { "Content-
-00019230: 5479 7065 223a 2022 6170 706c 6963 6174  Type": "applicat
-00019240: 696f 6e2f 6a73 6f6e 227d 0a20 2020 2020  ion/json"}.     
-00019250: 2020 2064 6267 203a 2054 7275 653a 2073     dbg : True: s
-00019260: 686f 7720 6465 6275 6769 6e67 206c 6f67  how debuging log
-00019270: 2864 6566 6175 6c74 292c 2046 616c 7365  (default), False
-00019280: 2069 676e 6f72 6520 6465 6275 6767 696e   ignore debuggin
-00019290: 6720 6c6f 670a 2020 2020 2020 2020 7069  g log.        pi
-000192a0: 6e67 3a20 5472 7565 3a20 4368 6563 6b20  ng: True: Check 
-000192b0: 6465 7374 2049 5020 7769 7468 2070 696e  dest IP with pin
-000192c0: 672c 2046 616c 7365 3a20 6e6f 7420 6368  g, False: not ch
-000192d0: 6563 6b20 6465 7374 2049 5020 2864 6566  eck dest IP (def
-000192e0: 6175 6c74 290a 2020 2020 2020 2020 6d61  ault).        ma
-000192f0: 785f 7472 793a 2064 6566 6175 6c74 2033  x_try: default 3
-00019300: 2c20 7265 7472 7920 6d61 7820 6e75 6d62  , retry max numb
-00019310: 6572 2077 6865 6e20 6661 696c 6564 0a20  er when failed. 
-00019320: 2020 2020 2020 206d 6f64 653a 2064 6566         mode: def
-00019330: 6175 6c74 2067 6574 2c20 2867 6574 2c70  ault get, (get,p
-00019340: 6f73 742c 7061 7463 6829 0a20 2020 2020  ost,patch).     
-00019350: 2020 2069 703a 2064 6573 7420 4950 0a20     ip: dest IP. 
-00019360: 2020 2020 2020 2070 6f72 743a 2064 6566         port: def
-00019370: 6175 6c74 2038 3020 6f72 2034 3433 2c20  ault 80 or 443, 
-00019380: 6172 7263 6f72 6469 6e67 2074 6f20 6874  arrcording to ht
-00019390: 7470 206f 7220 6874 7470 732c 2069 6620  tp or https, if 
-000193a0: 796f 7520 7761 6e74 2073 7065 6369 616c  you want special
-000193b0: 2070 6f72 7420 7468 656e 2074 7970 650a   port then type.
-000193c0: 2020 2020 2020 2020 626d 633a 2064 6566          bmc: def
-000193d0: 6175 6c74 2046 616c 7365 2c20 5472 7565  ault False, True
-000193e0: 2074 6865 6e20 6175 746f 6d61 7469 6361   then automatica
-000193f0: 6c6c 2063 6865 636b 2042 4d43 2070 6f72  ll check BMC por
-00019400: 740a 2020 2020 2020 2020 7469 6d65 6f75  t.        timeou
-00019410: 743a 2072 6571 7565 7374 2074 696d 656f  t: request timeo
-00019420: 7574 2028 7365 636f 6e64 7329 2c20 6465  ut (seconds), de
-00019430: 6661 756c 7420 4e6f 6e65 0a20 2020 2020  fault None.     
-00019440: 2020 2027 2727 0a20 2020 2020 2020 2023     '''.        #
-00019450: 2072 656d 6f76 6520 5353 4c20 7761 7269   remove SSL wari
-00019460: 6e67 2065 7272 6f72 206d 6573 7361 6765  ng error message
-00019470: 2028 7465 7374 290a 2020 2020 2020 2020   (test).        
-00019480: 7365 6c66 2e72 6571 7565 7374 732e 7061  self.requests.pa
-00019490: 636b 6167 6573 2e75 726c 6c69 6233 2e64  ckages.urllib3.d
-000194a0: 6973 6162 6c65 5f77 6172 6e69 6e67 7328  isable_warnings(
-000194b0: 290a 0a20 2020 2020 2020 2069 703d 6f70  )..        ip=op
-000194c0: 7473 2e67 6574 2827 6970 272c 4e6f 6e65  ts.get('ip',None
-000194d0: 290a 2020 2020 2020 2020 706f 7274 3d6f  ).        port=o
-000194e0: 7074 732e 6765 7428 2770 6f72 7427 2c4e  pts.get('port',N
-000194f0: 6f6e 6529 0a20 2020 2020 2020 2062 6d63  one).        bmc
-00019500: 3d6f 7074 732e 6765 7428 2762 6d63 272c  =opts.get('bmc',
-00019510: 4661 6c73 6529 0a20 2020 2020 2020 206d  False).        m
-00019520: 6f64 653d 6f70 7473 2e67 6574 2827 6d6f  ode=opts.get('mo
-00019530: 6465 272c 6f70 7473 2e67 6574 2827 6d65  de',opts.get('me
-00019540: 7468 6f64 272c 2767 6574 2729 290a 2020  thod','get')).  
-00019550: 2020 2020 2020 6d61 785f 7472 793d 6f70        max_try=op
-00019560: 7473 2e67 6574 2827 6d61 785f 7472 7927  ts.get('max_try'
-00019570: 2c33 2920 2320 5265 7472 7920 6d61 7820  ,3) # Retry max 
-00019580: 6e75 6d62 6572 0a20 2020 2020 2020 2061  number.        a
-00019590: 7574 683d 6f70 7473 2e67 6574 2827 6175  uth=opts.get('au
-000195a0: 7468 272c 4e6f 6e65 290a 2020 2020 2020  th',None).      
-000195b0: 2020 7573 6572 3d6f 7074 732e 6765 7428    user=opts.get(
-000195c0: 2775 7365 7227 2c4e 6f6e 6529 0a20 2020  'user',None).   
-000195d0: 2020 2020 2070 6173 7377 643d 6f70 7473       passwd=opts
-000195e0: 2e67 6574 2827 7061 7373 7764 272c 4e6f  .get('passwd',No
-000195f0: 6e65 290a 2020 2020 2020 2020 6461 7461  ne).        data
-00019600: 3d6f 7074 732e 6765 7428 2764 6174 6127  =opts.get('data'
-00019610: 2c4e 6f6e 6529 2023 2064 6963 7469 6f6e  ,None) # diction
-00019620: 6172 7920 666f 726d 6174 0a20 2020 2020  ary format.     
-00019630: 2020 206a 736f 6e5f 6461 7461 3d6f 7074     json_data=opt
-00019640: 732e 6765 7428 276a 736f 6e27 2c4e 6f6e  s.get('json',Non
-00019650: 6529 2023 2064 6963 7469 6f6e 6172 7920  e) # dictionary 
-00019660: 666f 726d 6174 0a20 2020 2020 2020 2066  format.        f
-00019670: 696c 6573 3d6f 7074 732e 6765 7428 2766  iles=opts.get('f
-00019680: 696c 6573 272c 4e6f 6e65 2920 2320 6469  iles',None) # di
-00019690: 6374 696f 6e61 7279 2066 6f72 6d61 740a  ctionary format.
-000196a0: 2020 2020 2020 2020 7265 7175 6573 745f          request_
-000196b0: 7572 6c3d 6f70 7473 2e67 6574 2827 7265  url=opts.get('re
-000196c0: 7175 6573 745f 7572 6c27 2c4e 6f6e 6529  quest_url',None)
-000196d0: 0a20 2020 2020 2020 2064 6267 3d6f 7074  .        dbg=opt
-000196e0: 732e 6765 7428 2764 6267 272c 5472 7565  s.get('dbg',True
-000196f0: 2920 2023 2073 686f 7720 6465 6275 6767  )  # show debugg
-00019700: 696e 6720 6c6f 670a 2020 2020 2020 2020  ing log.        
-00019710: 7069 6e67 3d6f 7074 732e 6765 7428 2770  ping=opts.get('p
-00019720: 696e 6727 2c46 616c 7365 2920 2320 6368  ing',False) # ch
-00019730: 6563 6b20 7069 6e67 2074 6f20 4950 0a20  eck ping to IP. 
-00019740: 2020 2020 2020 2074 696d 656f 7574 3d6f         timeout=o
-00019750: 7074 732e 6765 7428 2774 696d 656f 7574  pts.get('timeout
-00019760: 272c 4e6f 6e65 2920 2320 7265 7175 6573  ',None) # reques
-00019770: 7420 7469 6d65 6f75 740a 2020 2020 2020  t timeout.      
-00019780: 2020 7265 715f 6461 7461 3d7b 7d0a 2020    req_data={}.  
-00019790: 2020 2020 2020 6368 6b5f 6465 7374 3d4e        chk_dest=N
-000197a0: 6f6e 650a 2020 2020 2020 2020 6966 2069  one.        if i
-000197b0: 7369 6e73 7461 6e63 6528 7469 6d65 6f75  sinstance(timeou
-000197c0: 742c 696e 7429 3a20 7265 715f 6461 7461  t,int): req_data
-000197d0: 5b27 7469 6d65 6f75 7427 5d3d 7469 6d65  ['timeout']=time
-000197e0: 6f75 740a 2020 2020 2020 2020 6966 206f  out.        if o
-000197f0: 7074 732e 6765 7428 2768 7474 7073 2729  pts.get('https')
-00019800: 3a20 7265 715f 6461 7461 5b27 7665 7269  : req_data['veri
-00019810: 6679 275d 3d46 616c 7365 0a20 2020 2020  fy']=False.     
-00019820: 2020 2069 6620 5479 7065 2861 7574 682c     if Type(auth,
-00019830: 2774 7570 6c65 272c 6461 7461 3d54 7275  'tuple',data=Tru
-00019840: 6529 3a0a 2020 2020 2020 2020 2020 2020  e):.            
-00019850: 7265 715f 6461 7461 5b27 6175 7468 275d  req_data['auth']
-00019860: 3d6f 7074 732e 6765 7428 2761 7574 6827  =opts.get('auth'
-00019870: 290a 2020 2020 2020 2020 656c 6966 2054  ).        elif T
-00019880: 7970 6528 7573 6572 2c27 7374 7227 2c64  ype(user,'str',d
-00019890: 6174 613d 5472 7565 2920 616e 6420 5479  ata=True) and Ty
-000198a0: 7065 2870 6173 7377 642c 2773 7472 272c  pe(passwd,'str',
-000198b0: 6461 7461 3d54 7275 6529 3a0a 2020 2020  data=True):.    
-000198c0: 2020 2020 2020 2020 7265 715f 6461 7461          req_data
-000198d0: 5b27 6175 7468 275d 3d28 7573 6572 2c70  ['auth']=(user,p
-000198e0: 6173 7377 6429 0a20 2020 2020 2020 2069  asswd).        i
-000198f0: 6620 5479 7065 2864 6174 612c 2764 6963  f Type(data,'dic
-00019900: 7427 2c64 6174 613d 5472 7565 293a 2072  t',data=True): r
-00019910: 6571 5f64 6174 615b 2764 6174 6127 5d3d  eq_data['data']=
-00019920: 6f70 7473 2e67 6574 2827 6461 7461 2729  opts.get('data')
-00019930: 0a20 2020 2020 2020 2069 6620 5479 7065  .        if Type
-00019940: 286a 736f 6e5f 6461 7461 2c27 6469 6374  (json_data,'dict
-00019950: 272c 6461 7461 3d54 7275 6529 3a20 7265  ',data=True): re
-00019960: 715f 6461 7461 5b27 6a73 6f6e 275d 3d6a  q_data['json']=j
-00019970: 736f 6e5f 6461 7461 0a20 2020 2020 2020  son_data.       
-00019980: 2020 2020 200a 2020 2020 2020 2020 6966       .        if
-00019990: 2054 7970 6528 6669 6c65 732c 2764 6963   Type(files,'dic
-000199a0: 7427 2c64 6174 613d 5472 7565 293a 2072  t',data=True): r
-000199b0: 6571 5f64 6174 615b 2766 696c 6573 275d  eq_data['files']
-000199c0: 3d6f 7074 732e 6765 7428 2766 696c 6573  =opts.get('files
-000199d0: 2729 0a20 2020 2020 2020 2068 6561 6465  ').        heade
-000199e0: 7273 3d6f 7074 732e 6765 7428 2768 6561  rs=opts.get('hea
-000199f0: 6465 7273 2729 2023 2064 6963 7469 6f6e  ders') # diction
-00019a00: 6172 7920 666f 726d 6174 0a20 2020 2020  ary format.     
-00019a10: 2020 2069 6620 5479 7065 2868 6561 6465     if Type(heade
-00019a20: 7273 2c27 7374 7227 2c64 6174 613d 5472  rs,'str',data=Tr
-00019a30: 7565 293a 0a20 2020 2020 2020 2020 2020  ue):.           
-00019a40: 2069 6620 6865 6164 6572 7320 3d3d 2027   if headers == '
-00019a50: 6a73 6f6e 273a 0a20 2020 2020 2020 2020  json':.         
-00019a60: 2020 2020 2020 2068 6561 6465 7273 3d7b         headers={
-00019a70: 2022 436f 6e74 656e 742d 5479 7065 223a   "Content-Type":
-00019a80: 2022 6170 706c 6963 6174 696f 6e2f 6a73   "application/js
-00019a90: 6f6e 227d 0a20 2020 2020 2020 2020 2020  on"}.           
-00019aa0: 2020 2020 2069 6620 6461 7461 3a0a 2020       if data:.  
-00019ab0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019ac0: 2020 6461 7461 3d6a 736f 6e2e 6475 6d70    data=json.dump
-00019ad0: 7328 6461 7461 290a 2020 2020 2020 2020  s(data).        
-00019ae0: 2020 2020 2020 2020 2020 2020 7265 715f              req_
-00019af0: 6461 7461 5b27 6461 7461 275d 3d64 6174  data['data']=dat
-00019b00: 610a 2020 2020 2020 2020 2020 2020 2020  a.              
-00019b10: 2020 656c 6966 206a 736f 6e5f 6461 7461    elif json_data
-00019b20: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00019b30: 2020 2020 2020 6461 7461 3d6a 736f 6e2e        data=json.
-00019b40: 6475 6d70 7328 6a73 6f6e 5f64 6174 6129  dumps(json_data)
-00019b50: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00019b60: 2020 2020 2069 6620 276a 736f 6e27 2069       if 'json' i
-00019b70: 6e20 7265 715f 6461 7461 3a20 7265 715f  n req_data: req_
-00019b80: 6461 7461 2e70 6f70 2827 6a73 6f6e 2729  data.pop('json')
-00019b90: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00019ba0: 2020 2020 2072 6571 5f64 6174 615b 2764       req_data['d
-00019bb0: 6174 6127 5d3d 6461 7461 0a20 2020 2020  ata']=data.     
-00019bc0: 2020 2065 6c69 6620 5479 7065 2868 6561     elif Type(hea
-00019bd0: 6465 7273 2c27 6469 6374 272c 6461 7461  ders,'dict',data
-00019be0: 3d54 7275 6529 3a0a 2020 2020 2020 2020  =True):.        
-00019bf0: 2020 2020 7265 715f 6461 7461 5b27 6865      req_data['he
-00019c00: 6164 6572 7327 5d3d 6865 6164 6572 730a  aders']=headers.
-00019c10: 2020 2020 2020 2020 6966 206e 6f74 2049          if not I
-00019c20: 734e 6f6e 6528 6970 293a 0a20 2020 2020  sNone(ip):.     
-00019c30: 2020 2020 2020 2069 703d 4970 5634 2869         ip=IpV4(i
-00019c40: 702c 6f75 743d 7374 7229 0a20 2020 2020  p,out=str).     
-00019c50: 2020 2020 2020 2063 686b 5f64 6573 743d         chk_dest=
-00019c60: 277b 7d27 2e66 6f72 6d61 7428 6970 290a  '{}'.format(ip).
-00019c70: 2020 2020 2020 2020 2020 2020 6966 2072              if r
-00019c80: 6571 5f64 6174 612e 6765 7428 2776 6572  eq_data.get('ver
-00019c90: 6966 7927 2c54 7275 6529 3a0a 2020 2020  ify',True):.    
-00019ca0: 2020 2020 2020 2020 2020 2020 686f 7374              host
-00019cb0: 5f75 726c 3d27 6874 7470 3a2f 2f7b 7d27  _url='http://{}'
-00019cc0: 2e66 6f72 6d61 7428 6970 290a 2020 2020  .format(ip).    
-00019cd0: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
-00019ce0: 2020 2020 2020 2020 2020 2020 2020 686f                ho
-00019cf0: 7374 5f75 726c 3d27 6874 7470 733a 2f2f  st_url='https://
-00019d00: 7b7d 272e 666f 726d 6174 2869 7029 0a20  {}'.format(ip). 
-00019d10: 2020 2020 2020 2020 2020 2069 6620 6e6f             if no
-00019d20: 7420 4973 4e6f 6e65 2870 6f72 7429 3a20  t IsNone(port): 
-00019d30: 686f 7374 5f75 726c 3d27 7b7d 3a7b 7d27  host_url='{}:{}'
-00019d40: 2e66 6f72 6d61 7428 686f 7374 5f75 726c  .format(host_url
-00019d50: 2c70 6f72 7429 0a20 2020 2020 2020 2020  ,port).         
-00019d60: 2020 2069 6620 6e6f 7420 4973 4e6f 6e65     if not IsNone
-00019d70: 2872 6571 7565 7374 5f75 726c 293a 2068  (request_url): h
-00019d80: 6f73 745f 7572 6c3d 277b 7d2f 7b7d 272e  ost_url='{}/{}'.
-00019d90: 666f 726d 6174 2868 6f73 745f 7572 6c2c  format(host_url,
-00019da0: 7265 7175 6573 745f 7572 6c29 0a20 2020  request_url).   
-00019db0: 2020 2020 2065 6c69 6620 5479 7065 2868       elif Type(h
-00019dc0: 6f73 745f 7572 6c2c 2773 7472 272c 6461  ost_url,'str',da
-00019dd0: 7461 3d54 7275 6529 2061 6e64 2068 6f73  ta=True) and hos
-00019de0: 745f 7572 6c2e 7374 6172 7473 7769 7468  t_url.startswith
-00019df0: 2827 6874 7470 2729 3a0a 2020 2020 2020  ('http'):.      
-00019e00: 2020 2020 2020 6368 6b5f 6465 7374 3d72        chk_dest=r
-00019e10: 652e 636f 6d70 696c 6528 2728 6874 7470  e.compile('(http
-00019e20: 7c68 7474 7073 293a 2f2f 285b 612d 7a41  |https)://([a-zA
-00019e30: 2d5a 302d 392e 5d2a 295b 3a2f 5d27 292e  -Z0-9.]*)[:/]').
-00019e40: 6669 6e64 616c 6c28 686f 7374 5f75 726c  findall(host_url
-00019e50: 290a 2020 2020 2020 2020 2020 2020 6966  ).            if
-00019e60: 206c 656e 2863 686b 5f64 6573 7429 3d3d   len(chk_dest)==
-00019e70: 303a 0a20 2020 2020 2020 2020 2020 2020  0:.             
-00019e80: 2020 2063 686b 5f64 6573 743d 7265 2e63     chk_dest=re.c
-00019e90: 6f6d 7069 6c65 2827 2868 7474 707c 6874  ompile('(http|ht
-00019ea0: 7470 7329 3a2f 2f28 5b61 2d7a 412d 5a30  tps)://([a-zA-Z0
-00019eb0: 2d39 2e5d 2a29 2729 2e66 696e 6461 6c6c  -9.]*)').findall
-00019ec0: 2868 6f73 745f 7572 6c29 0a20 2020 2020  (host_url).     
-00019ed0: 2020 2020 2020 2069 6620 6c65 6e28 6368         if len(ch
-00019ee0: 6b5f 6465 7374 293a 0a20 2020 2020 2020  k_dest):.       
-00019ef0: 2020 2020 2020 2020 2063 686b 5f64 6573           chk_des
-00019f00: 743d 6368 6b5f 6465 7374 5b30 5d5b 315d  t=chk_dest[0][1]
-00019f10: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00019f20: 2069 6620 686f 7374 5f75 726c 2e66 696e   if host_url.fin
-00019f30: 6428 2768 7474 7073 3a2f 2f27 2920 3d3d  d('https://') ==
-00019f40: 2030 3a0a 2020 2020 2020 2020 2020 2020   0:.            
-00019f50: 2020 2020 2020 2020 7265 715f 6461 7461          req_data
-00019f60: 5b27 7665 7269 6679 275d 3d46 616c 7365  ['verify']=False
-00019f70: 0a20 2020 2020 2020 2069 6620 4973 4e6f  .        if IsNo
-00019f80: 6e65 2863 686b 5f64 6573 7429 3a0a 2020  ne(chk_dest):.  
-00019f90: 2020 2020 2020 2020 2020 7265 7475 726e            return
-00019fa0: 2046 616c 7365 2c27 686f 7374 5f75 726c   False,'host_url
-00019fb0: 206f 7220 6970 206e 6f74 2066 6f75 6e64   or ip not found
-00019fc0: 270a 2020 2020 2020 2020 6966 2062 6d63  '.        if bmc
-00019fd0: 3a0a 2020 2020 2020 2020 2020 2020 6966  :.            if
-00019fe0: 2049 7056 3428 6368 6b5f 6465 7374 2c62   IpV4(chk_dest,b
-00019ff0: 6d63 3d54 7275 6529 2069 7320 4661 6c73  mc=True) is Fals
-0001a000: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
-0001a010: 2020 2072 6574 7572 6e20 4661 6c73 652c     return False,
-0001a020: 2754 6865 2049 5028 7b7d 2920 6973 206e  'The IP({}) is n
-0001a030: 6f74 2042 4d43 2049 5027 2e66 6f72 6d61  ot BMC IP'.forma
-0001a040: 7428 6368 6b5f 6465 7374 290a 2020 2020  t(chk_dest).    
-0001a050: 2020 2020 6966 2070 696e 6720 616e 6420      if ping and 
-0001a060: 6368 6b5f 6465 7374 3a0a 2020 2020 2020  chk_dest:.      
-0001a070: 2020 2020 2020 6966 206e 6f74 2070 696e        if not pin
-0001a080: 6728 6368 6b5f 6465 7374 2c74 696d 656f  g(chk_dest,timeo
-0001a090: 7574 5f73 6563 3d33 293a 0a20 2020 2020  ut_sec=3):.     
-0001a0a0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-0001a0b0: 6e20 4661 6c73 652c 2743 616e 206e 6f74  n False,'Can not
-0001a0c0: 2061 6363 6573 7320 746f 2064 6573 7469   access to desti
-0001a0d0: 6e61 7469 6f6e 287b 7d29 272e 666f 726d  nation({})'.form
-0001a0e0: 6174 2863 686b 5f64 6573 7429 0a20 2020  at(chk_dest).   
-0001a0f0: 2020 2020 2073 7320 3d20 7365 6c66 2e72       ss = self.r
-0001a100: 6571 7565 7374 732e 5365 7373 696f 6e28  equests.Session(
-0001a110: 290a 2020 2020 2020 2020 666f 7220 6a20  ).        for j 
-0001a120: 696e 2072 616e 6765 2830 2c6d 6178 5f74  in range(0,max_t
-0001a130: 7279 293a 0a20 2020 2020 2020 2020 2020  ry):.           
-0001a140: 2074 7279 3a0a 2020 2020 2020 2020 2020   try:.          
-0001a150: 2020 2020 2020 6966 2049 7353 616d 6528        if IsSame(
-0001a160: 6d6f 6465 2c27 706f 7374 2729 3a0a 2020  mode,'post'):.  
-0001a170: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001a180: 2020 7220 3d73 732e 706f 7374 2868 6f73    r =ss.post(hos
-0001a190: 745f 7572 6c2c 2a2a 7265 715f 6461 7461  t_url,**req_data
-0001a1a0: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-0001a1b0: 2020 656c 6966 2049 7353 616d 6528 6d6f    elif IsSame(mo
-0001a1c0: 6465 2c27 7061 7463 6827 293a 0a20 2020  de,'patch'):.   
-0001a1d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001a1e0: 2072 203d 7373 2e70 6174 6368 2868 6f73   r =ss.patch(hos
-0001a1f0: 745f 7572 6c2c 2a2a 7265 715f 6461 7461  t_url,**req_data
-0001a200: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-0001a210: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
-0001a220: 2020 2020 2020 2020 2020 2020 7220 3d73              r =s
-0001a230: 732e 6765 7428 686f 7374 5f75 726c 2c2a  s.get(host_url,*
-0001a240: 2a72 6571 5f64 6174 6129 0a20 2020 2020  *req_data).     
-0001a250: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-0001a260: 6e20 5472 7565 2c72 0a20 2020 2020 2020  n True,r.       
-0001a270: 2020 2020 2065 7863 6570 743a 0a20 2020       except:.   
-0001a280: 2020 2020 2020 2020 2020 2020 2070 6173               pas
-0001a290: 730a 2020 2020 2020 2020 2020 2020 2365  s.            #e
-0001a2a0: 7863 6570 7420 7265 7175 6573 7473 2e65  xcept requests.e
-0001a2b0: 7863 6570 7469 6f6e 732e 5265 7175 6573  xceptions.Reques
-0001a2c0: 7445 7863 6570 7469 6f6e 2061 7320 653a  tException as e:
-0001a2d0: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-0001a2e0: 6462 673a 2053 7464 4572 7228 2253 6572  dbg: StdErr("Ser
-0001a2f0: 7665 7228 7b7d 2920 6861 7320 6e6f 2072  ver({}) has no r
-0001a300: 6573 706f 6e73 6520 2877 6169 7420 7b7d  esponse (wait {}
-0001a310: 2f7b 7d20 2831 3073 2929 222e 666f 726d  /{} (10s))".form
-0001a320: 6174 2863 686b 5f64 6573 742c 6a2c 6d61  at(chk_dest,j,ma
-0001a330: 785f 7472 7929 290a 2020 2020 2020 2020  x_try)).        
-0001a340: 2020 2020 7469 6d65 2e73 6c65 6570 2831      time.sleep(1
-0001a350: 3029 0a20 2020 2020 2020 2072 6574 7572  0).        retur
-0001a360: 6e20 4661 6c73 652c 2754 696d 654f 7574  n False,'TimeOut
-0001a370: 270a 0a20 2020 2064 6566 2073 7472 3275  '..    def str2u
-0001a380: 726c 2873 656c 662c 7374 7269 6e67 293a  rl(self,string):
-0001a390: 0a20 2020 2020 2020 2069 6620 4973 4e6f  .        if IsNo
-0001a3a0: 6e65 2873 7472 696e 6729 3a20 7265 7475  ne(string): retu
-0001a3b0: 726e 2027 270a 2020 2020 2020 2020 6966  rn ''.        if
-0001a3c0: 2069 7369 6e73 7461 6e63 6528 7374 7269   isinstance(stri
-0001a3d0: 6e67 2c73 7472 293a 0a20 2020 2020 2020  ng,str):.       
-0001a3e0: 2020 2020 2072 6574 7572 6e20 7374 7269       return stri
-0001a3f0: 6e67 2e72 6570 6c61 6365 2827 2b27 2c27  ng.replace('+','
-0001a400: 2532 4227 292e 7265 706c 6163 6528 273f  %2B').replace('?
-0001a410: 272c 2725 3346 2729 2e72 6570 6c61 6365  ','%3F').replace
-0001a420: 2827 2f27 2c27 2532 4627 292e 7265 706c  ('/','%2F').repl
-0001a430: 6163 6528 273a 272c 2725 3341 2729 2e72  ace(':','%3A').r
-0001a440: 6570 6c61 6365 2827 3d27 2c27 2533 4427  eplace('=','%3D'
-0001a450: 292e 7265 706c 6163 6528 2720 272c 272b  ).replace(' ','+
-0001a460: 2729 0a20 2020 2020 2020 2072 6574 7572  ').        retur
-0001a470: 6e20 7374 7269 6e67 0a0a 2020 2020 6465  n string..    de
-0001a480: 6620 666f 726d 3264 6963 7428 7365 6c66  f form2dict(self
-0001a490: 2c73 7263 3d4e 6f6e 6529 3a0a 2020 2020  ,src=None):.    
-0001a4a0: 2020 2020 6966 2049 734e 6f6e 6528 7372      if IsNone(sr
-0001a4b0: 6329 3a20 7372 633d 7365 6c66 2e72 6571  c): src=self.req
-0001a4c0: 7565 7374 732e 666f 726d 0a20 2020 2020  uests.form.     
-0001a4d0: 2020 2072 6574 7572 6e20 4469 6374 2873     return Dict(s
-0001a4e0: 7263 290a 0a63 6c61 7373 2054 494d 453a  rc)..class TIME:
-0001a4f0: 0a20 2020 2064 6566 205f 5f69 6e69 745f  .    def __init_
-0001a500: 5f28 7365 6c66 2c73 7263 3d4e 6f6e 6529  _(self,src=None)
-0001a510: 3a0a 2020 2020 2020 2020 7365 6c66 2e69  :.        self.i
-0001a520: 6e69 745f 7365 633d 696e 7428 6461 7465  nit_sec=int(date
-0001a530: 7469 6d65 2e6e 6f77 2829 2e73 7472 6674  time.now().strft
-0001a540: 696d 6528 2725 7327 2929 0a20 2020 2020  ime('%s')).     
-0001a550: 2020 2073 656c 662e 7372 633d 7372 630a     self.src=src.
-0001a560: 0a20 2020 2064 6566 2052 6573 6574 2873  .    def Reset(s
-0001a570: 656c 6629 3a0a 2020 2020 2020 2020 7365  elf):.        se
-0001a580: 6c66 2e69 6e69 745f 7365 633d 696e 7428  lf.init_sec=int(
-0001a590: 6461 7465 7469 6d65 2e6e 6f77 2829 2e73  datetime.now().s
-0001a5a0: 7472 6674 696d 6528 2725 7327 2929 0a20  trftime('%s')). 
-0001a5b0: 2020 2064 6566 2053 6c65 6570 2873 656c     def Sleep(sel
-0001a5c0: 662c 7472 795f 7761 6974 3d4e 6f6e 652c  f,try_wait=None,
-0001a5d0: 6465 6661 756c 743d 3129 3a0a 2020 2020  default=1):.    
-0001a5e0: 2020 2020 6966 2069 7369 6e73 7461 6e63      if isinstanc
-0001a5f0: 6528 7472 795f 7761 6974 2c28 696e 742c  e(try_wait,(int,
-0001a600: 7374 7229 293a 2074 7279 5f77 6169 743d  str)): try_wait=
-0001a610: 2874 7279 5f77 6169 742c 290a 2020 2020  (try_wait,).    
-0001a620: 2020 2020 6966 2069 7369 6e73 7461 6e63      if isinstanc
-0001a630: 6528 7472 795f 7761 6974 2c28 6c69 7374  e(try_wait,(list
-0001a640: 2c74 7570 6c65 2929 2061 6e64 206c 656e  ,tuple)) and len
-0001a650: 2874 7279 5f77 6169 7429 3a0a 2020 2020  (try_wait):.    
-0001a660: 2020 2020 2020 2020 6966 206c 656e 2874          if len(t
-0001a670: 7279 5f77 6169 7429 203d 3d20 323a 0a20  ry_wait) == 2:. 
-0001a680: 2020 2020 2020 2020 2020 2020 2020 2074                 t
-0001a690: 7279 3a0a 2020 2020 2020 2020 2020 2020  ry:.            
-0001a6a0: 2020 2020 2020 2020 7469 6d65 2e73 6c65          time.sle
-0001a6b0: 6570 2872 616e 646f 6d2e 7261 6e64 696e  ep(random.randin
-0001a6c0: 7428 696e 7428 7472 795f 7761 6974 5b30  t(int(try_wait[0
-0001a6d0: 5d29 2c69 6e74 2874 7279 5f77 6169 745b  ]),int(try_wait[
-0001a6e0: 315d 2929 290a 2020 2020 2020 2020 2020  1]))).          
-0001a6f0: 2020 2020 2020 6578 6365 7074 3a0a 2020        except:.  
-0001a700: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001a710: 2020 7061 7373 0a20 2020 2020 2020 2020    pass.         
-0001a720: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
-0001a730: 2020 2020 2020 2020 2074 7279 3a0a 2020           try:.  
-0001a740: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001a750: 2020 7469 6d65 2e73 6c65 6570 2869 6e74    time.sleep(int
-0001a760: 2874 7279 5f77 6169 745b 305d 2929 0a20  (try_wait[0])). 
-0001a770: 2020 2020 2020 2020 2020 2020 2020 2065                 e
-0001a780: 7863 6570 743a 0a20 2020 2020 2020 2020  xcept:.         
-0001a790: 2020 2020 2020 2020 2020 2070 6173 730a             pass.
-0001a7a0: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
-0001a7b0: 2020 2020 2020 2020 2020 7469 6d65 2e73            time.s
-0001a7c0: 6c65 6570 2864 6566 6175 6c74 290a 2020  leep(default).  
-0001a7d0: 2020 6465 6620 5261 6e64 2873 656c 662c    def Rand(self,
-0001a7e0: 7472 795f 7761 6974 3d4e 6f6e 652c 6465  try_wait=None,de
-0001a7f0: 6661 756c 743d 3129 3a0a 2020 2020 2020  fault=1):.      
-0001a800: 2020 6966 2069 7369 6e73 7461 6e63 6528    if isinstance(
-0001a810: 7472 795f 7761 6974 2c28 696e 742c 7374  try_wait,(int,st
-0001a820: 7229 293a 2074 7279 5f77 6169 743d 2874  r)): try_wait=(t
-0001a830: 7279 5f77 6169 742c 290a 2020 2020 2020  ry_wait,).      
-0001a840: 2020 6966 2069 7369 6e73 7461 6e63 6528    if isinstance(
-0001a850: 7472 795f 7761 6974 2c28 6c69 7374 2c74  try_wait,(list,t
-0001a860: 7570 6c65 2929 2061 6e64 206c 656e 2874  uple)) and len(t
-0001a870: 7279 5f77 6169 7429 3a0a 2020 2020 2020  ry_wait):.      
-0001a880: 2020 2020 2020 6966 206c 656e 2874 7279        if len(try
-0001a890: 5f77 6169 7429 203d 3d20 323a 0a20 2020  _wait) == 2:.   
-0001a8a0: 2020 2020 2020 2020 2020 2020 2074 7279               try
-0001a8b0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-0001a8c0: 2020 2020 2020 7265 7475 726e 2072 616e        return ran
-0001a8d0: 646f 6d2e 7261 6e64 696e 7428 696e 7428  dom.randint(int(
-0001a8e0: 7472 795f 7761 6974 5b30 5d29 2c69 6e74  try_wait[0]),int
-0001a8f0: 2874 7279 5f77 6169 745b 315d 2929 0a20  (try_wait[1])). 
-0001a900: 2020 2020 2020 2020 2020 2020 2020 2065                 e
-0001a910: 7863 6570 743a 0a20 2020 2020 2020 2020  xcept:.         
-0001a920: 2020 2020 2020 2020 2020 2070 6173 730a             pass.
-0001a930: 2020 2020 2020 2020 2020 2020 656c 7365              else
-0001a940: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-0001a950: 2020 7472 793a 0a20 2020 2020 2020 2020    try:.         
-0001a960: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-0001a970: 6e20 696e 7428 7472 795f 7761 6974 5b30  n int(try_wait[0
-0001a980: 5d29 0a20 2020 2020 2020 2020 2020 2020  ]).             
-0001a990: 2020 2065 7863 6570 743a 0a20 2020 2020     except:.     
-0001a9a0: 2020 2020 2020 2020 2020 2020 2020 2070                 p
-0001a9b0: 6173 730a 2020 2020 2020 2020 7265 7475  ass.        retu
-0001a9c0: 726e 2064 6566 6175 6c74 0a0a 2020 2020  rn default..    
-0001a9d0: 6465 6620 496e 7428 7365 6c66 293a 0a20  def Int(self):. 
-0001a9e0: 2020 2020 2020 2072 6574 7572 6e20 696e         return in
-0001a9f0: 7428 6461 7465 7469 6d65 2e6e 6f77 2829  t(datetime.now()
-0001aa00: 2e73 7472 6674 696d 6528 2725 7327 2929  .strftime('%s'))
-0001aa10: 0a0a 2020 2020 6465 6620 4e6f 7728 7365  ..    def Now(se
-0001aa20: 6c66 2c6d 6f64 653d 4e6f 6e65 293a 0a20  lf,mode=None):. 
-0001aa30: 2020 2020 2020 2069 6620 6d6f 6465 2069         if mode i
-0001aa40: 6e20 5b69 6e74 2c27 696e 7427 2c27 494e  n [int,'int','IN
-0001aa50: 5427 2c27 7365 6327 5d3a 7265 7475 726e  T','sec']:return
-0001aa60: 2073 656c 662e 496e 7428 290a 2020 2020   self.Int().    
-0001aa70: 2020 2020 7265 7475 726e 2064 6174 6574      return datet
-0001aa80: 696d 652e 6e6f 7728 290a 0a20 2020 2064  ime.now()..    d
-0001aa90: 6566 204f 7574 2873 656c 662c 7469 6d65  ef Out(self,time
-0001aaa0: 6f75 745f 7365 632c 6465 6661 756c 743d  out_sec,default=
-0001aab0: 2832 342a 3336 3030 2929 3a0a 2020 2020  (24*3600)):.    
-0001aac0: 2020 2020 7472 793a 0a20 2020 2020 2020      try:.       
-0001aad0: 2020 2020 2074 696d 656f 7574 5f73 6563       timeout_sec
-0001aae0: 3d69 6e74 2874 696d 656f 7574 5f73 6563  =int(timeout_sec
-0001aaf0: 290a 2020 2020 2020 2020 6578 6365 7074  ).        except
-0001ab00: 3a0a 2020 2020 2020 2020 2020 2020 7469  :.            ti
-0001ab10: 6d65 6f75 745f 7365 633d 6465 6661 756c  meout_sec=defaul
-0001ab20: 740a 2020 2020 2020 2020 6966 2074 696d  t.        if tim
-0001ab30: 656f 7574 5f73 6563 203d 3d20 303a 0a20  eout_sec == 0:. 
-0001ab40: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-0001ab50: 6e20 4661 6c73 650a 2020 2020 2020 2020  n False.        
-0001ab60: 6966 2073 656c 662e 496e 7428 2920 2d20  if self.Int() - 
-0001ab70: 7365 6c66 2e69 6e69 745f 7365 6320 3e20  self.init_sec > 
-0001ab80: 2074 696d 656f 7574 5f73 6563 3a0a 2020   timeout_sec:.  
-0001ab90: 2020 2020 2020 2020 2020 7265 7475 726e            return
-0001aba0: 2054 7275 650a 2020 2020 2020 2020 7265   True.        re
-0001abb0: 7475 726e 2046 616c 7365 0a20 2020 2064  turn False.    d
-0001abc0: 6566 2046 6f72 6d61 7428 7365 6c66 2c74  ef Format(self,t
-0001abd0: 666f 726d 6174 3d27 2573 272c 7265 6164  format='%s',read
-0001abe0: 5f66 6f72 6d61 743d 2725 5327 2c74 696d  _format='%S',tim
-0001abf0: 653d 275f 235f 2729 3a0a 2020 2020 2020  e='_#_'):.      
-0001ac00: 2020 6966 2049 734e 6f6e 6528 7469 6d65    if IsNone(time
-0001ac10: 2c63 686b 5f76 616c 3d5b 275f 235f 275d  ,chk_val=['_#_']
-0001ac20: 2c63 686b 5f6f 6e6c 793d 5472 7565 293a  ,chk_only=True):
-0001ac30: 2074 696d 653d 7365 6c66 2e73 7263 0a20   time=self.src. 
-0001ac40: 2020 2020 2020 2069 6620 4973 4e6f 6e65         if IsNone
-0001ac50: 2874 696d 652c 6368 6b5f 7661 6c3d 5b4e  (time,chk_val=[N
-0001ac60: 6f6e 652c 2727 2c30 2c27 3027 5d29 3a0a  one,'',0,'0']):.
-0001ac70: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-0001ac80: 726e 2064 6174 6574 696d 652e 6e6f 7728  rn datetime.now(
-0001ac90: 292e 7374 7266 7469 6d65 2874 666f 726d  ).strftime(tform
-0001aca0: 6174 290a 0a20 2020 2020 2020 2065 6c69  at)..        eli
-0001acb0: 6620 7265 6164 5f66 6f72 6d61 7420 3d3d  f read_format ==
-0001acc0: 2027 2553 273a 0a20 2020 2020 2020 2020   '%S':.         
-0001acd0: 2020 2069 6620 6973 696e 7374 616e 6365     if isinstance
-0001ace0: 2874 696d 652c 696e 7429 206f 7220 2869  (time,int) or (i
-0001acf0: 7369 6e73 7461 6e63 6528 7469 6d65 2c73  sinstance(time,s
-0001ad00: 7472 2920 616e 6420 7469 6d65 2e69 7364  tr) and time.isd
-0001ad10: 6967 6974 2829 293a 0a20 2020 2020 2020  igit()):.       
-0001ad20: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-0001ad30: 6461 7465 7469 6d65 2e66 726f 6d74 696d  datetime.fromtim
-0001ad40: 6573 7461 6d70 2869 6e74 2874 696d 6529  estamp(int(time)
-0001ad50: 292e 7374 7266 7469 6d65 2874 666f 726d  ).strftime(tform
-0001ad60: 6174 290a 2020 2020 2020 2020 656c 6966  at).        elif
-0001ad70: 2069 7369 6e73 7461 6e63 6528 7469 6d65   isinstance(time
-0001ad80: 2c73 7472 293a 0a20 2020 2020 2020 2020  ,str):.         
-0001ad90: 2020 2072 6574 7572 6e20 6461 7465 7469     return dateti
-0001ada0: 6d65 2e73 7472 7074 696d 6528 7469 6d65  me.strptime(time
-0001adb0: 2c72 6561 645f 666f 726d 6174 292e 7374  ,read_format).st
-0001adc0: 7266 7469 6d65 2874 666f 726d 6174 290a  rftime(tformat).
-0001add0: 2020 2020 2020 2020 656c 6966 2074 7970          elif typ
-0001ade0: 6528 7469 6d65 292e 5f5f 6e61 6d65 5f5f  e(time).__name__
-0001adf0: 203d 3d20 2764 6174 6574 696d 6527 3a0a   == 'datetime':.
-0001ae00: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-0001ae10: 726e 2074 696d 652e 7374 7266 7469 6d65  rn time.strftime
-0001ae20: 2874 666f 726d 6174 290a 0a20 2020 2064  (tformat)..    d
-0001ae30: 6566 2049 6e69 7428 7365 6c66 293a 0a20  ef Init(self):. 
-0001ae40: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
-0001ae50: 6c66 2e69 6e69 745f 7365 630a 0a20 2020  lf.init_sec..   
-0001ae60: 2064 6566 2054 696d 6528 7365 6c66 293a   def Time(self):
-0001ae70: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-0001ae80: 7469 6d65 2e74 696d 6528 290a 0a20 2020  time.time()..   
-0001ae90: 2064 6566 2044 6174 6574 696d 6528 7365   def Datetime(se
-0001aea0: 6c66 293a 0a20 2020 2020 2020 2072 6574  lf):.        ret
-0001aeb0: 7572 6e20 6461 7465 7469 6d65 2829 0a0a  urn datetime()..
-0001aec0: 6465 6620 7273 6865 6c6c 2863 6d64 2c74  def rshell(cmd,t
-0001aed0: 696d 656f 7574 3d4e 6f6e 652c 616e 7369  imeout=None,ansi
-0001aee0: 3d54 7275 652c 7061 7468 3d4e 6f6e 652c  =True,path=None,
-0001aef0: 7072 6f67 7265 7373 3d46 616c 7365 2c70  progress=False,p
-0001af00: 726f 6772 6573 735f 7072 655f 6e65 775f  rogress_pre_new_
-0001af10: 6c69 6e65 3d46 616c 7365 2c70 726f 6772  line=False,progr
-0001af20: 6573 735f 706f 7374 5f6e 6577 5f6c 696e  ess_post_new_lin
-0001af30: 653d 4661 6c73 652c 6c6f 673d 4e6f 6e65  e=False,log=None
-0001af40: 2c70 726f 6772 6573 735f 696e 7465 7276  ,progress_interv
-0001af50: 616c 3d35 2c63 643d 4661 6c73 652c 6465  al=5,cd=False,de
-0001af60: 6661 756c 745f 7469 6d65 6f75 743d 3336  fault_timeout=36
-0001af70: 3030 293a 0a20 2020 2064 6566 2050 7072  00):.    def Ppr
-0001af80: 6f67 2873 746f 702c 7072 6f67 7265 7373  og(stop,progress
-0001af90: 5f70 7265 5f6e 6577 5f6c 696e 653d 4661  _pre_new_line=Fa
-0001afa0: 6c73 652c 7072 6f67 7265 7373 5f70 6f73  lse,progress_pos
-0001afb0: 745f 6e65 775f 6c69 6e65 3d46 616c 7365  t_new_line=False
-0001afc0: 2c6c 6f67 3d4e 6f6e 652c 7072 6f67 7265  ,log=None,progre
-0001afd0: 7373 5f69 6e74 6572 7661 6c3d 3529 3a0a  ss_interval=5):.
-0001afe0: 2020 2020 2020 2020 7469 6d65 2e73 6c65          time.sle
-0001aff0: 6570 2870 726f 6772 6573 735f 696e 7465  ep(progress_inte
-0001b000: 7276 616c 290a 2020 2020 2020 2020 6966  rval).        if
-0001b010: 2073 746f 7028 293a 0a20 2020 2020 2020   stop():.       
-0001b020: 2020 2020 2072 6574 7572 6e0a 2020 2020       return.    
-0001b030: 2020 2020 6966 2070 726f 6772 6573 735f      if progress_
-0001b040: 7072 655f 6e65 775f 6c69 6e65 3a0a 2020  pre_new_line:.  
-0001b050: 2020 2020 2020 2020 2020 6966 206c 6f67            if log
-0001b060: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-0001b070: 2020 6c6f 6728 275c 6e27 2c64 6972 6563    log('\n',direc
-0001b080: 743d 5472 7565 2c6c 6f67 5f6c 6576 656c  t=True,log_level
-0001b090: 3d31 290a 2020 2020 2020 2020 2020 2020  =1).            
-0001b0a0: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
-0001b0b0: 2020 2020 2020 5374 644f 7574 2827 5c6e        StdOut('\n
-0001b0c0: 2729 0a20 2020 2020 2020 2070 6f73 745f  ').        post_
-0001b0d0: 6368 6b3d 4661 6c73 650a 2020 2020 2020  chk=False.      
-0001b0e0: 2020 7768 696c 6520 5472 7565 3a0a 2020    while True:.  
-0001b0f0: 2020 2020 2020 2020 2020 6966 2073 746f            if sto
-0001b100: 7028 293a 2062 7265 616b 0a20 2020 2020  p(): break.     
-0001b110: 2020 2020 2020 2069 6620 6c6f 673a 0a20         if log:. 
-0001b120: 2020 2020 2020 2020 2020 2020 2020 206c                 l
-0001b130: 6f67 2827 3e27 2c64 6972 6563 743d 5472  og('>',direct=Tr
-0001b140: 7565 2c6c 6f67 5f6c 6576 656c 3d31 290a  ue,log_level=1).
-0001b150: 2020 2020 2020 2020 2020 2020 656c 7365              else
-0001b160: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-0001b170: 2020 5374 644f 7574 2827 3e27 290a 2020    StdOut('>').  
-0001b180: 2020 2020 2020 2020 2020 706f 7374 5f63            post_c
-0001b190: 686b 3d54 7275 650a 2020 2020 2020 2020  hk=True.        
-0001b1a0: 2020 2020 7469 6d65 2e73 6c65 6570 2870      time.sleep(p
-0001b1b0: 726f 6772 6573 735f 696e 7465 7276 616c  rogress_interval
-0001b1c0: 290a 2020 2020 2020 2020 6966 2070 6f73  ).        if pos
-0001b1d0: 745f 6368 6b20 616e 6420 7072 6f67 7265  t_chk and progre
-0001b1e0: 7373 5f70 6f73 745f 6e65 775f 6c69 6e65  ss_post_new_line
-0001b1f0: 3a0a 2020 2020 2020 2020 2020 2020 6966  :.            if
-0001b200: 206c 6f67 3a0a 2020 2020 2020 2020 2020   log:.          
-0001b210: 2020 2020 2020 6c6f 6728 275c 6e27 2c64        log('\n',d
-0001b220: 6972 6563 743d 5472 7565 2c6c 6f67 5f6c  irect=True,log_l
-0001b230: 6576 656c 3d31 290a 2020 2020 2020 2020  evel=1).        
-0001b240: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
-0001b250: 2020 2020 2020 2020 2020 5374 644f 7574            StdOut
-0001b260: 2827 5c6e 2729 0a0a 2020 2020 7374 6172  ('\n')..    star
-0001b270: 745f 7469 6d65 3d54 494d 4528 290a 2020  t_time=TIME().  
-0001b280: 2020 6966 206e 6f74 2054 7970 6528 636d    if not Type(cm
-0001b290: 642c 2773 7472 272c 6461 7461 3d54 7275  d,'str',data=Tru
-0001b2a0: 6529 3a0a 2020 2020 2020 2020 7265 7475  e):.        retu
-0001b2b0: 726e 202d 312c 2777 726f 6e67 2063 6f6d  rn -1,'wrong com
-0001b2c0: 6d61 6e64 2069 6e66 6f72 6d61 7469 6f6e  mand information
-0001b2d0: 203a 7b30 7d27 2e66 6f72 6d61 7428 636d   :{0}'.format(cm
-0001b2e0: 6429 2c27 272c 7374 6172 745f 7469 6d65  d),'',start_time
-0001b2f0: 2e49 6e69 7428 292c 7374 6172 745f 7469  .Init(),start_ti
-0001b300: 6d65 2e49 6e69 7428 292c 7374 6172 745f  me.Init(),start_
-0001b310: 7469 6d65 2e4e 6f77 2869 6e74 292c 636d  time.Now(int),cm
-0001b320: 642c 7061 7468 0a20 2020 2050 6f70 656e  d,path.    Popen
-0001b330: 3d73 7562 7072 6f63 6573 735f 506f 7065  =subprocess_Pope
-0001b340: 6e0a 2020 2020 5049 5045 3d73 7562 7072  n.    PIPE=subpr
-0001b350: 6f63 6573 735f 5049 5045 0a20 2020 2063  ocess_PIPE.    c
-0001b360: 6d64 5f65 6e76 3d27 270a 2020 2020 636d  md_env=''.    cm
-0001b370: 645f 613d 636d 642e 7370 6c69 7428 290a  d_a=cmd.split().
-0001b380: 2020 2020 636d 645f 6669 6c65 3d63 6d64      cmd_file=cmd
-0001b390: 5f61 5b30 5d0a 2020 2020 6966 2063 6d64  _a[0].    if cmd
-0001b3a0: 5f61 5b30 5d20 3d3d 2027 7375 646f 273a  _a[0] == 'sudo':
-0001b3b0: 2063 6d64 5f66 696c 653d 636d 645f 615b   cmd_file=cmd_a[
-0001b3c0: 315d 0a20 2020 2069 6620 7061 7468 2061  1].    if path a
-0001b3d0: 6e64 2069 7369 6e73 7461 6e63 6528 7061  nd isinstance(pa
-0001b3e0: 7468 2c73 7472 293a 0a20 2020 2020 2020  th,str):.       
-0001b3f0: 2069 6620 6f73 2e70 6174 682e 6973 6669   if os.path.isfi
-0001b400: 6c65 286f 732e 7061 7468 2e6a 6f69 6e28  le(os.path.join(
-0001b410: 7061 7468 2c63 6d64 5f66 696c 6529 293a  path,cmd_file)):
-0001b420: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-0001b430: 6364 3a0a 2020 2020 2020 2020 2020 2020  cd:.            
-0001b440: 2020 2020 636d 645f 656e 763d 636d 645f      cmd_env=cmd_
-0001b450: 656e 762b 2727 2763 6420 2573 2026 2620  env+'''cd %s && 
-0001b460: 2e2f 2727 2725 2870 6174 6829 0a20 2020  ./'''%(path).   
-0001b470: 2020 2020 2020 2020 2065 6c73 653a 0a20           else:. 
-0001b480: 2020 2020 2020 2020 2020 2020 2020 2063                 c
-0001b490: 6d64 5f65 6e76 3d63 6d64 5f65 6e76 2b27  md_env=cmd_env+'
-0001b4a0: 2727 2573 2f27 2727 2528 7061 7468 290a  ''%s/'''%(path).
-0001b4b0: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
-0001b4c0: 2020 2020 2020 2020 2020 636d 645f 656e            cmd_en
-0001b4d0: 763d 2727 2765 7870 6f72 7420 5041 5448  v='''export PATH
-0001b4e0: 3d25 733a 247b 5041 5448 7d3b 2027 2727  =%s:${PATH}; '''
-0001b4f0: 2528 7061 7468 290a 2020 2020 656c 6966  %(path).    elif
-0001b500: 2063 6d64 5f66 696c 655b 305d 2021 3d20   cmd_file[0] != 
-0001b510: 272f 2720 616e 6420 636d 645f 6669 6c65  '/' and cmd_file
-0001b520: 203d 3d20 6f73 2e70 6174 682e 6261 7365   == os.path.base
-0001b530: 6e61 6d65 2863 6d64 5f66 696c 6529 2061  name(cmd_file) a
-0001b540: 6e64 206f 732e 7061 7468 2e69 7366 696c  nd os.path.isfil
-0001b550: 6528 636d 645f 6669 6c65 293a 0a20 2020  e(cmd_file):.   
-0001b560: 2020 2020 2063 6d64 5f65 6e76 3d27 2e2f       cmd_env='./
-0001b570: 270a 2020 2020 7020 3d20 506f 7065 6e28  '.    p = Popen(
-0001b580: 636d 645f 656e 762b 636d 6420 2c20 7368  cmd_env+cmd , sh
-0001b590: 656c 6c3d 5472 7565 2c20 7374 646f 7574  ell=True, stdout
-0001b5a0: 3d50 4950 452c 2073 7464 6572 723d 5049  =PIPE, stderr=PI
-0001b5b0: 5045 290a 2020 2020 6f75 743d 4e6f 6e65  PE).    out=None
-0001b5c0: 0a20 2020 2065 7272 3d4e 6f6e 650a 2020  .    err=None.  
-0001b5d0: 2020 6966 2070 726f 6772 6573 733a 0a20    if progress:. 
-0001b5e0: 2020 2020 2020 2073 746f 705f 7468 7265         stop_thre
-0001b5f0: 6164 733d 4661 6c73 650a 2020 2020 2020  ads=False.      
-0001b600: 2020 7070 7468 3d54 6872 6561 6428 7461    ppth=Thread(ta
-0001b610: 7267 6574 3d50 7072 6f67 2c61 7267 733d  rget=Pprog,args=
-0001b620: 286c 616d 6264 613a 7374 6f70 5f74 6872  (lambda:stop_thr
-0001b630: 6561 6473 2c70 726f 6772 6573 735f 7072  eads,progress_pr
-0001b640: 655f 6e65 775f 6c69 6e65 2c70 726f 6772  e_new_line,progr
-0001b650: 6573 735f 706f 7374 5f6e 6577 5f6c 696e  ess_post_new_lin
-0001b660: 652c 6c6f 672c 7072 6f67 7265 7373 5f69  e,log,progress_i
-0001b670: 6e74 6572 7661 6c29 290a 2020 2020 2020  nterval)).      
-0001b680: 2020 7070 7468 2e73 7461 7274 2829 0a20    ppth.start(). 
-0001b690: 2020 2069 6620 7469 6d65 6f75 7420 6973     if timeout is
-0001b6a0: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
-0001b6b0: 2020 2074 7279 3a0a 2020 2020 2020 2020     try:.        
-0001b6c0: 2020 2020 7469 6d65 6f75 743d 696e 7428      timeout=int(
-0001b6d0: 5768 6974 6553 7472 6970 2874 696d 656f  WhiteStrip(timeo
-0001b6e0: 7574 2929 0a20 2020 2020 2020 2065 7863  ut)).        exc
-0001b6f0: 6570 743a 0a20 2020 2020 2020 2020 2020  ept:.           
-0001b700: 2074 696d 656f 7574 3d64 6566 6175 6c74   timeout=default
-0001b710: 5f74 696d 656f 7574 0a20 2020 2020 2020  _timeout.       
-0001b720: 2069 6620 7469 6d65 6f75 7420 3c20 333a   if timeout < 3:
-0001b730: 0a20 2020 2020 2020 2020 2020 2074 696d  .            tim
-0001b740: 656f 7574 3d33 0a20 2020 2069 6620 5079  eout=3.    if Py
-0001b750: 5665 7228 3329 3a0a 2020 2020 2020 2020  Ver(3):.        
-0001b760: 7472 793a 0a20 2020 2020 2020 2020 2020  try:.           
-0001b770: 206f 7574 2c20 6572 7220 3d20 702e 636f   out, err = p.co
-0001b780: 6d6d 756e 6963 6174 6528 7469 6d65 6f75  mmunicate(timeou
-0001b790: 743d 7469 6d65 6f75 7429 0a20 2020 2020  t=timeout).     
-0001b7a0: 2020 2065 7863 6570 7420 7375 6270 726f     except subpro
-0001b7b0: 6365 7373 5f54 696d 656f 7574 4578 7069  cess_TimeoutExpi
-0001b7c0: 7265 643a 0a20 2020 2020 2020 2020 2020  red:.           
-0001b7d0: 2070 2e6b 696c 6c28 290a 2020 2020 2020   p.kill().      
-0001b7e0: 2020 2020 2020 6966 2070 726f 6772 6573        if progres
-0001b7f0: 733a 0a20 2020 2020 2020 2020 2020 2020  s:.             
-0001b800: 2020 2073 746f 705f 7468 7265 6164 733d     stop_threads=
-0001b810: 5472 7565 0a20 2020 2020 2020 2020 2020  True.           
-0001b820: 2020 2020 2070 7074 682e 6a6f 696e 2829       ppth.join()
-0001b830: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
-0001b840: 7572 6e20 2d32 2c20 274b 696c 6c20 7072  urn -2, 'Kill pr
-0001b850: 6f63 6573 7320 6166 7465 7220 7469 6d65  ocess after time
-0001b860: 6f75 7420 287b 307d 2073 6563 2927 2e66  out ({0} sec)'.f
-0001b870: 6f72 6d61 7428 7469 6d65 6f75 7429 2c20  ormat(timeout), 
-0001b880: 2745 7272 6f72 3a20 4b69 6c6c 2070 726f  'Error: Kill pro
-0001b890: 6365 7373 2061 6674 6572 2054 696d 656f  cess after Timeo
-0001b8a0: 7574 207b 307d 272e 666f 726d 6174 2874  ut {0}'.format(t
-0001b8b0: 696d 656f 7574 292c 7374 6172 745f 7469  imeout),start_ti
-0001b8c0: 6d65 2e49 6e69 7428 292c 7374 6172 745f  me.Init(),start_
-0001b8d0: 7469 6d65 2e4e 6f77 2869 6e74 292c 636d  time.Now(int),cm
-0001b8e0: 642c 7061 7468 0a20 2020 2065 6c73 653a  d,path.    else:
-0001b8f0: 0a20 2020 2020 2020 2069 6620 6973 696e  .        if isin
-0001b900: 7374 616e 6365 2874 696d 656f 7574 2c69  stance(timeout,i
-0001b910: 6e74 293a 0a20 2020 2020 2020 2020 2020  nt):.           
-0001b920: 2063 6f75 6e74 646f 776e 3d69 6e74 2827   countdown=int('
-0001b930: 7b7d 272e 666f 726d 6174 2874 696d 656f  {}'.format(timeo
-0001b940: 7574 2929 0a20 2020 2020 2020 2020 2020  ut)).           
-0001b950: 2077 6869 6c65 2070 2e70 6f6c 6c28 2920   while p.poll() 
-0001b960: 6973 204e 6f6e 6520 616e 6420 636f 756e  is None and coun
-0001b970: 7464 6f77 6e20 3e20 303a 0a20 2020 2020  tdown > 0:.     
-0001b980: 2020 2020 2020 2020 2020 2074 696d 652e             time.
-0001b990: 736c 6565 7028 3229 0a20 2020 2020 2020  sleep(2).       
-0001b9a0: 2020 2020 2020 2020 2063 6f75 6e74 646f           countdo
-0001b9b0: 776e 202d 3d20 320a 2020 2020 2020 2020  wn -= 2.        
-0001b9c0: 2020 2020 6966 2063 6f75 6e74 646f 776e      if countdown
-0001b9d0: 203c 2031 3a0a 2020 2020 2020 2020 2020   < 1:.          
-0001b9e0: 2020 2020 2020 702e 6b69 6c6c 2829 0a20        p.kill(). 
-0001b9f0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-0001ba00: 6620 7072 6f67 7265 7373 3a0a 2020 2020  f progress:.    
-0001ba10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001ba20: 7374 6f70 5f74 6872 6561 6473 3d54 7275  stop_threads=Tru
-0001ba30: 650a 2020 2020 2020 2020 2020 2020 2020  e.              
-0001ba40: 2020 2020 2020 7070 7468 2e6a 6f69 6e28        ppth.join(
-0001ba50: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-0001ba60: 2020 7265 7475 726e 202d 322c 2027 4b69    return -2, 'Ki
-0001ba70: 6c6c 2070 726f 6365 7373 2061 6674 6572  ll process after
-0001ba80: 2074 696d 656f 7574 2028 7b30 7d20 7365   timeout ({0} se
-0001ba90: 6329 272e 666f 726d 6174 2874 696d 656f  c)'.format(timeo
-0001baa0: 7574 292c 2027 4572 726f 723a 204b 696c  ut), 'Error: Kil
-0001bab0: 6c20 7072 6f63 6573 7320 6166 7465 7220  l process after 
-0001bac0: 5469 6d65 6f75 7420 7b30 7d27 2e66 6f72  Timeout {0}'.for
-0001bad0: 6d61 7428 7469 6d65 6f75 7429 2c73 7461  mat(timeout),sta
-0001bae0: 7274 5f74 696d 652e 496e 6974 2829 2c73  rt_time.Init(),s
-0001baf0: 7461 7274 5f74 696d 652e 4e6f 7728 696e  tart_time.Now(in
-0001bb00: 7429 2c63 6d64 2c70 6174 680a 2020 2020  t),cmd,path.    
-0001bb10: 2020 2020 6f75 742c 2065 7272 203d 2070      out, err = p
-0001bb20: 2e63 6f6d 6d75 6e69 6361 7465 2829 0a0a  .communicate()..
-0001bb30: 2020 2020 6966 2070 726f 6772 6573 733a      if progress:
-0001bb40: 0a20 2020 2020 2020 2073 746f 705f 7468  .        stop_th
-0001bb50: 7265 6164 733d 5472 7565 0a20 2020 2020  reads=True.     
-0001bb60: 2020 2070 7074 682e 6a6f 696e 2829 0a20     ppth.join(). 
-0001bb70: 2020 2069 6620 5079 5665 7228 3329 3a0a     if PyVer(3):.
-0001bb80: 2020 2020 2020 2020 6f75 743d 6f75 742e          out=out.
-0001bb90: 6465 636f 6465 2822 4953 4f2d 3838 3539  decode("ISO-8859
-0001bba0: 2d31 2229 0a20 2020 2020 2020 2065 7272  -1").        err
-0001bbb0: 3d65 7272 2e64 6563 6f64 6528 2249 534f  =err.decode("ISO
-0001bbc0: 2d38 3835 392d 3122 290a 2020 2020 6966  -8859-1").    if
-0001bbd0: 2061 6e73 693a 0a20 2020 2020 2020 2072   ansi:.        r
-0001bbe0: 6574 7572 6e20 702e 7265 7475 726e 636f  eturn p.returnco
-0001bbf0: 6465 2c20 6f75 742e 7273 7472 6970 2829  de, out.rstrip()
-0001bc00: 2c20 6572 722e 7273 7472 6970 2829 2c73  , err.rstrip(),s
-0001bc10: 7461 7274 5f74 696d 652e 496e 6974 2829  tart_time.Init()
-0001bc20: 2c73 7461 7274 5f74 696d 652e 4e6f 7728  ,start_time.Now(
-0001bc30: 696e 7429 2c63 6d64 2c70 6174 680a 2020  int),cmd,path.  
-0001bc40: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
-0001bc50: 7265 7475 726e 2070 2e72 6574 7572 6e63  return p.returnc
-0001bc60: 6f64 652c 2061 6e73 695f 6573 6361 7065  ode, ansi_escape
-0001bc70: 2e73 7562 2827 272c 6f75 7429 2e72 7374  .sub('',out).rst
-0001bc80: 7269 7028 292c 2061 6e73 695f 6573 6361  rip(), ansi_esca
-0001bc90: 7065 2e73 7562 2827 272c 6572 7229 2e72  pe.sub('',err).r
-0001bca0: 7374 7269 7028 292c 7374 6172 745f 7469  strip(),start_ti
-0001bcb0: 6d65 2e49 6e69 7428 292c 7374 6172 745f  me.Init(),start_
-0001bcc0: 7469 6d65 2e4e 6f77 2869 6e74 292c 636d  time.Now(int),cm
-0001bcd0: 642c 7061 7468 0a0a 6465 6620 4973 4361  d,path..def IsCa
-0001bce0: 6e63 656c 2866 756e 6329 3a0a 2020 2020  ncel(func):.    
-0001bcf0: 6675 6e63 5f74 7970 653d 5479 7065 4e61  func_type=TypeNa
-0001bd00: 6d65 2866 756e 6329 0a20 2020 2069 6620  me(func).    if 
-0001bd10: 6675 6e63 5f74 7970 6520 696e 205b 2766  func_type in ['f
-0001bd20: 756e 6374 696f 6e27 2c27 696e 7374 616e  unction','instan
-0001bd30: 6365 6d65 7468 6f64 272c 276d 6574 686f  cemethod','metho
-0001bd40: 6427 5d3a 0a20 2020 2020 2020 2069 6620  d']:.        if 
-0001bd50: 6675 6e63 2829 3a20 7265 7475 726e 2054  func(): return T
-0001bd60: 7275 650a 2020 2020 656c 6966 2066 756e  rue.    elif fun
-0001bd70: 635f 7479 7065 2069 6e20 5b27 626f 6f6c  c_type in ['bool
-0001bd80: 272c 2773 7472 275d 2061 6e64 2066 756e  ','str'] and fun
-0001bd90: 6320 696e 205b 5472 7565 2c27 6361 6e63  c in [True,'canc
-0001bda0: 656c 275d 3a0a 2020 2020 2020 2020 7265  el']:.        re
-0001bdb0: 7475 726e 2054 7275 650a 2020 2020 7265  turn True.    re
-0001bdc0: 7475 726e 2046 616c 7365 0a0a 6465 6620  turn False..def 
-0001bdd0: 7370 7269 6e74 6628 7374 7269 6e67 2c2a  sprintf(string,*
-0001bde0: 696e 7073 2c2a 2a6f 7074 7329 3a0a 2020  inps,**opts):.  
-0001bdf0: 2020 2727 270a 2020 2020 2222 2269 706d    '''.    """ipm
-0001be00: 6974 6f6f 6c20 2d48 2025 2869 706d 695f  itool -H %(ipmi_
-0001be10: 6970 2973 202d 5520 2528 6970 6d69 5f75  ip)s -U %(ipmi_u
-0001be20: 7365 7229 7320 2d50 2027 2528 6970 6d69  ser)s -P '%(ipmi
-0001be30: 5f70 6173 7329 7327 2022 2222 2528 2a2a  _pass)s' """%(**
-0001be40: 6f70 7473 290a 2020 2020 2222 227b 6170  opts).    """{ap
-0001be50: 707d 202d 4820 7b69 706d 695f 6970 7d20  p} -H {ipmi_ip} 
-0001be60: 2d55 207b 6970 6d69 5f75 7365 727d 202d  -U {ipmi_user} -
-0001be70: 5020 277b 6970 6d69 5f70 6173 737d 2720  P '{ipmi_pass}' 
-0001be80: 2222 222e 666f 726d 6174 282a 2a6f 7074  """.format(**opt
-0001be90: 7329 0a20 2020 2022 2222 7b7d 202d 4820  s).    """{} -H 
-0001bea0: 7b7d 202d 5520 7b7d 202d 5020 277b 7d27  {} -U {} -P '{}'
-0001beb0: 2022 2222 2e66 6f72 6d61 7428 2a69 6e70   """.format(*inp
-0001bec0: 7329 0a20 2020 2022 2222 7b30 7d20 2d48  s).    """{0} -H
-0001bed0: 207b 317d 202d 5520 7b32 7d20 2d50 2027   {1} -U {2} -P '
-0001bee0: 7b33 7d27 2022 2222 2e66 6f72 6d61 7428  {3}' """.format(
-0001bef0: 2a69 6e70 7329 0a20 2020 2027 2727 0a20  *inps).    '''. 
-0001bf00: 2020 2069 6620 6e6f 7420 6973 696e 7374     if not isinst
-0001bf10: 616e 6365 2873 7472 696e 672c 7374 7229  ance(string,str)
-0001bf20: 3a20 7265 7475 726e 2046 616c 7365 2c73  : return False,s
-0001bf30: 7472 696e 670a 2020 2020 6666 616c 6c3d  tring.    ffall=
-0001bf40: 5b72 652e 636f 6d70 696c 6528 275c 7b28  [re.compile('\{(
-0001bf50: 5c64 2a29 5c7d 2729 2e66 696e 6461 6c6c  \d*)\}').findall
-0001bf60: 2873 7472 696e 6729 2c72 652e 636f 6d70  (string),re.comp
-0001bf70: 696c 6528 275c 7b28 5c77 2a29 5c7d 2729  ile('\{(\w*)\}')
-0001bf80: 2e66 696e 6461 6c6c 2873 7472 696e 6729  .findall(string)
-0001bf90: 2c72 652e 636f 6d70 696c 6528 275c 255c  ,re.compile('\%\
-0001bfa0: 2828 5c77 2a29 5c29 7327 292e 6669 6e64  ((\w*)\)s').find
-0001bfb0: 616c 6c28 7374 7269 6e67 292c 7265 2e63  all(string),re.c
-0001bfc0: 6f6d 7069 6c65 2827 5c7b 5c7d 2729 2e66  ompile('\{\}').f
-0001bfd0: 696e 6461 6c6c 2873 7472 696e 6729 5d0a  indall(string)].
-0001bfe0: 2020 2020 693d 300a 2020 2020 666f 7220      i=0.    for 
-0001bff0: 746d 7020 696e 2066 6661 6c6c 3a0a 2020  tmp in ffall:.  
-0001c000: 2020 2020 2020 6966 2069 2069 6e20 5b30        if i in [0
-0001c010: 2c31 5d3a 2074 6d70 3d5b 206a 2020 666f  ,1]: tmp=[ j  fo
-0001c020: 7220 6a20 696e 2074 6d70 2069 6620 6c65  r j in tmp if le
-0001c030: 6e28 6a29 205d 0a20 2020 2020 2020 2069  n(j) ].        i
-0001c040: 6620 746d 703a 0a20 2020 2020 2020 2020  f tmp:.         
-0001c050: 2020 2069 6620 6920 3d3d 2030 3a0a 2020     if i == 0:.  
-0001c060: 2020 2020 2020 2020 2020 2020 2020 6d78                mx
-0001c070: 3d30 0a20 2020 2020 2020 2020 2020 2020  =0.             
-0001c080: 2020 2066 6f72 207a 2069 6e20 746d 703a     for z in tmp:
-0001c090: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001c0a0: 2020 2020 2069 6620 696e 7428 7a29 203e       if int(z) >
-0001c0b0: 206d 783a 206d 783d 696e 7428 7a29 0a20   mx: mx=int(z). 
-0001c0c0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-0001c0d0: 6620 696e 7073 3a0a 2020 2020 2020 2020  f inps:.        
-0001c0e0: 2020 2020 2020 2020 2020 2020 6966 206c              if l
-0001c0f0: 656e 2869 6e70 7329 203e 206d 783a 2072  en(inps) > mx: r
-0001c100: 6574 7572 6e20 7374 7269 6e67 2e66 6f72  eturn string.for
-0001c110: 6d61 7428 2a69 6e70 7329 0a20 2020 2020  mat(*inps).     
-0001c120: 2020 2020 2020 2020 2020 2065 6c69 6620             elif 
-0001c130: 6f70 7473 3a0a 2020 2020 2020 2020 2020  opts:.          
-0001c140: 2020 2020 2020 2020 2020 6966 206c 656e            if len
-0001c150: 286f 7074 7329 203e 206d 783a 2072 6574  (opts) > mx: ret
-0001c160: 7572 6e20 7374 7269 6e67 2e66 6f72 6d61  urn string.forma
-0001c170: 7428 2a6f 7074 732e 7661 6c75 6573 2829  t(*opts.values()
-0001c180: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-0001c190: 2020 7265 7475 726e 2046 616c 7365 2c22    return False,"
-0001c1a0: 4e65 6564 206d 6f72 6520 696e 7075 7420  Need more input 
-0001c1b0: 2874 7570 6c65 2f6c 6973 7429 2070 6172  (tuple/list) par
-0001c1c0: 616d 6574 6572 7328 7265 7175 6972 6520  ameters(require 
-0001c1d0: 7b7d 2922 2e66 6f72 6d61 7428 6d78 290a  {})".format(mx).
-0001c1e0: 2020 2020 2020 2020 2020 2020 656c 6966              elif
-0001c1f0: 2030 3c20 6920 3c20 323a 0a20 2020 2020   0< i < 2:.     
-0001c200: 2020 2020 2020 2020 2020 206e 6577 5f73             new_s
-0001c210: 7472 3d27 270a 2020 2020 2020 2020 2020  tr=''.          
-0001c220: 2020 2020 2020 7374 7269 6e67 5f61 3d73        string_a=s
-0001c230: 7472 696e 672e 7370 6c69 7428 290a 2020  tring.split().  
-0001c240: 2020 2020 2020 2020 2020 2020 2020 6f69                oi
-0001c250: 6478 3d30 0a20 2020 2020 2020 2020 2020  dx=0.           
-0001c260: 2020 2020 2066 6f72 2069 6920 696e 2074       for ii in t
-0001c270: 6d70 3a0a 2020 2020 2020 2020 2020 2020  mp:.            
-0001c280: 2020 2020 2020 2020 6964 783d 4e6f 6e65          idx=None
-0001c290: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001c2a0: 2020 2020 2069 6620 277b 2573 7d27 2528       if '{%s}'%(
-0001c2b0: 6969 2920 696e 2073 7472 696e 675f 613a  ii) in string_a:
-0001c2c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001c2d0: 2020 2020 2020 2020 2069 6478 3d73 7472           idx=str
-0001c2e0: 696e 675f 612e 696e 6465 7828 277b 2573  ing_a.index('{%s
-0001c2f0: 7d27 2528 6969 2929 0a20 2020 2020 2020  }'%(ii)).       
-0001c300: 2020 2020 2020 2020 2020 2020 2065 6c69               eli
-0001c310: 6620 2227 7b25 737d 2722 2528 6969 2920  f "'{%s}'"%(ii) 
-0001c320: 696e 2073 7472 696e 675f 613a 0a20 2020  in string_a:.   
-0001c330: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c340: 2020 2020 2069 6478 3d73 7472 696e 675f       idx=string_
-0001c350: 612e 696e 6465 7828 2227 7b25 737d 2722  a.index("'{%s}'"
-0001c360: 2528 6969 2929 0a20 2020 2020 2020 2020  %(ii)).         
-0001c370: 2020 2020 2020 2020 2020 2069 6620 6973             if is
-0001c380: 696e 7374 616e 6365 2869 6478 2c69 6e74  instance(idx,int
-0001c390: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
-0001c3a0: 2020 2020 2020 2020 2020 2069 6620 6969             if ii
-0001c3b0: 2069 6e20 6f70 7473 3a0a 2020 2020 2020   in opts:.      
-0001c3c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c3d0: 2020 2020 2020 7374 7269 6e67 5f61 5b69        string_a[i
-0001c3e0: 6478 5d3d 7374 7269 6e67 5f61 5b69 6478  dx]=string_a[idx
-0001c3f0: 5d2e 666f 726d 6174 282a 2a6f 7074 7329  ].format(**opts)
-0001c400: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001c410: 2020 2020 2065 6c69 6620 6969 2069 6e20       elif ii in 
-0001c420: 6f70 7473 3a0a 2020 2020 2020 2020 2020  opts:.          
-0001c430: 2020 2020 2020 2020 2020 2020 2020 666f                fo
-0001c440: 7220 6a6a 2069 6e20 7261 6e67 6528 302c  r jj in range(0,
-0001c450: 6c65 6e28 7374 7269 6e67 5f61 2929 3a0a  len(string_a)):.
-0001c460: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c470: 2020 2020 2020 2020 2020 2069 6620 277b             if '{
-0001c480: 2573 7d27 2528 6969 2920 696e 2073 7472  %s}'%(ii) in str
-0001c490: 696e 675f 615b 6a6a 5d3a 0a20 2020 2020  ing_a[jj]:.     
-0001c4a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c4b0: 2020 2020 2020 2020 2020 7374 7269 6e67            string
-0001c4c0: 5f61 5b6a 6a5d 3d73 7472 696e 675f 615b  _a[jj]=string_a[
-0001c4d0: 6a6a 5d2e 666f 726d 6174 282a 2a6f 7074  jj].format(**opt
-0001c4e0: 7329 0a20 2020 2020 2020 2020 2020 2020  s).             
-0001c4f0: 2020 2072 6574 7572 6e20 5472 7565 2c4a     return True,J
-0001c500: 6f69 6e28 7374 7269 6e67 5f61 2c73 796d  oin(string_a,sym
-0001c510: 626f 6c3d 2720 2729 0a20 2020 2020 2020  bol=' ').       
-0001c520: 2020 2020 2065 6c69 6620 6920 3d3d 2032       elif i == 2
-0001c530: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-0001c540: 2020 6e65 775f 7374 723d 2727 0a20 2020    new_str=''.   
-0001c550: 2020 2020 2020 2020 2020 2020 2073 7472               str
-0001c560: 696e 675f 613d 7374 7269 6e67 2e73 706c  ing_a=string.spl
-0001c570: 6974 2829 0a20 2020 2020 2020 2020 2020  it().           
-0001c580: 2020 2020 206f 6964 783d 300a 2020 2020       oidx=0.    
-0001c590: 2020 2020 2020 2020 2020 2020 666f 7220              for 
-0001c5a0: 6969 2069 6e20 746d 703a 0a20 2020 2020  ii in tmp:.     
-0001c5b0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-0001c5c0: 6478 3d4e 6f6e 650a 2020 2020 2020 2020  dx=None.        
-0001c5d0: 2020 2020 2020 2020 2020 2020 6966 2027              if '
-0001c5e0: 2528 7b7d 2973 272e 666f 726d 6174 2869  %({})s'.format(i
-0001c5f0: 6929 2069 6e20 7374 7269 6e67 5f61 3a0a  i) in string_a:.
-0001c600: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c610: 2020 2020 2020 2020 6964 783d 7374 7269          idx=stri
-0001c620: 6e67 5f61 2e69 6e64 6578 2827 2528 7b7d  ng_a.index('%({}
-0001c630: 2973 272e 666f 726d 6174 2869 6929 290a  )s'.format(ii)).
-0001c640: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c650: 2020 2020 656c 6966 2022 2725 287b 7d29      elif "'%({})
-0001c660: 2722 2e66 6f72 6d61 7428 6969 2920 696e  '".format(ii) in
-0001c670: 2073 7472 696e 675f 613a 0a20 2020 2020   string_a:.     
+000157a0: 2020 2020 7265 7475 726e 206d 6574 686f      return metho
+000157b0: 640a 2020 2020 2020 2020 2020 2020 2020  d.              
+000157c0: 2020 6966 206d 6574 686f 643d 3d27 4745    if method=='GE
+000157d0: 5427 3a0a 2020 2020 2020 2020 2020 2020  T':.            
+000157e0: 2020 2020 2020 2020 7274 3d6f 626a 2e47          rt=obj.G
+000157f0: 4554 2e67 6574 286e 6b65 7929 0a20 2020  ET.get(nkey).   
+00015800: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00015810: 2069 6620 6e6f 7420 4973 4e6f 6e65 2872   if not IsNone(r
+00015820: 7429 3a20 7265 7475 726e 2072 740a 2020  t): return rt.  
+00015830: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00015840: 2020 7265 7475 726e 2044 6566 6175 6c74    return Default
+00015850: 286f 626a 2c64 6566 6175 6c74 290a 2020  (obj,default).  
+00015860: 2020 2020 2020 2020 2020 2020 2020 656c                el
+00015870: 6966 206d 6574 686f 643d 3d27 4649 4c45  if method=='FILE
+00015880: 273a 0a20 2020 2020 2020 2020 2020 2020  ':.             
+00015890: 2020 2020 2020 2072 743d 6f62 6a2e 4649         rt=obj.FI
+000158a0: 4c45 532e 6765 746c 6973 7428 6e6b 6579  LES.getlist(nkey
+000158b0: 2c64 6566 6175 6c74 290a 2020 2020 2020  ,default).      
+000158c0: 2020 2020 2020 2020 2020 2020 2020 6966                if
+000158d0: 206e 6f74 2049 734e 6f6e 6528 7274 293a   not IsNone(rt):
+000158e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000158f0: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+00015900: 4f75 7446 6f72 6d61 7428 7274 2c6f 7574  OutFormat(rt,out
+00015910: 3d27 7261 7727 2c70 6565 6c3d 7065 656c  ='raw',peel=peel
+00015920: 2c73 7472 6970 3d73 7472 6970 2c64 6566  ,strip=strip,def
+00015930: 6175 6c74 3d64 6566 6175 6c74 290a 2020  ault=default).  
+00015940: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00015950: 2020 2369 6620 6e6f 7420 4973 4e6f 6e65    #if not IsNone
+00015960: 2872 7429 3a20 7265 7475 726e 2072 740a  (rt): return rt.
+00015970: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00015980: 2020 2020 2372 743d 6f62 6a2e 4649 4c45      #rt=obj.FILE
+00015990: 532e 6765 7428 6e6b 6579 2c64 6566 6175  S.get(nkey,defau
+000159a0: 6c74 290a 2020 2020 2020 2020 2020 2020  lt).            
+000159b0: 2020 2020 2020 2020 2369 6620 6e6f 7420          #if not 
+000159c0: 4973 4e6f 6e65 2872 7429 3a20 7265 7475  IsNone(rt): retu
+000159d0: 726e 2072 740a 2020 2020 2020 2020 2020  rn rt.          
+000159e0: 2020 2020 2020 2020 2020 7265 7475 726e            return
+000159f0: 2044 6566 6175 6c74 286f 626a 2c64 6566   Default(obj,def
+00015a00: 6175 6c74 290a 2020 2020 2020 2020 2020  ault).          
+00015a10: 2020 2020 2020 656c 6966 206d 6574 686f        elif metho
+00015a20: 643d 3d27 504f 5354 273a 0a20 2020 2020  d=='POST':.     
+00015a30: 2020 2020 2020 2020 2020 2020 2020 2072                 r
+00015a40: 743d 6f62 6a2e 4649 4c45 532e 6765 746c  t=obj.FILES.getl
+00015a50: 6973 7428 6e6b 6579 290a 2020 2020 2020  ist(nkey).      
+00015a60: 2020 2020 2020 2020 2020 2020 2020 2372                #r
+00015a70: 7432 3d6f 626a 2e46 494c 4553 2e67 6574  t2=obj.FILES.get
+00015a80: 286e 6b65 7929 0a20 2020 2020 2020 2020  (nkey).         
+00015a90: 2020 2020 2020 2020 2020 2069 6620 6e6f             if no
+00015aa0: 7420 4973 4e6f 6e65 2872 7429 3a0a 2020  t IsNone(rt):.  
+00015ab0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00015ac0: 2020 2020 2020 7265 7475 726e 204f 7574        return Out
+00015ad0: 466f 726d 6174 2872 742c 6f75 743d 2772  Format(rt,out='r
+00015ae0: 6177 272c 7065 656c 3d70 6565 6c2c 7374  aw',peel=peel,st
+00015af0: 7269 703d 7374 7269 702c 6465 6661 756c  rip=strip,defaul
+00015b00: 743d 6465 6661 756c 7429 0a20 2020 2020  t=default).     
+00015b10: 2020 2020 2020 2020 2020 2020 2020 2072                 r
+00015b20: 743d 6f62 6a2e 504f 5354 2e67 6574 6c69  t=obj.POST.getli
+00015b30: 7374 286e 6b65 7929 0a20 2020 2020 2020  st(nkey).       
+00015b40: 2020 2020 2020 2020 2020 2020 2023 7274               #rt
+00015b50: 3d6f 626a 2e50 4f53 542e 6765 7428 6e6b  =obj.POST.get(nk
+00015b60: 6579 290a 2020 2020 2020 2020 2020 2020  ey).            
+00015b70: 2020 2020 2020 2020 6966 206e 6f74 2049          if not I
+00015b80: 734e 6f6e 6528 7274 293a 0a20 2020 2020  sNone(rt):.     
+00015b90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00015ba0: 2020 2072 6574 7572 6e20 4f75 7446 6f72     return OutFor
+00015bb0: 6d61 7428 7274 2c6f 7574 3d27 7261 7727  mat(rt,out='raw'
+00015bc0: 2c70 6565 6c3d 7065 656c 2c73 7472 6970  ,peel=peel,strip
+00015bd0: 3d73 7472 6970 2c64 6566 6175 6c74 3d64  =strip,default=d
+00015be0: 6566 6175 6c74 290a 2020 2020 2020 2020  efault).        
+00015bf0: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+00015c00: 726e 2044 6566 6175 6c74 286f 626a 2c64  rn Default(obj,d
+00015c10: 6566 6175 6c74 290a 2020 2020 2020 2020  efault).        
+00015c20: 2020 2020 6966 2069 6478 5f74 7970 6520      if idx_type 
+00015c30: 3d3d 2027 7374 7227 3a0a 2020 2020 2020  == 'str':.      
+00015c40: 2020 2020 2020 2020 2020 7265 7475 726e            return
+00015c50: 205f 7765 625f 6461 7461 286f 626a 2c6e   _web_data(obj,n
+00015c60: 6964 782c 6d65 7468 6f64 2c64 6566 6175  idx,method,defau
+00015c70: 6c74 290a 2020 2020 2020 2020 2020 2020  lt).            
+00015c80: 656c 6966 2069 6478 5f74 7970 6520 3d3d  elif idx_type ==
+00015c90: 2027 6c69 7374 273a 0a20 2020 2020 2020   'list':.       
+00015ca0: 2020 2020 2020 2020 2072 743d 5b5d 0a20           rt=[]. 
+00015cb0: 2020 2020 2020 2020 2020 2020 2020 2066                 f
+00015cc0: 6f72 2069 2069 6e20 6e69 6478 3a0a 2020  or i in nidx:.  
+00015cd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00015ce0: 2020 7274 2e61 7070 656e 6428 5f77 6562    rt.append(_web
+00015cf0: 5f64 6174 6128 6f62 6a2c 692c 6d65 7468  _data(obj,i,meth
+00015d00: 6f64 2c64 6566 6175 6c74 2929 0a20 2020  od,default)).   
+00015d10: 2020 2020 2020 2020 2020 2020 2072 6574               ret
+00015d20: 7572 6e20 4f75 7446 6f72 6d61 7428 7274  urn OutFormat(rt
+00015d30: 2c6f 7574 3d6f 7574 2c64 6566 6175 6c74  ,out=out,default
+00015d40: 3d64 6566 6175 6c74 2c6f 7267 3d6f 626a  =default,org=obj
+00015d50: 2c70 6565 6c3d 7065 656c 2c73 7472 6970  ,peel=peel,strip
+00015d60: 3d73 7472 6970 290a 2020 2020 656c 6966  =strip).    elif
+00015d70: 206f 626a 5f74 7970 6520 696e 2028 2749   obj_type in ('I
+00015d80: 6d6d 7574 6162 6c65 4d75 6c74 6944 6963  mmutableMultiDic
+00015d90: 7427 293a 2023 2046 6c61 736b 2057 6562  t'): # Flask Web
+00015da0: 2044 6174 610a 2020 2020 2020 2020 746d   Data.        tm
+00015db0: 703d 7b7d 0a20 2020 2020 2020 2069 6620  p={}.        if 
+00015dc0: 6f62 6a3a 0a20 2020 2020 2020 2020 2020  obj:.           
+00015dd0: 2066 6f72 2069 6920 696e 206f 626a 3a0a   for ii in obj:.
+00015de0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00015df0: 746d 705b 6969 5d3d 6f62 6a5b 6969 5d0a  tmp[ii]=obj[ii].
+00015e00: 2020 2020 2020 2020 7265 7475 726e 2047          return G
+00015e10: 6574 2874 6d70 2c69 6478 2c64 6566 6175  et(tmp,idx,defau
+00015e20: 6c74 2c65 7272 2920 0a20 2020 2065 6c69  lt,err) .    eli
+00015e30: 6620 6f62 6a5f 7479 7065 2069 6e20 2827  f obj_type in ('
+00015e40: 6b44 6963 7427 2c27 6b4c 6973 7427 2c27  kDict','kList','
+00015e50: 4449 4354 2729 3a20 0a20 2020 2020 2020  DICT'): .       
+00015e60: 2072 6574 7572 6e20 4765 7428 6f62 6a2e   return Get(obj.
+00015e70: 4765 7428 292c 6964 782c 6465 6661 756c  Get(),idx,defaul
+00015e80: 742c 6572 7229 200a 2020 2020 7265 7475  t,err) .    retu
+00015e90: 726e 204f 7574 466f 726d 6174 285b 5d2c  rn OutFormat([],
+00015ea0: 6f75 743d 6f75 742c 6465 6661 756c 743d  out=out,default=
+00015eb0: 6465 6661 756c 742c 6f72 673d 6f62 6a2c  default,org=obj,
+00015ec0: 7065 656c 3d70 6565 6c2c 7374 7269 703d  peel=peel,strip=
+00015ed0: 7374 7269 7029 0a0a 0a64 6566 2054 7279  strip)...def Try
+00015ee0: 436f 6465 2863 6f64 652c 6465 6661 756c  Code(code,defaul
+00015ef0: 743d 4661 6c73 652c 5f72 6574 7572 6e5f  t=False,_return_
+00015f00: 3d54 7275 6529 3a0a 2020 2020 2727 270a  =True):.    '''.
+00015f10: 2020 2020 5275 6e20 7374 7269 6e67 2063      Run string c
+00015f20: 6f64 650a 2020 2020 6465 6661 756c 7420  ode.    default 
+00015f30: 3a46 616c 7365 0a20 2020 205f 7265 7475  :False.    _retu
+00015f40: 726e 5f3a 2054 7275 653a 2072 6574 7572  rn_: True: retur
+00015f50: 6e20 6f75 7470 7574 2c20 4661 6c73 653a  n output, False:
+00015f60: 2070 7269 6e74 206f 6e20 7363 7265 656e   print on screen
+00015f70: 0a20 2020 2027 2727 0a20 2020 2069 6620  .    '''.    if 
+00015f80: 5479 7065 2863 6f64 652c 7374 7229 3a0a  Type(code,str):.
+00015f90: 2020 2020 2020 2020 6572 723d 4e6f 6e65          err=None
+00015fa0: 0a20 2020 2020 2020 2069 6620 5f72 6574  .        if _ret
+00015fb0: 7572 6e5f 3a0a 2020 2020 2020 2020 2020  urn_:.          
+00015fc0: 2020 2320 6372 6561 7465 2066 696c 652d    # create file-
+00015fd0: 6c69 6b65 2073 7472 696e 6720 746f 2063  like string to c
+00015fe0: 6170 7475 7265 206f 7574 7075 740a 2020  apture output.  
+00015ff0: 2020 2020 2020 2020 2020 636f 6465 4f75            codeOu
+00016000: 7420 3d20 5374 7269 6e67 494f 2829 0a20  t = StringIO(). 
+00016010: 2020 2020 2020 2020 2020 2063 6f64 6545             codeE
+00016020: 7272 203d 2053 7472 696e 6749 4f28 290a  rr = StringIO().
+00016030: 2020 2020 2020 2020 2020 2020 7379 732e              sys.
+00016040: 7374 646f 7574 2e66 6c75 7368 2829 0a20  stdout.flush(). 
+00016050: 2020 2020 2020 2020 2020 2073 7973 2e73             sys.s
+00016060: 7464 6572 722e 666c 7573 6828 290a 2020  tderr.flush().  
+00016070: 2020 2020 2020 2020 2020 7379 732e 7374            sys.st
+00016080: 646f 7574 3d63 6f64 654f 7574 2023 2053  dout=codeOut # S
+00016090: 7461 6e64 6172 6420 4f75 7420 6672 6f6d  tandard Out from
+000160a0: 2061 7070 6c69 6361 7469 6f6e 0a20 2020   application.   
+000160b0: 2020 2020 2020 2020 2073 7973 2e73 7464           sys.std
+000160c0: 6572 723d 636f 6465 4572 7220 2320 5374  err=codeErr # St
+000160d0: 616e 6461 7264 2045 7272 6f72 2066 726f  andard Error fro
+000160e0: 6d20 6170 706c 6963 6174 696f 6e0a 2020  m application.  
+000160f0: 2020 2020 2020 7472 793a 0a20 2020 2020        try:.     
+00016100: 2020 2020 2020 2065 7865 6328 636f 6465         exec(code
+00016110: 290a 2020 2020 2020 2020 6578 6365 7074  ).        except
+00016120: 3a0a 2020 2020 2020 2020 2020 2020 2343  :.            #C
+00016130: 6f64 6520 4572 726f 7220 6d65 7373 6167  ode Error messag
+00016140: 650a 2020 2020 2020 2020 2020 2020 6572  e.            er
+00016150: 723d 4578 6365 7074 4d65 7373 6167 6528  r=ExceptMessage(
+00016160: 290a 2020 2020 2020 2020 6669 6e61 6c6c  ).        finall
+00016170: 793a 0a20 2020 2020 2020 2020 2020 2069  y:.            i
+00016180: 6620 5f72 6574 7572 6e5f 3a0a 2020 2020  f _return_:.    
+00016190: 2020 2020 2020 2020 2020 2020 7379 732e              sys.
+000161a0: 7374 646f 7574 2e66 6c75 7368 2829 0a20  stdout.flush(). 
+000161b0: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+000161c0: 7973 2e73 7464 6572 722e 666c 7573 6828  ys.stderr.flush(
+000161d0: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+000161e0: 2020 2372 6563 6f76 6572 2f72 6573 746f    #recover/resto
+000161f0: 7265 2073 7464 6f75 7420 616e 6420 7374  re stdout and st
+00016200: 6465 7272 0a20 2020 2020 2020 2020 2020  derr.           
+00016210: 2020 2020 2073 7973 2e73 7464 6f75 743d       sys.stdout=
+00016220: 7379 732e 5f5f 7374 646f 7574 5f5f 0a20  sys.__stdout__. 
+00016230: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+00016240: 7973 2e73 7464 6572 723d 7379 732e 5f5f  ys.stderr=sys.__
+00016250: 7374 6465 7272 5f5f 0a20 2020 2020 2020  stderr__.       
+00016260: 2020 2020 2020 2020 2023 4765 7420 7661           #Get va
+00016270: 6c75 6520 0a20 2020 2020 2020 2020 2020  lue .           
+00016280: 2020 2020 2072 743d 636f 6465 4f75 742e       rt=codeOut.
+00016290: 6765 7476 616c 7565 2829 0a20 2020 2020  getvalue().     
+000162a0: 2020 2020 2020 2020 2020 2065 723d 636f             er=co
+000162b0: 6465 4572 722e 6765 7476 616c 7565 2829  deErr.getvalue()
+000162c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000162d0: 2023 436c 6f73 6520 494f 0a20 2020 2020   #Close IO.     
+000162e0: 2020 2020 2020 2020 2020 2063 6f64 654f             codeO
+000162f0: 7574 2e63 6c6f 7365 2829 0a20 2020 2020  ut.close().     
+00016300: 2020 2020 2020 2020 2020 2063 6f64 6545             codeE
+00016310: 7272 2e63 6c6f 7365 2829 0a20 2020 2020  rr.close().     
+00016320: 2020 2020 2020 2069 6620 6572 723a 2023         if err: #
+00016330: 436f 6465 2045 7272 6f72 0a20 2020 2020  Code Error.     
+00016340: 2020 2020 2020 2020 2020 2069 6620 5f72             if _r
+00016350: 6574 7572 6e5f 3a0a 2020 2020 2020 2020  eturn_:.        
+00016360: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+00016370: 726e 2046 616c 7365 2c65 7272 0a20 2020  rn False,err.   
+00016380: 2020 2020 2020 2020 2020 2020 2065 6c73               els
+00016390: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
+000163a0: 2020 2020 2020 2053 7464 4572 7228 6572         StdErr(er
+000163b0: 7229 0a20 2020 2020 2020 2020 2020 2069  r).            i
+000163c0: 6620 5f72 6574 7572 6e5f 3a0a 2020 2020  f _return_:.    
+000163d0: 2020 2020 2020 2020 2020 2020 2320 5374              # St
+000163e0: 616e 6461 7264 204f 7574 2061 6e64 2045  andard Out and E
+000163f0: 7272 6f72 0a20 2020 2020 2020 2020 2020  rror.           
+00016400: 2020 2020 2072 6574 7572 6e20 7274 2c65       return rt,e
+00016410: 720a 2020 2020 6966 205f 7265 7475 726e  r.    if _return
+00016420: 5f3a 0a20 2020 2020 2020 2072 6574 7572  _:.        retur
+00016430: 6e20 4661 6c73 652c 4e6f 6e65 2020 234e  n False,None  #N
+00016440: 6f74 2061 2073 7472 696e 6720 636f 6465  ot a string code
+00016450: 0a0a 6465 6620 4578 6365 7074 4d65 7373  ..def ExceptMess
+00016460: 6167 6528 6d73 673d 2727 2c64 6566 6175  age(msg='',defau
+00016470: 6c74 3d4e 6f6e 6529 3a0a 2020 2020 2727  lt=None):.    ''
+00016480: 270a 2020 2020 5472 793a 0a20 2020 2020  '.    Try:.     
+00016490: 2020 4141 410a 2020 2020 4578 6365 7074    AAA.    Except
+000164a0: 3a0a 2020 2020 2020 2065 7272 3d45 7863  :.       err=Exc
+000164b0: 6570 744d 6573 7361 6765 2829 203d 3e20  eptMessage() => 
+000164c0: 4966 2065 7863 6570 7469 6e67 2074 6865  If excepting the
+000164d0: 6e20 7461 6b65 6e20 6572 726f 7220 6f72  n taken error or
+000164e0: 2074 7261 6365 6261 636b 2063 6f64 6520   traceback code 
+000164f0: 616e 6420 7265 7475 726e 2069 740a 2020  and return it.  
+00016500: 2020 2727 270a 2020 2020 653d 7379 732e    '''.    e=sys.
+00016510: 6578 635f 696e 666f 2829 5b30 5d0a 2020  exc_info()[0].  
+00016520: 2020 6572 3d74 7261 6365 6261 636b 2e66    er=traceback.f
+00016530: 6f72 6d61 745f 6578 6328 290a 2020 2020  ormat_exc().    
+00016540: 6966 2065 206f 7220 6572 2021 3d20 274e  if e or er != 'N
+00016550: 6f6e 6554 7970 653a 204e 6f6e 655c 6e27  oneType: None\n'
+00016560: 3a0a 2020 2020 2020 2020 6966 206d 7367  :.        if msg
+00016570: 3a0a 2020 2020 2020 2020 2020 2020 6d73  :.            ms
+00016580: 673d 277b 7d5c 6e5c 6e7b 7d5c 6e5c 6e7b  g='{}\n\n{}\n\n{
+00016590: 7d27 2e66 6f72 6d61 7428 6d73 672c 652c  }'.format(msg,e,
+000165a0: 6572 290a 2020 2020 2020 2020 656c 7365  er).        else
+000165b0: 3a0a 2020 2020 2020 2020 2020 2020 6d73  :.            ms
+000165c0: 673d 275c 6e5c 6e7b 7d5c 6e5c 6e7b 7d27  g='\n\n{}\n\n{}'
+000165d0: 2e66 6f72 6d61 7428 652c 6572 290a 2020  .format(e,er).  
+000165e0: 2020 2020 2020 7265 7475 726e 206d 7367        return msg
+000165f0: 0a20 2020 2072 6574 7572 6e20 6465 6661  .    return defa
+00016600: 756c 740a 0a64 6566 2049 7056 3428 6970  ult..def IpV4(ip
+00016610: 2c6f 7574 3d27 7374 7227 2c64 6566 6175  ,out='str',defau
+00016620: 6c74 3d46 616c 7365 2c70 6f72 743d 4e6f  lt=False,port=No
+00016630: 6e65 2c62 6d63 3d46 616c 7365 2c75 7365  ne,bmc=False,use
+00016640: 643d 4661 6c73 652c 706f 6f6c 3d4e 6f6e  d=False,pool=Non
+00016650: 6529 3a0a 2020 2020 2727 270a 2020 2020  e):.    '''.    
+00016660: 6368 6563 6b2f 636f 6e76 6572 7420 4950  check/convert IP
+00016670: 0a20 2020 2069 7020 3a20 696e 742c 2073  .    ip : int, s
+00016680: 7472 2c20 2e2e 2e0a 2020 2020 6f75 743a  tr, ....    out:
+00016690: 0a20 2020 2020 2073 7472 203a 2064 6566  .      str : def
+000166a0: 6175 6c74 203a 2063 6f6e 7665 7274 2074  ault : convert t
+000166b0: 6f20 7878 782e 7878 782e 7878 782e 7878  o xxx.xxx.xxx.xx
+000166c0: 7820 666f 726d 6174 0a20 2020 2020 2069  x format.      i
+000166d0: 6e74 203a 2063 6f6e 7665 7274 2074 6f20  nt : convert to 
+000166e0: 696e 7420 666f 726d 6174 0a20 2020 2020  int format.     
+000166f0: 2068 6578 203a 2063 6f6e 7665 7274 2074   hex : convert t
+00016700: 6f20 6865 7820 666f 726d 6174 0a20 2020  o hex format.   
+00016710: 2070 6f72 743a 2069 6620 796f 7520 7761   port: if you wa
+00016720: 6e74 2063 6865 636b 2074 6865 2049 5020  nt check the IP 
+00016730: 7769 7468 2070 6f72 7420 7468 656e 2074  with port then t
+00016740: 7970 650a 2020 2020 626d 6320 3a20 6465  ype.    bmc : de
+00016750: 6661 756c 7420 4661 6c73 652c 2054 7275  fault False, Tru
+00016760: 653a 2063 6865 636b 2042 4d43 2070 6f72  e: check BMC por
+00016770: 7420 2836 3233 2c36 3634 2c34 3433 290a  t (623,664,443).
+00016780: 2020 2020 7265 7475 726e 203a 2049 502c      return : IP,
+00016790: 2069 6620 6661 696c 2074 6865 6e20 7265   if fail then re
+000167a0: 7475 726e 2064 6566 6175 6c74 2076 616c  turn default val
+000167b0: 7565 0a20 2020 2075 7365 643a 0a20 2020  ue.    used:.   
+000167c0: 2020 202a 2072 6571 7569 7265 6420 706f     * required po
+000167d0: 7274 206f 7074 696f 6e2c 2062 7574 2063  rt option, but c
+000167e0: 6865 636b 2077 6974 6820 7369 6e67 6c65  heck with single
+000167f0: 2070 6f72 740a 2020 2020 2020 4661 6c73   port.      Fals
+00016800: 653a 2064 6566 6175 6c74 2028 6e6f 7420  e: default (not 
+00016810: 6368 6563 6b29 0a20 2020 2020 2054 7275  check).      Tru
+00016820: 653a 2043 6865 636b 2049 5020 616c 7265  e: Check IP alre
+00016830: 6164 7920 7573 6564 2074 6865 2070 6f72  ady used the por
+00016840: 7428 7265 7475 726e 2054 7275 6529 206f  t(return True) o
+00016850: 7220 7374 696c 6c20 6176 6169 6c61 626c  r still availabl
+00016860: 6528 7265 7475 726e 2046 616c 7365 290a  e(return False).
+00016870: 2020 2020 706f 6f6c 3a20 6966 2067 6976      pool: if giv
+00016880: 6520 4950 2050 6f6f 6c28 7475 706c 6529  e IP Pool(tuple)
+00016890: 2074 6865 6e20 6368 6563 6b20 7468 6520   then check the 
+000168a0: 4950 2069 7320 696e 2074 6865 2050 4f4f  IP is in the POO
+000168b0: 4c20 6f72 206e 6f74 2e0a 2020 2020 2727  L or not..    ''
+000168c0: 270a 2020 2020 6465 6620 4973 4f70 656e  '.    def IsOpen
+000168d0: 506f 7274 2869 702c 706f 7274 293a 0a20  Port(ip,port):. 
+000168e0: 2020 2020 2020 2027 2727 0a20 2020 2020         '''.     
+000168f0: 2020 2049 7420 636f 6e6e 6563 7469 6f6e     It connection
+00016900: 6162 6c65 2070 6f72 7428 3f29 206c 696b  able port(?) lik
+00016910: 6520 6173 2073 7368 2c20 6674 702c 2074  e as ssh, ftp, t
+00016920: 656c 6e65 742c 2077 6562 2c20 2e2e 2e0a  elnet, web, ....
+00016930: 2020 2020 2020 2020 2727 270a 2020 2020          '''.    
+00016940: 2020 2020 7463 705f 736b 203d 2073 6f63      tcp_sk = soc
+00016950: 6b65 742e 736f 636b 6574 2873 6f63 6b65  ket.socket(socke
+00016960: 742e 4146 5f49 4e45 542c 2073 6f63 6b65  t.AF_INET, socke
+00016970: 742e 534f 434b 5f53 5452 4541 4d29 0a20  t.SOCK_STREAM). 
+00016980: 2020 2020 2020 2074 6370 5f73 6b2e 7365         tcp_sk.se
+00016990: 7473 6f63 6b6f 7074 2873 6f63 6b65 742e  tsockopt(socket.
+000169a0: 534f 4c5f 534f 434b 4554 2c20 736f 636b  SOL_SOCKET, sock
+000169b0: 6574 2e53 4f5f 5245 5553 4541 4444 522c  et.SO_REUSEADDR,
+000169c0: 2031 290a 2020 2020 2020 2020 7463 705f   1).        tcp_
+000169d0: 736b 2e73 6574 7469 6d65 6f75 7428 3129  sk.settimeout(1)
+000169e0: 0a20 2020 2020 2020 2072 743d 5b5d 0a20  .        rt=[]. 
+000169f0: 2020 2020 2020 2066 6f72 2070 7420 696e         for pt in
+00016a00: 2070 6f72 743a 0a20 2020 2020 2020 2020   port:.         
+00016a10: 2020 2074 7279 3a0a 2020 2020 2020 2020     try:.        
+00016a20: 2020 2020 2020 2020 7463 705f 736b 2e63          tcp_sk.c
+00016a30: 6f6e 6e65 6374 2828 6970 2c70 7429 290a  onnect((ip,pt)).
+00016a40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00016a50: 7463 705f 736b 2e63 6c6f 7365 2829 0a20  tcp_sk.close(). 
+00016a60: 2020 2020 2020 2020 2020 2020 2020 2072                 r
+00016a70: 742e 6170 7065 6e64 2870 7429 0a20 2020  t.append(pt).   
+00016a80: 2020 2020 2020 2020 2065 7863 6570 743a           except:
+00016a90: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00016aa0: 2070 6173 730a 2020 2020 2020 2020 7265   pass.        re
+00016ab0: 7475 726e 2072 740a 2020 2020 6465 6620  turn rt.    def 
+00016ac0: 4973 5573 6564 506f 7274 2869 702c 706f  IsUsedPort(ip,po
+00016ad0: 7274 293a 0a20 2020 2020 2020 2027 2727  rt):.        '''
+00016ae0: 0a20 2020 2020 2020 2054 6865 2049 5020  .        The IP 
+00016af0: 616c 7265 6164 7920 7573 6564 2074 6865  already used the
+00016b00: 2070 6f72 742c 2069 7420 6a75 7374 2063   port, it just c
+00016b10: 6865 636b 7570 2061 7661 696c 6162 6c65  heckup available
+00016b20: 2070 6f72 7420 6f72 2061 6c72 6561 6420   port or alread 
+00016b30: 7573 6564 0a20 2020 2020 2020 2027 2727  used.        '''
+00016b40: 0a20 2020 2020 2020 2069 6620 4973 4e6f  .        if IsNo
+00016b50: 6e65 2869 702c 6368 6b5f 7661 6c3d 5b4e  ne(ip,chk_val=[N
+00016b60: 6f6e 652c 2727 2c27 6c6f 6361 6c68 6f73  one,'','localhos
+00016b70: 7427 2c27 6c6f 6361 6c27 5d29 3a0a 2020  t','local']):.  
+00016b80: 2020 2020 2020 2020 2020 6970 3d27 3132            ip='12
+00016b90: 372e 302e 302e 3127 0a20 2020 2020 2020  7.0.0.1'.       
+00016ba0: 2073 6f63 3d73 6f63 6b65 742e 736f 636b   soc=socket.sock
+00016bb0: 6574 2873 6f63 6b65 742e 4146 5f49 4e45  et(socket.AF_INE
+00016bc0: 542c 2073 6f63 6b65 742e 534f 434b 5f53  T, socket.SOCK_S
+00016bd0: 5452 4541 4d29 0a20 2020 2020 2020 2072  TREAM).        r
+00016be0: 743d 5b5d 0a20 2020 2020 2020 2066 6f72  t=[].        for
+00016bf0: 2070 7420 696e 2070 6f72 743a 0a20 2020   pt in port:.   
+00016c00: 2020 2020 2020 2020 2074 7279 3a0a 2020           try:.  
+00016c10: 2020 2020 2020 2020 2020 2020 2020 6c6f                lo
+00016c20: 6361 7469 6f6e 3d28 6970 2c70 7429 0a20  cation=(ip,pt). 
+00016c30: 2020 2020 2020 2020 2020 2020 2020 2072                 r
+00016c40: 743d 736f 632e 636f 6e6e 6563 745f 6578  t=soc.connect_ex
+00016c50: 286c 6f63 6174 696f 6e29 0a20 2020 2020  (location).     
+00016c60: 2020 2020 2020 2020 2020 2073 6f63 2e63             soc.c
+00016c70: 6c6f 7365 2829 0a20 2020 2020 2020 2020  lose().         
+00016c80: 2020 2020 2020 2023 7274 3d3d 3020 7468         #rt==0 th
+00016c90: 656e 2061 6c72 6561 6479 2075 7365 640a  en already used.
+00016ca0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00016cb0: 6966 2072 7420 3d3d 2030 3a20 7274 2e61  if rt == 0: rt.a
+00016cc0: 7070 656e 6428 7074 290a 2020 2020 2020  ppend(pt).      
+00016cd0: 2020 2020 2020 6578 6365 7074 3a0a 2020        except:.  
+00016ce0: 2020 2020 2020 2020 2020 2020 2020 7061                pa
+00016cf0: 7373 0a20 2020 2020 2020 2072 6574 7572  ss.        retur
+00016d00: 6e20 7274 0a20 2020 2069 6620 626d 633a  n rt.    if bmc:
+00016d10: 2023 2055 7064 6174 6520 424d 4320 506f   # Update BMC Po
+00016d20: 7274 0a20 2020 2020 2020 2064 6566 6175  rt.        defau
+00016d30: 6c74 5f62 6d63 5f70 6f72 743d 5b36 3233  lt_bmc_port=[623
+00016d40: 2c36 3634 2c34 3433 5d0a 2020 2020 2020  ,664,443].      
+00016d50: 2020 6966 206e 6f74 2049 734e 6f6e 6528    if not IsNone(
+00016d60: 706f 7274 293a 0a20 2020 2020 2020 2020  port):.         
+00016d70: 2020 2070 6f72 743d 496e 7428 706f 7274     port=Int(port
+00016d80: 2c64 6566 6175 6c74 3d46 616c 7365 290a  ,default=False).
+00016d90: 2020 2020 2020 2020 2020 2020 6966 2069              if i
+00016da0: 7369 6e73 7461 6e63 6528 706f 7274 2c28  sinstance(port,(
+00016db0: 6c69 7374 2c74 7570 6c65 2929 3a0a 2020  list,tuple)):.  
+00016dc0: 2020 2020 2020 2020 2020 2020 2020 666f                fo
+00016dd0: 7220 6920 696e 2070 6f72 743a 0a20 2020  r i in port:.   
+00016de0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00016df0: 2069 6620 6920 6e6f 7420 696e 2064 6566   if i not in def
+00016e00: 6175 6c74 5f62 6d63 5f70 6f72 743a 2064  ault_bmc_port: d
+00016e10: 6566 6175 6c74 5f62 6d63 5f70 6f72 742e  efault_bmc_port.
+00016e20: 6170 7065 6e64 2869 290a 2020 2020 2020  append(i).      
+00016e30: 2020 2020 2020 656c 6966 2069 7369 6e73        elif isins
+00016e40: 7461 6e63 6528 706f 7274 2c69 6e74 293a  tance(port,int):
+00016e50: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00016e60: 2069 6620 706f 7274 206e 6f74 2069 6e20   if port not in 
+00016e70: 6465 6661 756c 745f 626d 635f 706f 7274  default_bmc_port
+00016e80: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00016e90: 2020 2020 2020 6465 6661 756c 745f 626d        default_bm
+00016ea0: 635f 706f 7274 2e61 7070 656e 6428 706f  c_port.append(po
+00016eb0: 7274 290a 2020 2020 2020 2020 706f 7274  rt).        port
+00016ec0: 3d74 7570 6c65 2864 6566 6175 6c74 5f62  =tuple(default_b
+00016ed0: 6d63 5f70 6f72 7429 0a20 2020 2069 6620  mc_port).    if 
+00016ee0: 706f 7274 3a0a 2020 2020 2020 2020 706f  port:.        po
+00016ef0: 7274 3d49 6e74 2870 6f72 742c 6465 6661  rt=Int(port,defa
+00016f00: 756c 743d 4661 6c73 6529 0a20 2020 2020  ult=False).     
+00016f10: 2020 2069 6620 706f 7274 2069 7320 4661     if port is Fa
+00016f20: 6c73 653a 2072 6574 7572 6e20 6465 6661  lse: return defa
+00016f30: 756c 740a 2020 2020 2020 2020 6966 2054  ult.        if T
+00016f40: 7970 6528 706f 7274 2c69 6e74 293a 2070  ype(port,int): p
+00016f50: 6f72 743d 5b70 6f72 745d 0a20 2020 2069  ort=[port].    i
+00016f60: 705f 696e 743d 4e6f 6e65 0a20 2020 2069  p_int=None.    i
+00016f70: 6620 6973 696e 7374 616e 6365 2869 702c  f isinstance(ip,
+00016f80: 7374 7229 3a0a 2020 2020 2020 2020 6970  str):.        ip
+00016f90: 7374 723d 6970 2e73 7472 6970 2829 0a20  str=ip.strip(). 
+00016fa0: 2020 2020 2020 2069 6620 2730 7827 2069         if '0x' i
+00016fb0: 6e20 6970 7374 723a 0a20 2020 2020 2020  n ipstr:.       
+00016fc0: 2020 2020 2069 705f 696e 743d 696e 7428       ip_int=int(
+00016fd0: 6970 7374 722c 3136 290a 2020 2020 2020  ipstr,16).      
+00016fe0: 2020 656c 6966 2069 7073 7472 2e69 7364    elif ipstr.isd
+00016ff0: 6967 6974 2829 3a0a 2020 2020 2020 2020  igit():.        
+00017000: 2020 2020 6970 5f69 6e74 3d69 6e74 2869      ip_int=int(i
+00017010: 7073 7472 290a 2020 2020 2020 2020 656c  pstr).        el
+00017020: 6966 2027 2e27 2069 6e20 6970 7374 723a  if '.' in ipstr:
+00017030: 0a20 2020 2020 2020 2020 2020 2074 7279  .            try
+00017040: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00017050: 2020 6970 5f69 6e74 3d73 7472 7563 742e    ip_int=struct.
+00017060: 756e 7061 636b 2822 2149 222c 2073 6f63  unpack("!I", soc
+00017070: 6b65 742e 696e 6574 5f61 746f 6e28 6970  ket.inet_aton(ip
+00017080: 7374 7229 295b 305d 2023 2063 6f6e 7665  str))[0] # conve
+00017090: 7274 2049 6e74 2049 500a 2020 2020 2020  rt Int IP.      
+000170a0: 2020 2020 2020 2020 2020 2373 7472 7563            #struc
+000170b0: 742e 756e 7061 636b 2822 214c 222c 2073  t.unpack("!L", s
+000170c0: 6f63 6b65 742e 696e 6574 5f61 746f 6e28  ocket.inet_aton(
+000170d0: 6970 2929 5b30 5d0a 2020 2020 2020 2020  ip))[0].        
+000170e0: 2020 2020 6578 6365 7074 3a0a 2020 2020      except:.    
+000170f0: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+00017100: 726e 2064 6566 6175 6c74 0a20 2020 2065  rn default.    e
+00017110: 6c69 6620 6973 696e 7374 616e 6365 2869  lif isinstance(i
+00017120: 702c 696e 7429 3a0a 2020 2020 2020 2020  p,int):.        
+00017130: 7472 793a 0a20 2020 2020 2020 2020 2020  try:.           
+00017140: 2073 6f63 6b65 742e 696e 6574 5f6e 746f   socket.inet_nto
+00017150: 6128 7374 7275 6374 2e70 6163 6b28 2221  a(struct.pack("!
+00017160: 4922 2c20 6970 2929 2023 2063 6865 636b  I", ip)) # check
+00017170: 2069 6e74 2069 7320 4950 206f 7220 6e6f   int is IP or no
+00017180: 740a 2020 2020 2020 2020 2020 2020 6970  t.            ip
+00017190: 5f69 6e74 3d69 700a 2020 2020 2020 2020  _int=ip.        
+000171a0: 6578 6365 7074 3a0a 2020 2020 2020 2020  except:.        
+000171b0: 2020 2020 7265 7475 726e 2064 6566 6175      return defau
+000171c0: 6c74 0a20 2020 2065 6c69 6620 6973 696e  lt.    elif isin
+000171d0: 7374 616e 6365 2869 702c 7479 7065 2868  stance(ip,type(h
+000171e0: 6578 2929 3a0a 2020 2020 2020 2020 6970  ex)):.        ip
+000171f0: 5f69 6e74 3d69 6e74 2869 702c 3136 290a  _int=int(ip,16).
+00017200: 0a20 2020 2069 6620 6e6f 7420 4973 4e6f  .    if not IsNo
+00017210: 6e65 2869 705f 696e 7429 3a0a 2020 2020  ne(ip_int):.    
+00017220: 2020 2020 7472 793a 0a20 2020 2020 2020      try:.       
+00017230: 2020 2020 2069 6620 6f75 7420 696e 205b       if out in [
+00017240: 2769 6e74 272c 696e 745d 3a0a 2020 2020  'int',int]:.    
+00017250: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+00017260: 726e 2069 705f 696e 740a 2020 2020 2020  rn ip_int.      
+00017270: 2020 2020 2020 656c 6966 206f 7574 2069        elif out i
+00017280: 6e20 5b27 6865 7827 2c68 6578 5d3a 0a20  n ['hex',hex]:. 
+00017290: 2020 2020 2020 2020 2020 2020 2020 2072                 r
+000172a0: 6574 7572 6e20 6865 7828 6970 5f69 6e74  eturn hex(ip_int
+000172b0: 290a 2020 2020 2020 2020 2020 2020 656c  ).            el
+000172c0: 6966 2069 7369 6e73 7461 6e63 6528 706f  if isinstance(po
+000172d0: 6f6c 2c28 6c69 7374 2c74 7570 6c65 2929  ol,(list,tuple))
+000172e0: 2061 6e64 206c 656e 2870 6f6f 6c29 203d   and len(pool) =
+000172f0: 3d20 323a 0a20 2020 2020 2020 2020 2020  = 2:.           
+00017300: 2020 2020 2072 6574 7572 6e20 4970 5634       return IpV4
+00017310: 2870 6f6f 6c5b 305d 2c6f 7574 3d69 6e74  (pool[0],out=int
+00017320: 2920 3c3d 2069 705f 696e 7420 3c3d 2049  ) <= ip_int <= I
+00017330: 7056 3428 706f 6f6c 5b31 5d2c 6f75 743d  pV4(pool[1],out=
+00017340: 696e 7429 0a20 2020 2020 2020 2020 2020  int).           
+00017350: 2065 6c73 653a 2023 6465 6661 756c 7420   else: #default 
+00017360: 746f 2073 7472 0a20 2020 2020 2020 2020  to str.         
+00017370: 2020 2020 2020 2069 705f 7374 723d 736f         ip_str=so
+00017380: 636b 6574 2e69 6e65 745f 6e74 6f61 2873  cket.inet_ntoa(s
+00017390: 7472 7563 742e 7061 636b 2822 2149 222c  truct.pack("!I",
+000173a0: 2069 705f 696e 7429 290a 2020 2020 2020   ip_int)).      
+000173b0: 2020 2020 2020 2020 2020 6966 2070 6f72            if por
+000173c0: 743a 2023 2049 6620 6269 6e67 2050 6f72  t: # If bing Por
+000173d0: 7420 7468 656e 2063 6865 636b 2074 6865  t then check the
+000173e0: 2070 6f72 740a 2020 2020 2020 2020 2020   port.          
+000173f0: 2020 2020 2020 2020 2020 6966 2075 7365            if use
+00017400: 643a 0a20 2020 2020 2020 2020 2020 2020  d:.             
+00017410: 2020 2020 2020 2020 2020 2072 743d 4973             rt=Is
+00017420: 5573 6564 506f 7274 2869 705f 7374 722c  UsedPort(ip_str,
+00017430: 706f 7274 290a 2020 2020 2020 2020 2020  port).          
+00017440: 2020 2020 2020 2020 2020 2020 2020 6966                if
+00017450: 2072 743a 2072 6574 7572 6e20 7274 0a20   rt: return rt. 
+00017460: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00017470: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
+00017480: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00017490: 2072 743d 4973 4f70 656e 506f 7274 2869   rt=IsOpenPort(i
+000174a0: 705f 7374 722c 706f 7274 290a 2020 2020  p_str,port).    
+000174b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000174c0: 2020 2020 6966 2072 743a 2072 6574 7572      if rt: retur
+000174d0: 6e20 7274 0a20 2020 2020 2020 2020 2020  n rt.           
+000174e0: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
+000174f0: 2020 2020 2020 2020 2020 2020 2020 2072                 r
+00017500: 6574 7572 6e20 6970 5f73 7472 0a20 2020  eturn ip_str.   
+00017510: 2020 2020 2065 7863 6570 743a 0a20 2020       except:.   
+00017520: 2020 2020 2020 2020 2070 6173 730a 2020           pass.  
+00017530: 2020 7265 7475 726e 2064 6566 6175 6c74    return default
+00017540: 0a0a 6465 6620 7069 6e67 2868 6f73 742c  ..def ping(host,
+00017550: 2a2a 6f70 7473 293a 0a20 2020 2027 2727  **opts):.    '''
+00017560: 0a20 2020 2073 616d 6520 6173 2070 696e  .    same as pin
+00017570: 6720 636f 6d6d 616e 640a 2020 2020 2727  g command.    ''
+00017580: 270a 2020 2020 636f 756e 743d 6f70 7473  '.    count=opts
+00017590: 2e67 6574 2827 636f 756e 7427 2c30 290a  .get('count',0).
+000175a0: 2020 2020 696e 7465 7276 616c 3d6f 7074      interval=opt
+000175b0: 732e 6765 7428 2769 6e74 6572 7661 6c27  s.get('interval'
+000175c0: 2c31 290a 2020 2020 6b65 6570 5f67 6f6f  ,1).    keep_goo
+000175d0: 643d 6f70 7473 2e67 6574 2827 6b65 6570  d=opts.get('keep
+000175e0: 5f67 6f6f 6427 2c30 290a 2020 2020 7469  _good',0).    ti
+000175f0: 6d65 6f75 743d 6f70 7473 2e67 6574 2827  meout=opts.get('
+00017600: 7469 6d65 6f75 7427 2c6f 7074 732e 6765  timeout',opts.ge
+00017610: 7428 2774 696d 656f 7574 5f73 6563 272c  t('timeout_sec',
+00017620: 3029 290a 2020 2020 6c6f 7374 5f6d 6f6e  0)).    lost_mon
+00017630: 3d6f 7074 732e 6765 7428 276c 6f73 745f  =opts.get('lost_
+00017640: 6d6f 6e27 2c46 616c 7365 290a 2020 2020  mon',False).    
+00017650: 6c6f 673d 6f70 7473 2e67 6574 2827 6c6f  log=opts.get('lo
+00017660: 6727 2c4e 6f6e 6529 0a20 2020 2073 746f  g',None).    sto
+00017670: 705f 6675 6e63 3d6f 7074 732e 6765 7428  p_func=opts.get(
+00017680: 2773 746f 705f 6675 6e63 272c 4e6f 6e65  'stop_func',None
+00017690: 290a 2020 2020 6c6f 675f 666f 726d 6174  ).    log_format
+000176a0: 3d6f 7074 732e 6765 7428 276c 6f67 5f66  =opts.get('log_f
+000176b0: 6f72 6d61 7427 2c27 2e27 290a 2020 2020  ormat','.').    
+000176c0: 616c 6976 655f 706f 7274 3d6f 7074 732e  alive_port=opts.
+000176d0: 6765 7428 2761 6c69 7665 5f70 6f72 7427  get('alive_port'
+000176e0: 290a 2020 2020 6361 6e63 656c 5f66 756e  ).    cancel_fun
+000176f0: 633d 6f70 7473 2e67 6574 2827 6361 6e63  c=opts.get('canc
+00017700: 656c 5f66 756e 6327 2c4e 6f6e 6529 0a0a  el_func',None)..
+00017710: 2020 2020 4943 4d50 5f45 4348 4f5f 5245      ICMP_ECHO_RE
+00017720: 5155 4553 5420 3d20 3820 2320 5365 656d  QUEST = 8 # Seem
+00017730: 7320 746f 2062 6520 7468 6520 7361 6d65  s to be the same
+00017740: 206f 6e20 536f 6c61 7269 732e 2046 726f   on Solaris. Fro
+00017750: 6d20 2f75 7372 2f69 6e63 6c75 6465 2f6c  m /usr/include/l
+00017760: 696e 7578 2f69 636d 702e 683b 0a20 2020  inux/icmp.h;.   
+00017770: 2049 434d 505f 434f 4445 203d 2073 6f63   ICMP_CODE = soc
+00017780: 6b65 742e 6765 7470 726f 746f 6279 6e61  ket.getprotobyna
+00017790: 6d65 2827 6963 6d70 2729 0a20 2020 2045  me('icmp').    E
+000177a0: 5252 4f52 5f44 4553 4352 203d 207b 0a20  RROR_DESCR = {. 
+000177b0: 2020 2020 2020 2031 3a20 2720 2d20 4e6f         1: ' - No
+000177c0: 7465 2074 6861 7420 4943 4d50 206d 6573  te that ICMP mes
+000177d0: 7361 6765 7320 6361 6e20 6f6e 6c79 2062  sages can only b
+000177e0: 6520 270a 2020 2020 2020 2020 2020 2027  e '.           '
+000177f0: 7365 6e74 2066 726f 6d20 7072 6f63 6573  sent from proces
+00017800: 7365 7320 7275 6e6e 696e 6720 6173 2072  ses running as r
+00017810: 6f6f 742e 272c 0a20 2020 2020 2020 2031  oot.',.        1
+00017820: 3030 3133 3a20 2720 2d20 4e6f 7465 2074  0013: ' - Note t
+00017830: 6861 7420 4943 4d50 206d 6573 7361 6765  hat ICMP message
+00017840: 7320 6361 6e20 6f6e 6c79 2062 6520 7365  s can only be se
+00017850: 6e74 2062 7927 0a20 2020 2020 2020 2020  nt by'.         
+00017860: 2020 2020 2020 2720 7573 6572 7320 6f72        ' users or
+00017870: 2070 726f 6365 7373 6573 2077 6974 6820   processes with 
+00017880: 6164 6d69 6e69 7374 7261 746f 7220 7269  administrator ri
+00017890: 6768 7473 2e27 0a20 2020 2020 2020 207d  ghts.'.        }
+000178a0: 0a0a 2020 2020 6465 6620 6368 6563 6b73  ..    def checks
+000178b0: 756d 286d 7367 293a 0a20 2020 2020 2020  um(msg):.       
+000178c0: 2073 756d 203d 2030 0a20 2020 2020 2020   sum = 0.       
+000178d0: 2073 697a 6520 3d20 286c 656e 286d 7367   size = (len(msg
+000178e0: 2920 2f2f 2032 2920 2a20 320a 2020 2020  ) // 2) * 2.    
+000178f0: 2020 2020 666f 7220 6320 696e 2072 616e      for c in ran
+00017900: 6765 2830 2c73 697a 652c 2032 293a 0a20  ge(0,size, 2):. 
+00017910: 2020 2020 2020 2020 2020 2073 756d 203d             sum =
+00017920: 2028 7375 6d20 2b20 6f72 6428 6d73 675b   (sum + ord(msg[
+00017930: 6320 2b20 315d 292a 3235 362b 6f72 6428  c + 1])*256+ord(
+00017940: 6d73 675b 635d 2929 2026 2030 7866 6666  msg[c])) & 0xfff
+00017950: 6666 6666 660a 2020 2020 2020 2020 6966  fffff.        if
+00017960: 2073 697a 6520 3c20 6c65 6e28 6d73 6729   size < len(msg)
+00017970: 3a0a 2020 2020 2020 2020 2020 2020 7375  :.            su
+00017980: 6d20 3d20 2873 756d 2b6f 7264 286d 7367  m = (sum+ord(msg
+00017990: 5b6c 656e 286d 7367 2920 2d20 315d 2929  [len(msg) - 1]))
+000179a0: 2026 2030 7866 6666 6666 6666 660a 2020   & 0xffffffff.  
+000179b0: 2020 2020 2020 7261 203d 207e 2828 7375        ra = ~((su
+000179c0: 6d20 3e3e 2031 3629 202b 2028 7375 6d20  m >> 16) + (sum 
+000179d0: 2620 3078 6666 6666 2920 2b20 2873 756d  & 0xffff) + (sum
+000179e0: 203e 3e20 3136 2929 2026 2030 7866 6666   >> 16)) & 0xfff
+000179f0: 660a 2020 2020 2020 2020 7261 203d 2072  f.        ra = r
+00017a00: 6120 3e3e 2038 207c 2028 7261 203c 3c20  a >> 8 | (ra << 
+00017a10: 3820 2620 3078 6666 3030 290a 2020 2020  8 & 0xff00).    
+00017a20: 2020 2020 7265 7475 726e 2072 610a 0a20      return ra.. 
+00017a30: 2020 2064 6566 206d 6b5f 7061 636b 6574     def mk_packet
+00017a40: 2873 697a 6529 3a0a 2020 2020 2020 2020  (size):.        
+00017a50: 2222 224d 616b 6520 6120 6e65 7720 6563  """Make a new ec
+00017a60: 686f 2072 6571 7565 7374 2070 6163 6b65  ho request packe
+00017a70: 7420 6163 636f 7264 696e 6720 746f 2073  t according to s
+00017a80: 697a 6522 2222 0a20 2020 2020 2020 2023  ize""".        #
+00017a90: 2048 6561 6465 7220 6973 2074 7970 6520   Header is type 
+00017aa0: 2838 292c 2063 6f64 6520 2838 292c 2063  (8), code (8), c
+00017ab0: 6865 636b 7375 6d20 2831 3629 2c20 6964  hecksum (16), id
+00017ac0: 2028 3136 292c 2073 6571 7565 6e63 6520   (16), sequence 
+00017ad0: 2831 3629 0a20 2020 2020 2020 2068 6561  (16).        hea
+00017ae0: 6465 7220 3d20 7374 7275 6374 2e70 6163  der = struct.pac
+00017af0: 6b28 2762 6248 4868 272c 2049 434d 505f  k('bbHHh', ICMP_
+00017b00: 4543 484f 5f52 4551 5545 5354 2c20 302c  ECHO_REQUEST, 0,
+00017b10: 2030 2c20 7369 7a65 2c20 3129 0a20 2020   0, size, 1).   
+00017b20: 2020 2020 2023 6461 7461 203d 2073 7472       #data = str
+00017b30: 7563 742e 6361 6c63 7369 7a65 2827 6262  uct.calcsize('bb
+00017b40: 4848 6827 2920 2a20 2751 270a 2020 2020  HHh') * 'Q'.    
+00017b50: 2020 2020 6461 7461 203d 2073 697a 6520      data = size 
+00017b60: 2a20 2751 270a 2020 2020 2020 2020 6d79  * 'Q'.        my
+00017b70: 5f63 6865 636b 7375 6d20 3d20 6368 6563  _checksum = chec
+00017b80: 6b73 756d 2853 7472 2868 6561 6465 7229  ksum(Str(header)
+00017b90: 202b 2064 6174 6129 0a20 2020 2020 2020   + data).       
+00017ba0: 2068 6561 6465 7220 3d20 7374 7275 6374   header = struct
+00017bb0: 2e70 6163 6b28 2762 6248 4868 272c 2049  .pack('bbHHh', I
+00017bc0: 434d 505f 4543 484f 5f52 4551 5545 5354  CMP_ECHO_REQUEST
+00017bd0: 2c20 302c 0a20 2020 2020 2020 2020 2020  , 0,.           
+00017be0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00017bf0: 2020 736f 636b 6574 2e68 746f 6e73 286d    socket.htons(m
+00017c00: 795f 6368 6563 6b73 756d 292c 2073 697a  y_checksum), siz
+00017c10: 652c 2031 290a 2020 2020 2020 2020 7265  e, 1).        re
+00017c20: 7475 726e 2068 6561 6465 7220 2b20 4279  turn header + By
+00017c30: 7465 7328 6461 7461 290a 0a20 2020 2064  tes(data)..    d
+00017c40: 6566 2072 6563 6569 7665 286d 795f 736f  ef receive(my_so
+00017c50: 636b 6574 2c20 7373 697a 652c 2073 7469  cket, ssize, sti
+00017c60: 6d65 2c20 7469 6d65 6f75 7429 3a0a 2020  me, timeout):.  
+00017c70: 2020 2020 2020 7768 696c 6520 5472 7565        while True
+00017c80: 3a0a 2020 2020 2020 2020 2020 2020 6966  :.            if
+00017c90: 2074 696d 656f 7574 203c 3d20 303a 0a20   timeout <= 0:. 
+00017ca0: 2020 2020 2020 2020 2020 2020 2020 2072                 r
+00017cb0: 6574 7572 6e0a 2020 2020 2020 2020 2020  eturn.          
+00017cc0: 2020 7265 6164 7920 3d20 7365 6c65 6374    ready = select
+00017cd0: 2e73 656c 6563 7428 5b6d 795f 736f 636b  .select([my_sock
+00017ce0: 6574 5d2c 205b 5d2c 205b 5d2c 2074 696d  et], [], [], tim
+00017cf0: 656f 7574 290a 2020 2020 2020 2020 2020  eout).          
+00017d00: 2020 6966 2072 6561 6479 5b30 5d20 3d3d    if ready[0] ==
+00017d10: 205b 5d3a 2023 2054 696d 656f 7574 0a20   []: # Timeout. 
+00017d20: 2020 2020 2020 2020 2020 2020 2020 2072                 r
+00017d30: 6574 7572 6e0a 2020 2020 2020 2020 2020  eturn.          
+00017d40: 2020 7265 6365 6976 6564 5f74 696d 6520    received_time 
+00017d50: 3d20 7469 6d65 2e74 696d 6528 290a 2020  = time.time().  
+00017d60: 2020 2020 2020 2020 2020 7061 636b 6574            packet
+00017d70: 2c20 6164 6472 203d 206d 795f 736f 636b  , addr = my_sock
+00017d80: 6574 2e72 6563 7666 726f 6d28 3130 3234  et.recvfrom(1024
+00017d90: 290a 2020 2020 2020 2020 2020 2020 7479  ).            ty
+00017da0: 7065 2c20 636f 6465 2c20 6368 6563 6b73  pe, code, checks
+00017db0: 756d 2c20 6773 697a 652c 2073 6571 203d  um, gsize, seq =
+00017dc0: 2073 7472 7563 742e 756e 7061 636b 2827   struct.unpack('
+00017dd0: 6262 4848 6827 2c20 7061 636b 6574 5b32  bbHHh', packet[2
+00017de0: 303a 3238 5d29 2023 2047 6574 2048 6561  0:28]) # Get Hea
+00017df0: 6465 720a 2020 2020 2020 2020 2020 2020  der.            
+00017e00: 6966 2067 7369 7a65 203d 3d20 7373 697a  if gsize == ssiz
+00017e10: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
+00017e20: 2020 2072 6574 7572 6e20 7265 6365 6976     return receiv
+00017e30: 6564 5f74 696d 6520 2d20 7374 696d 650a  ed_time - stime.
+00017e40: 2020 2020 2020 2020 2020 2020 7469 6d65              time
+00017e50: 6f75 7420 2d3d 2072 6563 6569 7665 645f  out -= received_
+00017e60: 7469 6d65 202d 2073 7469 6d65 0a0a 2020  time - stime..  
+00017e70: 2020 6465 6620 7069 6e67 696e 6728 6970    def pinging(ip
+00017e80: 2c74 696d 656f 7574 3d31 2c73 697a 653d  ,timeout=1,size=
+00017e90: 3634 293a 0a20 2020 2020 2020 2074 7279  64):.        try
+00017ea0: 3a0a 2020 2020 2020 2020 2020 2020 6d79  :.            my
+00017eb0: 5f73 6f63 6b65 7420 3d20 736f 636b 6574  _socket = socket
+00017ec0: 2e73 6f63 6b65 7428 736f 636b 6574 2e41  .socket(socket.A
+00017ed0: 465f 494e 4554 2c20 736f 636b 6574 2e53  F_INET, socket.S
+00017ee0: 4f43 4b5f 5241 572c 2049 434d 505f 434f  OCK_RAW, ICMP_CO
+00017ef0: 4445 290a 2020 2020 2020 2020 6578 6365  DE).        exce
+00017f00: 7074 2073 6f63 6b65 742e 6572 726f 7220  pt socket.error 
+00017f10: 6173 2065 3a0a 2020 2020 2020 2020 2020  as e:.          
+00017f20: 2020 6966 2065 2e65 7272 6e6f 2069 6e20    if e.errno in 
+00017f30: 4552 524f 525f 4445 5343 523a 0a20 2020  ERROR_DESCR:.   
+00017f40: 2020 2020 2020 2020 2020 2020 2072 6169               rai
+00017f50: 7365 2073 6f63 6b65 742e 6572 726f 7228  se socket.error(
+00017f60: 2727 2e6a 6f69 6e28 2865 2e61 7267 735b  ''.join((e.args[
+00017f70: 315d 2c20 4552 524f 525f 4445 5343 525b  1], ERROR_DESCR[
+00017f80: 652e 6572 726e 6f5d 2929 290a 2020 2020  e.errno]))).    
+00017f90: 2020 2020 2020 2020 2020 2020 2372 6169              #rai
+00017fa0: 7365 2073 6f63 6b65 742e 6572 726f 7228  se socket.error(
+00017fb0: 4a6f 696e 2828 652e 6172 6773 5b31 5d2c  Join((e.args[1],
+00017fc0: 2045 5252 4f52 5f44 4553 4352 5b65 2e65   ERROR_DESCR[e.e
+00017fd0: 7272 6e6f 5d29 2c73 796d 626f 6c3d 2727  rrno]),symbol=''
+00017fe0: 2929 0a20 2020 2020 2020 2020 2020 2072  )).            r
+00017ff0: 6169 7365 0a20 2020 2020 2020 2069 6620  aise.        if 
+00018000: 7369 7a65 2069 6e20 5b27 726e 6427 2c27  size in ['rnd','
+00018010: 7261 6e64 6f6d 275d 3a0a 2020 2020 2020  random']:.      
+00018020: 2020 2020 2020 2320 4d61 7869 6d75 6d20        # Maximum 
+00018030: 7369 7a65 2066 6f72 2061 6e20 756e 7369  size for an unsi
+00018040: 676e 6564 2073 686f 7274 2069 6e74 2063  gned short int c
+00018050: 206f 626a 6563 7428 3635 3533 3529 0a20   object(65535). 
+00018060: 2020 2020 2020 2020 2020 2073 697a 6520             size 
+00018070: 3d20 696e 7428 2869 6428 7469 6d65 6f75  = int((id(timeou
+00018080: 7429 202a 2072 616e 646f 6d2e 7261 6e64  t) * random.rand
+00018090: 6f6d 2829 2920 2520 3635 3533 3529 0a20  om()) % 65535). 
+000180a0: 2020 2020 2020 2070 6163 6b65 7420 3d20         packet = 
+000180b0: 6d6b 5f70 6163 6b65 7428 7369 7a65 290a  mk_packet(size).
+000180c0: 2020 2020 2020 2020 7768 696c 6520 7061          while pa
+000180d0: 636b 6574 3a0a 2020 2020 2020 2020 2020  cket:.          
+000180e0: 2020 7365 6e74 203d 206d 795f 736f 636b    sent = my_sock
+000180f0: 6574 2e73 656e 6474 6f28 7061 636b 6574  et.sendto(packet
+00018100: 2c20 2869 702c 2031 2929 2023 2049 434d  , (ip, 1)) # ICM
+00018110: 5020 6861 7665 206e 6f20 706f 7274 2c20  P have no port, 
+00018120: 536f 206a 7573 7420 7075 7420 6475 6d6d  So just put dumm
+00018130: 7920 706f 7274 2031 0a20 2020 2020 2020  y port 1.       
+00018140: 2020 2020 2070 6163 6b65 7420 3d20 7061       packet = pa
+00018150: 636b 6574 5b73 656e 743a 5d0a 2020 2020  cket[sent:].    
+00018160: 2020 2020 6465 6c61 7920 3d20 7265 6365      delay = rece
+00018170: 6976 6528 6d79 5f73 6f63 6b65 742c 2073  ive(my_socket, s
+00018180: 697a 652c 2054 494d 4528 292e 5469 6d65  ize, TIME().Time
+00018190: 2829 2c20 7469 6d65 6f75 7429 0a20 2020  (), timeout).   
+000181a0: 2020 2020 206d 795f 736f 636b 6574 2e63       my_socket.c
+000181b0: 6c6f 7365 2829 0a20 2020 2020 2020 2069  lose().        i
+000181c0: 6620 6465 6c61 793a 0a20 2020 2020 2020  f delay:.       
+000181d0: 2020 2020 2072 6574 7572 6e20 6465 6c61       return dela
+000181e0: 792c 7369 7a65 0a0a 2020 2020 6465 6620  y,size..    def 
+000181f0: 646f 5f70 696e 6728 6970 2c74 696d 656f  do_ping(ip,timeo
+00018200: 7574 3d31 2c73 697a 653d 3634 2c63 6f75  ut=1,size=64,cou
+00018210: 6e74 3d4e 6f6e 652c 696e 7465 7276 616c  nt=None,interval
+00018220: 3d30 2e37 2c6c 6f67 5f66 6f72 6d61 743d  =0.7,log_format=
+00018230: 2770 696e 6727 2c63 616e 6365 6c5f 6675  'ping',cancel_fu
+00018240: 6e63 3d46 616c 7365 293a 0a20 2020 2020  nc=False):.     
+00018250: 2020 206f 6b3d 310a 2020 2020 2020 2020     ok=1.        
+00018260: 693d 310a 2020 2020 2020 2020 7069 6e67  i=1.        ping
+00018270: 5f63 6d64 3d66 696e 645f 6578 6563 7574  _cmd=find_execut
+00018280: 6162 6c65 2827 7069 6e67 2729 0a20 2020  able('ping').   
+00018290: 2020 2020 2077 6869 6c65 2054 7275 653a       while True:
+000182a0: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+000182b0: 4973 4361 6e63 656c 2863 616e 6365 6c5f  IsCancel(cancel_
+000182c0: 6675 6e63 293a 0a20 2020 2020 2020 2020  func):.         
+000182d0: 2020 2020 2020 2072 6574 7572 6e20 2d31         return -1
+000182e0: 2c27 6361 6e63 656c 6564 270a 2020 2020  ,'canceled'.    
+000182f0: 2020 2020 2020 2020 6966 2070 696e 675f          if ping_
+00018300: 636d 643a 0a20 2020 2020 2020 2020 2020  cmd:.           
+00018310: 2020 2020 2070 696e 675f 733d 7369 7a65       ping_s=size
+00018320: 2d38 2069 6620 7369 7a65 203e 3d20 3820  -8 if size >= 8 
+00018330: 656c 7365 2030 0a20 2020 2020 2020 2020  else 0.         
+00018340: 2020 2020 2020 2072 633d 7273 6865 6c6c         rc=rshell
+00018350: 2822 7069 6e67 202d 7320 7b7d 202d 6320  ("ping -s {} -c 
+00018360: 3120 7b7d 222e 666f 726d 6174 2870 696e  1 {}".format(pin
+00018370: 675f 732c 686f 7374 2929 0a20 2020 2020  g_s,host)).     
+00018380: 2020 2020 2020 2020 2020 2064 656c 6179             delay
+00018390: 3d5b 5d0a 2020 2020 2020 2020 2020 2020  =[].            
+000183a0: 2020 2020 6966 2072 635b 305d 203d 3d20      if rc[0] == 
+000183b0: 303a 0a20 2020 2020 2020 2020 2020 2020  0:.             
+000183c0: 2020 2020 2020 2064 656c 6179 3d5b 5d0a         delay=[].
+000183d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000183e0: 2020 2020 7474 3d72 635b 315d 2e73 706c      tt=rc[1].spl
+000183f0: 6974 2827 5c6e 2729 5b31 5d2e 7370 6c69  it('\n')[1].spli
+00018400: 7428 290a 2020 2020 2020 2020 2020 2020  t().            
+00018410: 2020 2020 2020 2020 6465 6c61 793d 5b66          delay=[f
+00018420: 6c6f 6174 2874 745b 365d 2e73 706c 6974  loat(tt[6].split
+00018430: 2827 3d27 295b 315d 292f 3130 3030 2c74  ('=')[1])/1000,t
+00018440: 745b 305d 5d0a 2020 2020 2020 2020 2020  t[0]].          
+00018450: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
+00018460: 2020 2020 2020 2064 656c 6179 3d70 696e         delay=pin
+00018470: 6769 6e67 2869 702c 7469 6d65 6f75 742c  ging(ip,timeout,
+00018480: 7369 7a65 290a 2020 2020 2020 2020 2020  size).          
+00018490: 2020 6966 2064 656c 6179 3a0a 2020 2020    if delay:.    
+000184a0: 2020 2020 2020 2020 2020 2020 6f6b 3d30              ok=0
+000184b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000184c0: 2069 6620 6c6f 675f 666f 726d 6174 203d   if log_format =
+000184d0: 3d20 272e 273a 0a20 2020 2020 2020 2020  = '.':.         
+000184e0: 2020 2020 2020 2020 2020 2053 7464 4f75             StdOu
+000184f0: 7428 272e 2729 0a20 2020 2020 2020 2020  t('.').         
+00018500: 2020 2020 2020 2065 6c69 6620 6c6f 675f         elif log_
+00018510: 666f 726d 6174 203d 3d20 2770 696e 6727  format == 'ping'
+00018520: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00018530: 2020 2020 2020 5374 644f 7574 2827 7b7d        StdOut('{}
+00018540: 2062 7974 6573 2066 726f 6d20 7b7d 3a20   bytes from {}: 
+00018550: 6963 6d70 5f73 6571 3d7b 7d20 7474 6c3d  icmp_seq={} ttl=
+00018560: 7b7d 2074 696d 653d 7b7d 206d 735c 6e27  {} time={} ms\n'
+00018570: 2e66 6f72 6d61 7428 6465 6c61 795b 315d  .format(delay[1]
+00018580: 2c69 702c 692c 7369 7a65 2c72 6f75 6e64  ,ip,i,size,round
+00018590: 2864 656c 6179 5b30 5d2a 3130 3030 2e30  (delay[0]*1000.0
+000185a0: 2c34 2929 290a 2020 2020 2020 2020 2020  ,4))).          
+000185b0: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
+000185c0: 2020 2020 2020 2020 6f6b 3d31 0a20 2020          ok=1.   
+000185d0: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+000185e0: 6c6f 675f 666f 726d 6174 203d 3d20 272e  log_format == '.
+000185f0: 273a 0a20 2020 2020 2020 2020 2020 2020  ':.             
+00018600: 2020 2020 2020 2053 7464 4f75 7428 2778         StdOut('x
+00018610: 2729 0a20 2020 2020 2020 2020 2020 2020  ').             
+00018620: 2020 2065 6c69 6620 6c6f 675f 666f 726d     elif log_form
+00018630: 6174 203d 3d20 2770 696e 6727 3a0a 2020  at == 'ping':.  
+00018640: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018650: 2020 5374 644f 7574 2827 7b7d 2069 636d    StdOut('{} icm
+00018660: 705f 7365 713d 7b7d 2074 696d 656f 7574  p_seq={} timeout
+00018670: 2028 7b7d 2073 6563 6f6e 6429 5c6e 272e   ({} second)\n'.
+00018680: 666f 726d 6174 2869 702c 692c 7469 6d65  format(ip,i,time
+00018690: 6f75 7429 290a 2020 2020 2020 2020 2020  out)).          
+000186a0: 2020 6966 2063 6f75 6e74 3a0a 2020 2020    if count:.    
+000186b0: 2020 2020 2020 2020 2020 2020 636f 756e              coun
+000186c0: 742d 3d31 0a20 2020 2020 2020 2020 2020  t-=1.           
+000186d0: 2020 2020 2069 6620 636f 756e 7420 3c20       if count < 
+000186e0: 313a 0a20 2020 2020 2020 2020 2020 2020  1:.             
+000186f0: 2020 2020 2020 2072 6574 7572 6e20 6f6b         return ok
+00018700: 2c27 7b7d 2069 7320 616c 6976 6527 2e66  ,'{} is alive'.f
+00018710: 6f72 6d61 7428 6970 290a 2020 2020 2020  ormat(ip).      
+00018720: 2020 2020 2020 692b 3d31 0a20 2020 2020        i+=1.     
+00018730: 2020 2020 2020 2074 696d 652e 736c 6565         time.slee
+00018740: 7028 696e 7465 7276 616c 290a 0a20 2020  p(interval)..   
+00018750: 2069 6620 6c6f 675f 666f 726d 6174 3d3d   if log_format==
+00018760: 2770 696e 6727 3a0a 2020 2020 2020 2020  'ping':.        
+00018770: 6966 206e 6f74 2063 6f75 6e74 3a20 636f  if not count: co
+00018780: 756e 743d 310a 2020 2020 2020 2020 646f  unt=1.        do
+00018790: 5f70 696e 6728 686f 7374 2c74 696d 656f  _ping(host,timeo
+000187a0: 7574 3d74 696d 656f 7574 2c73 697a 653d  ut=timeout,size=
+000187b0: 3634 2c63 6f75 6e74 3d63 6f75 6e74 2c6c  64,count=count,l
+000187c0: 6f67 5f66 6f72 6d61 743d 2770 696e 6727  og_format='ping'
+000187d0: 2c63 616e 6365 6c5f 6675 6e63 3d63 616e  ,cancel_func=can
+000187e0: 6365 6c5f 6675 6e63 290a 2020 2020 656c  cel_func).    el
+000187f0: 7365 3a0a 2020 2020 2020 2020 6966 2061  se:.        if a
+00018800: 6c69 7665 5f70 6f72 743a 0a20 2020 2020  live_port:.     
+00018810: 2020 2020 2020 2072 6574 7572 6e20 5472         return Tr
+00018820: 7565 2069 6620 4970 5634 2868 6f73 742c  ue if IpV4(host,
+00018830: 706f 7274 3d61 6c69 7665 5f70 6f72 7429  port=alive_port)
+00018840: 2065 6c73 6520 4661 6c73 650a 2020 2020   else False.    
+00018850: 2020 2020 5469 6d65 3d54 494d 4528 290a      Time=TIME().
+00018860: 2020 2020 2020 2020 696e 6974 5f73 6563          init_sec
+00018870: 3d30 0a20 2020 2020 2020 2069 6e66 696e  =0.        infin
+00018880: 6974 3d46 616c 7365 0a20 2020 2020 2020  it=False.       
+00018890: 2069 6620 6e6f 7420 636f 756e 7420 616e   if not count an
+000188a0: 6420 6e6f 7420 7469 6d65 6f75 743a 0a20  d not timeout:. 
+000188b0: 2020 2020 2020 2020 2020 2063 6f75 6e74             count
+000188c0: 3d31 0a20 2020 2020 2020 2020 2020 2069  =1.            i
+000188d0: 6e66 696e 6974 3d54 7275 650a 2020 2020  nfinit=True.    
+000188e0: 2020 2020 6966 206e 6f74 2069 6e66 696e      if not infin
+000188f0: 6974 2061 6e64 206e 6f74 2063 6f75 6e74  it and not count
+00018900: 3a0a 2020 2020 2020 2020 2020 2020 696e  :.            in
+00018910: 6974 5f73 6563 3d54 696d 652e 496e 6974  it_sec=Time.Init
+00018920: 2829 0a20 2020 2020 2020 2020 2020 2069  ().            i
+00018930: 6620 6b65 6570 5f67 6f6f 6420 616e 6420  f keep_good and 
+00018940: 6b65 6570 5f67 6f6f 6420 3e20 7469 6d65  keep_good > time
+00018950: 6f75 743a 0a20 2020 2020 2020 2020 2020  out:.           
+00018960: 2020 2020 2074 696d 656f 7574 3d6b 6565       timeout=kee
+00018970: 705f 676f 6f64 202b 2074 696d 656f 7574  p_good + timeout
+00018980: 0a20 2020 2020 2020 2020 2020 2063 6f75  .            cou
+00018990: 6e74 3d74 696d 656f 7574 0a20 2020 2020  nt=timeout.     
+000189a0: 2020 2020 2020 206f 636f 756e 743d 7469         ocount=ti
+000189b0: 6d65 6f75 740a 2020 2020 2020 2020 6368  meout.        ch
+000189c0: 6b5f 7365 633d 5469 6d65 2e49 6e69 7428  k_sec=Time.Init(
+000189d0: 290a 2020 2020 2020 2020 6c6f 675f 7479  ).        log_ty
+000189e0: 7065 3d74 7970 6528 6c6f 6729 2e5f 5f6e  pe=type(log).__n
+000189f0: 616d 655f 5f0a 2020 2020 2020 2020 666f  ame__.        fo
+00018a00: 756e 645f 6c6f 7374 3d46 616c 7365 0a20  und_lost=False. 
+00018a10: 2020 2020 2020 2067 6f6f 643d 4661 6c73         good=Fals
+00018a20: 650a 2020 2020 2020 2020 7768 696c 6520  e.        while 
+00018a30: 636f 756e 7420 3e20 303a 0a20 2020 2020  count > 0:.     
+00018a40: 2020 2020 2020 6966 2049 7343 616e 6365        if IsCance
+00018a50: 6c28 6361 6e63 656c 5f66 756e 6329 206f  l(cancel_func) o
+00018a60: 7220 4973 4361 6e63 656c 2873 746f 705f  r IsCancel(stop_
+00018a70: 6675 6e63 293a 0a20 2020 2020 2020 2020  func):.         
+00018a80: 2020 2020 2020 6c6f 6728 2720 2d20 4361        log(' - Ca
+00018a90: 6e63 656c 6564 2f53 746f 7070 6564 2070  nceled/Stopped p
+00018aa0: 696e 6727 290a 2020 2020 2020 2020 2020  ing').          
+00018ab0: 2020 2020 2072 6574 7572 6e20 4661 6c73       return Fals
+00018ac0: 650a 2020 2020 2020 2020 2020 2072 633d  e.           rc=
+00018ad0: 646f 5f70 696e 6728 686f 7374 2c74 696d  do_ping(host,tim
+00018ae0: 656f 7574 3d31 2c73 697a 653d 3634 2c63  eout=1,size=64,c
+00018af0: 6f75 6e74 3d31 2c6c 6f67 5f66 6f72 6d61  ount=1,log_forma
+00018b00: 743d 4e6f 6e65 290a 2020 2020 2020 2020  t=None).        
+00018b10: 2020 2069 6620 7263 5b30 5d20 3d3d 2030     if rc[0] == 0
+00018b20: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00018b30: 676f 6f64 3d54 7275 650a 2020 2020 2020  good=True.      
+00018b40: 2020 2020 2020 2020 6966 206b 6565 705f          if keep_
+00018b50: 676f 6f64 3a0a 2020 2020 2020 2020 2020  good:.          
+00018b60: 2020 2020 2020 2020 6966 2067 6f6f 6420          if good 
+00018b70: 616e 6420 6b65 6570 5f67 6f6f 6420 616e  and keep_good an
+00018b80: 6420 5449 4d45 2829 2e4e 6f77 2869 6e74  d TIME().Now(int
+00018b90: 2920 2d20 6368 6b5f 7365 6320 3e3d 206b  ) - chk_sec >= k
+00018ba0: 6565 705f 676f 6f64 3a0a 2020 2020 2020  eep_good:.      
+00018bb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018bc0: 7265 7475 726e 2054 7275 650a 2020 2020  return True.    
+00018bd0: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
+00018be0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018bf0: 2020 7265 7475 726e 2054 7275 650a 2020    return True.  
+00018c00: 2020 2020 2020 2020 2020 2020 6966 206c              if l
+00018c10: 6f67 5f74 7970 6520 3d3d 2027 6675 6e63  og_type == 'func
+00018c20: 7469 6f6e 273a 0a20 2020 2020 2020 2020  tion':.         
+00018c30: 2020 2020 2020 2020 206c 6f67 2827 2e27           log('.'
+00018c40: 2c64 6972 6563 743d 5472 7565 2c6c 6f67  ,direct=True,log
+00018c50: 5f6c 6576 656c 3d31 290a 2020 2020 2020  _level=1).      
+00018c60: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
+00018c70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018c80: 5374 644f 7574 2827 2e27 290a 2020 2020  StdOut('.').    
+00018c90: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
+00018ca0: 2020 2020 2020 2020 2020 2067 6f6f 643d             good=
+00018cb0: 4661 6c73 650a 2020 2020 2020 2020 2020  False.          
+00018cc0: 2020 2020 6368 6b5f 7365 633d 5449 4d45      chk_sec=TIME
+00018cd0: 2829 2e4e 6f77 2869 6e74 290a 2020 2020  ().Now(int).    
+00018ce0: 2020 2020 2020 2020 2020 6966 206c 6f67            if log
+00018cf0: 5f74 7970 6520 3d3d 2027 6675 6e63 7469  _type == 'functi
+00018d00: 6f6e 273a 0a20 2020 2020 2020 2020 2020  on':.           
+00018d10: 2020 2020 2020 206c 6f67 2827 7827 2c64         log('x',d
+00018d20: 6972 6563 743d 5472 7565 2c6c 6f67 5f6c  irect=True,log_l
+00018d30: 6576 656c 3d31 290a 2020 2020 2020 2020  evel=1).        
+00018d40: 2020 2020 2020 656c 6966 206c 6f67 5f66        elif log_f
+00018d50: 6f72 6d61 7420 3d3d 2027 2e27 3a0a 2020  ormat == '.':.  
+00018d60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018d70: 5374 644f 7574 2827 7827 290a 2020 2020  StdOut('x').    
+00018d80: 2020 2020 2020 2069 6620 696e 6974 5f73         if init_s
+00018d90: 6563 3a0a 2020 2020 2020 2020 2020 2020  ec:.            
+00018da0: 2020 2063 6f75 6e74 3d6f 636f 756e 742d     count=ocount-
+00018db0: 2854 494d 4528 292e 4e6f 7728 696e 7429  (TIME().Now(int)
+00018dc0: 2d69 6e69 745f 7365 6329 0a20 2020 2020  -init_sec).     
+00018dd0: 2020 2020 2020 656c 6966 206e 6f74 2069        elif not i
+00018de0: 6e66 696e 6974 3a0a 2020 2020 2020 2020  nfinit:.        
+00018df0: 2020 2020 2020 2063 6f75 6e74 2d3d 310a         count-=1.
+00018e00: 2020 2020 2020 2020 2020 2054 494d 4528             TIME(
+00018e10: 292e 536c 6565 7028 696e 7465 7276 616c  ).Sleep(interval
+00018e20: 290a 2020 2020 2020 2020 7265 7475 726e  ).        return
+00018e30: 2067 6f6f 640a 0a63 6c61 7373 2057 4542   good..class WEB
+00018e40: 3a0a 2020 2020 2727 270a 2020 2020 4765  :.    '''.    Ge
+00018e50: 7449 503a 2067 6574 2073 6572 7665 7220  tIP: get server 
+00018e60: 6f72 2063 6c69 656e 7420 4950 0a20 2020  or client IP.   
+00018e70: 2052 6571 7565 7374 3a20 7265 7175 6573   Request: reques
+00018e80: 7428 290a 2020 2020 7374 7232 7572 6c3a  t().    str2url:
+00018e90: 2063 6f6e 7665 7274 2073 7472 696e 6720   convert string 
+00018ea0: 746f 2055 524c 2066 6f72 6d61 740a 2020  to URL format.  
+00018eb0: 2020 666f 726d 3264 6963 743a 2063 6f6e    form2dict: con
+00018ec0: 7665 7274 2066 6f72 6d20 6461 7461 2074  vert form data t
+00018ed0: 6f20 6469 6374 696f 6e61 7279 2066 6f72  o dictionary for
+00018ee0: 6d61 740a 2020 2020 2727 270a 2020 2020  mat.    '''.    
+00018ef0: 6465 6620 5f5f 696e 6974 5f5f 2873 656c  def __init__(sel
+00018f00: 662c 7265 7175 6573 743d 4e6f 6e65 293a  f,request=None):
+00018f10: 0a20 2020 2020 2020 2049 6d70 6f72 7428  .        Import(
+00018f20: 2769 6d70 6f72 7420 7265 7175 6573 7473  'import requests
+00018f30: 2729 0a20 2020 2020 2020 2069 6620 7265  ').        if re
+00018f40: 7175 6573 743a 0a20 2020 2020 2020 2020  quest:.         
+00018f50: 2020 2073 656c 662e 7265 7175 6573 7473     self.requests
+00018f60: 3d72 6571 7565 7374 0a20 2020 2020 2020  =request.       
+00018f70: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
+00018f80: 2020 2073 656c 662e 7265 7175 6573 7473     self.requests
+00018f90: 3d72 6571 7565 7374 730a 0a20 2020 2064  =requests..    d
+00018fa0: 6566 2053 6573 7369 6f6e 2873 656c 6629  ef Session(self)
+00018fb0: 3a0a 2020 2020 2020 2020 7265 7475 726e  :.        return
+00018fc0: 2073 656c 662e 7265 7175 6573 7473 2e73   self.requests.s
+00018fd0: 6573 7369 6f6e 2e5f 6765 745f 6f72 5f63  ession._get_or_c
+00018fe0: 7265 6174 655f 7365 7373 696f 6e5f 6b65  reate_session_ke
+00018ff0: 7928 290a 0a20 2020 2064 6566 2047 6574  y()..    def Get
+00019000: 4950 2873 656c 662c 6d6f 6465 3d27 7365  IP(self,mode='se
+00019010: 7276 6572 2729 3a0a 2020 2020 2020 2020  rver'):.        
+00019020: 2727 2720 0a20 2020 2020 2020 206d 6f64  ''' .        mod
+00019030: 653a 0a20 2020 2020 2020 2020 2073 6572  e:.          ser
+00019040: 7665 7220 3a20 6765 7420 7365 7276 6572  ver : get server
+00019050: 2049 5020 2864 6566 6175 6c74 290a 2020   IP (default).  
+00019060: 2020 2020 2020 2020 636c 6965 6e74 203a          client :
+00019070: 2067 6574 2063 6c69 656e 7420 4950 0a20   get client IP. 
+00019080: 2020 2020 2020 2027 2727 0a20 2020 2020         '''.     
+00019090: 2020 2069 6620 6d6f 6465 203d 3d20 2773     if mode == 's
+000190a0: 6572 7665 7227 3a0a 2020 2020 2020 2020  erver':.        
+000190b0: 2020 2020 7265 7475 726e 2073 656c 662e      return self.
+000190c0: 7265 7175 6573 7473 2e67 6574 5f68 6f73  requests.get_hos
+000190d0: 7428 292e 7370 6c69 7428 273a 2729 0a20  t().split(':'). 
+000190e0: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
+000190f0: 2020 2020 2020 2020 2078 5f66 6f72 7761           x_forwa
+00019100: 7264 6564 5f66 6f72 203d 2073 656c 662e  rded_for = self.
+00019110: 7265 7175 6573 7473 2e4d 4554 412e 6765  requests.META.ge
+00019120: 7428 2748 5454 505f 585f 464f 5257 4152  t('HTTP_X_FORWAR
+00019130: 4445 445f 464f 5227 290a 2020 2020 2020  DED_FOR').      
+00019140: 2020 2020 2020 6966 2078 5f66 6f72 7761        if x_forwa
+00019150: 7264 6564 5f66 6f72 3a0a 2020 2020 2020  rded_for:.      
+00019160: 2020 2020 2020 2020 2020 7265 7475 726e            return
+00019170: 2078 5f66 6f72 7761 7264 6564 5f66 6f72   x_forwarded_for
+00019180: 2e73 706c 6974 2827 2c27 295b 305d 0a20  .split(',')[0]. 
+00019190: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
+000191a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000191b0: 2072 6574 7572 6e20 7365 6c66 2e72 6571   return self.req
+000191c0: 7565 7374 732e 4d45 5441 2e67 6574 2827  uests.META.get('
+000191d0: 5245 4d4f 5445 5f41 4444 5227 290a 0a20  REMOTE_ADDR').. 
+000191e0: 2020 2064 6566 204d 6574 686f 6428 7365     def Method(se
+000191f0: 6c66 2c6d 6574 686f 645f 6e61 6d65 3d4e  lf,method_name=N
+00019200: 6f6e 652c 6d6f 6465 3d27 6c6f 7765 7227  one,mode='lower'
+00019210: 293a 0a20 2020 2020 2020 206d 6574 686f  ):.        metho
+00019220: 645f 6e3d 7365 6c66 2e72 6571 7565 7374  d_n=self.request
+00019230: 732e 6d65 7468 6f64 0a20 2020 2020 2020  s.method.       
+00019240: 2069 6620 6d65 7468 6f64 5f6e 616d 653a   if method_name:
+00019250: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
+00019260: 7572 6e20 6d65 7468 6f64 5f6e 616d 652e  urn method_name.
+00019270: 6c6f 7765 7228 2920 3d3d 206d 6574 686f  lower() == metho
+00019280: 645f 6e2e 6c6f 7765 7228 290a 2020 2020  d_n.lower().    
+00019290: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+000192a0: 2020 2020 2020 6966 206d 6f64 6520 3d3d        if mode ==
+000192b0: 2027 7570 7065 7227 3a0a 2020 2020 2020   'upper':.      
+000192c0: 2020 2020 2020 2020 2020 7265 7475 726e            return
+000192d0: 206d 6574 686f 645f 6e2e 7570 7065 7228   method_n.upper(
+000192e0: 290a 2020 2020 2020 2020 2020 2020 656c  ).            el
+000192f0: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
+00019300: 2020 2020 7265 7475 726e 206d 6574 686f      return metho
+00019310: 645f 6e2e 6c6f 7765 7228 290a 0a20 2020  d_n.lower()..   
+00019320: 2064 6566 2052 6571 7565 7374 2873 656c   def Request(sel
+00019330: 662c 686f 7374 5f75 726c 2c2a 2a6f 7074  f,host_url,**opt
+00019340: 7329 3a0a 2020 2020 2020 2020 2727 270a  s):.        '''.
+00019350: 2020 2020 2020 2020 7573 6572 2026 2070          user & p
+00019360: 6173 7377 6f72 643a 2073 7472 696e 6720  assword: string 
+00019370: 666f 726d 6174 0a20 2020 2020 2020 2061  format.        a
+00019380: 7574 683a 2074 7570 6c65 2066 6f72 6d61  uth: tuple forma
+00019390: 740a 2020 2020 2020 2020 6461 7461 3a20  t.        data: 
+000193a0: 6469 6374 696f 6e61 7279 2066 6f72 6d61  dictionary forma
+000193b0: 740a 2020 2020 2020 2020 6a73 6f6e 3a20  t.        json: 
+000193c0: 6469 6374 696f 6e61 7279 202f 204a 534f  dictionary / JSO
+000193d0: 4e20 666f 726d 6174 0a20 2020 2020 2020  N format.       
+000193e0: 2066 696c 6573 3a20 6469 6374 696f 6e61   files: dictiona
+000193f0: 7279 2066 6f72 6d61 740a 2020 2020 2020  ry format.      
+00019400: 2020 2020 2065 7829 2066 696c 6573 203d       ex) files =
+00019410: 207b 2027 3c66 696c 6520 7061 7261 6d65   { '<file parame
+00019420: 7465 7220 6e61 6d65 3e27 3a20 283c 6669  ter name>': (<fi
+00019430: 6c65 6e61 6d65 3e2c 206f 7065 6e28 3c66  lename>, open(<f
+00019440: 696c 656e 616d 653e 2c27 7262 2729 297d  ilename>,'rb'))}
+00019450: 0a20 2020 2020 2020 2068 6561 6465 7273  .        headers
+00019460: 3a20 7374 7269 6e67 206f 7220 6469 6374  : string or dict
+00019470: 696f 6e61 7279 2066 6f72 6d61 740a 2020  ionary format.  
+00019480: 2020 2020 2020 2020 202d 2073 7472 696e           - strin
+00019490: 6720 6578 616d 706c 650a 2020 2020 2020  g example.      
+000194a0: 2020 2020 2020 2068 6561 6465 7273 3d27         headers='
+000194b0: 6a73 6f6e 270a 2020 2020 2020 2020 2020  json'.          
+000194c0: 2020 2072 6571 7569 7265 6420 6461 7461     required data
+000194d0: 206f 7220 6a73 6f6e 200a 2020 2020 2020   or json .      
+000194e0: 2020 2020 202d 2064 6963 7469 6f6e 6172       - dictionar
+000194f0: 7920 6578 616d 706c 650a 2020 2020 2020  y example.      
+00019500: 2020 2020 2020 2068 6561 6465 7273 203d         headers =
+00019510: 207b 2022 436f 6e74 656e 742d 5479 7065   { "Content-Type
+00019520: 223a 2022 6170 706c 6963 6174 696f 6e2f  ": "application/
+00019530: 6a73 6f6e 227d 0a20 2020 2020 2020 2064  json"}.        d
+00019540: 6267 203a 2054 7275 653a 2073 686f 7720  bg : True: show 
+00019550: 6465 6275 6769 6e67 206c 6f67 2864 6566  debuging log(def
+00019560: 6175 6c74 292c 2046 616c 7365 2069 676e  ault), False ign
+00019570: 6f72 6520 6465 6275 6767 696e 6720 6c6f  ore debugging lo
+00019580: 670a 2020 2020 2020 2020 7069 6e67 3a20  g.        ping: 
+00019590: 5472 7565 3a20 4368 6563 6b20 6465 7374  True: Check dest
+000195a0: 2049 5020 7769 7468 2070 696e 672c 2046   IP with ping, F
+000195b0: 616c 7365 3a20 6e6f 7420 6368 6563 6b20  alse: not check 
+000195c0: 6465 7374 2049 5020 2864 6566 6175 6c74  dest IP (default
+000195d0: 290a 2020 2020 2020 2020 6d61 785f 7472  ).        max_tr
+000195e0: 793a 2064 6566 6175 6c74 2033 2c20 7265  y: default 3, re
+000195f0: 7472 7920 6d61 7820 6e75 6d62 6572 2077  try max number w
+00019600: 6865 6e20 6661 696c 6564 0a20 2020 2020  hen failed.     
+00019610: 2020 206d 6f64 653a 2064 6566 6175 6c74     mode: default
+00019620: 2067 6574 2c20 2867 6574 2c70 6f73 742c   get, (get,post,
+00019630: 7061 7463 6829 0a20 2020 2020 2020 2069  patch).        i
+00019640: 703a 2064 6573 7420 4950 0a20 2020 2020  p: dest IP.     
+00019650: 2020 2070 6f72 743a 2064 6566 6175 6c74     port: default
+00019660: 2038 3020 6f72 2034 3433 2c20 6172 7263   80 or 443, arrc
+00019670: 6f72 6469 6e67 2074 6f20 6874 7470 206f  ording to http o
+00019680: 7220 6874 7470 732c 2069 6620 796f 7520  r https, if you 
+00019690: 7761 6e74 2073 7065 6369 616c 2070 6f72  want special por
+000196a0: 7420 7468 656e 2074 7970 650a 2020 2020  t then type.    
+000196b0: 2020 2020 626d 633a 2064 6566 6175 6c74      bmc: default
+000196c0: 2046 616c 7365 2c20 5472 7565 2074 6865   False, True the
+000196d0: 6e20 6175 746f 6d61 7469 6361 6c6c 2063  n automaticall c
+000196e0: 6865 636b 2042 4d43 2070 6f72 740a 2020  heck BMC port.  
+000196f0: 2020 2020 2020 7469 6d65 6f75 743a 2072        timeout: r
+00019700: 6571 7565 7374 2074 696d 656f 7574 2028  equest timeout (
+00019710: 7365 636f 6e64 7329 2c20 6465 6661 756c  seconds), defaul
+00019720: 7420 4e6f 6e65 0a20 2020 2020 2020 2027  t None.        '
+00019730: 2727 0a20 2020 2020 2020 2023 2072 656d  ''.        # rem
+00019740: 6f76 6520 5353 4c20 7761 7269 6e67 2065  ove SSL waring e
+00019750: 7272 6f72 206d 6573 7361 6765 2028 7465  rror message (te
+00019760: 7374 290a 2020 2020 2020 2020 7365 6c66  st).        self
+00019770: 2e72 6571 7565 7374 732e 7061 636b 6167  .requests.packag
+00019780: 6573 2e75 726c 6c69 6233 2e64 6973 6162  es.urllib3.disab
+00019790: 6c65 5f77 6172 6e69 6e67 7328 290a 0a20  le_warnings().. 
+000197a0: 2020 2020 2020 2069 703d 6f70 7473 2e67         ip=opts.g
+000197b0: 6574 2827 6970 272c 4e6f 6e65 290a 2020  et('ip',None).  
+000197c0: 2020 2020 2020 706f 7274 3d6f 7074 732e        port=opts.
+000197d0: 6765 7428 2770 6f72 7427 2c4e 6f6e 6529  get('port',None)
+000197e0: 0a20 2020 2020 2020 2062 6d63 3d6f 7074  .        bmc=opt
+000197f0: 732e 6765 7428 2762 6d63 272c 4661 6c73  s.get('bmc',Fals
+00019800: 6529 0a20 2020 2020 2020 206d 6f64 653d  e).        mode=
+00019810: 6f70 7473 2e67 6574 2827 6d6f 6465 272c  opts.get('mode',
+00019820: 6f70 7473 2e67 6574 2827 6d65 7468 6f64  opts.get('method
+00019830: 272c 2767 6574 2729 290a 2020 2020 2020  ','get')).      
+00019840: 2020 6d61 785f 7472 793d 6f70 7473 2e67    max_try=opts.g
+00019850: 6574 2827 6d61 785f 7472 7927 2c33 2920  et('max_try',3) 
+00019860: 2320 5265 7472 7920 6d61 7820 6e75 6d62  # Retry max numb
+00019870: 6572 0a20 2020 2020 2020 2061 7574 683d  er.        auth=
+00019880: 6f70 7473 2e67 6574 2827 6175 7468 272c  opts.get('auth',
+00019890: 4e6f 6e65 290a 2020 2020 2020 2020 7573  None).        us
+000198a0: 6572 3d6f 7074 732e 6765 7428 2775 7365  er=opts.get('use
+000198b0: 7227 2c4e 6f6e 6529 0a20 2020 2020 2020  r',None).       
+000198c0: 2070 6173 7377 643d 6f70 7473 2e67 6574   passwd=opts.get
+000198d0: 2827 7061 7373 7764 272c 4e6f 6e65 290a  ('passwd',None).
+000198e0: 2020 2020 2020 2020 6461 7461 3d6f 7074          data=opt
+000198f0: 732e 6765 7428 2764 6174 6127 2c4e 6f6e  s.get('data',Non
+00019900: 6529 2023 2064 6963 7469 6f6e 6172 7920  e) # dictionary 
+00019910: 666f 726d 6174 0a20 2020 2020 2020 206a  format.        j
+00019920: 736f 6e5f 6461 7461 3d6f 7074 732e 6765  son_data=opts.ge
+00019930: 7428 276a 736f 6e27 2c4e 6f6e 6529 2023  t('json',None) #
+00019940: 2064 6963 7469 6f6e 6172 7920 666f 726d   dictionary form
+00019950: 6174 0a20 2020 2020 2020 2066 696c 6573  at.        files
+00019960: 3d6f 7074 732e 6765 7428 2766 696c 6573  =opts.get('files
+00019970: 272c 4e6f 6e65 2920 2320 6469 6374 696f  ',None) # dictio
+00019980: 6e61 7279 2066 6f72 6d61 740a 2020 2020  nary format.    
+00019990: 2020 2020 7265 7175 6573 745f 7572 6c3d      request_url=
+000199a0: 6f70 7473 2e67 6574 2827 7265 7175 6573  opts.get('reques
+000199b0: 745f 7572 6c27 2c4e 6f6e 6529 0a20 2020  t_url',None).   
+000199c0: 2020 2020 2064 6267 3d6f 7074 732e 6765       dbg=opts.ge
+000199d0: 7428 2764 6267 272c 5472 7565 2920 2023  t('dbg',True)  #
+000199e0: 2073 686f 7720 6465 6275 6767 696e 6720   show debugging 
+000199f0: 6c6f 670a 2020 2020 2020 2020 7069 6e67  log.        ping
+00019a00: 3d6f 7074 732e 6765 7428 2770 696e 6727  =opts.get('ping'
+00019a10: 2c46 616c 7365 2920 2320 6368 6563 6b20  ,False) # check 
+00019a20: 7069 6e67 2074 6f20 4950 0a20 2020 2020  ping to IP.     
+00019a30: 2020 2074 696d 656f 7574 3d6f 7074 732e     timeout=opts.
+00019a40: 6765 7428 2774 696d 656f 7574 272c 4e6f  get('timeout',No
+00019a50: 6e65 2920 2320 7265 7175 6573 7420 7469  ne) # request ti
+00019a60: 6d65 6f75 740a 2020 2020 2020 2020 7265  meout.        re
+00019a70: 715f 6461 7461 3d7b 7d0a 2020 2020 2020  q_data={}.      
+00019a80: 2020 6368 6b5f 6465 7374 3d4e 6f6e 650a    chk_dest=None.
+00019a90: 2020 2020 2020 2020 6966 2069 7369 6e73          if isins
+00019aa0: 7461 6e63 6528 7469 6d65 6f75 742c 696e  tance(timeout,in
+00019ab0: 7429 3a20 7265 715f 6461 7461 5b27 7469  t): req_data['ti
+00019ac0: 6d65 6f75 7427 5d3d 7469 6d65 6f75 740a  meout']=timeout.
+00019ad0: 2020 2020 2020 2020 6966 206f 7074 732e          if opts.
+00019ae0: 6765 7428 2768 7474 7073 2729 3a20 7265  get('https'): re
+00019af0: 715f 6461 7461 5b27 7665 7269 6679 275d  q_data['verify']
+00019b00: 3d46 616c 7365 0a20 2020 2020 2020 2069  =False.        i
+00019b10: 6620 5479 7065 2861 7574 682c 2774 7570  f Type(auth,'tup
+00019b20: 6c65 272c 6461 7461 3d54 7275 6529 3a0a  le',data=True):.
+00019b30: 2020 2020 2020 2020 2020 2020 7265 715f              req_
+00019b40: 6461 7461 5b27 6175 7468 275d 3d6f 7074  data['auth']=opt
+00019b50: 732e 6765 7428 2761 7574 6827 290a 2020  s.get('auth').  
+00019b60: 2020 2020 2020 656c 6966 2054 7970 6528        elif Type(
+00019b70: 7573 6572 2c27 7374 7227 2c64 6174 613d  user,'str',data=
+00019b80: 5472 7565 2920 616e 6420 5479 7065 2870  True) and Type(p
+00019b90: 6173 7377 642c 2773 7472 272c 6461 7461  asswd,'str',data
+00019ba0: 3d54 7275 6529 3a0a 2020 2020 2020 2020  =True):.        
+00019bb0: 2020 2020 7265 715f 6461 7461 5b27 6175      req_data['au
+00019bc0: 7468 275d 3d28 7573 6572 2c70 6173 7377  th']=(user,passw
+00019bd0: 6429 0a20 2020 2020 2020 2069 6620 5479  d).        if Ty
+00019be0: 7065 2864 6174 612c 2764 6963 7427 2c64  pe(data,'dict',d
+00019bf0: 6174 613d 5472 7565 293a 2072 6571 5f64  ata=True): req_d
+00019c00: 6174 615b 2764 6174 6127 5d3d 6f70 7473  ata['data']=opts
+00019c10: 2e67 6574 2827 6461 7461 2729 0a20 2020  .get('data').   
+00019c20: 2020 2020 2069 6620 5479 7065 286a 736f       if Type(jso
+00019c30: 6e5f 6461 7461 2c27 6469 6374 272c 6461  n_data,'dict',da
+00019c40: 7461 3d54 7275 6529 3a20 7265 715f 6461  ta=True): req_da
+00019c50: 7461 5b27 6a73 6f6e 275d 3d6a 736f 6e5f  ta['json']=json_
+00019c60: 6461 7461 0a20 2020 2020 2020 2020 2020  data.           
+00019c70: 200a 2020 2020 2020 2020 6966 2054 7970   .        if Typ
+00019c80: 6528 6669 6c65 732c 2764 6963 7427 2c64  e(files,'dict',d
+00019c90: 6174 613d 5472 7565 293a 2072 6571 5f64  ata=True): req_d
+00019ca0: 6174 615b 2766 696c 6573 275d 3d6f 7074  ata['files']=opt
+00019cb0: 732e 6765 7428 2766 696c 6573 2729 0a20  s.get('files'). 
+00019cc0: 2020 2020 2020 2068 6561 6465 7273 3d6f         headers=o
+00019cd0: 7074 732e 6765 7428 2768 6561 6465 7273  pts.get('headers
+00019ce0: 2729 2023 2064 6963 7469 6f6e 6172 7920  ') # dictionary 
+00019cf0: 666f 726d 6174 0a20 2020 2020 2020 2069  format.        i
+00019d00: 6620 5479 7065 2868 6561 6465 7273 2c27  f Type(headers,'
+00019d10: 7374 7227 2c64 6174 613d 5472 7565 293a  str',data=True):
+00019d20: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+00019d30: 6865 6164 6572 7320 3d3d 2027 6a73 6f6e  headers == 'json
+00019d40: 273a 0a20 2020 2020 2020 2020 2020 2020  ':.             
+00019d50: 2020 2068 6561 6465 7273 3d7b 2022 436f     headers={ "Co
+00019d60: 6e74 656e 742d 5479 7065 223a 2022 6170  ntent-Type": "ap
+00019d70: 706c 6963 6174 696f 6e2f 6a73 6f6e 227d  plication/json"}
+00019d80: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00019d90: 2069 6620 6461 7461 3a0a 2020 2020 2020   if data:.      
+00019da0: 2020 2020 2020 2020 2020 2020 2020 6461                da
+00019db0: 7461 3d6a 736f 6e2e 6475 6d70 7328 6461  ta=json.dumps(da
+00019dc0: 7461 290a 2020 2020 2020 2020 2020 2020  ta).            
+00019dd0: 2020 2020 2020 2020 7265 715f 6461 7461          req_data
+00019de0: 5b27 6461 7461 275d 3d64 6174 610a 2020  ['data']=data.  
+00019df0: 2020 2020 2020 2020 2020 2020 2020 656c                el
+00019e00: 6966 206a 736f 6e5f 6461 7461 3a0a 2020  if json_data:.  
+00019e10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00019e20: 2020 6461 7461 3d6a 736f 6e2e 6475 6d70    data=json.dump
+00019e30: 7328 6a73 6f6e 5f64 6174 6129 0a20 2020  s(json_data).   
+00019e40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00019e50: 2069 6620 276a 736f 6e27 2069 6e20 7265   if 'json' in re
+00019e60: 715f 6461 7461 3a20 7265 715f 6461 7461  q_data: req_data
+00019e70: 2e70 6f70 2827 6a73 6f6e 2729 0a20 2020  .pop('json').   
+00019e80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00019e90: 2072 6571 5f64 6174 615b 2764 6174 6127   req_data['data'
+00019ea0: 5d3d 6461 7461 0a20 2020 2020 2020 2065  ]=data.        e
+00019eb0: 6c69 6620 5479 7065 2868 6561 6465 7273  lif Type(headers
+00019ec0: 2c27 6469 6374 272c 6461 7461 3d54 7275  ,'dict',data=Tru
+00019ed0: 6529 3a0a 2020 2020 2020 2020 2020 2020  e):.            
+00019ee0: 7265 715f 6461 7461 5b27 6865 6164 6572  req_data['header
+00019ef0: 7327 5d3d 6865 6164 6572 730a 2020 2020  s']=headers.    
+00019f00: 2020 2020 6966 206e 6f74 2049 734e 6f6e      if not IsNon
+00019f10: 6528 6970 293a 0a20 2020 2020 2020 2020  e(ip):.         
+00019f20: 2020 2069 703d 4970 5634 2869 702c 6f75     ip=IpV4(ip,ou
+00019f30: 743d 7374 7229 0a20 2020 2020 2020 2020  t=str).         
+00019f40: 2020 2063 686b 5f64 6573 743d 277b 7d27     chk_dest='{}'
+00019f50: 2e66 6f72 6d61 7428 6970 290a 2020 2020  .format(ip).    
+00019f60: 2020 2020 2020 2020 6966 2072 6571 5f64          if req_d
+00019f70: 6174 612e 6765 7428 2776 6572 6966 7927  ata.get('verify'
+00019f80: 2c54 7275 6529 3a0a 2020 2020 2020 2020  ,True):.        
+00019f90: 2020 2020 2020 2020 686f 7374 5f75 726c          host_url
+00019fa0: 3d27 6874 7470 3a2f 2f7b 7d27 2e66 6f72  ='http://{}'.for
+00019fb0: 6d61 7428 6970 290a 2020 2020 2020 2020  mat(ip).        
+00019fc0: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+00019fd0: 2020 2020 2020 2020 2020 686f 7374 5f75            host_u
+00019fe0: 726c 3d27 6874 7470 733a 2f2f 7b7d 272e  rl='https://{}'.
+00019ff0: 666f 726d 6174 2869 7029 0a20 2020 2020  format(ip).     
+0001a000: 2020 2020 2020 2069 6620 6e6f 7420 4973         if not Is
+0001a010: 4e6f 6e65 2870 6f72 7429 3a20 686f 7374  None(port): host
+0001a020: 5f75 726c 3d27 7b7d 3a7b 7d27 2e66 6f72  _url='{}:{}'.for
+0001a030: 6d61 7428 686f 7374 5f75 726c 2c70 6f72  mat(host_url,por
+0001a040: 7429 0a20 2020 2020 2020 2020 2020 2069  t).            i
+0001a050: 6620 6e6f 7420 4973 4e6f 6e65 2872 6571  f not IsNone(req
+0001a060: 7565 7374 5f75 726c 293a 2068 6f73 745f  uest_url): host_
+0001a070: 7572 6c3d 277b 7d2f 7b7d 272e 666f 726d  url='{}/{}'.form
+0001a080: 6174 2868 6f73 745f 7572 6c2c 7265 7175  at(host_url,requ
+0001a090: 6573 745f 7572 6c29 0a20 2020 2020 2020  est_url).       
+0001a0a0: 2065 6c69 6620 5479 7065 2868 6f73 745f   elif Type(host_
+0001a0b0: 7572 6c2c 2773 7472 272c 6461 7461 3d54  url,'str',data=T
+0001a0c0: 7275 6529 2061 6e64 2068 6f73 745f 7572  rue) and host_ur
+0001a0d0: 6c2e 7374 6172 7473 7769 7468 2827 6874  l.startswith('ht
+0001a0e0: 7470 2729 3a0a 2020 2020 2020 2020 2020  tp'):.          
+0001a0f0: 2020 6368 6b5f 6465 7374 3d72 652e 636f    chk_dest=re.co
+0001a100: 6d70 696c 6528 2728 6874 7470 7c68 7474  mpile('(http|htt
+0001a110: 7073 293a 2f2f 285b 612d 7a41 2d5a 302d  ps)://([a-zA-Z0-
+0001a120: 392e 5d2a 295b 3a2f 5d27 292e 6669 6e64  9.]*)[:/]').find
+0001a130: 616c 6c28 686f 7374 5f75 726c 290a 2020  all(host_url).  
+0001a140: 2020 2020 2020 2020 2020 6966 206c 656e            if len
+0001a150: 2863 686b 5f64 6573 7429 3d3d 303a 0a20  (chk_dest)==0:. 
+0001a160: 2020 2020 2020 2020 2020 2020 2020 2063                 c
+0001a170: 686b 5f64 6573 743d 7265 2e63 6f6d 7069  hk_dest=re.compi
+0001a180: 6c65 2827 2868 7474 707c 6874 7470 7329  le('(http|https)
+0001a190: 3a2f 2f28 5b61 2d7a 412d 5a30 2d39 2e5d  ://([a-zA-Z0-9.]
+0001a1a0: 2a29 2729 2e66 696e 6461 6c6c 2868 6f73  *)').findall(hos
+0001a1b0: 745f 7572 6c29 0a20 2020 2020 2020 2020  t_url).         
+0001a1c0: 2020 2069 6620 6c65 6e28 6368 6b5f 6465     if len(chk_de
+0001a1d0: 7374 293a 0a20 2020 2020 2020 2020 2020  st):.           
+0001a1e0: 2020 2020 2063 686b 5f64 6573 743d 6368       chk_dest=ch
+0001a1f0: 6b5f 6465 7374 5b30 5d5b 315d 0a20 2020  k_dest[0][1].   
+0001a200: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+0001a210: 686f 7374 5f75 726c 2e66 696e 6428 2768  host_url.find('h
+0001a220: 7474 7073 3a2f 2f27 2920 3d3d 2030 3a0a  ttps://') == 0:.
+0001a230: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001a240: 2020 2020 7265 715f 6461 7461 5b27 7665      req_data['ve
+0001a250: 7269 6679 275d 3d46 616c 7365 0a20 2020  rify']=False.   
+0001a260: 2020 2020 2069 6620 4973 4e6f 6e65 2863       if IsNone(c
+0001a270: 686b 5f64 6573 7429 3a0a 2020 2020 2020  hk_dest):.      
+0001a280: 2020 2020 2020 7265 7475 726e 2046 616c        return Fal
+0001a290: 7365 2c27 686f 7374 5f75 726c 206f 7220  se,'host_url or 
+0001a2a0: 6970 206e 6f74 2066 6f75 6e64 270a 2020  ip not found'.  
+0001a2b0: 2020 2020 2020 6966 2062 6d63 3a0a 2020        if bmc:.  
+0001a2c0: 2020 2020 2020 2020 2020 6966 2049 7056            if IpV
+0001a2d0: 3428 6368 6b5f 6465 7374 2c62 6d63 3d54  4(chk_dest,bmc=T
+0001a2e0: 7275 6529 2069 7320 4661 6c73 653a 0a20  rue) is False:. 
+0001a2f0: 2020 2020 2020 2020 2020 2020 2020 2072                 r
+0001a300: 6574 7572 6e20 4661 6c73 652c 2754 6865  eturn False,'The
+0001a310: 2049 5028 7b7d 2920 6973 206e 6f74 2042   IP({}) is not B
+0001a320: 4d43 2049 5027 2e66 6f72 6d61 7428 6368  MC IP'.format(ch
+0001a330: 6b5f 6465 7374 290a 2020 2020 2020 2020  k_dest).        
+0001a340: 6966 2070 696e 6720 616e 6420 6368 6b5f  if ping and chk_
+0001a350: 6465 7374 3a0a 2020 2020 2020 2020 2020  dest:.          
+0001a360: 2020 6966 206e 6f74 2070 696e 6728 6368    if not ping(ch
+0001a370: 6b5f 6465 7374 2c74 696d 656f 7574 5f73  k_dest,timeout_s
+0001a380: 6563 3d33 293a 0a20 2020 2020 2020 2020  ec=3):.         
+0001a390: 2020 2020 2020 2072 6574 7572 6e20 4661         return Fa
+0001a3a0: 6c73 652c 2743 616e 206e 6f74 2061 6363  lse,'Can not acc
+0001a3b0: 6573 7320 746f 2064 6573 7469 6e61 7469  ess to destinati
+0001a3c0: 6f6e 287b 7d29 272e 666f 726d 6174 2863  on({})'.format(c
+0001a3d0: 686b 5f64 6573 7429 0a20 2020 2020 2020  hk_dest).       
+0001a3e0: 2073 7320 3d20 7365 6c66 2e72 6571 7565   ss = self.reque
+0001a3f0: 7374 732e 5365 7373 696f 6e28 290a 2020  sts.Session().  
+0001a400: 2020 2020 2020 666f 7220 6a20 696e 2072        for j in r
+0001a410: 616e 6765 2830 2c6d 6178 5f74 7279 293a  ange(0,max_try):
+0001a420: 0a20 2020 2020 2020 2020 2020 2074 7279  .            try
+0001a430: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+0001a440: 2020 6966 2049 7353 616d 6528 6d6f 6465    if IsSame(mode
+0001a450: 2c27 706f 7374 2729 3a0a 2020 2020 2020  ,'post'):.      
+0001a460: 2020 2020 2020 2020 2020 2020 2020 7220                r 
+0001a470: 3d73 732e 706f 7374 2868 6f73 745f 7572  =ss.post(host_ur
+0001a480: 6c2c 2a2a 7265 715f 6461 7461 290a 2020  l,**req_data).  
+0001a490: 2020 2020 2020 2020 2020 2020 2020 656c                el
+0001a4a0: 6966 2049 7353 616d 6528 6d6f 6465 2c27  if IsSame(mode,'
+0001a4b0: 7061 7463 6827 293a 0a20 2020 2020 2020  patch'):.       
+0001a4c0: 2020 2020 2020 2020 2020 2020 2072 203d               r =
+0001a4d0: 7373 2e70 6174 6368 2868 6f73 745f 7572  ss.patch(host_ur
+0001a4e0: 6c2c 2a2a 7265 715f 6461 7461 290a 2020  l,**req_data).  
+0001a4f0: 2020 2020 2020 2020 2020 2020 2020 656c                el
+0001a500: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
+0001a510: 2020 2020 2020 2020 7220 3d73 732e 6765          r =ss.ge
+0001a520: 7428 686f 7374 5f75 726c 2c2a 2a72 6571  t(host_url,**req
+0001a530: 5f64 6174 6129 0a20 2020 2020 2020 2020  _data).         
+0001a540: 2020 2020 2020 2072 6574 7572 6e20 5472         return Tr
+0001a550: 7565 2c72 0a20 2020 2020 2020 2020 2020  ue,r.           
+0001a560: 2065 7863 6570 743a 0a20 2020 2020 2020   except:.       
+0001a570: 2020 2020 2020 2020 2070 6173 730a 2020           pass.  
+0001a580: 2020 2020 2020 2020 2020 2365 7863 6570            #excep
+0001a590: 7420 7265 7175 6573 7473 2e65 7863 6570  t requests.excep
+0001a5a0: 7469 6f6e 732e 5265 7175 6573 7445 7863  tions.RequestExc
+0001a5b0: 6570 7469 6f6e 2061 7320 653a 0a20 2020  eption as e:.   
+0001a5c0: 2020 2020 2020 2020 2069 6620 6462 673a           if dbg:
+0001a5d0: 2053 7464 4572 7228 2253 6572 7665 7228   StdErr("Server(
+0001a5e0: 7b7d 2920 6861 7320 6e6f 2072 6573 706f  {}) has no respo
+0001a5f0: 6e73 6520 2877 6169 7420 7b7d 2f7b 7d20  nse (wait {}/{} 
+0001a600: 2831 3073 2929 222e 666f 726d 6174 2863  (10s))".format(c
+0001a610: 686b 5f64 6573 742c 6a2c 6d61 785f 7472  hk_dest,j,max_tr
+0001a620: 7929 290a 2020 2020 2020 2020 2020 2020  y)).            
+0001a630: 7469 6d65 2e73 6c65 6570 2831 3029 0a20  time.sleep(10). 
+0001a640: 2020 2020 2020 2072 6574 7572 6e20 4661         return Fa
+0001a650: 6c73 652c 2754 696d 654f 7574 270a 0a20  lse,'TimeOut'.. 
+0001a660: 2020 2064 6566 2073 7472 3275 726c 2873     def str2url(s
+0001a670: 656c 662c 7374 7269 6e67 293a 0a20 2020  elf,string):.   
+0001a680: 2020 2020 2069 6620 4973 4e6f 6e65 2873       if IsNone(s
+0001a690: 7472 696e 6729 3a20 7265 7475 726e 2027  tring): return '
+0001a6a0: 270a 2020 2020 2020 2020 6966 2069 7369  '.        if isi
+0001a6b0: 6e73 7461 6e63 6528 7374 7269 6e67 2c73  nstance(string,s
+0001a6c0: 7472 293a 0a20 2020 2020 2020 2020 2020  tr):.           
+0001a6d0: 2072 6574 7572 6e20 7374 7269 6e67 2e72   return string.r
+0001a6e0: 6570 6c61 6365 2827 2b27 2c27 2532 4227  eplace('+','%2B'
+0001a6f0: 292e 7265 706c 6163 6528 273f 272c 2725  ).replace('?','%
+0001a700: 3346 2729 2e72 6570 6c61 6365 2827 2f27  3F').replace('/'
+0001a710: 2c27 2532 4627 292e 7265 706c 6163 6528  ,'%2F').replace(
+0001a720: 273a 272c 2725 3341 2729 2e72 6570 6c61  ':','%3A').repla
+0001a730: 6365 2827 3d27 2c27 2533 4427 292e 7265  ce('=','%3D').re
+0001a740: 706c 6163 6528 2720 272c 272b 2729 0a20  place(' ','+'). 
+0001a750: 2020 2020 2020 2072 6574 7572 6e20 7374         return st
+0001a760: 7269 6e67 0a0a 2020 2020 6465 6620 666f  ring..    def fo
+0001a770: 726d 3264 6963 7428 7365 6c66 2c73 7263  rm2dict(self,src
+0001a780: 3d4e 6f6e 6529 3a0a 2020 2020 2020 2020  =None):.        
+0001a790: 6966 2049 734e 6f6e 6528 7372 6329 3a20  if IsNone(src): 
+0001a7a0: 7372 633d 7365 6c66 2e72 6571 7565 7374  src=self.request
+0001a7b0: 732e 666f 726d 0a20 2020 2020 2020 2072  s.form.        r
+0001a7c0: 6574 7572 6e20 4469 6374 2873 7263 290a  eturn Dict(src).
+0001a7d0: 0a63 6c61 7373 2054 494d 453a 0a20 2020  .class TIME:.   
+0001a7e0: 2064 6566 205f 5f69 6e69 745f 5f28 7365   def __init__(se
+0001a7f0: 6c66 2c73 7263 3d4e 6f6e 6529 3a0a 2020  lf,src=None):.  
+0001a800: 2020 2020 2020 7365 6c66 2e69 6e69 745f        self.init_
+0001a810: 7365 633d 696e 7428 6461 7465 7469 6d65  sec=int(datetime
+0001a820: 2e6e 6f77 2829 2e73 7472 6674 696d 6528  .now().strftime(
+0001a830: 2725 7327 2929 0a20 2020 2020 2020 2073  '%s')).        s
+0001a840: 656c 662e 7372 633d 7372 630a 0a20 2020  elf.src=src..   
+0001a850: 2064 6566 2052 6573 6574 2873 656c 6629   def Reset(self)
+0001a860: 3a0a 2020 2020 2020 2020 7365 6c66 2e69  :.        self.i
+0001a870: 6e69 745f 7365 633d 696e 7428 6461 7465  nit_sec=int(date
+0001a880: 7469 6d65 2e6e 6f77 2829 2e73 7472 6674  time.now().strft
+0001a890: 696d 6528 2725 7327 2929 0a20 2020 2064  ime('%s')).    d
+0001a8a0: 6566 2053 6c65 6570 2873 656c 662c 7472  ef Sleep(self,tr
+0001a8b0: 795f 7761 6974 3d4e 6f6e 652c 6465 6661  y_wait=None,defa
+0001a8c0: 756c 743d 3129 3a0a 2020 2020 2020 2020  ult=1):.        
+0001a8d0: 6966 2069 7369 6e73 7461 6e63 6528 7472  if isinstance(tr
+0001a8e0: 795f 7761 6974 2c28 696e 742c 7374 7229  y_wait,(int,str)
+0001a8f0: 293a 2074 7279 5f77 6169 743d 2874 7279  ): try_wait=(try
+0001a900: 5f77 6169 742c 290a 2020 2020 2020 2020  _wait,).        
+0001a910: 6966 2069 7369 6e73 7461 6e63 6528 7472  if isinstance(tr
+0001a920: 795f 7761 6974 2c28 6c69 7374 2c74 7570  y_wait,(list,tup
+0001a930: 6c65 2929 2061 6e64 206c 656e 2874 7279  le)) and len(try
+0001a940: 5f77 6169 7429 3a0a 2020 2020 2020 2020  _wait):.        
+0001a950: 2020 2020 6966 206c 656e 2874 7279 5f77      if len(try_w
+0001a960: 6169 7429 203d 3d20 323a 0a20 2020 2020  ait) == 2:.     
+0001a970: 2020 2020 2020 2020 2020 2074 7279 3a0a             try:.
+0001a980: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001a990: 2020 2020 7469 6d65 2e73 6c65 6570 2872      time.sleep(r
+0001a9a0: 616e 646f 6d2e 7261 6e64 696e 7428 696e  andom.randint(in
+0001a9b0: 7428 7472 795f 7761 6974 5b30 5d29 2c69  t(try_wait[0]),i
+0001a9c0: 6e74 2874 7279 5f77 6169 745b 315d 2929  nt(try_wait[1]))
+0001a9d0: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+0001a9e0: 2020 6578 6365 7074 3a0a 2020 2020 2020    except:.      
+0001a9f0: 2020 2020 2020 2020 2020 2020 2020 7061                pa
+0001aa00: 7373 0a20 2020 2020 2020 2020 2020 2065  ss.            e
+0001aa10: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
+0001aa20: 2020 2020 2074 7279 3a0a 2020 2020 2020       try:.      
+0001aa30: 2020 2020 2020 2020 2020 2020 2020 7469                ti
+0001aa40: 6d65 2e73 6c65 6570 2869 6e74 2874 7279  me.sleep(int(try
+0001aa50: 5f77 6169 745b 305d 2929 0a20 2020 2020  _wait[0])).     
+0001aa60: 2020 2020 2020 2020 2020 2065 7863 6570             excep
+0001aa70: 743a 0a20 2020 2020 2020 2020 2020 2020  t:.             
+0001aa80: 2020 2020 2020 2070 6173 730a 2020 2020         pass.    
+0001aa90: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+0001aaa0: 2020 2020 2020 7469 6d65 2e73 6c65 6570        time.sleep
+0001aab0: 2864 6566 6175 6c74 290a 2020 2020 6465  (default).    de
+0001aac0: 6620 5261 6e64 2873 656c 662c 7472 795f  f Rand(self,try_
+0001aad0: 7761 6974 3d4e 6f6e 652c 6465 6661 756c  wait=None,defaul
+0001aae0: 743d 3129 3a0a 2020 2020 2020 2020 6966  t=1):.        if
+0001aaf0: 2069 7369 6e73 7461 6e63 6528 7472 795f   isinstance(try_
+0001ab00: 7761 6974 2c28 696e 742c 7374 7229 293a  wait,(int,str)):
+0001ab10: 2074 7279 5f77 6169 743d 2874 7279 5f77   try_wait=(try_w
+0001ab20: 6169 742c 290a 2020 2020 2020 2020 6966  ait,).        if
+0001ab30: 2069 7369 6e73 7461 6e63 6528 7472 795f   isinstance(try_
+0001ab40: 7761 6974 2c28 6c69 7374 2c74 7570 6c65  wait,(list,tuple
+0001ab50: 2929 2061 6e64 206c 656e 2874 7279 5f77  )) and len(try_w
+0001ab60: 6169 7429 3a0a 2020 2020 2020 2020 2020  ait):.          
+0001ab70: 2020 6966 206c 656e 2874 7279 5f77 6169    if len(try_wai
+0001ab80: 7429 203d 3d20 323a 0a20 2020 2020 2020  t) == 2:.       
+0001ab90: 2020 2020 2020 2020 2074 7279 3a0a 2020           try:.  
+0001aba0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001abb0: 2020 7265 7475 726e 2072 616e 646f 6d2e    return random.
+0001abc0: 7261 6e64 696e 7428 696e 7428 7472 795f  randint(int(try_
+0001abd0: 7761 6974 5b30 5d29 2c69 6e74 2874 7279  wait[0]),int(try
+0001abe0: 5f77 6169 745b 315d 2929 0a20 2020 2020  _wait[1])).     
+0001abf0: 2020 2020 2020 2020 2020 2065 7863 6570             excep
+0001ac00: 743a 0a20 2020 2020 2020 2020 2020 2020  t:.             
+0001ac10: 2020 2020 2020 2070 6173 730a 2020 2020         pass.    
+0001ac20: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
+0001ac30: 2020 2020 2020 2020 2020 2020 2020 7472                tr
+0001ac40: 793a 0a20 2020 2020 2020 2020 2020 2020  y:.             
+0001ac50: 2020 2020 2020 2072 6574 7572 6e20 696e         return in
+0001ac60: 7428 7472 795f 7761 6974 5b30 5d29 0a20  t(try_wait[0]). 
+0001ac70: 2020 2020 2020 2020 2020 2020 2020 2065                 e
+0001ac80: 7863 6570 743a 0a20 2020 2020 2020 2020  xcept:.         
+0001ac90: 2020 2020 2020 2020 2020 2070 6173 730a             pass.
+0001aca0: 2020 2020 2020 2020 7265 7475 726e 2064          return d
+0001acb0: 6566 6175 6c74 0a0a 2020 2020 6465 6620  efault..    def 
+0001acc0: 496e 7428 7365 6c66 293a 0a20 2020 2020  Int(self):.     
+0001acd0: 2020 2072 6574 7572 6e20 696e 7428 6461     return int(da
+0001ace0: 7465 7469 6d65 2e6e 6f77 2829 2e73 7472  tetime.now().str
+0001acf0: 6674 696d 6528 2725 7327 2929 0a0a 2020  ftime('%s'))..  
+0001ad00: 2020 6465 6620 4e6f 7728 7365 6c66 2c6d    def Now(self,m
+0001ad10: 6f64 653d 4e6f 6e65 293a 0a20 2020 2020  ode=None):.     
+0001ad20: 2020 2069 6620 6d6f 6465 2069 6e20 5b69     if mode in [i
+0001ad30: 6e74 2c27 696e 7427 2c27 494e 5427 2c27  nt,'int','INT','
+0001ad40: 7365 6327 5d3a 7265 7475 726e 2073 656c  sec']:return sel
+0001ad50: 662e 496e 7428 290a 2020 2020 2020 2020  f.Int().        
+0001ad60: 7265 7475 726e 2064 6174 6574 696d 652e  return datetime.
+0001ad70: 6e6f 7728 290a 0a20 2020 2064 6566 204f  now()..    def O
+0001ad80: 7574 2873 656c 662c 7469 6d65 6f75 745f  ut(self,timeout_
+0001ad90: 7365 632c 6465 6661 756c 743d 2832 342a  sec,default=(24*
+0001ada0: 3336 3030 2929 3a0a 2020 2020 2020 2020  3600)):.        
+0001adb0: 7472 793a 0a20 2020 2020 2020 2020 2020  try:.           
+0001adc0: 2074 696d 656f 7574 5f73 6563 3d69 6e74   timeout_sec=int
+0001add0: 2874 696d 656f 7574 5f73 6563 290a 2020  (timeout_sec).  
+0001ade0: 2020 2020 2020 6578 6365 7074 3a0a 2020        except:.  
+0001adf0: 2020 2020 2020 2020 2020 7469 6d65 6f75            timeou
+0001ae00: 745f 7365 633d 6465 6661 756c 740a 2020  t_sec=default.  
+0001ae10: 2020 2020 2020 6966 2074 696d 656f 7574        if timeout
+0001ae20: 5f73 6563 203d 3d20 303a 0a20 2020 2020  _sec == 0:.     
+0001ae30: 2020 2020 2020 2072 6574 7572 6e20 4661         return Fa
+0001ae40: 6c73 650a 2020 2020 2020 2020 6966 2073  lse.        if s
+0001ae50: 656c 662e 496e 7428 2920 2d20 7365 6c66  elf.Int() - self
+0001ae60: 2e69 6e69 745f 7365 6320 3e20 2074 696d  .init_sec >  tim
+0001ae70: 656f 7574 5f73 6563 3a0a 2020 2020 2020  eout_sec:.      
+0001ae80: 2020 2020 2020 7265 7475 726e 2054 7275        return Tru
+0001ae90: 650a 2020 2020 2020 2020 7265 7475 726e  e.        return
+0001aea0: 2046 616c 7365 0a20 2020 2064 6566 2046   False.    def F
+0001aeb0: 6f72 6d61 7428 7365 6c66 2c74 666f 726d  ormat(self,tform
+0001aec0: 6174 3d27 2573 272c 7265 6164 5f66 6f72  at='%s',read_for
+0001aed0: 6d61 743d 2725 5327 2c74 696d 653d 275f  mat='%S',time='_
+0001aee0: 235f 2729 3a0a 2020 2020 2020 2020 6966  #_'):.        if
+0001aef0: 2049 734e 6f6e 6528 7469 6d65 2c63 686b   IsNone(time,chk
+0001af00: 5f76 616c 3d5b 275f 235f 275d 2c63 686b  _val=['_#_'],chk
+0001af10: 5f6f 6e6c 793d 5472 7565 293a 2074 696d  _only=True): tim
+0001af20: 653d 7365 6c66 2e73 7263 0a20 2020 2020  e=self.src.     
+0001af30: 2020 2069 6620 4973 4e6f 6e65 2874 696d     if IsNone(tim
+0001af40: 652c 6368 6b5f 7661 6c3d 5b4e 6f6e 652c  e,chk_val=[None,
+0001af50: 2727 2c30 2c27 3027 5d29 3a0a 2020 2020  '',0,'0']):.    
+0001af60: 2020 2020 2020 2020 7265 7475 726e 2064          return d
+0001af70: 6174 6574 696d 652e 6e6f 7728 292e 7374  atetime.now().st
+0001af80: 7266 7469 6d65 2874 666f 726d 6174 290a  rftime(tformat).
+0001af90: 0a20 2020 2020 2020 2065 6c69 6620 7265  .        elif re
+0001afa0: 6164 5f66 6f72 6d61 7420 3d3d 2027 2553  ad_format == '%S
+0001afb0: 273a 0a20 2020 2020 2020 2020 2020 2069  ':.            i
+0001afc0: 6620 6973 696e 7374 616e 6365 2874 696d  f isinstance(tim
+0001afd0: 652c 696e 7429 206f 7220 2869 7369 6e73  e,int) or (isins
+0001afe0: 7461 6e63 6528 7469 6d65 2c73 7472 2920  tance(time,str) 
+0001aff0: 616e 6420 7469 6d65 2e69 7364 6967 6974  and time.isdigit
+0001b000: 2829 293a 0a20 2020 2020 2020 2020 2020  ()):.           
+0001b010: 2020 2020 2072 6574 7572 6e20 6461 7465       return date
+0001b020: 7469 6d65 2e66 726f 6d74 696d 6573 7461  time.fromtimesta
+0001b030: 6d70 2869 6e74 2874 696d 6529 292e 7374  mp(int(time)).st
+0001b040: 7266 7469 6d65 2874 666f 726d 6174 290a  rftime(tformat).
+0001b050: 2020 2020 2020 2020 656c 6966 2069 7369          elif isi
+0001b060: 6e73 7461 6e63 6528 7469 6d65 2c73 7472  nstance(time,str
+0001b070: 293a 0a20 2020 2020 2020 2020 2020 2072  ):.            r
+0001b080: 6574 7572 6e20 6461 7465 7469 6d65 2e73  eturn datetime.s
+0001b090: 7472 7074 696d 6528 7469 6d65 2c72 6561  trptime(time,rea
+0001b0a0: 645f 666f 726d 6174 292e 7374 7266 7469  d_format).strfti
+0001b0b0: 6d65 2874 666f 726d 6174 290a 2020 2020  me(tformat).    
+0001b0c0: 2020 2020 656c 6966 2074 7970 6528 7469      elif type(ti
+0001b0d0: 6d65 292e 5f5f 6e61 6d65 5f5f 203d 3d20  me).__name__ == 
+0001b0e0: 2764 6174 6574 696d 6527 3a0a 2020 2020  'datetime':.    
+0001b0f0: 2020 2020 2020 2020 7265 7475 726e 2074          return t
+0001b100: 696d 652e 7374 7266 7469 6d65 2874 666f  ime.strftime(tfo
+0001b110: 726d 6174 290a 0a20 2020 2064 6566 2049  rmat)..    def I
+0001b120: 6e69 7428 7365 6c66 293a 0a20 2020 2020  nit(self):.     
+0001b130: 2020 2072 6574 7572 6e20 7365 6c66 2e69     return self.i
+0001b140: 6e69 745f 7365 630a 0a20 2020 2064 6566  nit_sec..    def
+0001b150: 2054 696d 6528 7365 6c66 293a 0a20 2020   Time(self):.   
+0001b160: 2020 2020 2072 6574 7572 6e20 7469 6d65       return time
+0001b170: 2e74 696d 6528 290a 0a20 2020 2064 6566  .time()..    def
+0001b180: 2044 6174 6574 696d 6528 7365 6c66 293a   Datetime(self):
+0001b190: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+0001b1a0: 6461 7465 7469 6d65 2829 0a0a 6465 6620  datetime()..def 
+0001b1b0: 7273 6865 6c6c 2863 6d64 2c74 696d 656f  rshell(cmd,timeo
+0001b1c0: 7574 3d4e 6f6e 652c 616e 7369 3d54 7275  ut=None,ansi=Tru
+0001b1d0: 652c 7061 7468 3d4e 6f6e 652c 7072 6f67  e,path=None,prog
+0001b1e0: 7265 7373 3d46 616c 7365 2c70 726f 6772  ress=False,progr
+0001b1f0: 6573 735f 7072 655f 6e65 775f 6c69 6e65  ess_pre_new_line
+0001b200: 3d46 616c 7365 2c70 726f 6772 6573 735f  =False,progress_
+0001b210: 706f 7374 5f6e 6577 5f6c 696e 653d 4661  post_new_line=Fa
+0001b220: 6c73 652c 6c6f 673d 4e6f 6e65 2c70 726f  lse,log=None,pro
+0001b230: 6772 6573 735f 696e 7465 7276 616c 3d35  gress_interval=5
+0001b240: 2c63 643d 4661 6c73 652c 6465 6661 756c  ,cd=False,defaul
+0001b250: 745f 7469 6d65 6f75 743d 3336 3030 293a  t_timeout=3600):
+0001b260: 0a20 2020 2064 6566 2050 7072 6f67 2873  .    def Pprog(s
+0001b270: 746f 702c 7072 6f67 7265 7373 5f70 7265  top,progress_pre
+0001b280: 5f6e 6577 5f6c 696e 653d 4661 6c73 652c  _new_line=False,
+0001b290: 7072 6f67 7265 7373 5f70 6f73 745f 6e65  progress_post_ne
+0001b2a0: 775f 6c69 6e65 3d46 616c 7365 2c6c 6f67  w_line=False,log
+0001b2b0: 3d4e 6f6e 652c 7072 6f67 7265 7373 5f69  =None,progress_i
+0001b2c0: 6e74 6572 7661 6c3d 3529 3a0a 2020 2020  nterval=5):.    
+0001b2d0: 2020 2020 7469 6d65 2e73 6c65 6570 2870      time.sleep(p
+0001b2e0: 726f 6772 6573 735f 696e 7465 7276 616c  rogress_interval
+0001b2f0: 290a 2020 2020 2020 2020 6966 2073 746f  ).        if sto
+0001b300: 7028 293a 0a20 2020 2020 2020 2020 2020  p():.           
+0001b310: 2072 6574 7572 6e0a 2020 2020 2020 2020   return.        
+0001b320: 6966 2070 726f 6772 6573 735f 7072 655f  if progress_pre_
+0001b330: 6e65 775f 6c69 6e65 3a0a 2020 2020 2020  new_line:.      
+0001b340: 2020 2020 2020 6966 206c 6f67 3a0a 2020        if log:.  
+0001b350: 2020 2020 2020 2020 2020 2020 2020 6c6f                lo
+0001b360: 6728 275c 6e27 2c64 6972 6563 743d 5472  g('\n',direct=Tr
+0001b370: 7565 2c6c 6f67 5f6c 6576 656c 3d31 290a  ue,log_level=1).
+0001b380: 2020 2020 2020 2020 2020 2020 656c 7365              else
+0001b390: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+0001b3a0: 2020 5374 644f 7574 2827 5c6e 2729 0a20    StdOut('\n'). 
+0001b3b0: 2020 2020 2020 2070 6f73 745f 6368 6b3d         post_chk=
+0001b3c0: 4661 6c73 650a 2020 2020 2020 2020 7768  False.        wh
+0001b3d0: 696c 6520 5472 7565 3a0a 2020 2020 2020  ile True:.      
+0001b3e0: 2020 2020 2020 6966 2073 746f 7028 293a        if stop():
+0001b3f0: 2062 7265 616b 0a20 2020 2020 2020 2020   break.         
+0001b400: 2020 2069 6620 6c6f 673a 0a20 2020 2020     if log:.     
+0001b410: 2020 2020 2020 2020 2020 206c 6f67 2827             log('
+0001b420: 3e27 2c64 6972 6563 743d 5472 7565 2c6c  >',direct=True,l
+0001b430: 6f67 5f6c 6576 656c 3d31 290a 2020 2020  og_level=1).    
+0001b440: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
+0001b450: 2020 2020 2020 2020 2020 2020 2020 5374                St
+0001b460: 644f 7574 2827 3e27 290a 2020 2020 2020  dOut('>').      
+0001b470: 2020 2020 2020 706f 7374 5f63 686b 3d54        post_chk=T
+0001b480: 7275 650a 2020 2020 2020 2020 2020 2020  rue.            
+0001b490: 7469 6d65 2e73 6c65 6570 2870 726f 6772  time.sleep(progr
+0001b4a0: 6573 735f 696e 7465 7276 616c 290a 2020  ess_interval).  
+0001b4b0: 2020 2020 2020 6966 2070 6f73 745f 6368        if post_ch
+0001b4c0: 6b20 616e 6420 7072 6f67 7265 7373 5f70  k and progress_p
+0001b4d0: 6f73 745f 6e65 775f 6c69 6e65 3a0a 2020  ost_new_line:.  
+0001b4e0: 2020 2020 2020 2020 2020 6966 206c 6f67            if log
+0001b4f0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+0001b500: 2020 6c6f 6728 275c 6e27 2c64 6972 6563    log('\n',direc
+0001b510: 743d 5472 7565 2c6c 6f67 5f6c 6576 656c  t=True,log_level
+0001b520: 3d31 290a 2020 2020 2020 2020 2020 2020  =1).            
+0001b530: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
+0001b540: 2020 2020 2020 5374 644f 7574 2827 5c6e        StdOut('\n
+0001b550: 2729 0a0a 2020 2020 7374 6172 745f 7469  ')..    start_ti
+0001b560: 6d65 3d54 494d 4528 290a 2020 2020 6966  me=TIME().    if
+0001b570: 206e 6f74 2054 7970 6528 636d 642c 2773   not Type(cmd,'s
+0001b580: 7472 272c 6461 7461 3d54 7275 6529 3a0a  tr',data=True):.
+0001b590: 2020 2020 2020 2020 7265 7475 726e 202d          return -
+0001b5a0: 312c 2777 726f 6e67 2063 6f6d 6d61 6e64  1,'wrong command
+0001b5b0: 2069 6e66 6f72 6d61 7469 6f6e 203a 7b30   information :{0
+0001b5c0: 7d27 2e66 6f72 6d61 7428 636d 6429 2c27  }'.format(cmd),'
+0001b5d0: 272c 7374 6172 745f 7469 6d65 2e49 6e69  ',start_time.Ini
+0001b5e0: 7428 292c 7374 6172 745f 7469 6d65 2e49  t(),start_time.I
+0001b5f0: 6e69 7428 292c 7374 6172 745f 7469 6d65  nit(),start_time
+0001b600: 2e4e 6f77 2869 6e74 292c 636d 642c 7061  .Now(int),cmd,pa
+0001b610: 7468 0a20 2020 2050 6f70 656e 3d73 7562  th.    Popen=sub
+0001b620: 7072 6f63 6573 735f 506f 7065 6e0a 2020  process_Popen.  
+0001b630: 2020 5049 5045 3d73 7562 7072 6f63 6573    PIPE=subproces
+0001b640: 735f 5049 5045 0a20 2020 2063 6d64 5f65  s_PIPE.    cmd_e
+0001b650: 6e76 3d27 270a 2020 2020 636d 645f 613d  nv=''.    cmd_a=
+0001b660: 636d 642e 7370 6c69 7428 290a 2020 2020  cmd.split().    
+0001b670: 636d 645f 6669 6c65 3d63 6d64 5f61 5b30  cmd_file=cmd_a[0
+0001b680: 5d0a 2020 2020 6966 2063 6d64 5f61 5b30  ].    if cmd_a[0
+0001b690: 5d20 3d3d 2027 7375 646f 273a 2063 6d64  ] == 'sudo': cmd
+0001b6a0: 5f66 696c 653d 636d 645f 615b 315d 0a20  _file=cmd_a[1]. 
+0001b6b0: 2020 2069 6620 7061 7468 2061 6e64 2069     if path and i
+0001b6c0: 7369 6e73 7461 6e63 6528 7061 7468 2c73  sinstance(path,s
+0001b6d0: 7472 293a 0a20 2020 2020 2020 2069 6620  tr):.        if 
+0001b6e0: 6f73 2e70 6174 682e 6973 6669 6c65 286f  os.path.isfile(o
+0001b6f0: 732e 7061 7468 2e6a 6f69 6e28 7061 7468  s.path.join(path
+0001b700: 2c63 6d64 5f66 696c 6529 293a 0a20 2020  ,cmd_file)):.   
+0001b710: 2020 2020 2020 2020 2069 6620 6364 3a0a           if cd:.
+0001b720: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b730: 636d 645f 656e 763d 636d 645f 656e 762b  cmd_env=cmd_env+
+0001b740: 2727 2763 6420 2573 2026 2620 2e2f 2727  '''cd %s && ./''
+0001b750: 2725 2870 6174 6829 0a20 2020 2020 2020  '%(path).       
+0001b760: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
+0001b770: 2020 2020 2020 2020 2020 2063 6d64 5f65             cmd_e
+0001b780: 6e76 3d63 6d64 5f65 6e76 2b27 2727 2573  nv=cmd_env+'''%s
+0001b790: 2f27 2727 2528 7061 7468 290a 2020 2020  /'''%(path).    
+0001b7a0: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+0001b7b0: 2020 2020 2020 636d 645f 656e 763d 2727        cmd_env=''
+0001b7c0: 2765 7870 6f72 7420 5041 5448 3d25 733a  'export PATH=%s:
+0001b7d0: 247b 5041 5448 7d3b 2027 2727 2528 7061  ${PATH}; '''%(pa
+0001b7e0: 7468 290a 2020 2020 656c 6966 2063 6d64  th).    elif cmd
+0001b7f0: 5f66 696c 655b 305d 2021 3d20 272f 2720  _file[0] != '/' 
+0001b800: 616e 6420 636d 645f 6669 6c65 203d 3d20  and cmd_file == 
+0001b810: 6f73 2e70 6174 682e 6261 7365 6e61 6d65  os.path.basename
+0001b820: 2863 6d64 5f66 696c 6529 2061 6e64 206f  (cmd_file) and o
+0001b830: 732e 7061 7468 2e69 7366 696c 6528 636d  s.path.isfile(cm
+0001b840: 645f 6669 6c65 293a 0a20 2020 2020 2020  d_file):.       
+0001b850: 2063 6d64 5f65 6e76 3d27 2e2f 270a 2020   cmd_env='./'.  
+0001b860: 2020 7020 3d20 506f 7065 6e28 636d 645f    p = Popen(cmd_
+0001b870: 656e 762b 636d 6420 2c20 7368 656c 6c3d  env+cmd , shell=
+0001b880: 5472 7565 2c20 7374 646f 7574 3d50 4950  True, stdout=PIP
+0001b890: 452c 2073 7464 6572 723d 5049 5045 290a  E, stderr=PIPE).
+0001b8a0: 2020 2020 6f75 743d 4e6f 6e65 0a20 2020      out=None.   
+0001b8b0: 2065 7272 3d4e 6f6e 650a 2020 2020 6966   err=None.    if
+0001b8c0: 2070 726f 6772 6573 733a 0a20 2020 2020   progress:.     
+0001b8d0: 2020 2073 746f 705f 7468 7265 6164 733d     stop_threads=
+0001b8e0: 4661 6c73 650a 2020 2020 2020 2020 7070  False.        pp
+0001b8f0: 7468 3d54 6872 6561 6428 7461 7267 6574  th=Thread(target
+0001b900: 3d50 7072 6f67 2c61 7267 733d 286c 616d  =Pprog,args=(lam
+0001b910: 6264 613a 7374 6f70 5f74 6872 6561 6473  bda:stop_threads
+0001b920: 2c70 726f 6772 6573 735f 7072 655f 6e65  ,progress_pre_ne
+0001b930: 775f 6c69 6e65 2c70 726f 6772 6573 735f  w_line,progress_
+0001b940: 706f 7374 5f6e 6577 5f6c 696e 652c 6c6f  post_new_line,lo
+0001b950: 672c 7072 6f67 7265 7373 5f69 6e74 6572  g,progress_inter
+0001b960: 7661 6c29 290a 2020 2020 2020 2020 7070  val)).        pp
+0001b970: 7468 2e73 7461 7274 2829 0a20 2020 2069  th.start().    i
+0001b980: 6620 7469 6d65 6f75 7420 6973 206e 6f74  f timeout is not
+0001b990: 204e 6f6e 653a 0a20 2020 2020 2020 2074   None:.        t
+0001b9a0: 7279 3a0a 2020 2020 2020 2020 2020 2020  ry:.            
+0001b9b0: 7469 6d65 6f75 743d 696e 7428 5768 6974  timeout=int(Whit
+0001b9c0: 6553 7472 6970 2874 696d 656f 7574 2929  eStrip(timeout))
+0001b9d0: 0a20 2020 2020 2020 2065 7863 6570 743a  .        except:
+0001b9e0: 0a20 2020 2020 2020 2020 2020 2074 696d  .            tim
+0001b9f0: 656f 7574 3d64 6566 6175 6c74 5f74 696d  eout=default_tim
+0001ba00: 656f 7574 0a20 2020 2020 2020 2069 6620  eout.        if 
+0001ba10: 7469 6d65 6f75 7420 3c20 333a 0a20 2020  timeout < 3:.   
+0001ba20: 2020 2020 2020 2020 2074 696d 656f 7574           timeout
+0001ba30: 3d33 0a20 2020 2069 6620 5079 5665 7228  =3.    if PyVer(
+0001ba40: 3329 3a0a 2020 2020 2020 2020 7472 793a  3):.        try:
+0001ba50: 0a20 2020 2020 2020 2020 2020 206f 7574  .            out
+0001ba60: 2c20 6572 7220 3d20 702e 636f 6d6d 756e  , err = p.commun
+0001ba70: 6963 6174 6528 7469 6d65 6f75 743d 7469  icate(timeout=ti
+0001ba80: 6d65 6f75 7429 0a20 2020 2020 2020 2065  meout).        e
+0001ba90: 7863 6570 7420 7375 6270 726f 6365 7373  xcept subprocess
+0001baa0: 5f54 696d 656f 7574 4578 7069 7265 643a  _TimeoutExpired:
+0001bab0: 0a20 2020 2020 2020 2020 2020 2070 2e6b  .            p.k
+0001bac0: 696c 6c28 290a 2020 2020 2020 2020 2020  ill().          
+0001bad0: 2020 6966 2070 726f 6772 6573 733a 0a20    if progress:. 
+0001bae0: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+0001baf0: 746f 705f 7468 7265 6164 733d 5472 7565  top_threads=True
+0001bb00: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001bb10: 2070 7074 682e 6a6f 696e 2829 0a20 2020   ppth.join().   
+0001bb20: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+0001bb30: 2d32 2c20 274b 696c 6c20 7072 6f63 6573  -2, 'Kill proces
+0001bb40: 7320 6166 7465 7220 7469 6d65 6f75 7420  s after timeout 
+0001bb50: 287b 307d 2073 6563 2927 2e66 6f72 6d61  ({0} sec)'.forma
+0001bb60: 7428 7469 6d65 6f75 7429 2c20 2745 7272  t(timeout), 'Err
+0001bb70: 6f72 3a20 4b69 6c6c 2070 726f 6365 7373  or: Kill process
+0001bb80: 2061 6674 6572 2054 696d 656f 7574 207b   after Timeout {
+0001bb90: 307d 272e 666f 726d 6174 2874 696d 656f  0}'.format(timeo
+0001bba0: 7574 292c 7374 6172 745f 7469 6d65 2e49  ut),start_time.I
+0001bbb0: 6e69 7428 292c 7374 6172 745f 7469 6d65  nit(),start_time
+0001bbc0: 2e4e 6f77 2869 6e74 292c 636d 642c 7061  .Now(int),cmd,pa
+0001bbd0: 7468 0a20 2020 2065 6c73 653a 0a20 2020  th.    else:.   
+0001bbe0: 2020 2020 2069 6620 6973 696e 7374 616e       if isinstan
+0001bbf0: 6365 2874 696d 656f 7574 2c69 6e74 293a  ce(timeout,int):
+0001bc00: 0a20 2020 2020 2020 2020 2020 2063 6f75  .            cou
+0001bc10: 6e74 646f 776e 3d69 6e74 2827 7b7d 272e  ntdown=int('{}'.
+0001bc20: 666f 726d 6174 2874 696d 656f 7574 2929  format(timeout))
+0001bc30: 0a20 2020 2020 2020 2020 2020 2077 6869  .            whi
+0001bc40: 6c65 2070 2e70 6f6c 6c28 2920 6973 204e  le p.poll() is N
+0001bc50: 6f6e 6520 616e 6420 636f 756e 7464 6f77  one and countdow
+0001bc60: 6e20 3e20 303a 0a20 2020 2020 2020 2020  n > 0:.         
+0001bc70: 2020 2020 2020 2074 696d 652e 736c 6565         time.slee
+0001bc80: 7028 3229 0a20 2020 2020 2020 2020 2020  p(2).           
+0001bc90: 2020 2020 2063 6f75 6e74 646f 776e 202d       countdown -
+0001bca0: 3d20 320a 2020 2020 2020 2020 2020 2020  = 2.            
+0001bcb0: 6966 2063 6f75 6e74 646f 776e 203c 2031  if countdown < 1
+0001bcc0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+0001bcd0: 2020 702e 6b69 6c6c 2829 0a20 2020 2020    p.kill().     
+0001bce0: 2020 2020 2020 2020 2020 2069 6620 7072             if pr
+0001bcf0: 6f67 7265 7373 3a0a 2020 2020 2020 2020  ogress:.        
+0001bd00: 2020 2020 2020 2020 2020 2020 7374 6f70              stop
+0001bd10: 5f74 6872 6561 6473 3d54 7275 650a 2020  _threads=True.  
+0001bd20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001bd30: 2020 7070 7468 2e6a 6f69 6e28 290a 2020    ppth.join().  
+0001bd40: 2020 2020 2020 2020 2020 2020 2020 7265                re
+0001bd50: 7475 726e 202d 322c 2027 4b69 6c6c 2070  turn -2, 'Kill p
+0001bd60: 726f 6365 7373 2061 6674 6572 2074 696d  rocess after tim
+0001bd70: 656f 7574 2028 7b30 7d20 7365 6329 272e  eout ({0} sec)'.
+0001bd80: 666f 726d 6174 2874 696d 656f 7574 292c  format(timeout),
+0001bd90: 2027 4572 726f 723a 204b 696c 6c20 7072   'Error: Kill pr
+0001bda0: 6f63 6573 7320 6166 7465 7220 5469 6d65  ocess after Time
+0001bdb0: 6f75 7420 7b30 7d27 2e66 6f72 6d61 7428  out {0}'.format(
+0001bdc0: 7469 6d65 6f75 7429 2c73 7461 7274 5f74  timeout),start_t
+0001bdd0: 696d 652e 496e 6974 2829 2c73 7461 7274  ime.Init(),start
+0001bde0: 5f74 696d 652e 4e6f 7728 696e 7429 2c63  _time.Now(int),c
+0001bdf0: 6d64 2c70 6174 680a 2020 2020 2020 2020  md,path.        
+0001be00: 6f75 742c 2065 7272 203d 2070 2e63 6f6d  out, err = p.com
+0001be10: 6d75 6e69 6361 7465 2829 0a0a 2020 2020  municate()..    
+0001be20: 6966 2070 726f 6772 6573 733a 0a20 2020  if progress:.   
+0001be30: 2020 2020 2073 746f 705f 7468 7265 6164       stop_thread
+0001be40: 733d 5472 7565 0a20 2020 2020 2020 2070  s=True.        p
+0001be50: 7074 682e 6a6f 696e 2829 0a20 2020 2069  pth.join().    i
+0001be60: 6620 5079 5665 7228 3329 3a0a 2020 2020  f PyVer(3):.    
+0001be70: 2020 2020 6f75 743d 6f75 742e 6465 636f      out=out.deco
+0001be80: 6465 2822 4953 4f2d 3838 3539 2d31 2229  de("ISO-8859-1")
+0001be90: 0a20 2020 2020 2020 2065 7272 3d65 7272  .        err=err
+0001bea0: 2e64 6563 6f64 6528 2249 534f 2d38 3835  .decode("ISO-885
+0001beb0: 392d 3122 290a 2020 2020 6966 2061 6e73  9-1").    if ans
+0001bec0: 693a 0a20 2020 2020 2020 2072 6574 7572  i:.        retur
+0001bed0: 6e20 702e 7265 7475 726e 636f 6465 2c20  n p.returncode, 
+0001bee0: 6f75 742e 7273 7472 6970 2829 2c20 6572  out.rstrip(), er
+0001bef0: 722e 7273 7472 6970 2829 2c73 7461 7274  r.rstrip(),start
+0001bf00: 5f74 696d 652e 496e 6974 2829 2c73 7461  _time.Init(),sta
+0001bf10: 7274 5f74 696d 652e 4e6f 7728 696e 7429  rt_time.Now(int)
+0001bf20: 2c63 6d64 2c70 6174 680a 2020 2020 656c  ,cmd,path.    el
+0001bf30: 7365 3a0a 2020 2020 2020 2020 7265 7475  se:.        retu
+0001bf40: 726e 2070 2e72 6574 7572 6e63 6f64 652c  rn p.returncode,
+0001bf50: 2061 6e73 695f 6573 6361 7065 2e73 7562   ansi_escape.sub
+0001bf60: 2827 272c 6f75 7429 2e72 7374 7269 7028  ('',out).rstrip(
+0001bf70: 292c 2061 6e73 695f 6573 6361 7065 2e73  ), ansi_escape.s
+0001bf80: 7562 2827 272c 6572 7229 2e72 7374 7269  ub('',err).rstri
+0001bf90: 7028 292c 7374 6172 745f 7469 6d65 2e49  p(),start_time.I
+0001bfa0: 6e69 7428 292c 7374 6172 745f 7469 6d65  nit(),start_time
+0001bfb0: 2e4e 6f77 2869 6e74 292c 636d 642c 7061  .Now(int),cmd,pa
+0001bfc0: 7468 0a0a 6465 6620 4973 4361 6e63 656c  th..def IsCancel
+0001bfd0: 2866 756e 6329 3a0a 2020 2020 6675 6e63  (func):.    func
+0001bfe0: 5f74 7970 653d 5479 7065 4e61 6d65 2866  _type=TypeName(f
+0001bff0: 756e 6329 0a20 2020 2069 6620 6675 6e63  unc).    if func
+0001c000: 5f74 7970 6520 696e 205b 2766 756e 6374  _type in ['funct
+0001c010: 696f 6e27 2c27 696e 7374 616e 6365 6d65  ion','instanceme
+0001c020: 7468 6f64 272c 276d 6574 686f 6427 5d3a  thod','method']:
+0001c030: 0a20 2020 2020 2020 2069 6620 6675 6e63  .        if func
+0001c040: 2829 3a20 7265 7475 726e 2054 7275 650a  (): return True.
+0001c050: 2020 2020 656c 6966 2066 756e 635f 7479      elif func_ty
+0001c060: 7065 2069 6e20 5b27 626f 6f6c 272c 2773  pe in ['bool','s
+0001c070: 7472 275d 2061 6e64 2066 756e 6320 696e  tr'] and func in
+0001c080: 205b 5472 7565 2c27 6361 6e63 656c 275d   [True,'cancel']
+0001c090: 3a0a 2020 2020 2020 2020 7265 7475 726e  :.        return
+0001c0a0: 2054 7275 650a 2020 2020 7265 7475 726e   True.    return
+0001c0b0: 2046 616c 7365 0a0a 6465 6620 7370 7269   False..def spri
+0001c0c0: 6e74 6628 7374 7269 6e67 2c2a 696e 7073  ntf(string,*inps
+0001c0d0: 2c2a 2a6f 7074 7329 3a0a 2020 2020 2727  ,**opts):.    ''
+0001c0e0: 270a 2020 2020 2222 2269 706d 6974 6f6f  '.    """ipmitoo
+0001c0f0: 6c20 2d48 2025 2869 706d 695f 6970 2973  l -H %(ipmi_ip)s
+0001c100: 202d 5520 2528 6970 6d69 5f75 7365 7229   -U %(ipmi_user)
+0001c110: 7320 2d50 2027 2528 6970 6d69 5f70 6173  s -P '%(ipmi_pas
+0001c120: 7329 7327 2022 2222 2528 2a2a 6f70 7473  s)s' """%(**opts
+0001c130: 290a 2020 2020 2222 227b 6170 707d 202d  ).    """{app} -
+0001c140: 4820 7b69 706d 695f 6970 7d20 2d55 207b  H {ipmi_ip} -U {
+0001c150: 6970 6d69 5f75 7365 727d 202d 5020 277b  ipmi_user} -P '{
+0001c160: 6970 6d69 5f70 6173 737d 2720 2222 222e  ipmi_pass}' """.
+0001c170: 666f 726d 6174 282a 2a6f 7074 7329 0a20  format(**opts). 
+0001c180: 2020 2022 2222 7b7d 202d 4820 7b7d 202d     """{} -H {} -
+0001c190: 5520 7b7d 202d 5020 277b 7d27 2022 2222  U {} -P '{}' """
+0001c1a0: 2e66 6f72 6d61 7428 2a69 6e70 7329 0a20  .format(*inps). 
+0001c1b0: 2020 2022 2222 7b30 7d20 2d48 207b 317d     """{0} -H {1}
+0001c1c0: 202d 5520 7b32 7d20 2d50 2027 7b33 7d27   -U {2} -P '{3}'
+0001c1d0: 2022 2222 2e66 6f72 6d61 7428 2a69 6e70   """.format(*inp
+0001c1e0: 7329 0a20 2020 2027 2727 0a20 2020 2069  s).    '''.    i
+0001c1f0: 6620 6e6f 7420 6973 696e 7374 616e 6365  f not isinstance
+0001c200: 2873 7472 696e 672c 7374 7229 3a20 7265  (string,str): re
+0001c210: 7475 726e 2046 616c 7365 2c73 7472 696e  turn False,strin
+0001c220: 670a 2020 2020 6666 616c 6c3d 5b72 652e  g.    ffall=[re.
+0001c230: 636f 6d70 696c 6528 275c 7b28 5c64 2a29  compile('\{(\d*)
+0001c240: 5c7d 2729 2e66 696e 6461 6c6c 2873 7472  \}').findall(str
+0001c250: 696e 6729 2c72 652e 636f 6d70 696c 6528  ing),re.compile(
+0001c260: 275c 7b28 5c77 2a29 5c7d 2729 2e66 696e  '\{(\w*)\}').fin
+0001c270: 6461 6c6c 2873 7472 696e 6729 2c72 652e  dall(string),re.
+0001c280: 636f 6d70 696c 6528 275c 255c 2828 5c77  compile('\%\((\w
+0001c290: 2a29 5c29 7327 292e 6669 6e64 616c 6c28  *)\)s').findall(
+0001c2a0: 7374 7269 6e67 292c 7265 2e63 6f6d 7069  string),re.compi
+0001c2b0: 6c65 2827 5c7b 5c7d 2729 2e66 696e 6461  le('\{\}').finda
+0001c2c0: 6c6c 2873 7472 696e 6729 5d0a 2020 2020  ll(string)].    
+0001c2d0: 693d 300a 2020 2020 666f 7220 746d 7020  i=0.    for tmp 
+0001c2e0: 696e 2066 6661 6c6c 3a0a 2020 2020 2020  in ffall:.      
+0001c2f0: 2020 6966 2069 2069 6e20 5b30 2c31 5d3a    if i in [0,1]:
+0001c300: 2074 6d70 3d5b 206a 2020 666f 7220 6a20   tmp=[ j  for j 
+0001c310: 696e 2074 6d70 2069 6620 6c65 6e28 6a29  in tmp if len(j)
+0001c320: 205d 0a20 2020 2020 2020 2069 6620 746d   ].        if tm
+0001c330: 703a 0a20 2020 2020 2020 2020 2020 2069  p:.            i
+0001c340: 6620 6920 3d3d 2030 3a0a 2020 2020 2020  f i == 0:.      
+0001c350: 2020 2020 2020 2020 2020 6d78 3d30 0a20            mx=0. 
+0001c360: 2020 2020 2020 2020 2020 2020 2020 2066                 f
+0001c370: 6f72 207a 2069 6e20 746d 703a 0a20 2020  or z in tmp:.   
+0001c380: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c390: 2069 6620 696e 7428 7a29 203e 206d 783a   if int(z) > mx:
+0001c3a0: 206d 783d 696e 7428 7a29 0a20 2020 2020   mx=int(z).     
+0001c3b0: 2020 2020 2020 2020 2020 2069 6620 696e             if in
+0001c3c0: 7073 3a0a 2020 2020 2020 2020 2020 2020  ps:.            
+0001c3d0: 2020 2020 2020 2020 6966 206c 656e 2869          if len(i
+0001c3e0: 6e70 7329 203e 206d 783a 2072 6574 7572  nps) > mx: retur
+0001c3f0: 6e20 7374 7269 6e67 2e66 6f72 6d61 7428  n string.format(
+0001c400: 2a69 6e70 7329 0a20 2020 2020 2020 2020  *inps).         
+0001c410: 2020 2020 2020 2065 6c69 6620 6f70 7473         elif opts
+0001c420: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+0001c430: 2020 2020 2020 6966 206c 656e 286f 7074        if len(opt
+0001c440: 7329 203e 206d 783a 2072 6574 7572 6e20  s) > mx: return 
+0001c450: 7374 7269 6e67 2e66 6f72 6d61 7428 2a6f  string.format(*o
+0001c460: 7074 732e 7661 6c75 6573 2829 290a 2020  pts.values()).  
+0001c470: 2020 2020 2020 2020 2020 2020 2020 7265                re
+0001c480: 7475 726e 2046 616c 7365 2c22 4e65 6564  turn False,"Need
+0001c490: 206d 6f72 6520 696e 7075 7420 2874 7570   more input (tup
+0001c4a0: 6c65 2f6c 6973 7429 2070 6172 616d 6574  le/list) paramet
+0001c4b0: 6572 7328 7265 7175 6972 6520 7b7d 2922  ers(require {})"
+0001c4c0: 2e66 6f72 6d61 7428 6d78 290a 2020 2020  .format(mx).    
+0001c4d0: 2020 2020 2020 2020 656c 6966 2030 3c20          elif 0< 
+0001c4e0: 6920 3c20 323a 0a20 2020 2020 2020 2020  i < 2:.         
+0001c4f0: 2020 2020 2020 206e 6577 5f73 7472 3d27         new_str='
+0001c500: 270a 2020 2020 2020 2020 2020 2020 2020  '.              
+0001c510: 2020 7374 7269 6e67 5f61 3d73 7472 696e    string_a=strin
+0001c520: 672e 7370 6c69 7428 290a 2020 2020 2020  g.split().      
+0001c530: 2020 2020 2020 2020 2020 6f69 6478 3d30            oidx=0
+0001c540: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001c550: 2066 6f72 2069 6920 696e 2074 6d70 3a0a   for ii in tmp:.
+0001c560: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c570: 2020 2020 6964 783d 4e6f 6e65 0a20 2020      idx=None.   
+0001c580: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c590: 2069 6620 277b 2573 7d27 2528 6969 2920   if '{%s}'%(ii) 
+0001c5a0: 696e 2073 7472 696e 675f 613a 0a20 2020  in string_a:.   
+0001c5b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c5c0: 2020 2020 2069 6478 3d73 7472 696e 675f       idx=string_
+0001c5d0: 612e 696e 6465 7828 277b 2573 7d27 2528  a.index('{%s}'%(
+0001c5e0: 6969 2929 0a20 2020 2020 2020 2020 2020  ii)).           
+0001c5f0: 2020 2020 2020 2020 2065 6c69 6620 2227           elif "'
+0001c600: 7b25 737d 2722 2528 6969 2920 696e 2073  {%s}'"%(ii) in s
+0001c610: 7472 696e 675f 613a 0a20 2020 2020 2020  tring_a:.       
+0001c620: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c630: 2069 6478 3d73 7472 696e 675f 612e 696e   idx=string_a.in
+0001c640: 6465 7828 2227 7b25 737d 2722 2528 6969  dex("'{%s}'"%(ii
+0001c650: 2929 0a20 2020 2020 2020 2020 2020 2020  )).             
+0001c660: 2020 2020 2020 2069 6620 6973 696e 7374         if isinst
+0001c670: 616e 6365 2869 6478 2c69 6e74 293a 0a20  ance(idx,int):. 
 0001c680: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c690: 2020 2069 6478 3d73 7472 696e 675f 612e     idx=string_a.
-0001c6a0: 696e 6465 7828 2227 2528 7b7d 2973 2722  index("'%({})s'"
-0001c6b0: 2e66 6f72 6d61 7428 6969 2929 0a20 2020  .format(ii)).   
-0001c6c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c6d0: 2069 6620 6973 696e 7374 616e 6365 2869   if isinstance(i
-0001c6e0: 6478 2c69 6e74 293a 0a20 2020 2020 2020  dx,int):.       
+0001c690: 2020 2020 2020 2069 6620 6969 2069 6e20         if ii in 
+0001c6a0: 6f70 7473 3a0a 2020 2020 2020 2020 2020  opts:.          
+0001c6b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c6c0: 2020 7374 7269 6e67 5f61 5b69 6478 5d3d    string_a[idx]=
+0001c6d0: 7374 7269 6e67 5f61 5b69 6478 5d2e 666f  string_a[idx].fo
+0001c6e0: 726d 6174 282a 2a6f 7074 7329 0a20 2020  rmat(**opts).   
 0001c6f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c700: 2069 6620 6969 2069 6e20 6f70 7473 3a0a   if ii in opts:.
-0001c710: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c720: 2020 2020 2020 2020 2020 2020 7374 7269              stri
-0001c730: 6e67 5f61 5b69 6478 5d3d 7374 7269 6e67  ng_a[idx]=string
-0001c740: 5f61 5b69 6478 5d25 286f 7074 7329 0a20  _a[idx]%(opts). 
+0001c700: 2065 6c69 6620 6969 2069 6e20 6f70 7473   elif ii in opts
+0001c710: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+0001c720: 2020 2020 2020 2020 2020 666f 7220 6a6a            for jj
+0001c730: 2069 6e20 7261 6e67 6528 302c 6c65 6e28   in range(0,len(
+0001c740: 7374 7269 6e67 5f61 2929 3a0a 2020 2020  string_a)):.    
 0001c750: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c760: 2020 2065 6c69 6620 6969 2069 6e20 6f70     elif ii in op
-0001c770: 7473 3a0a 2020 2020 2020 2020 2020 2020  ts:.            
-0001c780: 2020 2020 2020 2020 2020 2020 666f 7220              for 
-0001c790: 6a6a 2069 6e20 7261 6e67 6528 302c 6c65  jj in range(0,le
-0001c7a0: 6e28 7374 7269 6e67 5f61 2929 3a0a 2020  n(string_a)):.  
-0001c7b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c7c0: 2020 2020 2020 2020 2069 6620 2725 287b           if '%({
-0001c7d0: 7d29 7327 2e66 6f72 6d61 7428 6969 2920  })s'.format(ii) 
-0001c7e0: 696e 2073 7472 696e 675f 615b 6a6a 5d3a  in string_a[jj]:
-0001c7f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001c800: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c810: 7374 7269 6e67 5f61 5b6a 6a5d 3d73 7472  string_a[jj]=str
-0001c820: 696e 675f 615b 6a6a 5d25 286f 7074 7329  ing_a[jj]%(opts)
-0001c830: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001c840: 2072 6574 7572 6e20 5472 7565 2c4a 6f69   return True,Joi
-0001c850: 6e28 7374 7269 6e67 5f61 2c73 796d 626f  n(string_a,symbo
-0001c860: 6c3d 2720 2729 0a20 2020 2020 2020 2020  l=' ').         
-0001c870: 2020 2065 6c69 6620 6920 3d3d 2033 3a0a     elif i == 3:.
-0001c880: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c890: 6966 2069 6e70 733a 0a20 2020 2020 2020  if inps:.       
-0001c8a0: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-0001c8b0: 6c65 6e28 746d 7029 203d 3d20 6c65 6e28  len(tmp) == len(
-0001c8c0: 696e 7073 293a 2072 6574 7572 6e20 7374  inps): return st
-0001c8d0: 7269 6e67 2e66 6f72 6d61 7428 2a69 6e70  ring.format(*inp
-0001c8e0: 7329 0a20 2020 2020 2020 2020 2020 2020  s).             
-0001c8f0: 2020 2020 2020 2072 6574 7572 6e20 4661         return Fa
-0001c900: 6c73 652c 224d 6973 6d61 7463 6865 6420  lse,"Mismatched 
-0001c910: 696e 7075 7420 2874 7570 6c65 2f6c 6973  input (tuple/lis
-0001c920: 7429 206e 756d 6265 7220 2872 6571 7569  t) number (requi
-0001c930: 7265 3a7b 7d2c 2069 6e70 7574 3a7b 7d29  re:{}, input:{})
-0001c940: 222e 666f 726d 6174 286c 656e 2874 6d70  ".format(len(tmp
-0001c950: 292c 6c65 6e28 696e 7073 2929 0a20 2020  ),len(inps)).   
-0001c960: 2020 2020 2020 2020 2020 2020 2065 6c69               eli
-0001c970: 6620 6f70 7473 3a0a 2020 2020 2020 2020  f opts:.        
-0001c980: 2020 2020 2020 2020 2020 2020 6966 206c              if l
-0001c990: 656e 2874 6d70 2920 3d3d 206c 656e 286f  en(tmp) == len(o
-0001c9a0: 7074 7329 3a20 7265 7475 726e 2073 7472  pts): return str
-0001c9b0: 696e 672e 666f 726d 6174 282a 6f70 7473  ing.format(*opts
-0001c9c0: 2e76 616c 7565 7328 2929 0a20 2020 2020  .values()).     
-0001c9d0: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-0001c9e0: 6574 7572 6e20 4661 6c73 652c 224d 6973  eturn False,"Mis
-0001c9f0: 6d61 7463 6865 6420 696e 7075 7420 2874  matched input (t
-0001ca00: 7570 6c65 2f6c 6973 7429 206e 756d 6265  uple/list) numbe
-0001ca10: 7220 2872 6571 7569 7265 3a7b 7d2c 2069  r (require:{}, i
-0001ca20: 6e70 7574 3a7b 7d29 222e 666f 726d 6174  nput:{})".format
-0001ca30: 286c 656e 2874 6d70 292c 6c65 6e28 6f70  (len(tmp),len(op
-0001ca40: 7473 2929 0a20 2020 2020 2020 2069 2b3d  ts)).        i+=
-0001ca50: 310a 2020 2020 7265 7475 726e 2054 7275  1.    return Tru
-0001ca60: 652c 7374 7269 6e67 0a0a 6465 6620 536f  e,string..def So
-0001ca70: 7274 2873 7263 2c72 6576 6572 7365 3d46  rt(src,reverse=F
-0001ca80: 616c 7365 2c66 756e 633d 4e6f 6e65 2c6f  alse,func=None,o
-0001ca90: 7264 6572 3d4e 6f6e 652c 6669 656c 643d  rder=None,field=
-0001caa0: 4e6f 6e65 2c62 6173 653d 276b 6579 272c  None,base='key',
-0001cab0: 7379 6d3d 4e6f 6e65 293a 0a20 2020 2069  sym=None):.    i
-0001cac0: 6620 6973 696e 7374 616e 6365 2873 7263  f isinstance(src
-0001cad0: 2c73 7472 2920 616e 6420 6e6f 7420 4973  ,str) and not Is
-0001cae0: 4e6f 6e65 2873 796d 293a 2073 7263 3d73  None(sym): src=s
-0001caf0: 7263 2e73 706c 6974 2873 796d 290a 2020  rc.split(sym).  
-0001cb00: 2020 6966 2069 7369 6e73 7461 6e63 6528    if isinstance(
-0001cb10: 7372 632c 6469 6374 2920 616e 6420 6261  src,dict) and ba
-0001cb20: 7365 2069 6e20 5b27 6461 7461 272c 2776  se in ['data','v
-0001cb30: 616c 7565 275d 3a0a 2020 2020 2020 2020  alue']:.        
-0001cb40: 6669 656c 643d 310a 2020 2020 6465 6620  field=1.    def 
-0001cb50: 5f63 6c65 6e5f 2865 293a 0a20 2020 2020  _clen_(e):.     
-0001cb60: 2020 2074 7279 3a0a 2020 2020 2020 2020     try:.        
-0001cb70: 2020 2020 6966 2069 7369 6e73 7461 6e63      if isinstanc
-0001cb80: 6528 6669 656c 642c 696e 7429 3a0a 2020  e(field,int):.  
-0001cb90: 2020 2020 2020 2020 2020 2020 2020 6966                if
-0001cba0: 2069 7369 6e73 7461 6e63 6528 652c 286c   isinstance(e,(l
-0001cbb0: 6973 742c 7475 706c 6529 2920 616e 6420  ist,tuple)) and 
-0001cbc0: 6c65 6e28 6529 203e 2066 6965 6c64 3a0a  len(e) > field:.
+0001c760: 2020 2020 2020 2069 6620 277b 2573 7d27         if '{%s}'
+0001c770: 2528 6969 2920 696e 2073 7472 696e 675f  %(ii) in string_
+0001c780: 615b 6a6a 5d3a 0a20 2020 2020 2020 2020  a[jj]:.         
+0001c790: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c7a0: 2020 2020 2020 7374 7269 6e67 5f61 5b6a        string_a[j
+0001c7b0: 6a5d 3d73 7472 696e 675f 615b 6a6a 5d2e  j]=string_a[jj].
+0001c7c0: 666f 726d 6174 282a 2a6f 7074 7329 0a20  format(**opts). 
+0001c7d0: 2020 2020 2020 2020 2020 2020 2020 2072                 r
+0001c7e0: 6574 7572 6e20 5472 7565 2c4a 6f69 6e28  eturn True,Join(
+0001c7f0: 7374 7269 6e67 5f61 2c73 796d 626f 6c3d  string_a,symbol=
+0001c800: 2720 2729 0a20 2020 2020 2020 2020 2020  ' ').           
+0001c810: 2065 6c69 6620 6920 3d3d 2032 3a0a 2020   elif i == 2:.  
+0001c820: 2020 2020 2020 2020 2020 2020 2020 6e65                ne
+0001c830: 775f 7374 723d 2727 0a20 2020 2020 2020  w_str=''.       
+0001c840: 2020 2020 2020 2020 2073 7472 696e 675f           string_
+0001c850: 613d 7374 7269 6e67 2e73 706c 6974 2829  a=string.split()
+0001c860: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001c870: 206f 6964 783d 300a 2020 2020 2020 2020   oidx=0.        
+0001c880: 2020 2020 2020 2020 666f 7220 6969 2069          for ii i
+0001c890: 6e20 746d 703a 0a20 2020 2020 2020 2020  n tmp:.         
+0001c8a0: 2020 2020 2020 2020 2020 2069 6478 3d4e             idx=N
+0001c8b0: 6f6e 650a 2020 2020 2020 2020 2020 2020  one.            
+0001c8c0: 2020 2020 2020 2020 6966 2027 2528 7b7d          if '%({}
+0001c8d0: 2973 272e 666f 726d 6174 2869 6929 2069  )s'.format(ii) i
+0001c8e0: 6e20 7374 7269 6e67 5f61 3a0a 2020 2020  n string_a:.    
+0001c8f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c900: 2020 2020 6964 783d 7374 7269 6e67 5f61      idx=string_a
+0001c910: 2e69 6e64 6578 2827 2528 7b7d 2973 272e  .index('%({})s'.
+0001c920: 666f 726d 6174 2869 6929 290a 2020 2020  format(ii)).    
+0001c930: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c940: 656c 6966 2022 2725 287b 7d29 2722 2e66  elif "'%({})'".f
+0001c950: 6f72 6d61 7428 6969 2920 696e 2073 7472  ormat(ii) in str
+0001c960: 696e 675f 613a 0a20 2020 2020 2020 2020  ing_a:.         
+0001c970: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+0001c980: 6478 3d73 7472 696e 675f 612e 696e 6465  dx=string_a.inde
+0001c990: 7828 2227 2528 7b7d 2973 2722 2e66 6f72  x("'%({})s'".for
+0001c9a0: 6d61 7428 6969 2929 0a20 2020 2020 2020  mat(ii)).       
+0001c9b0: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+0001c9c0: 6973 696e 7374 616e 6365 2869 6478 2c69  isinstance(idx,i
+0001c9d0: 6e74 293a 0a20 2020 2020 2020 2020 2020  nt):.           
+0001c9e0: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+0001c9f0: 6969 2069 6e20 6f70 7473 3a0a 2020 2020  ii in opts:.    
+0001ca00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001ca10: 2020 2020 2020 2020 7374 7269 6e67 5f61          string_a
+0001ca20: 5b69 6478 5d3d 7374 7269 6e67 5f61 5b69  [idx]=string_a[i
+0001ca30: 6478 5d25 286f 7074 7329 0a20 2020 2020  dx]%(opts).     
+0001ca40: 2020 2020 2020 2020 2020 2020 2020 2065                 e
+0001ca50: 6c69 6620 6969 2069 6e20 6f70 7473 3a0a  lif ii in opts:.
+0001ca60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001ca70: 2020 2020 2020 2020 666f 7220 6a6a 2069          for jj i
+0001ca80: 6e20 7261 6e67 6528 302c 6c65 6e28 7374  n range(0,len(st
+0001ca90: 7269 6e67 5f61 2929 3a0a 2020 2020 2020  ring_a)):.      
+0001caa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001cab0: 2020 2020 2069 6620 2725 287b 7d29 7327       if '%({})s'
+0001cac0: 2e66 6f72 6d61 7428 6969 2920 696e 2073  .format(ii) in s
+0001cad0: 7472 696e 675f 615b 6a6a 5d3a 0a20 2020  tring_a[jj]:.   
+0001cae0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001caf0: 2020 2020 2020 2020 2020 2020 7374 7269              stri
+0001cb00: 6e67 5f61 5b6a 6a5d 3d73 7472 696e 675f  ng_a[jj]=string_
+0001cb10: 615b 6a6a 5d25 286f 7074 7329 0a20 2020  a[jj]%(opts).   
+0001cb20: 2020 2020 2020 2020 2020 2020 2072 6574               ret
+0001cb30: 7572 6e20 5472 7565 2c4a 6f69 6e28 7374  urn True,Join(st
+0001cb40: 7269 6e67 5f61 2c73 796d 626f 6c3d 2720  ring_a,symbol=' 
+0001cb50: 2729 0a20 2020 2020 2020 2020 2020 2065  ').            e
+0001cb60: 6c69 6620 6920 3d3d 2033 3a0a 2020 2020  lif i == 3:.    
+0001cb70: 2020 2020 2020 2020 2020 2020 6966 2069              if i
+0001cb80: 6e70 733a 0a20 2020 2020 2020 2020 2020  nps:.           
+0001cb90: 2020 2020 2020 2020 2069 6620 6c65 6e28           if len(
+0001cba0: 746d 7029 203d 3d20 6c65 6e28 696e 7073  tmp) == len(inps
+0001cbb0: 293a 2072 6574 7572 6e20 7374 7269 6e67  ): return string
+0001cbc0: 2e66 6f72 6d61 7428 2a69 6e70 7329 0a20  .format(*inps). 
 0001cbd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001cbe0: 2020 2020 7265 7475 726e 206c 656e 2827      return len('
-0001cbf0: 7b7d 272e 666f 726d 6174 2853 7472 2865  {}'.format(Str(e
-0001cc00: 5b66 6965 6c64 5d29 2929 0a20 2020 2020  [field]))).     
-0001cc10: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
-0001cc20: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001cc30: 2020 2020 2072 6574 7572 6e20 3939 3939       return 9999
-0001cc40: 3939 390a 2020 2020 2020 2020 2020 2020  999.            
-0001cc50: 7265 7475 726e 206c 656e 2827 7b7d 272e  return len('{}'.
-0001cc60: 666f 726d 6174 2853 7472 2865 2929 290a  format(Str(e))).
-0001cc70: 2020 2020 2020 2020 6578 6365 7074 3a0a          except:.
-0001cc80: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-0001cc90: 726e 2065 0a20 2020 2064 6566 205f 6369  rn e.    def _ci
-0001cca0: 6e74 5f28 6529 3a0a 2020 2020 2020 2020  nt_(e):.        
-0001ccb0: 7472 793a 0a20 2020 2020 2020 2020 2020  try:.           
-0001ccc0: 2069 6620 6973 696e 7374 616e 6365 2866   if isinstance(f
-0001ccd0: 6965 6c64 2c69 6e74 293a 0a20 2020 2020  ield,int):.     
-0001cce0: 2020 2020 2020 2020 2020 2069 6620 6973             if is
-0001ccf0: 696e 7374 616e 6365 2865 2c28 6c69 7374  instance(e,(list
-0001cd00: 2c74 7570 6c65 2929 2061 6e64 206c 656e  ,tuple)) and len
-0001cd10: 2865 2920 3e20 6669 656c 643a 0a20 2020  (e) > field:.   
-0001cd20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001cd30: 2072 6574 7572 6e20 696e 7428 655b 6669   return int(e[fi
-0001cd40: 656c 645d 290a 2020 2020 2020 2020 2020  eld]).          
-0001cd50: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
-0001cd60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001cd70: 7265 7475 726e 2039 3939 3939 3939 0a20  return 9999999. 
-0001cd80: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-0001cd90: 6e20 696e 7428 6529 0a20 2020 2020 2020  n int(e).       
-0001cda0: 2065 7863 6570 743a 0a20 2020 2020 2020   except:.       
-0001cdb0: 2020 2020 2072 6574 7572 6e20 650a 2020       return e.  
-0001cdc0: 2020 6465 6620 5f63 7374 725f 2865 293a    def _cstr_(e):
-0001cdd0: 0a20 2020 2020 2020 2069 6620 6973 696e  .        if isin
-0001cde0: 7374 616e 6365 2866 6965 6c64 2c69 6e74  stance(field,int
-0001cdf0: 293a 0a20 2020 2020 2020 2020 2020 2069  ):.            i
-0001ce00: 6620 6973 696e 7374 616e 6365 2865 2c28  f isinstance(e,(
-0001ce10: 6c69 7374 2c74 7570 6c65 2929 2061 6e64  list,tuple)) and
-0001ce20: 206c 656e 2865 2920 3e20 6669 656c 643a   len(e) > field:
-0001ce30: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001ce40: 2072 6574 7572 6e20 2727 277b 7d27 2727   return '''{}'''
-0001ce50: 2e66 6f72 6d61 7428 655b 6669 656c 645d  .format(e[field]
-0001ce60: 290a 2020 2020 2020 2020 2020 2020 656c  ).            el
-0001ce70: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
-0001ce80: 2020 2020 7265 7475 726e 2027 7a7a 7a7a      return 'zzzz
-0001ce90: 7a7a 7a7a 7a27 0a20 2020 2020 2020 2072  zzzzz'.        r
-0001cea0: 6574 7572 6e20 2727 277b 7d27 2727 2e66  eturn '''{}'''.f
-0001ceb0: 6f72 6d61 7428 6529 0a20 2020 2069 6620  ormat(e).    if 
-0001cec0: 6973 696e 7374 616e 6365 2873 7263 2c28  isinstance(src,(
-0001ced0: 6c69 7374 2c74 7570 6c65 2929 3a0a 2020  list,tuple)):.  
-0001cee0: 2020 2020 2020 7372 633d 6c69 7374 2873        src=list(s
-0001cef0: 7263 290a 2020 2020 2020 2020 6966 206f  rc).        if o
-0001cf00: 7264 6572 2069 6e20 5b69 6e74 2c27 696e  rder in [int,'in
-0001cf10: 7427 2c27 6469 6769 7427 2c27 6e75 6d62  t','digit','numb
-0001cf20: 6572 275d 3a0a 2020 2020 2020 2020 2020  er']:.          
-0001cf30: 2020 7372 632e 736f 7274 2872 6576 6572    src.sort(rever
-0001cf40: 7365 3d72 6576 6572 7365 2c6b 6579 3d5f  se=reverse,key=_
-0001cf50: 6369 6e74 5f29 0a20 2020 2020 2020 2065  cint_).        e
-0001cf60: 6c69 6620 6f72 6465 7220 696e 205b 276c  lif order in ['l
-0001cf70: 656e 272c 276c 656e 6774 6827 5d3a 0a20  en','length']:. 
-0001cf80: 2020 2020 2020 2020 2020 2073 7263 2e73             src.s
-0001cf90: 6f72 7428 7265 7665 7273 653d 7265 7665  ort(reverse=reve
-0001cfa0: 7273 652c 6b65 793d 5f63 6c65 6e5f 290a  rse,key=_clen_).
-0001cfb0: 2020 2020 2020 2020 656c 6966 206f 7264          elif ord
-0001cfc0: 6572 2069 6e20 5b73 7472 2c27 7374 7227  er in [str,'str'
-0001cfd0: 5d3a 0a20 2020 2020 2020 2020 2020 2073  ]:.            s
-0001cfe0: 7263 2e73 6f72 7428 7265 7665 7273 653d  rc.sort(reverse=
-0001cff0: 7265 7665 7273 652c 6b65 793d 5f63 7374  reverse,key=_cst
-0001d000: 725f 290a 2020 2020 2020 2020 656c 7365  r_).        else
-0001d010: 3a0a 2020 2020 2020 2020 2020 2020 6966  :.            if
-0001d020: 2069 7369 6e73 7461 6e63 6528 6669 656c   isinstance(fiel
-0001d030: 642c 696e 7429 3a0a 2020 2020 2020 2020  d,int):.        
-0001d040: 2020 2020 2020 2020 7372 632e 736f 7274          src.sort
-0001d050: 2872 6576 6572 7365 3d72 6576 6572 7365  (reverse=reverse
-0001d060: 2c6b 6579 3d5f 6369 6e74 5f29 0a20 2020  ,key=_cint_).   
-0001d070: 2020 2020 2020 2020 2065 6c73 653a 0a20           else:. 
-0001d080: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-0001d090: 7263 2e73 6f72 7428 7265 7665 7273 653d  rc.sort(reverse=
-0001d0a0: 7265 7665 7273 652c 6b65 793d 6675 6e63  reverse,key=func
-0001d0b0: 290a 2020 2020 2020 2020 7265 7475 726e  ).        return
-0001d0c0: 2073 7263 0a20 2020 2065 6c69 6620 6973   src.    elif is
-0001d0d0: 696e 7374 616e 6365 2873 7263 2c64 6963  instance(src,dic
-0001d0e0: 7429 3a0a 2020 2020 2020 2020 6c73 743d  t):.        lst=
-0001d0f0: 6c69 7374 2873 7263 2e69 7465 6d73 2829  list(src.items()
-0001d100: 290a 2020 2020 2020 2020 6966 2062 6173  ).        if bas
-0001d110: 6520 3d3d 2027 6b65 7927 3a0a 2020 2020  e == 'key':.    
-0001d120: 2020 2020 2020 2020 6669 656c 643d 300a          field=0.
-0001d130: 2020 2020 2020 2020 2020 2020 6966 206f              if o
-0001d140: 7264 6572 2069 6e20 5b69 6e74 2c27 696e  rder in [int,'in
-0001d150: 7427 2c27 6469 6769 7427 2c27 6e75 6d62  t','digit','numb
-0001d160: 6572 275d 3a0a 2020 2020 2020 2020 2020  er']:.          
-0001d170: 2020 2020 2020 6c73 742e 736f 7274 2872        lst.sort(r
-0001d180: 6576 6572 7365 3d72 6576 6572 7365 2c6b  everse=reverse,k
-0001d190: 6579 3d5f 6369 6e74 5f29 0a20 2020 2020  ey=_cint_).     
-0001d1a0: 2020 2020 2020 2065 6c69 6620 6f72 6465         elif orde
-0001d1b0: 7220 696e 205b 276c 656e 272c 276c 656e  r in ['len','len
-0001d1c0: 6774 6827 5d3a 0a20 2020 2020 2020 2020  gth']:.         
-0001d1d0: 2020 2020 2020 206c 7374 2e73 6f72 7428         lst.sort(
-0001d1e0: 7265 7665 7273 653d 7265 7665 7273 652c  reverse=reverse,
-0001d1f0: 6b65 793d 5f63 6c65 6e5f 290a 2020 2020  key=_clen_).    
-0001d200: 2020 2020 2020 2020 656c 6966 206f 7264          elif ord
-0001d210: 6572 2069 6e20 5b73 7472 2c27 7374 7227  er in [str,'str'
-0001d220: 5d3a 0a20 2020 2020 2020 2020 2020 2020  ]:.             
-0001d230: 2020 206c 7374 2e73 6f72 7428 7265 7665     lst.sort(reve
-0001d240: 7273 653d 7265 7665 7273 652c 6b65 793d  rse=reverse,key=
-0001d250: 5f63 7374 725f 290a 2020 2020 2020 2020  _cstr_).        
-0001d260: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
-0001d270: 2020 2020 2020 2020 2020 6c73 742e 736f            lst.so
-0001d280: 7274 2872 6576 6572 7365 3d72 6576 6572  rt(reverse=rever
-0001d290: 7365 2c66 756e 633d 6675 6e63 290a 2020  se,func=func).  
-0001d2a0: 2020 2020 2020 656c 7365 3a20 2320 7661        else: # va
-0001d2b0: 6c75 6520 2f20 6461 7461 2063 6173 650a  lue / data case.
-0001d2c0: 2020 2020 2020 2020 2020 2020 6669 656c              fiel
-0001d2d0: 643d 310a 2020 2020 2020 2020 2020 2020  d=1.            
-0001d2e0: 6966 206f 7264 6572 2069 6e20 5b69 6e74  if order in [int
-0001d2f0: 2c27 696e 7427 2c27 6469 6769 7427 2c27  ,'int','digit','
-0001d300: 6e75 6d62 6572 275d 3a0a 2020 2020 2020  number']:.      
-0001d310: 2020 2020 2020 2020 2020 6c73 742e 736f            lst.so
-0001d320: 7274 2872 6576 6572 7365 3d72 6576 6572  rt(reverse=rever
-0001d330: 7365 2c6b 6579 3d5f 6369 6e74 5f29 0a20  se,key=_cint_). 
-0001d340: 2020 2020 2020 2020 2020 2065 6c69 6620             elif 
-0001d350: 6f72 6465 7220 696e 205b 276c 656e 272c  order in ['len',
-0001d360: 276c 656e 6774 6827 5d3a 0a20 2020 2020  'length']:.     
-0001d370: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-0001d380: 6e20 6c73 742e 736f 7274 2872 6576 6572  n lst.sort(rever
-0001d390: 7365 3d72 6576 6572 7365 2c6b 6579 3d5f  se=reverse,key=_
-0001d3a0: 636c 656e 5f29 0a20 2020 2020 2020 2020  clen_).         
-0001d3b0: 2020 2065 6c69 6620 6f72 6465 7220 696e     elif order in
-0001d3c0: 205b 7374 722c 2773 7472 275d 3a0a 2020   [str,'str']:.  
-0001d3d0: 2020 2020 2020 2020 2020 2020 2020 6c73                ls
-0001d3e0: 742e 736f 7274 2872 6576 6572 7365 3d72  t.sort(reverse=r
-0001d3f0: 6576 6572 7365 2c6b 6579 3d5f 6373 7472  everse,key=_cstr
-0001d400: 5f29 0a20 2020 2020 2020 2020 2020 2065  _).            e
-0001d410: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
-0001d420: 2020 2020 206c 7374 2e73 6f72 7428 7265       lst.sort(re
-0001d430: 7665 7273 653d 7265 7665 7273 652c 6675  verse=reverse,fu
-0001d440: 6e63 3d66 756e 6329 0a20 2020 2020 2020  nc=func).       
-0001d450: 2072 6574 7572 6e20 6c73 740a 2020 2020   return lst.    
-0001d460: 2020 2020 2372 6574 7572 6e20 5b69 5b30      #return [i[0
-0001d470: 5d20 666f 7220 6920 696e 206c 7374 5d0a  ] for i in lst].
-0001d480: 0a0a 6465 6620 4d61 6356 3428 7372 632c  ..def MacV4(src,
-0001d490: 2a2a 6f70 7473 293a 0a20 2020 2027 2727  **opts):.    '''
-0001d4a0: 0a20 2020 2043 6865 636b 204d 6163 2061  .    Check Mac a
-0001d4b0: 6464 7265 7373 2066 6f72 6d61 7420 616e  ddress format an
-0001d4c0: 6420 636f 6e76 6572 740a 2020 2020 4865  d convert.    He
-0001d4d0: 7820 746f 2049 6e74 0a20 2020 2048 6578  x to Int.    Hex
-0001d4e0: 2074 6f20 4d61 6320 7374 7269 6e67 0a20   to Mac string. 
-0001d4f0: 2020 204d 6163 2073 7472 696e 6720 746f     Mac string to
-0001d500: 2049 6e74 0a20 2020 2073 796d 626f 6c20   Int.    symbol 
-0001d510: 3a20 6465 6661 756c 7420 273a 2720 6d61  : default ':' ma
-0001d520: 6320 6164 6472 6573 7320 7370 6c69 7465  c address splite
-0001d530: 7220 7379 6d62 6f6c 0a20 2020 206f 7574  r symbol.    out
-0001d540: 203a 0a20 2020 2020 2073 7472 203a 2064   :.      str : d
-0001d550: 6566 6175 6c74 203a 2058 583a 5858 3a58  efault : XX:XX:X
-0001d560: 583a 5858 3a58 5820 666f 726d 6174 0a20  X:XX:XX format. 
-0001d570: 2020 2020 2069 6e74 203a 2069 6e74 6567       int : integ
-0001d580: 6572 2066 6f72 6d61 740a 2020 2020 6465  er format.    de
-0001d590: 6661 756c 7420 3a20 4661 6c73 650a 2020  fault : False.  
-0001d5a0: 2020 6361 7365 203a 200a 2020 2020 2020    case : .      
-0001d5b0: 7570 7065 7220 3a20 7570 7065 7220 6361  upper : upper ca
-0001d5c0: 7365 206f 7574 7075 740a 2020 2020 2020  se output.      
-0001d5d0: 6c6f 7765 7220 3a20 6c6f 7765 7220 6361  lower : lower ca
-0001d5e0: 7365 206f 7574 7075 740a 2020 2020 2727  se output.    ''
-0001d5f0: 270a 2020 2020 7379 6d62 6f6c 3d6f 7074  '.    symbol=opt
-0001d600: 732e 6765 7428 2773 796d 626f 6c27 2c6f  s.get('symbol',o
-0001d610: 7074 732e 6765 7428 2773 796d 272c 273a  pts.get('sym',':
-0001d620: 2729 290a 2020 2020 6465 6661 756c 743d  ')).    default=
-0001d630: 6f70 7473 2e67 6574 2827 6465 6661 756c  opts.get('defaul
-0001d640: 7427 2c46 616c 7365 290a 2020 2020 6f75  t',False).    ou
-0001d650: 743d 6f70 7473 2e67 6574 2827 6f75 7427  t=opts.get('out'
-0001d660: 2c27 7374 7227 290a 2020 2020 6361 7365  ,'str').    case
-0001d670: 3d6f 7074 732e 6765 7428 2763 6173 6527  =opts.get('case'
-0001d680: 2c27 6c6f 7765 7227 290a 2020 2020 6465  ,'lower').    de
-0001d690: 6620 696e 7432 7374 7228 7372 632c 7379  f int2str(src,sy
-0001d6a0: 6d29 3a0a 2020 2020 2020 2020 7265 7475  m):.        retu
-0001d6b0: 726e 2027 3a27 2e6a 6f69 6e28 5b27 7b7d  rn ':'.join(['{}
-0001d6c0: 7b7d 272e 666f 726d 6174 2861 2c20 6229  {}'.format(a, b)
-0001d6d0: 2066 6f72 2061 2c20 6220 696e 207a 6970   for a, b in zip
-0001d6e0: 282a 5b69 7465 7228 277b 3a30 3132 787d  (*[iter('{:012x}
-0001d6f0: 272e 666f 726d 6174 2873 7263 2929 5d2a  '.format(src))]*
-0001d700: 3229 5d29 0a20 2020 2064 6566 2073 7472  2)]).    def str
-0001d710: 3269 6e74 2873 7263 293a 0a20 2020 2020  2int(src):.     
-0001d720: 2020 2072 6574 7572 6e20 696e 7428 7372     return int(sr
-0001d730: 632e 6c6f 7765 7228 292e 7265 706c 6163  c.lower().replac
-0001d740: 6528 272d 272c 2727 292e 7265 706c 6163  e('-','').replac
-0001d750: 6528 273a 272c 2727 292c 2031 3629 0a20  e(':',''), 16). 
-0001d760: 2020 2069 6620 5479 7065 4e61 6d65 2873     if TypeName(s
-0001d770: 7263 2920 3d3d 2027 6279 7465 7327 3a20  rc) == 'bytes': 
-0001d780: 0a20 2020 2020 2020 2069 6620 6c65 6e28  .        if len(
-0001d790: 7372 6329 203d 3d20 363a 2023 2066 6f72  src) == 6: # for
-0001d7a0: 6d61 7420 6227 5c78 3030 5c78 6465 345c  mat b'\x00\xde4\
-0001d7b0: 7865 662e 5c78 6634 270a 2020 2020 2020  xef.\xf4'.      
-0001d7c0: 2020 2020 2020 7372 633d 636f 6465 6373        src=codecs
-0001d7d0: 2e65 6e63 6f64 6528 7372 632c 2768 6578  .encode(src,'hex
-0001d7e0: 2729 2020 2320 666f 726d 6174 2062 2730  ')  # format b'0
-0001d7f0: 3064 6533 3465 6632 6566 3427 0a20 2020  0de34ef2ef4'.   
-0001d800: 2020 2020 2073 7263 3d53 7472 2873 7263       src=Str(src
-0001d810: 290a 2020 2020 6966 2069 7369 6e73 7461  ).    if isinsta
-0001d820: 6e63 6528 7372 632c 7374 7229 3a0a 2020  nce(src,str):.  
-0001d830: 2020 2020 2020 7372 633d 7372 632e 7374        src=src.st
-0001d840: 7269 7028 290a 2020 2020 2020 2020 2320  rip().        # 
-0001d850: 6d61 6b65 2073 7572 6520 7468 6520 666f  make sure the fo
-0001d860: 726d 6174 0a20 2020 2020 2020 2069 6620  rmat.        if 
-0001d870: 3132 203c 3d20 6c65 6e28 7372 6329 203c  12 <= len(src) <
-0001d880: 3d20 3137 3a0a 2020 2020 2020 2020 2020  = 17:.          
-0001d890: 2020 666f 7220 6920 696e 205b 273a 272c    for i in [':',
-0001d8a0: 272d 275d 3a0a 2020 2020 2020 2020 2020  '-']:.          
-0001d8b0: 2020 2020 2020 7372 633d 7372 632e 7265        src=src.re
-0001d8c0: 706c 6163 6528 692c 2727 290a 2020 2020  place(i,'').    
-0001d8d0: 2020 2020 2020 2020 7372 633d 4a6f 696e          src=Join
-0001d8e0: 285b 7372 635b 693a 692b 325d 2066 6f72  ([src[i:i+2] for
-0001d8f0: 2069 2069 6e20 7261 6e67 6528 302c 3132   i in range(0,12
-0001d900: 2c32 295d 2c73 796d 626f 6c3d 273a 2729  ,2)],symbol=':')
-0001d910: 0a20 2020 2020 2020 2023 2043 6865 636b  .        # Check
-0001d920: 2074 6865 206e 6f72 6d61 6c20 6d61 6320   the normal mac 
-0001d930: 666f 726d 6174 0a20 2020 2020 2020 206f  format.        o
-0001d940: 6374 6574 7320 3d20 7372 632e 7370 6c69  ctets = src.spli
-0001d950: 7428 273a 2729 0a20 2020 2020 2020 2069  t(':').        i
-0001d960: 6620 6c65 6e28 6f63 7465 7473 2920 213d  f len(octets) !=
-0001d970: 2036 3a20 7265 7475 726e 2064 6566 6175   6: return defau
-0001d980: 6c74 0a20 2020 2020 2020 2066 6f72 2069  lt.        for i
-0001d990: 2069 6e20 6f63 7465 7473 3a0a 2020 2020   in octets:.    
-0001d9a0: 2020 2020 2020 2020 7472 793a 0a20 2020          try:.   
-0001d9b0: 2020 2020 2020 2020 2020 2020 6966 206c              if l
-0001d9c0: 656e 2869 2920 213d 2032 206f 7220 696e  en(i) != 2 or in
-0001d9d0: 7428 692c 2031 3629 203e 2032 3535 3a0a  t(i, 16) > 255:.
-0001d9e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001d9f0: 2020 2072 6574 7572 6e20 6465 6661 756c     return defaul
-0001da00: 740a 2020 2020 2020 2020 2020 2020 6578  t.            ex
-0001da10: 6365 7074 3a0a 2020 2020 2020 2020 2020  cept:.          
-0001da20: 2020 2020 2072 6574 7572 6e20 6465 6661       return defa
-0001da30: 756c 740a 2020 2020 2020 2020 6966 206f  ult.        if o
-0001da40: 7574 2069 6e20 5b69 6e74 2c27 696e 7427  ut in [int,'int'
-0001da50: 2c27 6e75 6d62 6572 275d 3a20 7265 7475  ,'number']: retu
-0001da60: 726e 2073 7472 3269 6e74 2873 7263 290a  rn str2int(src).
-0001da70: 2020 2020 2020 2020 6966 2073 796d 626f          if symbo
-0001da80: 6c20 213d 2027 3a27 3a20 7372 633d 7372  l != ':': src=sr
-0001da90: 632e 7265 706c 6163 6528 273a 272c 7379  c.replace(':',sy
-0001daa0: 6d62 6f6c 290a 2020 2020 2020 2020 6966  mbol).        if
-0001dab0: 2063 6173 6520 3d3d 2027 7570 7065 7227   case == 'upper'
-0001dac0: 3a20 7265 7475 726e 2073 7263 2e75 7070  : return src.upp
-0001dad0: 6572 2829 0a20 2020 2020 2020 2072 6574  er().        ret
-0001dae0: 7572 6e20 7372 632e 6c6f 7765 7228 290a  urn src.lower().
-0001daf0: 2020 2020 656c 6966 2069 7369 6e73 7461      elif isinsta
-0001db00: 6e63 6528 7372 632c 696e 7429 3a0a 2020  nce(src,int):.  
-0001db10: 2020 2020 2020 6966 206f 7574 2069 6e20        if out in 
-0001db20: 5b69 6e74 2c27 696e 7427 2c27 6e75 6d62  [int,'int','numb
-0001db30: 6572 275d 3a20 7265 7475 726e 2073 7263  er']: return src
-0001db40: 0a20 2020 2020 2020 2073 7263 3d69 6e74  .        src=int
-0001db50: 3273 7472 2873 7263 2c73 796d 626f 6c29  2str(src,symbol)
-0001db60: 0a20 2020 2020 2020 2069 6620 6361 7365  .        if case
-0001db70: 203d 3d20 2775 7070 6572 273a 2072 6574   == 'upper': ret
-0001db80: 7572 6e20 7372 632e 7570 7065 7228 290a  urn src.upper().
-0001db90: 2020 2020 2020 2020 7265 7475 726e 2073          return s
-0001dba0: 7263 2e6c 6f77 6572 2829 0a20 2020 2072  rc.lower().    r
-0001dbb0: 6574 7572 6e20 6465 6661 756c 740a 0a64  eturn default..d
-0001dbc0: 6566 2050 6174 6828 2a69 6e70 2c2a 2a6f  ef Path(*inp,**o
-0001dbd0: 7074 7329 3a0a 2020 2020 2727 270a 2020  pts):.    '''.  
-0001dbe0: 2020 4765 7420 5061 7468 206f 6620 696e    Get Path of in
-0001dbf0: 7075 740a 2020 2020 696e 7075 7473 290a  put.    inputs).
-0001dc00: 2020 2020 2020 207e 2020 2020 2020 203a         ~       :
-0001dc10: 2068 6f6d 6520 7061 7468 0a20 2020 2020   home path.     
-0001dc20: 2020 7e3c 7573 6572 3e20 3a20 7573 6572    ~<user> : user
-0001dc30: 2773 2068 6f6d 6520 7061 7468 0a20 2020  's home path.   
-0001dc40: 2020 2020 4e6f 6e65 2020 2020 3a20 6375      None    : cu
-0001dc50: 7272 656e 7420 7061 7468 0a20 2020 2020  rrent path.     
-0001dc60: 2020 5f5f 6669 6c65 5f5f 3a20 6375 7272    __file__: curr
-0001dc70: 656e 7420 7079 7468 6f6e 2073 6372 6970  ent python scrip
-0001dc80: 7420 6669 6c65 2070 6174 680a 2020 2020  t file path.    
-0001dc90: 2020 205f 5f6d 6f64 5f5f 203a 2054 6869     __mod__ : Thi
-0001dca0: 7320 7079 7468 6f6e 2073 6372 6970 7420  s python script 
-0001dcb0: 6669 6c65 2070 6174 680a 2020 2020 2020  file path.      
-0001dcc0: 2066 696c 6520 2020 203a 2074 6865 2066   file    : the f
-0001dcd0: 696c 6527 7320 7061 7468 0a20 2020 2020  ile's path.     
-0001dce0: 2020 5b6c 6973 745d 2020 3a20 636f 6e76    [list]  : conv
-0001dcf0: 6572 7420 746f 2070 6174 6820 7275 6c65  ert to path rule
-0001dd00: 200a 2020 2020 2020 206f 626a 2020 2020   .       obj    
-0001dd10: 203a 2073 7570 706f 7274 2066 756e 6374   : support funct
-0001dd20: 696f 6e2c 206d 6f64 756c 652c 2063 6c61  ion, module, cla
-0001dd30: 7373 2c20 696e 7374 616e 6365 0a0a 2020  ss, instance..  
-0001dd40: 2020 7265 6d6f 7665 5f64 6f74 203a 200a    remove_dot : .
-0001dd50: 2020 2020 2020 5472 7565 203a 2028 6465        True : (de
-0001dd60: 6661 756c 7429 202f 612f 622f 2e2f 2e2e  fault) /a/b/./..
-0001dd70: 2f63 203d 3e20 2f61 2f63 0a20 2020 2020  /c => /a/c.     
-0001dd80: 2046 616c 7365 3a20 2f61 2f62 2f2e 2f2e   False: /a/b/./.
-0001dd90: 2e2f 6320 3d3e 202f 612f 622f 2e2f 2e2e  ./c => /a/b/./..
-0001dda0: 2f63 0a20 2020 2065 7272 6f72 203a 200a  /c.    error : .
-0001ddb0: 2020 2020 2020 4661 6c73 653a 2064 6566        False: def
-0001ddc0: 6175 6c74 2c20 6966 2070 6174 6820 6973  ault, if path is
-0001ddd0: 7375 6520 7468 656e 2072 6574 7572 6e20  sue then return 
-0001dde0: 6572 726f 720a 2020 2020 2020 5472 7565  error.      True
-0001ddf0: 203a 2069 6620 7061 7468 2069 7373 7565   : if path issue
-0001de00: 2074 6865 6e20 6967 6e6f 7265 0a20 2020   then ignore.   
-0001de10: 206f 7574 203a 0a20 2020 2020 7374 7220   out :.     str 
-0001de20: 3a20 6465 6661 756c 743a 2072 6574 7572  : default: retur
-0001de30: 6e20 7061 7468 2073 7472 696e 670a 2020  n path string.  
-0001de40: 2020 206c 6973 743a 2072 6574 7572 6e20     list: return 
-0001de50: 6c69 7374 2066 6f72 6d61 740a 2020 2020  list format.    
-0001de60: 2020 202d 2066 6f72 6365 5f72 6f6f 7420     - force_root 
-0001de70: 3a20 6465 6661 756c 7420 4661 6c73 652c  : default False,
-0001de80: 2054 7275 653a 205b 2727 2c27 6127 2c27   True: ['','a','
-0001de90: 6227 5d20 6f72 205b 2761 272c 2762 275d  b'] or ['a','b']
-0001dea0: 203d 3e20 272f 612f 6227 0a0a 2020 2020   => '/a/b'..    
-0001deb0: 2027 2f61 2f62 2f63 2720 3d3e 205b 2727   '/a/b/c' => [''
-0001dec0: 2c27 6127 2c27 6227 2c27 6327 5d20 286f  ,'a','b','c'] (o
-0001ded0: 7574 3d6c 6973 7429 0a20 2020 2020 2761  ut=list).     'a
-0001dee0: 2f62 2f63 2720 203d 3e20 5b27 6127 2c27  /b/c'  => ['a','
-0001def0: 6227 2c27 6327 5d20 2020 2028 6f75 743d  b','c']    (out=
-0001df00: 6c69 7374 290a 2020 2020 205b 2727 2c27  list).     ['','
-0001df10: 6127 2c27 6227 2c27 6327 5d20 203d 3e20  a','b','c']  => 
-0001df20: 272f 612f 622f 6327 286f 7574 3d73 7472  '/a/b/c'(out=str
-0001df30: 290a 2020 2020 205b 2761 272c 2762 272c  ).     ['a','b',
-0001df40: 2763 275d 2020 2020 203d 3e20 2761 2f62  'c']     => 'a/b
-0001df50: 2f63 2720 286f 7574 3d73 7472 290a 2020  /c' (out=str).  
-0001df60: 2020 2727 270a 2020 2020 7379 6d3d 6f70    '''.    sym=op
-0001df70: 7473 2e67 6574 2827 7379 6d27 2c27 2f27  ts.get('sym','/'
-0001df80: 290a 2020 2020 6f75 743d 6f70 7473 2e67  ).    out=opts.g
-0001df90: 6574 2827 6f75 7427 2c27 7374 7227 290a  et('out','str').
-0001dfa0: 2020 2020 6578 6973 743d 6f70 7473 2e67      exist=opts.g
-0001dfb0: 6574 2827 6578 6973 7427 2c46 616c 7365  et('exist',False
-0001dfc0: 290a 2020 2020 6465 6661 756c 743d 6f70  ).    default=op
-0001dfd0: 7473 2e67 6574 2827 6465 6661 756c 7427  ts.get('default'
-0001dfe0: 2c46 616c 7365 290a 2020 2020 7265 6d6f  ,False).    remo
-0001dff0: 7665 5f64 6f74 3d6f 7074 732e 6765 7428  ve_dot=opts.get(
-0001e000: 2772 656d 6f76 655f 646f 7427 2c54 7275  'remove_dot',Tru
-0001e010: 6529 0a20 2020 2065 7272 3d6f 7074 732e  e).    err=opts.
-0001e020: 6765 7428 2765 7272 272c 6f70 7473 2e67  get('err',opts.g
-0001e030: 6574 2827 6572 726f 7227 2c46 616c 7365  et('error',False
-0001e040: 2929 0a20 2020 2064 6566 6175 6c74 3d6f  )).    default=o
-0001e050: 7074 732e 6765 7428 2764 6566 6175 6c74  pts.get('default
-0001e060: 272c 4661 6c73 6529 0a20 2020 2062 6173  ',False).    bas
-0001e070: 655f 6469 723d 4e6f 6e65 0a20 2020 2069  e_dir=None.    i
-0001e080: 6620 6e6f 7420 696e 703a 0a20 2020 2020  f not inp:.     
-0001e090: 2020 2062 6173 655f 6469 723d 6f73 2e65     base_dir=os.e
-0001e0a0: 6e76 6972 6f6e 5b27 5057 4427 5d0a 2020  nviron['PWD'].  
-0001e0b0: 2020 656c 6966 2069 6e70 3a0a 2020 2020    elif inp:.    
-0001e0c0: 2020 2020 6966 2069 7369 6e73 7461 6e63      if isinstanc
-0001e0d0: 6528 696e 705b 305d 2c73 7472 293a 0a20  e(inp[0],str):. 
-0001e0e0: 2020 2020 2020 2020 2020 2069 6620 6f73             if os
-0001e0f0: 2e70 6174 682e 6973 6669 6c65 2869 6e70  .path.isfile(inp
-0001e100: 5b30 5d29 3a0a 2020 2020 2020 2020 2020  [0]):.          
-0001e110: 2020 2020 2020 6261 7365 5f64 6972 3d6f        base_dir=o
-0001e120: 732e 7061 7468 2e64 6972 6e61 6d65 286f  s.path.dirname(o
-0001e130: 732e 7061 7468 2e61 6273 7061 7468 2869  s.path.abspath(i
-0001e140: 6e70 5b30 5d29 290a 2020 2020 2020 2020  np[0])).        
-0001e150: 2020 2020 656c 6966 2069 6e70 5b30 5d20      elif inp[0] 
-0001e160: 3d3d 2027 5f5f 6d6f 645f 5f27 3a0a 2020  == '__mod__':.  
-0001e170: 2020 2020 2020 2020 2020 2020 2020 2354                #T
-0001e180: 6869 7320 6d6f 6475 6c65 2070 6174 680a  his module path.
-0001e190: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001e1a0: 6261 7365 5f64 6972 3d6f 732e 7061 7468  base_dir=os.path
-0001e1b0: 2e64 6972 6e61 6d65 286f 732e 7061 7468  .dirname(os.path
-0001e1c0: 2e61 6273 7061 7468 285f 5f66 696c 655f  .abspath(__file_
-0001e1d0: 5f29 2920 2320 4e6f 7420 696e 7075 7420  _)) # Not input 
-0001e1e0: 7468 656e 2067 6574 2063 7572 7265 6e74  then get current
-0001e1f0: 2070 6174 680a 2020 2020 2020 2020 2020   path.          
-0001e200: 2020 656c 6966 2069 6e70 5b30 5d20 3d3d    elif inp[0] ==
-0001e210: 2027 5f5f 6669 6c65 5f5f 273a 0a20 2020   '__file__':.   
-0001e220: 2020 2020 2020 2020 2020 2020 2023 4765               #Ge
-0001e230: 7420 4361 6c6c 6572 2066 756e 6374 696f  t Caller functio
-0001e240: 6e27 7320 4669 6c65 6e61 6d65 0a20 2020  n's Filename.   
-0001e250: 2020 2020 2020 2020 2020 2020 206d 795f               my_
-0001e260: 6669 6c65 3d69 6e73 7065 6374 2e67 6574  file=inspect.get
-0001e270: 6669 6c65 2846 756e 6374 696f 6e4e 616d  file(FunctionNam
-0001e280: 6528 7061 7265 6e74 3d31 2c6f 626a 3d54  e(parent=1,obj=T
-0001e290: 7275 6529 5b31 5d29 200a 2020 2020 2020  rue)[1]) .      
-0001e2a0: 2020 2020 2020 2020 2020 6261 7365 5f64            base_d
-0001e2b0: 6972 3d6f 732e 7061 7468 2e64 6972 6e61  ir=os.path.dirna
-0001e2c0: 6d65 286f 732e 7061 7468 2e61 6273 7061  me(os.path.abspa
-0001e2d0: 7468 286d 795f 6669 6c65 2929 2023 2047  th(my_file)) # G
-0001e2e0: 6574 2066 696c 656e 616d 6520 7061 7468  et filename path
-0001e2f0: 0a20 2020 2020 2020 2020 2020 2065 6c73  .            els
-0001e300: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
-0001e310: 2020 2062 6173 655f 6469 723d 696e 705b     base_dir=inp[
-0001e320: 305d 0a20 2020 2020 2020 2065 6c69 6620  0].        elif 
-0001e330: 5479 7065 2869 6e70 5b30 5d2c 2827 6675  Type(inp[0],('fu
-0001e340: 6e63 7469 6f6e 272c 276d 6f64 756c 6527  nction','module'
-0001e350: 2c27 636c 6173 736f 626a 272c 2769 6e73  ,'classobj','ins
-0001e360: 7461 6e63 6527 2929 3a0a 2020 2020 2020  tance')):.      
-0001e370: 2020 2020 2020 6d79 5f66 696c 653d 696e        my_file=in
-0001e380: 7370 6563 742e 6765 7466 696c 6528 696e  spect.getfile(in
-0001e390: 705b 305d 2920 2320 4765 7420 6f62 6a27  p[0]) # Get obj'
-0001e3a0: 7320 6669 6c65 6e61 6d65 0a20 2020 2020  s filename.     
-0001e3b0: 2020 2020 2020 2062 6173 655f 6469 723d         base_dir=
-0001e3c0: 6f73 2e70 6174 682e 6469 726e 616d 6528  os.path.dirname(
-0001e3d0: 6f73 2e70 6174 682e 6162 7370 6174 6828  os.path.abspath(
-0001e3e0: 6d79 5f66 696c 6529 2920 200a 2020 2020  my_file))  .    
-0001e3f0: 6675 6c6c 5f70 6174 683d 5b5d 0a20 2020  full_path=[].   
-0001e400: 2069 6620 6973 696e 7374 616e 6365 2862   if isinstance(b
-0001e410: 6173 655f 6469 722c 7374 7229 3a0a 2020  ase_dir,str):.  
-0001e420: 2020 2020 2020 6675 6c6c 5f70 6174 683d        full_path=
-0001e430: 6261 7365 5f64 6972 2e73 706c 6974 2873  base_dir.split(s
-0001e440: 796d 290a 2020 2020 656c 6966 2069 7369  ym).    elif isi
-0001e450: 6e73 7461 6e63 6528 696e 705b 305d 2c28  nstance(inp[0],(
-0001e460: 6c69 7374 2c74 7570 6c65 2929 3a0a 2020  list,tuple)):.  
-0001e470: 2020 2020 2020 6675 6c6c 5f70 6174 683d        full_path=
-0001e480: 6c69 7374 2869 6e70 5b30 5d29 0a20 2020  list(inp[0]).   
-0001e490: 2069 6620 6675 6c6c 5f70 6174 683a 0a20   if full_path:. 
-0001e4a0: 2020 2020 2020 2069 6620 6675 6c6c 5f70         if full_p
-0001e4b0: 6174 685b 305d 203d 3d20 277e 2720 6f72  ath[0] == '~' or
-0001e4c0: 2028 6675 6c6c 5f70 6174 685b 305d 2061   (full_path[0] a
-0001e4d0: 6e64 2066 756c 6c5f 7061 7468 5b30 5d5b  nd full_path[0][
-0001e4e0: 305d 203d 3d20 277e 2729 3a20 2020 2020  0] == '~'):     
-0001e4f0: 2023 207e 206f 7220 7e3c 7573 6572 3e20   # ~ or ~<user> 
-0001e500: 7374 796c 650a 2020 2020 2020 2020 2020  style.          
-0001e510: 2020 2366 756c 6c5f 7061 7468 3d6f 732e    #full_path=os.
-0001e520: 656e 7669 726f 6e5b 2748 4f4d 4527 5d2e  environ['HOME'].
-0001e530: 7370 6c69 7428 7379 6d29 2b66 756c 6c5f  split(sym)+full_
-0001e540: 7061 7468 5b31 3a5d 0a20 2020 2020 2020  path[1:].       
-0001e550: 2020 2020 2066 756c 6c5f 7061 7468 3d6f       full_path=o
-0001e560: 732e 7061 7468 2e65 7870 616e 6475 7365  s.path.expanduse
-0001e570: 7228 6675 6c6c 5f70 6174 685b 305d 292e  r(full_path[0]).
-0001e580: 7370 6c69 7428 7379 6d29 2b66 756c 6c5f  split(sym)+full_
-0001e590: 7061 7468 5b31 3a5d 0a23 2020 2020 2020  path[1:].#      
-0001e5a0: 2020 656c 6966 2066 756c 6c5f 7061 7468    elif full_path
-0001e5b0: 5b30 5d20 616e 6420 6675 6c6c 5f70 6174  [0] and full_pat
-0001e5c0: 685b 305d 5b30 5d20 3d3d 2027 7e27 3a20  h[0][0] == '~': 
-0001e5d0: 2320 7e3c 7573 6572 3e20 7374 796c 650a  # ~<user> style.
-0001e5e0: 2320 2020 2020 2020 2020 2020 2066 756c  #            ful
-0001e5f0: 6c5f 7061 7468 3d6f 732e 7061 7468 2e65  l_path=os.path.e
-0001e600: 7870 616e 6475 7365 7228 6675 6c6c 5f70  xpanduser(full_p
-0001e610: 6174 685b 305d 292e 7370 6c69 7428 7379  ath[0]).split(sy
-0001e620: 6d29 2b66 756c 6c5f 7061 7468 5b31 3a5d  m)+full_path[1:]
-0001e630: 0a20 2020 2069 6620 7265 6d6f 7665 5f64  .    if remove_d
-0001e640: 6f74 3a0a 2020 2020 2020 2020 6e66 703d  ot:.        nfp=
-0001e650: 5b5d 0a20 2020 2020 2020 2066 6f72 2069  [].        for i
-0001e660: 2069 6e20 6675 6c6c 5f70 6174 683a 0a20   in full_path:. 
-0001e670: 2020 2020 2020 2020 2020 2069 6620 6920             if i 
-0001e680: 3d3d 2027 2e2e 273a 2023 7265 6d6f 7665  == '..': #remove
-0001e690: 2027 2e2e 270a 2020 2020 2020 2020 2020   '..'.          
-0001e6a0: 2020 2020 2020 6966 206e 6670 3a0a 2020        if nfp:.  
-0001e6b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001e6c0: 2020 236b 6565 7020 726f 6f74 2070 6174    #keep root pat
-0001e6d0: 6820 2827 2f27 290a 2020 2020 2020 2020  h ('/').        
-0001e6e0: 2020 2020 2020 2020 2020 2020 6966 206c              if l
-0001e6f0: 656e 286e 6670 293d 3d31 3a0a 2020 2020  en(nfp)==1:.    
-0001e700: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001e710: 2020 2020 6966 206e 6670 5b30 5d3a 0a20      if nfp[0]:. 
-0001e720: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001e730: 2020 2020 2020 2020 2020 2064 656c 206e             del n
-0001e740: 6670 5b2d 315d 0a20 2020 2020 2020 2020  fp[-1].         
-0001e750: 2020 2020 2020 2020 2020 2020 2020 2065                 e
-0001e760: 6c69 6620 6572 723a 0a20 2020 2020 2020  lif err:.       
-0001e770: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001e780: 2020 2020 2072 6574 7572 6e20 6465 6661       return defa
-0001e790: 756c 740a 2020 2020 2020 2020 2020 2020  ult.            
-0001e7a0: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
-0001e7b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001e7c0: 2020 2020 2020 6465 6c20 6e66 705b 2d31        del nfp[-1
-0001e7d0: 5d0a 2020 2020 2020 2020 2020 2020 2020  ].              
-0001e7e0: 2020 656c 6966 2065 7272 3a0a 2020 2020    elif err:.    
-0001e7f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001e800: 7265 7475 726e 2064 6566 6175 6c74 0a20  return default. 
-0001e810: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
-0001e820: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001e830: 2069 6620 6920 213d 2027 2e27 3a20 2372   if i != '.': #r
-0001e840: 656d 6f76 6520 272e 270a 2020 2020 2020  emove '.'.      
-0001e850: 2020 2020 2020 2020 2020 2020 2020 6e66                nf
-0001e860: 702e 6170 7065 6e64 2869 290a 2020 2020  p.append(i).    
-0001e870: 2020 2020 6675 6c6c 5f70 6174 683d 6e66      full_path=nf
-0001e880: 700a 2020 2020 666f 7220 6969 2069 6e20  p.    for ii in 
-0001e890: 696e 705b 313a 5d3a 2023 2061 6464 2065  inp[1:]: # add e
-0001e8a0: 7874 7261 2069 6e70 7574 0a20 2020 2020  xtra input.     
-0001e8b0: 2020 2069 6620 6973 696e 7374 616e 6365     if isinstance
-0001e8c0: 2869 692c 7374 7229 3a0a 2020 2020 2020  (ii,str):.      
-0001e8d0: 2020 2020 2020 666f 7220 7a7a 2069 6e20        for zz in 
-0001e8e0: 6969 2e73 706c 6974 2873 796d 293a 0a20  ii.split(sym):. 
-0001e8f0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-0001e900: 6620 7265 6d6f 7665 5f64 6f74 3a0a 2020  f remove_dot:.  
-0001e910: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001e920: 2020 6966 207a 7a20 3d3d 2027 2e27 206f    if zz == '.' o
-0001e930: 7220 6e6f 7420 5479 7065 287a 7a2c 2773  r not Type(zz,'s
-0001e940: 7472 272c 6461 7461 3d54 7275 6529 3a20  tr',data=True): 
-0001e950: 636f 6e74 696e 7565 0a20 2020 2020 2020  continue.       
-0001e960: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-0001e970: 7a7a 203d 3d20 272e 2e27 3a0a 2020 2020  zz == '..':.    
-0001e980: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001e990: 2020 2020 6966 2066 756c 6c5f 7061 7468      if full_path
-0001e9a0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-0001e9b0: 2020 2020 2020 2020 2020 2020 2020 236b                #k
-0001e9c0: 6565 7020 726f 6f74 2070 6174 6820 2827  eep root path ('
-0001e9d0: 2f27 290a 2020 2020 2020 2020 2020 2020  /').            
-0001e9e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001e9f0: 6966 206c 656e 2866 756c 6c5f 7061 7468  if len(full_path
-0001ea00: 293d 3d31 3a0a 2020 2020 2020 2020 2020  )==1:.          
+0001cbe0: 2020 2072 6574 7572 6e20 4661 6c73 652c     return False,
+0001cbf0: 224d 6973 6d61 7463 6865 6420 696e 7075  "Mismatched inpu
+0001cc00: 7420 2874 7570 6c65 2f6c 6973 7429 206e  t (tuple/list) n
+0001cc10: 756d 6265 7220 2872 6571 7569 7265 3a7b  umber (require:{
+0001cc20: 7d2c 2069 6e70 7574 3a7b 7d29 222e 666f  }, input:{})".fo
+0001cc30: 726d 6174 286c 656e 2874 6d70 292c 6c65  rmat(len(tmp),le
+0001cc40: 6e28 696e 7073 2929 0a20 2020 2020 2020  n(inps)).       
+0001cc50: 2020 2020 2020 2020 2065 6c69 6620 6f70           elif op
+0001cc60: 7473 3a0a 2020 2020 2020 2020 2020 2020  ts:.            
+0001cc70: 2020 2020 2020 2020 6966 206c 656e 2874          if len(t
+0001cc80: 6d70 2920 3d3d 206c 656e 286f 7074 7329  mp) == len(opts)
+0001cc90: 3a20 7265 7475 726e 2073 7472 696e 672e  : return string.
+0001cca0: 666f 726d 6174 282a 6f70 7473 2e76 616c  format(*opts.val
+0001ccb0: 7565 7328 2929 0a20 2020 2020 2020 2020  ues()).         
+0001ccc0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+0001ccd0: 6e20 4661 6c73 652c 224d 6973 6d61 7463  n False,"Mismatc
+0001cce0: 6865 6420 696e 7075 7420 2874 7570 6c65  hed input (tuple
+0001ccf0: 2f6c 6973 7429 206e 756d 6265 7220 2872  /list) number (r
+0001cd00: 6571 7569 7265 3a7b 7d2c 2069 6e70 7574  equire:{}, input
+0001cd10: 3a7b 7d29 222e 666f 726d 6174 286c 656e  :{})".format(len
+0001cd20: 2874 6d70 292c 6c65 6e28 6f70 7473 2929  (tmp),len(opts))
+0001cd30: 0a20 2020 2020 2020 2069 2b3d 310a 2020  .        i+=1.  
+0001cd40: 2020 7265 7475 726e 2054 7275 652c 7374    return True,st
+0001cd50: 7269 6e67 0a0a 6465 6620 536f 7274 2873  ring..def Sort(s
+0001cd60: 7263 2c72 6576 6572 7365 3d46 616c 7365  rc,reverse=False
+0001cd70: 2c66 756e 633d 4e6f 6e65 2c6f 7264 6572  ,func=None,order
+0001cd80: 3d4e 6f6e 652c 6669 656c 643d 4e6f 6e65  =None,field=None
+0001cd90: 2c62 6173 653d 276b 6579 272c 7379 6d3d  ,base='key',sym=
+0001cda0: 4e6f 6e65 293a 0a20 2020 2069 6620 6973  None):.    if is
+0001cdb0: 696e 7374 616e 6365 2873 7263 2c73 7472  instance(src,str
+0001cdc0: 2920 616e 6420 6e6f 7420 4973 4e6f 6e65  ) and not IsNone
+0001cdd0: 2873 796d 293a 2073 7263 3d73 7263 2e73  (sym): src=src.s
+0001cde0: 706c 6974 2873 796d 290a 2020 2020 6966  plit(sym).    if
+0001cdf0: 2069 7369 6e73 7461 6e63 6528 7372 632c   isinstance(src,
+0001ce00: 6469 6374 2920 616e 6420 6261 7365 2069  dict) and base i
+0001ce10: 6e20 5b27 6461 7461 272c 2776 616c 7565  n ['data','value
+0001ce20: 275d 3a0a 2020 2020 2020 2020 6669 656c  ']:.        fiel
+0001ce30: 643d 310a 2020 2020 6465 6620 5f63 6c65  d=1.    def _cle
+0001ce40: 6e5f 2865 293a 0a20 2020 2020 2020 2074  n_(e):.        t
+0001ce50: 7279 3a0a 2020 2020 2020 2020 2020 2020  ry:.            
+0001ce60: 6966 2069 7369 6e73 7461 6e63 6528 6669  if isinstance(fi
+0001ce70: 656c 642c 696e 7429 3a0a 2020 2020 2020  eld,int):.      
+0001ce80: 2020 2020 2020 2020 2020 6966 2069 7369            if isi
+0001ce90: 6e73 7461 6e63 6528 652c 286c 6973 742c  nstance(e,(list,
+0001cea0: 7475 706c 6529 2920 616e 6420 6c65 6e28  tuple)) and len(
+0001ceb0: 6529 203e 2066 6965 6c64 3a0a 2020 2020  e) > field:.    
+0001cec0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001ced0: 7265 7475 726e 206c 656e 2827 7b7d 272e  return len('{}'.
+0001cee0: 666f 726d 6174 2853 7472 2865 5b66 6965  format(Str(e[fie
+0001cef0: 6c64 5d29 2929 0a20 2020 2020 2020 2020  ld]))).         
+0001cf00: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
+0001cf10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001cf20: 2072 6574 7572 6e20 3939 3939 3939 390a   return 9999999.
+0001cf30: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+0001cf40: 726e 206c 656e 2827 7b7d 272e 666f 726d  rn len('{}'.form
+0001cf50: 6174 2853 7472 2865 2929 290a 2020 2020  at(Str(e))).    
+0001cf60: 2020 2020 6578 6365 7074 3a0a 2020 2020      except:.    
+0001cf70: 2020 2020 2020 2020 7265 7475 726e 2065          return e
+0001cf80: 0a20 2020 2064 6566 205f 6369 6e74 5f28  .    def _cint_(
+0001cf90: 6529 3a0a 2020 2020 2020 2020 7472 793a  e):.        try:
+0001cfa0: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+0001cfb0: 6973 696e 7374 616e 6365 2866 6965 6c64  isinstance(field
+0001cfc0: 2c69 6e74 293a 0a20 2020 2020 2020 2020  ,int):.         
+0001cfd0: 2020 2020 2020 2069 6620 6973 696e 7374         if isinst
+0001cfe0: 616e 6365 2865 2c28 6c69 7374 2c74 7570  ance(e,(list,tup
+0001cff0: 6c65 2929 2061 6e64 206c 656e 2865 2920  le)) and len(e) 
+0001d000: 3e20 6669 656c 643a 0a20 2020 2020 2020  > field:.       
+0001d010: 2020 2020 2020 2020 2020 2020 2072 6574               ret
+0001d020: 7572 6e20 696e 7428 655b 6669 656c 645d  urn int(e[field]
+0001d030: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+0001d040: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
+0001d050: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+0001d060: 726e 2039 3939 3939 3939 0a20 2020 2020  rn 9999999.     
+0001d070: 2020 2020 2020 2072 6574 7572 6e20 696e         return in
+0001d080: 7428 6529 0a20 2020 2020 2020 2065 7863  t(e).        exc
+0001d090: 6570 743a 0a20 2020 2020 2020 2020 2020  ept:.           
+0001d0a0: 2072 6574 7572 6e20 650a 2020 2020 6465   return e.    de
+0001d0b0: 6620 5f63 7374 725f 2865 293a 0a20 2020  f _cstr_(e):.   
+0001d0c0: 2020 2020 2069 6620 6973 696e 7374 616e       if isinstan
+0001d0d0: 6365 2866 6965 6c64 2c69 6e74 293a 0a20  ce(field,int):. 
+0001d0e0: 2020 2020 2020 2020 2020 2069 6620 6973             if is
+0001d0f0: 696e 7374 616e 6365 2865 2c28 6c69 7374  instance(e,(list
+0001d100: 2c74 7570 6c65 2929 2061 6e64 206c 656e  ,tuple)) and len
+0001d110: 2865 2920 3e20 6669 656c 643a 0a20 2020  (e) > field:.   
+0001d120: 2020 2020 2020 2020 2020 2020 2072 6574               ret
+0001d130: 7572 6e20 2727 277b 7d27 2727 2e66 6f72  urn '''{}'''.for
+0001d140: 6d61 7428 655b 6669 656c 645d 290a 2020  mat(e[field]).  
+0001d150: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
+0001d160: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001d170: 7265 7475 726e 2027 7a7a 7a7a 7a7a 7a7a  return 'zzzzzzzz
+0001d180: 7a27 0a20 2020 2020 2020 2072 6574 7572  z'.        retur
+0001d190: 6e20 2727 277b 7d27 2727 2e66 6f72 6d61  n '''{}'''.forma
+0001d1a0: 7428 6529 0a20 2020 2069 6620 6973 696e  t(e).    if isin
+0001d1b0: 7374 616e 6365 2873 7263 2c28 6c69 7374  stance(src,(list
+0001d1c0: 2c74 7570 6c65 2929 3a0a 2020 2020 2020  ,tuple)):.      
+0001d1d0: 2020 7372 633d 6c69 7374 2873 7263 290a    src=list(src).
+0001d1e0: 2020 2020 2020 2020 6966 206f 7264 6572          if order
+0001d1f0: 2069 6e20 5b69 6e74 2c27 696e 7427 2c27   in [int,'int','
+0001d200: 6469 6769 7427 2c27 6e75 6d62 6572 275d  digit','number']
+0001d210: 3a0a 2020 2020 2020 2020 2020 2020 7372  :.            sr
+0001d220: 632e 736f 7274 2872 6576 6572 7365 3d72  c.sort(reverse=r
+0001d230: 6576 6572 7365 2c6b 6579 3d5f 6369 6e74  everse,key=_cint
+0001d240: 5f29 0a20 2020 2020 2020 2065 6c69 6620  _).        elif 
+0001d250: 6f72 6465 7220 696e 205b 276c 656e 272c  order in ['len',
+0001d260: 276c 656e 6774 6827 5d3a 0a20 2020 2020  'length']:.     
+0001d270: 2020 2020 2020 2073 7263 2e73 6f72 7428         src.sort(
+0001d280: 7265 7665 7273 653d 7265 7665 7273 652c  reverse=reverse,
+0001d290: 6b65 793d 5f63 6c65 6e5f 290a 2020 2020  key=_clen_).    
+0001d2a0: 2020 2020 656c 6966 206f 7264 6572 2069      elif order i
+0001d2b0: 6e20 5b73 7472 2c27 7374 7227 5d3a 0a20  n [str,'str']:. 
+0001d2c0: 2020 2020 2020 2020 2020 2073 7263 2e73             src.s
+0001d2d0: 6f72 7428 7265 7665 7273 653d 7265 7665  ort(reverse=reve
+0001d2e0: 7273 652c 6b65 793d 5f63 7374 725f 290a  rse,key=_cstr_).
+0001d2f0: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
+0001d300: 2020 2020 2020 2020 2020 6966 2069 7369            if isi
+0001d310: 6e73 7461 6e63 6528 6669 656c 642c 696e  nstance(field,in
+0001d320: 7429 3a0a 2020 2020 2020 2020 2020 2020  t):.            
+0001d330: 2020 2020 7372 632e 736f 7274 2872 6576      src.sort(rev
+0001d340: 6572 7365 3d72 6576 6572 7365 2c6b 6579  erse=reverse,key
+0001d350: 3d5f 6369 6e74 5f29 0a20 2020 2020 2020  =_cint_).       
+0001d360: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
+0001d370: 2020 2020 2020 2020 2020 2073 7263 2e73             src.s
+0001d380: 6f72 7428 7265 7665 7273 653d 7265 7665  ort(reverse=reve
+0001d390: 7273 652c 6b65 793d 6675 6e63 290a 2020  rse,key=func).  
+0001d3a0: 2020 2020 2020 7265 7475 726e 2073 7263        return src
+0001d3b0: 0a20 2020 2065 6c69 6620 6973 696e 7374  .    elif isinst
+0001d3c0: 616e 6365 2873 7263 2c64 6963 7429 3a0a  ance(src,dict):.
+0001d3d0: 2020 2020 2020 2020 6c73 743d 6c69 7374          lst=list
+0001d3e0: 2873 7263 2e69 7465 6d73 2829 290a 2020  (src.items()).  
+0001d3f0: 2020 2020 2020 6966 2062 6173 6520 3d3d        if base ==
+0001d400: 2027 6b65 7927 3a0a 2020 2020 2020 2020   'key':.        
+0001d410: 2020 2020 6669 656c 643d 300a 2020 2020      field=0.    
+0001d420: 2020 2020 2020 2020 6966 206f 7264 6572          if order
+0001d430: 2069 6e20 5b69 6e74 2c27 696e 7427 2c27   in [int,'int','
+0001d440: 6469 6769 7427 2c27 6e75 6d62 6572 275d  digit','number']
+0001d450: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+0001d460: 2020 6c73 742e 736f 7274 2872 6576 6572    lst.sort(rever
+0001d470: 7365 3d72 6576 6572 7365 2c6b 6579 3d5f  se=reverse,key=_
+0001d480: 6369 6e74 5f29 0a20 2020 2020 2020 2020  cint_).         
+0001d490: 2020 2065 6c69 6620 6f72 6465 7220 696e     elif order in
+0001d4a0: 205b 276c 656e 272c 276c 656e 6774 6827   ['len','length'
+0001d4b0: 5d3a 0a20 2020 2020 2020 2020 2020 2020  ]:.             
+0001d4c0: 2020 206c 7374 2e73 6f72 7428 7265 7665     lst.sort(reve
+0001d4d0: 7273 653d 7265 7665 7273 652c 6b65 793d  rse=reverse,key=
+0001d4e0: 5f63 6c65 6e5f 290a 2020 2020 2020 2020  _clen_).        
+0001d4f0: 2020 2020 656c 6966 206f 7264 6572 2069      elif order i
+0001d500: 6e20 5b73 7472 2c27 7374 7227 5d3a 0a20  n [str,'str']:. 
+0001d510: 2020 2020 2020 2020 2020 2020 2020 206c                 l
+0001d520: 7374 2e73 6f72 7428 7265 7665 7273 653d  st.sort(reverse=
+0001d530: 7265 7665 7273 652c 6b65 793d 5f63 7374  reverse,key=_cst
+0001d540: 725f 290a 2020 2020 2020 2020 2020 2020  r_).            
+0001d550: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
+0001d560: 2020 2020 2020 6c73 742e 736f 7274 2872        lst.sort(r
+0001d570: 6576 6572 7365 3d72 6576 6572 7365 2c66  everse=reverse,f
+0001d580: 756e 633d 6675 6e63 290a 2020 2020 2020  unc=func).      
+0001d590: 2020 656c 7365 3a20 2320 7661 6c75 6520    else: # value 
+0001d5a0: 2f20 6461 7461 2063 6173 650a 2020 2020  / data case.    
+0001d5b0: 2020 2020 2020 2020 6669 656c 643d 310a          field=1.
+0001d5c0: 2020 2020 2020 2020 2020 2020 6966 206f              if o
+0001d5d0: 7264 6572 2069 6e20 5b69 6e74 2c27 696e  rder in [int,'in
+0001d5e0: 7427 2c27 6469 6769 7427 2c27 6e75 6d62  t','digit','numb
+0001d5f0: 6572 275d 3a0a 2020 2020 2020 2020 2020  er']:.          
+0001d600: 2020 2020 2020 6c73 742e 736f 7274 2872        lst.sort(r
+0001d610: 6576 6572 7365 3d72 6576 6572 7365 2c6b  everse=reverse,k
+0001d620: 6579 3d5f 6369 6e74 5f29 0a20 2020 2020  ey=_cint_).     
+0001d630: 2020 2020 2020 2065 6c69 6620 6f72 6465         elif orde
+0001d640: 7220 696e 205b 276c 656e 272c 276c 656e  r in ['len','len
+0001d650: 6774 6827 5d3a 0a20 2020 2020 2020 2020  gth']:.         
+0001d660: 2020 2020 2020 2072 6574 7572 6e20 6c73         return ls
+0001d670: 742e 736f 7274 2872 6576 6572 7365 3d72  t.sort(reverse=r
+0001d680: 6576 6572 7365 2c6b 6579 3d5f 636c 656e  everse,key=_clen
+0001d690: 5f29 0a20 2020 2020 2020 2020 2020 2065  _).            e
+0001d6a0: 6c69 6620 6f72 6465 7220 696e 205b 7374  lif order in [st
+0001d6b0: 722c 2773 7472 275d 3a0a 2020 2020 2020  r,'str']:.      
+0001d6c0: 2020 2020 2020 2020 2020 6c73 742e 736f            lst.so
+0001d6d0: 7274 2872 6576 6572 7365 3d72 6576 6572  rt(reverse=rever
+0001d6e0: 7365 2c6b 6579 3d5f 6373 7472 5f29 0a20  se,key=_cstr_). 
+0001d6f0: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
+0001d700: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001d710: 206c 7374 2e73 6f72 7428 7265 7665 7273   lst.sort(revers
+0001d720: 653d 7265 7665 7273 652c 6675 6e63 3d66  e=reverse,func=f
+0001d730: 756e 6329 0a20 2020 2020 2020 2072 6574  unc).        ret
+0001d740: 7572 6e20 6c73 740a 2020 2020 2020 2020  urn lst.        
+0001d750: 2372 6574 7572 6e20 5b69 5b30 5d20 666f  #return [i[0] fo
+0001d760: 7220 6920 696e 206c 7374 5d0a 0a0a 6465  r i in lst]...de
+0001d770: 6620 4d61 6356 3428 7372 632c 2a2a 6f70  f MacV4(src,**op
+0001d780: 7473 293a 0a20 2020 2027 2727 0a20 2020  ts):.    '''.   
+0001d790: 2043 6865 636b 204d 6163 2061 6464 7265   Check Mac addre
+0001d7a0: 7373 2066 6f72 6d61 7420 616e 6420 636f  ss format and co
+0001d7b0: 6e76 6572 740a 2020 2020 4865 7820 746f  nvert.    Hex to
+0001d7c0: 2049 6e74 0a20 2020 2048 6578 2074 6f20   Int.    Hex to 
+0001d7d0: 4d61 6320 7374 7269 6e67 0a20 2020 204d  Mac string.    M
+0001d7e0: 6163 2073 7472 696e 6720 746f 2049 6e74  ac string to Int
+0001d7f0: 0a20 2020 2073 796d 626f 6c20 3a20 6465  .    symbol : de
+0001d800: 6661 756c 7420 273a 2720 6d61 6320 6164  fault ':' mac ad
+0001d810: 6472 6573 7320 7370 6c69 7465 7220 7379  dress spliter sy
+0001d820: 6d62 6f6c 0a20 2020 206f 7574 203a 0a20  mbol.    out :. 
+0001d830: 2020 2020 2073 7472 203a 2064 6566 6175       str : defau
+0001d840: 6c74 203a 2058 583a 5858 3a58 583a 5858  lt : XX:XX:XX:XX
+0001d850: 3a58 5820 666f 726d 6174 0a20 2020 2020  :XX format.     
+0001d860: 2069 6e74 203a 2069 6e74 6567 6572 2066   int : integer f
+0001d870: 6f72 6d61 740a 2020 2020 6465 6661 756c  ormat.    defaul
+0001d880: 7420 3a20 4661 6c73 650a 2020 2020 6361  t : False.    ca
+0001d890: 7365 203a 200a 2020 2020 2020 7570 7065  se : .      uppe
+0001d8a0: 7220 3a20 7570 7065 7220 6361 7365 206f  r : upper case o
+0001d8b0: 7574 7075 740a 2020 2020 2020 6c6f 7765  utput.      lowe
+0001d8c0: 7220 3a20 6c6f 7765 7220 6361 7365 206f  r : lower case o
+0001d8d0: 7574 7075 740a 2020 2020 2727 270a 2020  utput.    '''.  
+0001d8e0: 2020 7379 6d62 6f6c 3d6f 7074 732e 6765    symbol=opts.ge
+0001d8f0: 7428 2773 796d 626f 6c27 2c6f 7074 732e  t('symbol',opts.
+0001d900: 6765 7428 2773 796d 272c 273a 2729 290a  get('sym',':')).
+0001d910: 2020 2020 6465 6661 756c 743d 6f70 7473      default=opts
+0001d920: 2e67 6574 2827 6465 6661 756c 7427 2c46  .get('default',F
+0001d930: 616c 7365 290a 2020 2020 6f75 743d 6f70  alse).    out=op
+0001d940: 7473 2e67 6574 2827 6f75 7427 2c27 7374  ts.get('out','st
+0001d950: 7227 290a 2020 2020 6361 7365 3d6f 7074  r').    case=opt
+0001d960: 732e 6765 7428 2763 6173 6527 2c27 6c6f  s.get('case','lo
+0001d970: 7765 7227 290a 2020 2020 6465 6620 696e  wer').    def in
+0001d980: 7432 7374 7228 7372 632c 7379 6d29 3a0a  t2str(src,sym):.
+0001d990: 2020 2020 2020 2020 7265 7475 726e 2027          return '
+0001d9a0: 3a27 2e6a 6f69 6e28 5b27 7b7d 7b7d 272e  :'.join(['{}{}'.
+0001d9b0: 666f 726d 6174 2861 2c20 6229 2066 6f72  format(a, b) for
+0001d9c0: 2061 2c20 6220 696e 207a 6970 282a 5b69   a, b in zip(*[i
+0001d9d0: 7465 7228 277b 3a30 3132 787d 272e 666f  ter('{:012x}'.fo
+0001d9e0: 726d 6174 2873 7263 2929 5d2a 3229 5d29  rmat(src))]*2)])
+0001d9f0: 0a20 2020 2064 6566 2073 7472 3269 6e74  .    def str2int
+0001da00: 2873 7263 293a 0a20 2020 2020 2020 2072  (src):.        r
+0001da10: 6574 7572 6e20 696e 7428 7372 632e 6c6f  eturn int(src.lo
+0001da20: 7765 7228 292e 7265 706c 6163 6528 272d  wer().replace('-
+0001da30: 272c 2727 292e 7265 706c 6163 6528 273a  ','').replace(':
+0001da40: 272c 2727 292c 2031 3629 0a20 2020 2069  ',''), 16).    i
+0001da50: 6620 5479 7065 4e61 6d65 2873 7263 2920  f TypeName(src) 
+0001da60: 3d3d 2027 6279 7465 7327 3a20 0a20 2020  == 'bytes': .   
+0001da70: 2020 2020 2069 6620 6c65 6e28 7372 6329       if len(src)
+0001da80: 203d 3d20 363a 2023 2066 6f72 6d61 7420   == 6: # format 
+0001da90: 6227 5c78 3030 5c78 6465 345c 7865 662e  b'\x00\xde4\xef.
+0001daa0: 5c78 6634 270a 2020 2020 2020 2020 2020  \xf4'.          
+0001dab0: 2020 7372 633d 636f 6465 6373 2e65 6e63    src=codecs.enc
+0001dac0: 6f64 6528 7372 632c 2768 6578 2729 2020  ode(src,'hex')  
+0001dad0: 2320 666f 726d 6174 2062 2730 3064 6533  # format b'00de3
+0001dae0: 3465 6632 6566 3427 0a20 2020 2020 2020  4ef2ef4'.       
+0001daf0: 2073 7263 3d53 7472 2873 7263 290a 2020   src=Str(src).  
+0001db00: 2020 6966 2069 7369 6e73 7461 6e63 6528    if isinstance(
+0001db10: 7372 632c 7374 7229 3a0a 2020 2020 2020  src,str):.      
+0001db20: 2020 7372 633d 7372 632e 7374 7269 7028    src=src.strip(
+0001db30: 290a 2020 2020 2020 2020 2320 6d61 6b65  ).        # make
+0001db40: 2073 7572 6520 7468 6520 666f 726d 6174   sure the format
+0001db50: 0a20 2020 2020 2020 2069 6620 3132 203c  .        if 12 <
+0001db60: 3d20 6c65 6e28 7372 6329 203c 3d20 3137  = len(src) <= 17
+0001db70: 3a0a 2020 2020 2020 2020 2020 2020 666f  :.            fo
+0001db80: 7220 6920 696e 205b 273a 272c 272d 275d  r i in [':','-']
+0001db90: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+0001dba0: 2020 7372 633d 7372 632e 7265 706c 6163    src=src.replac
+0001dbb0: 6528 692c 2727 290a 2020 2020 2020 2020  e(i,'').        
+0001dbc0: 2020 2020 7372 633d 4a6f 696e 285b 7372      src=Join([sr
+0001dbd0: 635b 693a 692b 325d 2066 6f72 2069 2069  c[i:i+2] for i i
+0001dbe0: 6e20 7261 6e67 6528 302c 3132 2c32 295d  n range(0,12,2)]
+0001dbf0: 2c73 796d 626f 6c3d 273a 2729 0a20 2020  ,symbol=':').   
+0001dc00: 2020 2020 2023 2043 6865 636b 2074 6865       # Check the
+0001dc10: 206e 6f72 6d61 6c20 6d61 6320 666f 726d   normal mac form
+0001dc20: 6174 0a20 2020 2020 2020 206f 6374 6574  at.        octet
+0001dc30: 7320 3d20 7372 632e 7370 6c69 7428 273a  s = src.split(':
+0001dc40: 2729 0a20 2020 2020 2020 2069 6620 6c65  ').        if le
+0001dc50: 6e28 6f63 7465 7473 2920 213d 2036 3a20  n(octets) != 6: 
+0001dc60: 7265 7475 726e 2064 6566 6175 6c74 0a20  return default. 
+0001dc70: 2020 2020 2020 2066 6f72 2069 2069 6e20         for i in 
+0001dc80: 6f63 7465 7473 3a0a 2020 2020 2020 2020  octets:.        
+0001dc90: 2020 2020 7472 793a 0a20 2020 2020 2020      try:.       
+0001dca0: 2020 2020 2020 2020 6966 206c 656e 2869          if len(i
+0001dcb0: 2920 213d 2032 206f 7220 696e 7428 692c  ) != 2 or int(i,
+0001dcc0: 2031 3629 203e 2032 3535 3a0a 2020 2020   16) > 255:.    
+0001dcd0: 2020 2020 2020 2020 2020 2020 2020 2072                 r
+0001dce0: 6574 7572 6e20 6465 6661 756c 740a 2020  eturn default.  
+0001dcf0: 2020 2020 2020 2020 2020 6578 6365 7074            except
+0001dd00: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+0001dd10: 2072 6574 7572 6e20 6465 6661 756c 740a   return default.
+0001dd20: 2020 2020 2020 2020 6966 206f 7574 2069          if out i
+0001dd30: 6e20 5b69 6e74 2c27 696e 7427 2c27 6e75  n [int,'int','nu
+0001dd40: 6d62 6572 275d 3a20 7265 7475 726e 2073  mber']: return s
+0001dd50: 7472 3269 6e74 2873 7263 290a 2020 2020  tr2int(src).    
+0001dd60: 2020 2020 6966 2073 796d 626f 6c20 213d      if symbol !=
+0001dd70: 2027 3a27 3a20 7372 633d 7372 632e 7265   ':': src=src.re
+0001dd80: 706c 6163 6528 273a 272c 7379 6d62 6f6c  place(':',symbol
+0001dd90: 290a 2020 2020 2020 2020 6966 2063 6173  ).        if cas
+0001dda0: 6520 3d3d 2027 7570 7065 7227 3a20 7265  e == 'upper': re
+0001ddb0: 7475 726e 2073 7263 2e75 7070 6572 2829  turn src.upper()
+0001ddc0: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+0001ddd0: 7372 632e 6c6f 7765 7228 290a 2020 2020  src.lower().    
+0001dde0: 656c 6966 2069 7369 6e73 7461 6e63 6528  elif isinstance(
+0001ddf0: 7372 632c 696e 7429 3a0a 2020 2020 2020  src,int):.      
+0001de00: 2020 6966 206f 7574 2069 6e20 5b69 6e74    if out in [int
+0001de10: 2c27 696e 7427 2c27 6e75 6d62 6572 275d  ,'int','number']
+0001de20: 3a20 7265 7475 726e 2073 7263 0a20 2020  : return src.   
+0001de30: 2020 2020 2073 7263 3d69 6e74 3273 7472       src=int2str
+0001de40: 2873 7263 2c73 796d 626f 6c29 0a20 2020  (src,symbol).   
+0001de50: 2020 2020 2069 6620 6361 7365 203d 3d20       if case == 
+0001de60: 2775 7070 6572 273a 2072 6574 7572 6e20  'upper': return 
+0001de70: 7372 632e 7570 7065 7228 290a 2020 2020  src.upper().    
+0001de80: 2020 2020 7265 7475 726e 2073 7263 2e6c      return src.l
+0001de90: 6f77 6572 2829 0a20 2020 2072 6574 7572  ower().    retur
+0001dea0: 6e20 6465 6661 756c 740a 0a64 6566 2050  n default..def P
+0001deb0: 6174 6828 2a69 6e70 2c2a 2a6f 7074 7329  ath(*inp,**opts)
+0001dec0: 3a0a 2020 2020 2727 270a 2020 2020 4765  :.    '''.    Ge
+0001ded0: 7420 5061 7468 206f 6620 696e 7075 740a  t Path of input.
+0001dee0: 2020 2020 696e 7075 7473 290a 2020 2020      inputs).    
+0001def0: 2020 207e 2020 2020 2020 203a 2068 6f6d     ~       : hom
+0001df00: 6520 7061 7468 0a20 2020 2020 2020 7e3c  e path.       ~<
+0001df10: 7573 6572 3e20 3a20 7573 6572 2773 2068  user> : user's h
+0001df20: 6f6d 6520 7061 7468 0a20 2020 2020 2020  ome path.       
+0001df30: 4e6f 6e65 2020 2020 3a20 6375 7272 656e  None    : curren
+0001df40: 7420 7061 7468 0a20 2020 2020 2020 5f5f  t path.       __
+0001df50: 6669 6c65 5f5f 3a20 6375 7272 656e 7420  file__: current 
+0001df60: 7079 7468 6f6e 2073 6372 6970 7420 6669  python script fi
+0001df70: 6c65 2070 6174 680a 2020 2020 2020 205f  le path.       _
+0001df80: 5f6d 6f64 5f5f 203a 2054 6869 7320 7079  _mod__ : This py
+0001df90: 7468 6f6e 2073 6372 6970 7420 6669 6c65  thon script file
+0001dfa0: 2070 6174 680a 2020 2020 2020 2066 696c   path.       fil
+0001dfb0: 6520 2020 203a 2074 6865 2066 696c 6527  e    : the file'
+0001dfc0: 7320 7061 7468 0a20 2020 2020 2020 5b6c  s path.       [l
+0001dfd0: 6973 745d 2020 3a20 636f 6e76 6572 7420  ist]  : convert 
+0001dfe0: 746f 2070 6174 6820 7275 6c65 200a 2020  to path rule .  
+0001dff0: 2020 2020 206f 626a 2020 2020 203a 2073       obj     : s
+0001e000: 7570 706f 7274 2066 756e 6374 696f 6e2c  upport function,
+0001e010: 206d 6f64 756c 652c 2063 6c61 7373 2c20   module, class, 
+0001e020: 696e 7374 616e 6365 0a0a 2020 2020 7265  instance..    re
+0001e030: 6d6f 7665 5f64 6f74 203a 200a 2020 2020  move_dot : .    
+0001e040: 2020 5472 7565 203a 2028 6465 6661 756c    True : (defaul
+0001e050: 7429 202f 612f 622f 2e2f 2e2e 2f63 203d  t) /a/b/./../c =
+0001e060: 3e20 2f61 2f63 0a20 2020 2020 2046 616c  > /a/c.      Fal
+0001e070: 7365 3a20 2f61 2f62 2f2e 2f2e 2e2f 6320  se: /a/b/./../c 
+0001e080: 3d3e 202f 612f 622f 2e2f 2e2e 2f63 0a20  => /a/b/./../c. 
+0001e090: 2020 2065 7272 6f72 203a 200a 2020 2020     error : .    
+0001e0a0: 2020 4661 6c73 653a 2064 6566 6175 6c74    False: default
+0001e0b0: 2c20 6966 2070 6174 6820 6973 7375 6520  , if path issue 
+0001e0c0: 7468 656e 2072 6574 7572 6e20 6572 726f  then return erro
+0001e0d0: 720a 2020 2020 2020 5472 7565 203a 2069  r.      True : i
+0001e0e0: 6620 7061 7468 2069 7373 7565 2074 6865  f path issue the
+0001e0f0: 6e20 6967 6e6f 7265 0a20 2020 206f 7574  n ignore.    out
+0001e100: 203a 0a20 2020 2020 7374 7220 3a20 6465   :.     str : de
+0001e110: 6661 756c 743a 2072 6574 7572 6e20 7061  fault: return pa
+0001e120: 7468 2073 7472 696e 670a 2020 2020 206c  th string.     l
+0001e130: 6973 743a 2072 6574 7572 6e20 6c69 7374  ist: return list
+0001e140: 2066 6f72 6d61 740a 2020 2020 2020 202d   format.       -
+0001e150: 2066 6f72 6365 5f72 6f6f 7420 3a20 6465   force_root : de
+0001e160: 6661 756c 7420 4661 6c73 652c 2054 7275  fault False, Tru
+0001e170: 653a 205b 2727 2c27 6127 2c27 6227 5d20  e: ['','a','b'] 
+0001e180: 6f72 205b 2761 272c 2762 275d 203d 3e20  or ['a','b'] => 
+0001e190: 272f 612f 6227 0a0a 2020 2020 2027 2f61  '/a/b'..     '/a
+0001e1a0: 2f62 2f63 2720 3d3e 205b 2727 2c27 6127  /b/c' => ['','a'
+0001e1b0: 2c27 6227 2c27 6327 5d20 286f 7574 3d6c  ,'b','c'] (out=l
+0001e1c0: 6973 7429 0a20 2020 2020 2761 2f62 2f63  ist).     'a/b/c
+0001e1d0: 2720 203d 3e20 5b27 6127 2c27 6227 2c27  '  => ['a','b','
+0001e1e0: 6327 5d20 2020 2028 6f75 743d 6c69 7374  c']    (out=list
+0001e1f0: 290a 2020 2020 205b 2727 2c27 6127 2c27  ).     ['','a','
+0001e200: 6227 2c27 6327 5d20 203d 3e20 272f 612f  b','c']  => '/a/
+0001e210: 622f 6327 286f 7574 3d73 7472 290a 2020  b/c'(out=str).  
+0001e220: 2020 205b 2761 272c 2762 272c 2763 275d     ['a','b','c']
+0001e230: 2020 2020 203d 3e20 2761 2f62 2f63 2720       => 'a/b/c' 
+0001e240: 286f 7574 3d73 7472 290a 2020 2020 2727  (out=str).    ''
+0001e250: 270a 2020 2020 7379 6d3d 6f70 7473 2e67  '.    sym=opts.g
+0001e260: 6574 2827 7379 6d27 2c27 2f27 290a 2020  et('sym','/').  
+0001e270: 2020 6f75 743d 6f70 7473 2e67 6574 2827    out=opts.get('
+0001e280: 6f75 7427 2c27 7374 7227 290a 2020 2020  out','str').    
+0001e290: 6578 6973 743d 6f70 7473 2e67 6574 2827  exist=opts.get('
+0001e2a0: 6578 6973 7427 2c46 616c 7365 290a 2020  exist',False).  
+0001e2b0: 2020 6465 6661 756c 743d 6f70 7473 2e67    default=opts.g
+0001e2c0: 6574 2827 6465 6661 756c 7427 2c46 616c  et('default',Fal
+0001e2d0: 7365 290a 2020 2020 7265 6d6f 7665 5f64  se).    remove_d
+0001e2e0: 6f74 3d6f 7074 732e 6765 7428 2772 656d  ot=opts.get('rem
+0001e2f0: 6f76 655f 646f 7427 2c54 7275 6529 0a20  ove_dot',True). 
+0001e300: 2020 2065 7272 3d6f 7074 732e 6765 7428     err=opts.get(
+0001e310: 2765 7272 272c 6f70 7473 2e67 6574 2827  'err',opts.get('
+0001e320: 6572 726f 7227 2c46 616c 7365 2929 0a20  error',False)). 
+0001e330: 2020 2064 6566 6175 6c74 3d6f 7074 732e     default=opts.
+0001e340: 6765 7428 2764 6566 6175 6c74 272c 4661  get('default',Fa
+0001e350: 6c73 6529 0a20 2020 2062 6173 655f 6469  lse).    base_di
+0001e360: 723d 4e6f 6e65 0a20 2020 2069 6620 6e6f  r=None.    if no
+0001e370: 7420 696e 703a 0a20 2020 2020 2020 2062  t inp:.        b
+0001e380: 6173 655f 6469 723d 6f73 2e65 6e76 6972  ase_dir=os.envir
+0001e390: 6f6e 5b27 5057 4427 5d0a 2020 2020 656c  on['PWD'].    el
+0001e3a0: 6966 2069 6e70 3a0a 2020 2020 2020 2020  if inp:.        
+0001e3b0: 6966 2069 7369 6e73 7461 6e63 6528 696e  if isinstance(in
+0001e3c0: 705b 305d 2c73 7472 293a 0a20 2020 2020  p[0],str):.     
+0001e3d0: 2020 2020 2020 2069 6620 6f73 2e70 6174         if os.pat
+0001e3e0: 682e 6973 6669 6c65 2869 6e70 5b30 5d29  h.isfile(inp[0])
+0001e3f0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+0001e400: 2020 6261 7365 5f64 6972 3d6f 732e 7061    base_dir=os.pa
+0001e410: 7468 2e64 6972 6e61 6d65 286f 732e 7061  th.dirname(os.pa
+0001e420: 7468 2e61 6273 7061 7468 2869 6e70 5b30  th.abspath(inp[0
+0001e430: 5d29 290a 2020 2020 2020 2020 2020 2020  ])).            
+0001e440: 656c 6966 2069 6e70 5b30 5d20 3d3d 2027  elif inp[0] == '
+0001e450: 5f5f 6d6f 645f 5f27 3a0a 2020 2020 2020  __mod__':.      
+0001e460: 2020 2020 2020 2020 2020 2354 6869 7320            #This 
+0001e470: 6d6f 6475 6c65 2070 6174 680a 2020 2020  module path.    
+0001e480: 2020 2020 2020 2020 2020 2020 6261 7365              base
+0001e490: 5f64 6972 3d6f 732e 7061 7468 2e64 6972  _dir=os.path.dir
+0001e4a0: 6e61 6d65 286f 732e 7061 7468 2e61 6273  name(os.path.abs
+0001e4b0: 7061 7468 285f 5f66 696c 655f 5f29 2920  path(__file__)) 
+0001e4c0: 2320 4e6f 7420 696e 7075 7420 7468 656e  # Not input then
+0001e4d0: 2067 6574 2063 7572 7265 6e74 2070 6174   get current pat
+0001e4e0: 680a 2020 2020 2020 2020 2020 2020 656c  h.            el
+0001e4f0: 6966 2069 6e70 5b30 5d20 3d3d 2027 5f5f  if inp[0] == '__
+0001e500: 6669 6c65 5f5f 273a 0a20 2020 2020 2020  file__':.       
+0001e510: 2020 2020 2020 2020 2023 4765 7420 4361           #Get Ca
+0001e520: 6c6c 6572 2066 756e 6374 696f 6e27 7320  ller function's 
+0001e530: 4669 6c65 6e61 6d65 0a20 2020 2020 2020  Filename.       
+0001e540: 2020 2020 2020 2020 206d 795f 6669 6c65           my_file
+0001e550: 3d69 6e73 7065 6374 2e67 6574 6669 6c65  =inspect.getfile
+0001e560: 2846 756e 6374 696f 6e4e 616d 6528 7061  (FunctionName(pa
+0001e570: 7265 6e74 3d31 2c6f 626a 3d54 7275 6529  rent=1,obj=True)
+0001e580: 5b31 5d29 200a 2020 2020 2020 2020 2020  [1]) .          
+0001e590: 2020 2020 2020 6261 7365 5f64 6972 3d6f        base_dir=o
+0001e5a0: 732e 7061 7468 2e64 6972 6e61 6d65 286f  s.path.dirname(o
+0001e5b0: 732e 7061 7468 2e61 6273 7061 7468 286d  s.path.abspath(m
+0001e5c0: 795f 6669 6c65 2929 2023 2047 6574 2066  y_file)) # Get f
+0001e5d0: 696c 656e 616d 6520 7061 7468 0a20 2020  ilename path.   
+0001e5e0: 2020 2020 2020 2020 2065 6c73 653a 0a20           else:. 
+0001e5f0: 2020 2020 2020 2020 2020 2020 2020 2062                 b
+0001e600: 6173 655f 6469 723d 696e 705b 305d 0a20  ase_dir=inp[0]. 
+0001e610: 2020 2020 2020 2065 6c69 6620 5479 7065         elif Type
+0001e620: 2869 6e70 5b30 5d2c 2827 6675 6e63 7469  (inp[0],('functi
+0001e630: 6f6e 272c 276d 6f64 756c 6527 2c27 636c  on','module','cl
+0001e640: 6173 736f 626a 272c 2769 6e73 7461 6e63  assobj','instanc
+0001e650: 6527 2929 3a0a 2020 2020 2020 2020 2020  e')):.          
+0001e660: 2020 6d79 5f66 696c 653d 696e 7370 6563    my_file=inspec
+0001e670: 742e 6765 7466 696c 6528 696e 705b 305d  t.getfile(inp[0]
+0001e680: 2920 2320 4765 7420 6f62 6a27 7320 6669  ) # Get obj's fi
+0001e690: 6c65 6e61 6d65 0a20 2020 2020 2020 2020  lename.         
+0001e6a0: 2020 2062 6173 655f 6469 723d 6f73 2e70     base_dir=os.p
+0001e6b0: 6174 682e 6469 726e 616d 6528 6f73 2e70  ath.dirname(os.p
+0001e6c0: 6174 682e 6162 7370 6174 6828 6d79 5f66  ath.abspath(my_f
+0001e6d0: 696c 6529 2920 200a 2020 2020 6675 6c6c  ile))  .    full
+0001e6e0: 5f70 6174 683d 5b5d 0a20 2020 2069 6620  _path=[].    if 
+0001e6f0: 6973 696e 7374 616e 6365 2862 6173 655f  isinstance(base_
+0001e700: 6469 722c 7374 7229 3a0a 2020 2020 2020  dir,str):.      
+0001e710: 2020 6675 6c6c 5f70 6174 683d 6261 7365    full_path=base
+0001e720: 5f64 6972 2e73 706c 6974 2873 796d 290a  _dir.split(sym).
+0001e730: 2020 2020 656c 6966 2069 7369 6e73 7461      elif isinsta
+0001e740: 6e63 6528 696e 705b 305d 2c28 6c69 7374  nce(inp[0],(list
+0001e750: 2c74 7570 6c65 2929 3a0a 2020 2020 2020  ,tuple)):.      
+0001e760: 2020 6675 6c6c 5f70 6174 683d 6c69 7374    full_path=list
+0001e770: 2869 6e70 5b30 5d29 0a20 2020 2069 6620  (inp[0]).    if 
+0001e780: 6675 6c6c 5f70 6174 683a 0a20 2020 2020  full_path:.     
+0001e790: 2020 2069 6620 6675 6c6c 5f70 6174 685b     if full_path[
+0001e7a0: 305d 203d 3d20 277e 2720 6f72 2028 6675  0] == '~' or (fu
+0001e7b0: 6c6c 5f70 6174 685b 305d 2061 6e64 2066  ll_path[0] and f
+0001e7c0: 756c 6c5f 7061 7468 5b30 5d5b 305d 203d  ull_path[0][0] =
+0001e7d0: 3d20 277e 2729 3a20 2020 2020 2023 207e  = '~'):      # ~
+0001e7e0: 206f 7220 7e3c 7573 6572 3e20 7374 796c   or ~<user> styl
+0001e7f0: 650a 2020 2020 2020 2020 2020 2020 2366  e.            #f
+0001e800: 756c 6c5f 7061 7468 3d6f 732e 656e 7669  ull_path=os.envi
+0001e810: 726f 6e5b 2748 4f4d 4527 5d2e 7370 6c69  ron['HOME'].spli
+0001e820: 7428 7379 6d29 2b66 756c 6c5f 7061 7468  t(sym)+full_path
+0001e830: 5b31 3a5d 0a20 2020 2020 2020 2020 2020  [1:].           
+0001e840: 2066 756c 6c5f 7061 7468 3d6f 732e 7061   full_path=os.pa
+0001e850: 7468 2e65 7870 616e 6475 7365 7228 6675  th.expanduser(fu
+0001e860: 6c6c 5f70 6174 685b 305d 292e 7370 6c69  ll_path[0]).spli
+0001e870: 7428 7379 6d29 2b66 756c 6c5f 7061 7468  t(sym)+full_path
+0001e880: 5b31 3a5d 0a23 2020 2020 2020 2020 656c  [1:].#        el
+0001e890: 6966 2066 756c 6c5f 7061 7468 5b30 5d20  if full_path[0] 
+0001e8a0: 616e 6420 6675 6c6c 5f70 6174 685b 305d  and full_path[0]
+0001e8b0: 5b30 5d20 3d3d 2027 7e27 3a20 2320 7e3c  [0] == '~': # ~<
+0001e8c0: 7573 6572 3e20 7374 796c 650a 2320 2020  user> style.#   
+0001e8d0: 2020 2020 2020 2020 2066 756c 6c5f 7061           full_pa
+0001e8e0: 7468 3d6f 732e 7061 7468 2e65 7870 616e  th=os.path.expan
+0001e8f0: 6475 7365 7228 6675 6c6c 5f70 6174 685b  duser(full_path[
+0001e900: 305d 292e 7370 6c69 7428 7379 6d29 2b66  0]).split(sym)+f
+0001e910: 756c 6c5f 7061 7468 5b31 3a5d 0a20 2020  ull_path[1:].   
+0001e920: 2069 6620 7265 6d6f 7665 5f64 6f74 3a0a   if remove_dot:.
+0001e930: 2020 2020 2020 2020 6e66 703d 5b5d 0a20          nfp=[]. 
+0001e940: 2020 2020 2020 2066 6f72 2069 2069 6e20         for i in 
+0001e950: 6675 6c6c 5f70 6174 683a 0a20 2020 2020  full_path:.     
+0001e960: 2020 2020 2020 2069 6620 6920 3d3d 2027         if i == '
+0001e970: 2e2e 273a 2023 7265 6d6f 7665 2027 2e2e  ..': #remove '..
+0001e980: 270a 2020 2020 2020 2020 2020 2020 2020  '.              
+0001e990: 2020 6966 206e 6670 3a0a 2020 2020 2020    if nfp:.      
+0001e9a0: 2020 2020 2020 2020 2020 2020 2020 236b                #k
+0001e9b0: 6565 7020 726f 6f74 2070 6174 6820 2827  eep root path ('
+0001e9c0: 2f27 290a 2020 2020 2020 2020 2020 2020  /').            
+0001e9d0: 2020 2020 2020 2020 6966 206c 656e 286e          if len(n
+0001e9e0: 6670 293d 3d31 3a0a 2020 2020 2020 2020  fp)==1:.        
+0001e9f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001ea00: 6966 206e 6670 5b30 5d3a 0a20 2020 2020  if nfp[0]:.     
 0001ea10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001ea20: 2020 2020 2020 6966 2066 756c 6c5f 7061        if full_pa
-0001ea30: 7468 5b30 5d3a 0a20 2020 2020 2020 2020  th[0]:.         
-0001ea40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001ea50: 2020 2020 2020 2020 2020 2064 656c 2066             del f
-0001ea60: 756c 6c5f 7061 7468 5b2d 315d 0a20 2020  ull_path[-1].   
-0001ea70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001ea80: 2020 2020 2020 2020 2020 2020 2065 6c69               eli
-0001ea90: 6620 6572 723a 0a20 2020 2020 2020 2020  f err:.         
+0001ea20: 2020 2020 2020 2064 656c 206e 6670 5b2d         del nfp[-
+0001ea30: 315d 0a20 2020 2020 2020 2020 2020 2020  1].             
+0001ea40: 2020 2020 2020 2020 2020 2065 6c69 6620             elif 
+0001ea50: 6572 723a 0a20 2020 2020 2020 2020 2020  err:.           
+0001ea60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001ea70: 2072 6574 7572 6e20 6465 6661 756c 740a   return default.
+0001ea80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001ea90: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
 0001eaa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001eab0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-0001eac0: 6e20 6465 6661 756c 740a 2020 2020 2020  n default.      
-0001ead0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001eae0: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
-0001eaf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001eb00: 2020 2020 2020 2020 2020 2020 6465 6c20              del 
-0001eb10: 6675 6c6c 5f70 6174 685b 2d31 5d0a 2020  full_path[-1].  
-0001eb20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001eb30: 2020 2020 2020 2020 2020 636f 6e74 696e            contin
-0001eb40: 7565 0a20 2020 2020 2020 2020 2020 2020  ue.             
-0001eb50: 2020 2020 2020 2020 2020 2065 6c69 6620             elif 
-0001eb60: 6572 723a 0a20 2020 2020 2020 2020 2020  err:.           
-0001eb70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001eb80: 2072 6574 7572 6e20 6465 6661 756c 740a   return default.
-0001eb90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001eba0: 6675 6c6c 5f70 6174 682e 6170 7065 6e64  full_path.append
-0001ebb0: 287a 7a29 0a20 2020 2069 6620 6f75 7420  (zz).    if out 
-0001ebc0: 696e 205b 7374 722c 2773 7472 275d 3a0a  in [str,'str']:.
-0001ebd0: 2020 2020 2020 2020 6966 206e 6f74 2066          if not f
-0001ebe0: 756c 6c5f 7061 7468 3a20 7265 7475 726e  ull_path: return
-0001ebf0: 2027 270a 2020 2020 2020 2020 7274 3d4a   ''.        rt=J
-0001ec00: 6f69 6e28 6675 6c6c 5f70 6174 682c 7379  oin(full_path,sy
-0001ec10: 6d62 6f6c 3d73 796d 290a 2020 2020 2020  mbol=sym).      
-0001ec20: 2020 6966 206f 7074 732e 6765 7428 2766    if opts.get('f
-0001ec30: 6f72 6365 5f72 6f6f 7427 2c6f 7074 732e  orce_root',opts.
-0001ec40: 6765 7428 2772 6f6f 7427 2c46 616c 7365  get('root',False
-0001ec50: 2929 3a0a 2020 2020 2020 2020 2020 2020  )):.            
-0001ec60: 6966 2072 745b 305d 2021 3d20 272f 273a  if rt[0] != '/':
-0001ec70: 2072 6574 7572 6e20 272f 272b 7274 0a20   return '/'+rt. 
-0001ec80: 2020 2020 2020 2072 6574 7572 6e20 7274         return rt
-0001ec90: 0a20 2020 2065 6c73 653a 0a20 2020 2020  .    else:.     
-0001eca0: 2020 2072 6574 7572 6e20 6675 6c6c 5f70     return full_p
-0001ecb0: 6174 680a 0a64 6566 2043 7574 2873 7263  ath..def Cut(src
-0001ecc0: 2c68 6561 645f 6c65 6e3d 4e6f 6e65 2c62  ,head_len=None,b
-0001ecd0: 6f64 795f 6c65 6e3d 4e6f 6e65 2c6e 6577  ody_len=None,new
-0001ece0: 5f6c 696e 653d 275c 6e27 2c6f 7574 3d73  _line='\n',out=s
-0001ecf0: 7472 293a 0a20 2020 2027 2727 0a20 2020  tr):.    '''.   
-0001ed00: 2043 7574 2073 7472 696e 670a 2020 2020   Cut string.    
-0001ed10: 6865 6164 5f6c 656e 203a 2069 6e74 203a  head_len : int :
-0001ed20: 2066 6972 7374 206c 696e 6520 6c65 6e67   first line leng
-0001ed30: 7468 2028 6465 6661 756c 7420 4e6f 6e65  th (default None
-0001ed40: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-0001ed50: 2069 6620 626f 6479 5f6c 656e 2069 7320   if body_len is 
-0001ed60: 4e6f 6e65 2074 6865 6e20 6576 6572 7974  None then everyt
-0001ed70: 6869 6e67 2063 7574 2073 616d 6520 6c65  hing cut same le
-0001ed80: 6e67 7468 2077 6974 6820 6865 6164 5f6c  ngth with head_l
-0001ed90: 656e 0a20 2020 2062 6f64 795f 6c65 6e20  en.    body_len 
-0001eda0: 3a20 696e 7420 3a20 6c69 6e65 206c 656e  : int : line len
-0001edb0: 6774 6820 6166 7465 7220 6865 6164 5f6c  gth after head_l
-0001edc0: 656e 2028 6465 6661 756c 7420 4e6f 6e65  en (default None
-0001edd0: 290a 2020 2020 6e65 775f 6c69 6e65 203a  ).    new_line :
-0001ede0: 2064 6566 6175 6c74 206c 696e 7578 206e   default linux n
-0001edf0: 6577 206c 696e 650a 2020 2020 6f75 743d  ew line.    out=
-0001ee00: 0a20 2020 2020 2020 2073 7472 2020 3a20  .        str  : 
-0001ee10: 6f75 7470 7574 2074 6f20 7374 7269 6e67  output to string
-0001ee20: 2077 6974 6820 6e65 775f 6c69 6e65 2028   with new_line (
-0001ee30: 6465 6661 756c 7429 0a20 2020 2020 2020  default).       
-0001ee40: 206c 6973 7420 3a20 6f75 7470 7574 2074   list : output t
-0001ee50: 6f20 6c69 7374 2069 6e73 7465 6164 206e  o list instead n
-0001ee60: 6577 5f6c 696e 650a 2020 2020 2727 270a  ew_line.    '''.
-0001ee70: 2020 2020 6966 206e 6f74 2069 7369 6e73      if not isins
-0001ee80: 7461 6e63 6528 7372 632c 7374 7229 3a20  tance(src,str): 
-0001ee90: 7265 7475 726e 2046 616c 7365 0a20 2020  return False.   
-0001eea0: 2073 6f75 7263 653d 7372 632e 7370 6c69   source=src.spli
-0001eeb0: 7428 6e65 775f 6c69 6e65 290a 2020 2020  t(new_line).    
-0001eec0: 6966 206c 656e 2873 6f75 7263 6529 203d  if len(source) =
-0001eed0: 3d20 3120 616e 6420 6e6f 7420 6865 6164  = 1 and not head
-0001eee0: 5f6c 656e 206f 7220 6865 6164 5f6c 656e  _len or head_len
-0001eef0: 203e 3d20 6c65 6e28 7372 6329 3a0a 2020   >= len(src):.  
-0001ef00: 2020 2020 2069 6620 7372 6320 616e 6420       if src and 
-0001ef10: 6f75 7420 696e 205b 2773 7472 272c 7374  out in ['str',st
-0001ef20: 725d 3a20 7265 7475 726e 204a 6f69 6e28  r]: return Join(
-0001ef30: 7372 632c 7379 6d62 6f6c 3d6e 6577 5f6c  src,symbol=new_l
-0001ef40: 696e 6529 0a20 2020 2020 2020 7265 7475  ine).       retu
-0001ef50: 726e 205b 7372 635d 0a20 2020 2072 743d  rn [src].    rt=
-0001ef60: 5b5d 0a20 2020 2066 6f72 2073 7263 5f69  [].    for src_i
-0001ef70: 6478 2069 6e20 7261 6e67 6528 302c 6c65  dx in range(0,le
-0001ef80: 6e28 736f 7572 6365 2929 3a0a 2020 2020  n(source)):.    
-0001ef90: 2020 2020 7374 725f 6c65 6e3d 6c65 6e28      str_len=len(
-0001efa0: 736f 7572 6365 5b73 7263 5f69 6478 5d29  source[src_idx])
-0001efb0: 0a0a 2020 2020 2020 2020 6966 206e 6f74  ..        if not
-0001efc0: 2062 6f64 795f 6c65 6e3a 0a20 2020 2020   body_len:.     
-0001efd0: 2020 2020 2020 2072 743d 7274 2b5b 736f         rt=rt+[so
-0001efe0: 7572 6365 5b73 7263 5f69 6478 5d5b 693a  urce[src_idx][i:
-0001eff0: 6920 2b20 6865 6164 5f6c 656e 5d20 666f  i + head_len] fo
-0001f000: 7220 6920 696e 2072 616e 6765 2830 2c20  r i in range(0, 
-0001f010: 7374 725f 6c65 6e2c 2068 6561 645f 6c65  str_len, head_le
-0001f020: 6e29 5d0a 2020 2020 2020 2020 656c 7365  n)].        else
-0001f030: 3a0a 2020 2020 2020 2020 2020 2020 6966  :.            if
-0001f040: 2073 7263 5f69 6478 203d 3d20 303a 0a20   src_idx == 0:. 
-0001f050: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-0001f060: 742e 6170 7065 6e64 2873 6f75 7263 655b  t.append(source[
-0001f070: 7372 635f 6964 785d 5b30 3a68 6561 645f  src_idx][0:head_
-0001f080: 6c65 6e5d 2920 2320 5461 6b65 2068 6561  len]) # Take hea
-0001f090: 640a 2020 2020 2020 2020 2020 2020 2020  d.              
-0001f0a0: 2020 6966 2073 7472 5f6c 656e 203e 2068    if str_len > h
-0001f0b0: 6561 645f 6c65 6e3a 0a20 2020 2020 2020  ead_len:.       
-0001f0c0: 2020 2020 2020 2020 2020 2020 2072 743d               rt=
-0001f0d0: 7274 2b5b 736f 7572 6365 5b73 7263 5f69  rt+[source[src_i
-0001f0e0: 6478 5d5b 6865 6164 5f6c 656e 3a5d 5b69  dx][head_len:][i
-0001f0f0: 3a69 202b 2062 6f64 795f 6c65 6e5d 2066  :i + body_len] f
-0001f100: 6f72 2069 2069 6e20 7261 6e67 6528 302c  or i in range(0,
-0001f110: 2073 7472 5f6c 656e 2d68 6561 645f 6c65   str_len-head_le
-0001f120: 6e2c 2062 6f64 795f 6c65 6e29 5d0a 2020  n, body_len)].  
-0001f130: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
-0001f140: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001f150: 7274 3d72 742b 5b73 6f75 7263 655b 7372  rt=rt+[source[sr
-0001f160: 635f 6964 785d 5b69 3a69 202b 2062 6f64  c_idx][i:i + bod
-0001f170: 795f 6c65 6e5d 2066 6f72 2069 2069 6e20  y_len] for i in 
-0001f180: 7261 6e67 6528 302c 2073 7472 5f6c 656e  range(0, str_len
-0001f190: 2c20 626f 6479 5f6c 656e 295d 0a20 2020  , body_len)].   
-0001f1a0: 2069 6620 7274 2061 6e64 206f 7574 2069   if rt and out i
-0001f1b0: 6e20 5b27 7374 7227 2c73 7472 5d3a 2072  n ['str',str]: r
-0001f1c0: 6574 7572 6e20 4a6f 696e 2872 742c 7379  eturn Join(rt,sy
-0001f1d0: 6d62 6f6c 3d6e 6577 5f6c 696e 6529 0a20  mbol=new_line). 
-0001f1e0: 2020 2072 6574 7572 6e20 7274 0a0a 6465     return rt..de
-0001f1f0: 6620 5370 6163 6528 6e75 6d3d 342c 6669  f Space(num=4,fi
-0001f200: 6c6c 3d4e 6f6e 652c 6d6f 6465 3d27 7370  ll=None,mode='sp
-0001f210: 6163 6527 2c74 6170 3d27 2729 3a0a 2020  ace',tap=''):.  
-0001f220: 2020 2727 270a 2020 2020 6d61 6b65 2061    '''.    make a
-0001f230: 2063 6861 7261 6374 6f72 2873 7061 6365   charactor(space
-0001f240: 2c20 7461 7029 2067 726f 7570 0a20 2020  , tap) group.   
-0001f250: 206e 756d 3a20 6465 6661 756c 7420 342c   num: default 4,
-0001f260: 2068 6f77 206d 616e 7920 6669 6c6c 206f   how many fill o
-0001f270: 7574 203c 6669 6c6c 3e0a 2020 2020 6d6f  ut <fill>.    mo
-0001f280: 6465 3a0a 2020 2020 2020 7370 6163 6520  de:.      space 
-0001f290: 3a20 6465 6661 756c 743a 2027 2027 0a20  : default: ' '. 
-0001f2a0: 2020 2020 2074 6170 2020 203a 205c 5c74       tap   : \\t
-0001f2b0: 0a20 2020 2066 696c 6c3a 0a20 2020 2020  .    fill:.     
-0001f2c0: 204e 6f6e 6520 3a20 6465 6661 756c 743a   None : default:
-0001f2d0: 2066 6f6c 6c6f 7769 6e67 206d 6f64 6520   following mode 
-0001f2e0: 696e 666f 726d 6174 696f 6e0a 2020 2020  information.    
-0001f2f0: 2020 3c73 7065 6369 616c 2063 6861 7261    <special chara
-0001f300: 6374 6f72 3e20 3a20 6669 6c6c 206f 7574  ctor> : fill out
-0001f310: 2074 6865 2063 6861 7261 6374 6f72 0a20   the charactor. 
-0001f320: 2020 2074 6170 3a0a 2020 2020 2020 2727     tap:.      ''
-0001f330: 2020 203a 2064 6566 6175 6c74 0a20 2020     : default.   
-0001f340: 2020 203c 7370 6369 616c 2069 6e69 7461     <spcial inita
-0001f350: 6c20 6368 7261 6374 6f72 3e3a 2070 7265  l chractor>: pre
-0001f360: 2d66 696c 6c6f 7574 2077 6974 6820 7468  -fillout with th
-0001f370: 6973 2063 6872 6163 746f 720a 2020 2020  is chractor.    
-0001f380: 2727 270a 2020 2020 6d6f 6465 3d6d 6f64  '''.    mode=mod
-0001f390: 652e 6c6f 7765 7228 290a 2020 2020 6966  e.lower().    if
-0001f3a0: 206d 6f64 6520 3d3d 2774 6170 273a 0a20   mode =='tap':. 
-0001f3b0: 2020 2020 2020 2066 696c 6c3d 275c 7427         fill='\t'
-0001f3c0: 0a20 2020 2065 6c69 6620 6d6f 6465 203d  .    elif mode =
-0001f3d0: 3d20 2773 7061 6365 2720 6f72 2066 696c  = 'space' or fil
-0001f3e0: 6c20 6973 204e 6f6e 653a 0a20 2020 2020  l is None:.     
-0001f3f0: 2020 2066 696c 6c3d 2720 270a 2020 2020     fill=' '.    
-0001f400: 666f 7220 6920 696e 2072 616e 6765 2830  for i in range(0
-0001f410: 2c6e 756d 293a 0a20 2020 2020 2020 2074  ,num):.        t
-0001f420: 6170 3d74 6170 2b66 696c 6c0a 2020 2020  ap=tap+fill.    
-0001f430: 7265 7475 726e 2074 6170 0a0a 6465 6620  return tap..def 
-0001f440: 5772 6170 5374 7269 6e67 2873 7472 696e  WrapString(strin
-0001f450: 672c 6673 7061 6365 3d30 2c6e 7370 6163  g,fspace=0,nspac
-0001f460: 653d 302c 6e65 775f 6c69 6e65 3d27 5c6e  e=0,new_line='\n
-0001f470: 272c 666c 656e 6774 683d 302c 6e6c 656e  ',flength=0,nlen
-0001f480: 6774 683d 302c 6e74 6170 3d30 2c4e 464c  gth=0,ntap=0,NFL
-0001f490: 543d 4661 6c73 652c 6d6f 6465 3d27 7370  T=False,mode='sp
-0001f4a0: 6163 6527 2c64 6566 6175 6c74 3d27 272c  ace',default='',
-0001f4b0: 6f75 743d 2773 7472 2729 3a0a 2020 2020  out='str'):.    
-0001f4c0: 6966 2049 734e 6f6e 6528 7374 7269 6e67  if IsNone(string
-0001f4d0: 293a 2072 6574 7572 6e20 6465 6661 756c  ): return defaul
-0001f4e0: 740a 2020 2020 6966 206e 6f74 2054 7970  t.    if not Typ
-0001f4f0: 6528 7374 7269 6e67 2c27 7374 7227 293a  e(string,'str'):
-0001f500: 7374 7269 6e67 3d27 2727 7b7d 2727 272e  string='''{}'''.
-0001f510: 666f 726d 6174 2873 7472 696e 6729 0a20  format(string). 
-0001f520: 2020 2072 635f 7374 723d 5b5d 0a20 2020     rc_str=[].   
-0001f530: 2073 7472 696e 675f 613d 7374 7269 6e67   string_a=string
-0001f540: 2e73 706c 6974 286e 6577 5f6c 696e 6529  .split(new_line)
-0001f550: 0a20 2020 2023 4669 7273 7420 6c69 6e65  .    #First line
-0001f560: 2064 6573 6967 6e0a 2020 2020 6966 204e   design.    if N
-0001f570: 464c 543a 2066 7370 6163 653d 300a 2020  FLT: fspace=0.  
-0001f580: 2020 7263 5f73 7472 2e61 7070 656e 6428    rc_str.append(
-0001f590: 5370 6163 6528 6673 7061 6365 2c6d 6f64  Space(fspace,mod
-0001f5a0: 653d 6d6f 6465 292b 4a6f 696e 2843 7574  e=mode)+Join(Cut
-0001f5b0: 2873 7472 696e 675f 615b 305d 2c68 6561  (string_a[0],hea
-0001f5c0: 645f 6c65 6e3d 666c 656e 6774 682c 626f  d_len=flength,bo
-0001f5d0: 6479 5f6c 656e 3d6e 6c65 6e67 7468 2c6e  dy_len=nlength,n
-0001f5e0: 6577 5f6c 696e 653d 6e65 775f 6c69 6e65  ew_line=new_line
-0001f5f0: 2c6f 7574 3d6c 6973 7429 2c27 5c6e 272c  ,out=list),'\n',
-0001f600: 6170 7065 6e64 5f66 726f 6e74 3d53 7061  append_front=Spa
-0001f610: 6365 286e 7370 6163 652c 6d6f 6465 3d6d  ce(nspace,mode=m
-0001f620: 6f64 6529 2929 0a20 2020 2023 426f 6479  ode))).    #Body
-0001f630: 206c 696e 6520 6465 7369 676e 0a20 2020   line design.   
-0001f640: 2066 6f72 2069 6920 696e 2073 7472 696e   for ii in strin
-0001f650: 675f 615b 313a 5d3a 0a20 2020 2020 2020  g_a[1:]:.       
-0001f660: 2072 635f 7374 722e 6170 7065 6e64 2853   rc_str.append(S
-0001f670: 7061 6365 286e 7370 6163 652c 6d6f 6465  pace(nspace,mode
-0001f680: 3d6d 6f64 6529 2b4a 6f69 6e28 4375 7428  =mode)+Join(Cut(
-0001f690: 6969 2c68 6561 645f 6c65 6e3d 6e6c 656e  ii,head_len=nlen
-0001f6a0: 6774 682c 6e65 775f 6c69 6e65 3d6e 6577  gth,new_line=new
-0001f6b0: 5f6c 696e 652c 6f75 743d 6c69 7374 292c  _line,out=list),
-0001f6c0: 275c 6e27 2c61 7070 656e 645f 6672 6f6e  '\n',append_fron
-0001f6d0: 743d 5370 6163 6528 6e73 7061 6365 2c6d  t=Space(nspace,m
-0001f6e0: 6f64 653d 6d6f 6465 2929 290a 2020 2020  ode=mode))).    
-0001f6f0: 2372 6574 7572 6e20 6e65 775f 6c69 6e65  #return new_line
-0001f700: 2e6a 6f69 6e28 7263 5f73 7472 290a 2020  .join(rc_str).  
-0001f710: 2020 6966 206f 7574 2069 6e20 5b6c 6973    if out in [lis
-0001f720: 742c 276c 6973 7427 5d3a 2072 6574 7572  t,'list']: retur
-0001f730: 6e20 7263 5f73 7472 0a20 2020 2065 6c69  n rc_str.    eli
-0001f740: 6620 6f75 7420 696e 205b 7475 706c 652c  f out in [tuple,
-0001f750: 2774 7570 6c65 275d 3a20 7265 7475 726e  'tuple']: return
-0001f760: 2074 7570 6c65 2872 635f 7374 7229 0a20   tuple(rc_str). 
-0001f770: 2020 2072 6574 7572 6e20 4a6f 696e 2872     return Join(r
-0001f780: 635f 7374 722c 6e65 775f 6c69 6e65 290a  c_str,new_line).
-0001f790: 0a64 6566 2047 6574 4b65 7928 7372 632c  .def GetKey(src,
-0001f7a0: 6669 6e64 3d4e 6f6e 652c 6465 6661 756c  find=None,defaul
-0001f7b0: 743d 4e6f 6e65 2c6d 6f64 653d 2766 6972  t=None,mode='fir
-0001f7c0: 7374 272c 726f 6f74 3d4e 6f6e 6529 3a0a  st',root=None):.
-0001f7d0: 2020 2020 2727 270a 2020 2020 4765 7420      '''.    Get 
-0001f7e0: 6b65 7920 6672 6f6d 2064 6963 742c 6c69  key from dict,li
-0001f7f0: 7374 2c74 7570 6c65 2c73 7472 0a20 2020  st,tuple,str.   
-0001f800: 2066 696e 6420 3a20 6966 206d 6174 6368   find : if match
-0001f810: 6564 2076 616c 7565 2074 6865 6e20 7265  ed value then re
-0001f820: 7475 726e 2074 6865 206b 6579 2f69 6e64  turn the key/ind
-0001f830: 6578 206f 6620 7468 6520 6461 7461 0a20  ex of the data. 
-0001f840: 2020 206d 6f64 6520 3a0a 2020 2020 2020     mode :.      
-0001f850: 6669 7273 7420 3a20 6465 6661 756c 743a  first : default:
-0001f860: 2072 6574 7572 6e20 6669 7273 7420 6669   return first fi
-0001f870: 6e64 0a20 2020 2020 2061 6c6c 2020 203a  nd.      all   :
-0001f880: 2072 6574 7572 6e20 666f 756e 6420 616c   return found al
-0001f890: 6c0a 2020 2020 6465 6661 756c 7420 3a20  l.    default : 
-0001f8a0: 7265 7475 726e 2077 6865 6e20 6e6f 7420  return when not 
-0001f8b0: 666f 756e 640a 2020 2020 2727 270a 2020  found.    '''.  
-0001f8c0: 2020 7274 3d5b 5d0a 2020 2020 6966 2069    rt=[].    if i
-0001f8d0: 7369 6e73 7461 6e63 6528 7372 632c 6469  sinstance(src,di
-0001f8e0: 6374 293a 0a20 2020 2020 2020 2069 6620  ct):.        if 
-0001f8f0: 4973 4e6f 6e65 2866 696e 6429 3a0a 2020  IsNone(find):.  
-0001f900: 2020 2020 2020 2020 2020 7265 7475 726e            return
-0001f910: 206c 6973 7428 7372 632e 6b65 7973 2829   list(src.keys()
-0001f920: 290a 2020 2020 2020 2020 656c 7365 3a0a  ).        else:.
-0001f930: 2020 2020 2020 2020 2020 2020 666f 7220              for 
-0001f940: 6b65 792c 7661 6c20 696e 2073 7263 2e69  key,val in src.i
-0001f950: 7465 6d73 2829 3a0a 2020 2020 2020 2020  tems():.        
-0001f960: 2020 2020 2020 2020 6966 2069 7369 6e73          if isins
-0001f970: 7461 6e63 6528 7661 6c2c 6469 6374 293a  tance(val,dict):
-0001f980: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001f990: 2020 2020 2061 3d47 6574 4b65 7928 7661       a=GetKey(va
-0001f9a0: 6c2c 6669 6e64 2c64 6566 6175 6c74 2c6d  l,find,default,m
-0001f9b0: 6f64 652c 6b65 7929 0a20 2020 2020 2020  ode,key).       
-0001f9c0: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-0001f9d0: 613a 0a20 2020 2020 2020 2020 2020 2020  a:.             
-0001f9e0: 2020 2020 2020 2020 2020 2069 6620 6973             if is
-0001f9f0: 696e 7374 616e 6365 2861 2c73 7472 293a  instance(a,str):
-0001fa00: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001fa10: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-0001fa20: 726f 6f74 2069 7320 4e6f 6e65 3a0a 2020  root is None:.  
-0001fa30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001fa40: 2020 2020 2020 2020 2020 2020 2020 7265                re
-0001fa50: 7475 726e 2027 2f7b 7d2f 7b7d 272e 666f  turn '/{}/{}'.fo
-0001fa60: 726d 6174 286b 6579 2c61 290a 2020 2020  rmat(key,a).    
-0001fa70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001fa80: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
-0001fa90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001faa0: 2020 2020 2020 2020 2020 2020 2020 7265                re
-0001fab0: 7475 726e 2027 7b7d 2f7b 7d27 2e66 6f72  turn '{}/{}'.for
-0001fac0: 6d61 7428 6b65 792c 6129 0a20 2020 2020  mat(key,a).     
-0001fad0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001fae0: 2020 2065 6c69 6620 6973 696e 7374 616e     elif isinstan
-0001faf0: 6365 2861 2c6c 6973 7429 3a0a 2020 2020  ce(a,list):.    
-0001fb00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001fb10: 2020 2020 2020 2020 666f 7220 6920 696e          for i in
-0001fb20: 2061 3a0a 2020 2020 2020 2020 2020 2020   a:.            
-0001fb30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001fb40: 2020 2020 6966 2072 6f6f 7420 6973 204e      if root is N
-0001fb50: 6f6e 653a 0a20 2020 2020 2020 2020 2020  one:.           
-0001fb60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001fb70: 2020 2020 2020 2020 2072 742e 6170 7065           rt.appe
-0001fb80: 6e64 2827 2f7b 7d2f 7b7d 272e 666f 726d  nd('/{}/{}'.form
-0001fb90: 6174 286b 6579 2c69 2929 0a20 2020 2020  at(key,i)).     
-0001fba0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001fbb0: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
-0001fbc0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001fbd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001fbe0: 2020 2020 2072 742e 6170 7065 6e64 2827       rt.append('
-0001fbf0: 7b7d 2f7b 7d27 2e66 6f72 6d61 7428 6b65  {}/{}'.format(ke
-0001fc00: 792c 6929 290a 2020 2020 2020 2020 2020  y,i)).          
-0001fc10: 2020 2020 2020 656c 6966 2076 616c 203d        elif val =
-0001fc20: 3d20 6669 6e64 3a0a 2020 2020 2020 2020  = find:.        
-0001fc30: 2020 2020 2020 2020 2020 2020 6966 206d              if m
-0001fc40: 6f64 6520 3d3d 2027 6669 7273 7427 3a20  ode == 'first': 
-0001fc50: 7265 7475 726e 206b 6579 0a20 2020 2020  return key.     
-0001fc60: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-0001fc70: 742e 6170 7065 6e64 286b 6579 290a 2020  t.append(key).  
-0001fc80: 2020 2020 2020 2020 2020 6966 2072 743a            if rt:
-0001fc90: 2072 6574 7572 6e20 7274 0a20 2020 2065   return rt.    e
-0001fca0: 6c69 6620 6973 696e 7374 616e 6365 2873  lif isinstance(s
-0001fcb0: 7263 2c28 6c69 7374 2c74 7570 6c65 2c73  rc,(list,tuple,s
-0001fcc0: 7472 2929 3a0a 2020 2020 2020 2020 6966  tr)):.        if
-0001fcd0: 2049 734e 6f6e 6528 6669 6e64 293a 0a20   IsNone(find):. 
-0001fce0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-0001fcf0: 6e20 6c65 6e28 7372 6329 0a20 2020 2020  n len(src).     
-0001fd00: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
-0001fd10: 2020 2020 2066 6f72 2069 2069 6e20 7261       for i in ra
-0001fd20: 6e67 6528 302c 6c65 6e28 7372 6329 293a  nge(0,len(src)):
-0001fd30: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001fd40: 2069 6620 6669 6e64 203d 3d20 7372 635b   if find == src[
-0001fd50: 695d 3a0a 2020 2020 2020 2020 2020 2020  i]:.            
-0001fd60: 2020 2020 2020 2020 6966 206d 6f64 6520          if mode 
-0001fd70: 3d3d 2027 6669 7273 7427 3a20 7265 7475  == 'first': retu
-0001fd80: 726e 2069 0a20 2020 2020 2020 2020 2020  rn i.           
-0001fd90: 2020 2020 2020 2020 2072 742e 6170 7065           rt.appe
-0001fda0: 6e64 2869 290a 2020 2020 2020 2020 6966  nd(i).        if
-0001fdb0: 2072 743a 2072 6574 7572 6e20 7274 0a20   rt: return rt. 
-0001fdc0: 2020 2072 6574 7572 6e20 6465 6661 756c     return defaul
-0001fdd0: 740a 0a64 6566 2072 6d28 2a61 7267 732c  t..def rm(*args,
-0001fde0: 2a2a 6f70 7473 293a 0a20 2020 2027 2727  **opts):.    '''
-0001fdf0: 0a20 2020 2064 656c 6574 6520 6c6f 6361  .    delete loca
-0001fe00: 6c20 6669 6c65 2077 6974 6820 6f70 7469  l file with opti
-0001fe10: 6f6e 206c 696b 6520 6173 2043 4c49 0a20  on like as CLI. 
-0001fe20: 2020 2020 2020 5b3c 6f70 743e 5d20 3c66        [<opt>] <f
-0001fe30: 696c 6573 3e2f 3c64 6972 6563 746f 7279  iles>/<directory
-0001fe40: 3e0a 2020 2020 2020 202d 6620 2020 203a  >.       -f    :
-0001fe50: 2064 6f6e 2774 2061 736b 2064 656c 6574   don't ask delet
-0001fe60: 650a 2020 2020 2020 202d 7220 2020 203a  e.       -r    :
-0001fe70: 203c 6469 7265 6374 6f72 793e 206f 7220   <directory> or 
-0001fe80: 7265 6375 7272 696e 6720 6465 6c65 7465  recurring delete
-0001fe90: 0a20 2020 2064 656c 6574 6520 6c6f 6361  .    delete loca
-0001fea0: 6c20 6669 6c65 2077 6974 6820 6f70 7469  l file with opti
-0001feb0: 6f6e 206c 696b 6520 6173 2046 756e 6374  on like as Funct
-0001fec0: 696f 6e0a 2020 2020 2020 203c 6669 6c65  ion.       <file
-0001fed0: 733e 2f3c 6469 7265 6374 6f72 793e 2c2e  s>/<directory>,.
-0001fee0: 2e2e 0a20 2020 2020 2020 666f 7263 653d  ...       force=
-0001fef0: 5472 7565 2020 2020 3a20 646f 6e27 7420  True    : don't 
-0001ff00: 6173 6b20 6465 6c65 7465 2c20 6465 6661  ask delete, defa
-0001ff10: 756c 7420 4661 6c73 650a 2020 2020 2020  ult False.      
-0001ff20: 2072 6563 7572 7269 6e67 3d54 7275 653a   recurring=True:
-0001ff30: 203c 6469 7265 6374 6f72 793e 206f 7220   <directory> or 
-0001ff40: 7265 6375 7272 696e 6720 6465 6c65 7465  recurring delete
-0001ff50: 0a20 2020 2064 656c 6574 6520 6c69 7374  .    delete list
-0001ff60: 2f74 7570 6c65 0a20 2020 2020 2020 3c6c  /tuple.       <l
-0001ff70: 6973 742c 7475 706c 653e 2c3c 6465 6c20  ist,tuple>,<del 
-0001ff80: 6974 656d 733e 2c2e 2e2e 0a20 2020 2020  items>,....     
-0001ff90: 2020 6f70 7469 6f6e 290a 2020 2020 2020    option).      
-0001ffa0: 2020 2064 6174 610a 2020 2020 2020 2020     data.        
-0001ffb0: 2020 2054 7275 6520 3a20 6465 6c65 7465     True : delete
-0001ffc0: 2064 6174 6120 6c69 6b65 2061 7320 3c64   data like as <d
-0001ffd0: 656c 2069 7465 6d73 3e0a 2020 2020 2020  el items>.      
-0001ffe0: 2020 2020 2046 616c 7365 3a20 2864 6566       False: (def
-0001fff0: 6175 6c74 2920 6465 6c65 7465 2069 6e64  ault) delete ind
-00020000: 6578 2028 3c64 656c 2069 7465 6d73 3e20  ex (<del items> 
-00020010: 6172 6520 696e 7429 0a20 2020 2064 656c  are int).    del
-00020020: 6574 6520 6469 6374 0a20 2020 2020 2020  ete dict.       
-00020030: 3c64 6963 743e 2c3c 6465 6c20 6974 656d  <dict>,<del item
-00020040: 733e 2c2e 2e2e 0a20 2020 2020 2020 6f70  s>,....       op
-00020050: 7469 6f6e 290a 2020 2020 2020 2020 2064  tion).         d
-00020060: 6174 610a 2020 2020 2020 2020 2020 2054  ata.           T
-00020070: 7275 6520 3a20 6465 6c65 7465 2064 6174  rue : delete dat
-00020080: 6120 6c69 6b65 2061 7320 3c64 656c 2069  a like as <del i
-00020090: 7465 6d73 3e0a 2020 2020 2020 2020 2020  tems>.          
-000200a0: 2046 616c 7365 3a20 2864 6566 6175 6c74   False: (default
-000200b0: 2920 6465 6c65 7465 206b 6579 206c 696b  ) delete key lik
-000200c0: 6520 6173 203c 6465 6c20 6974 656d 733e  e as <del items>
-000200d0: 0a20 2020 2020 2020 2020 7265 6375 7272  .         recurr
-000200e0: 696e 6720 0a20 2020 2020 2020 2020 2020  ing .           
-000200f0: 4661 6c73 653a 2073 6561 7263 6869 6e67  False: searching
-00020100: 2064 6174 6120 696e 2066 6972 7374 206c   data in first l
-00020110: 6576 656c 0a20 2020 2020 2020 2020 2020  evel.           
-00020120: 5472 7565 203a 206b 6565 7020 7365 6172  True : keep sear
-00020130: 6368 696e 6720 696e 7369 6465 2064 6963  ching inside dic
-00020140: 7469 6f6e 6172 7920 0a20 2020 2027 2727  tionary .    '''
-00020150: 0a20 2020 2069 6620 6c65 6e28 6172 6773  .    if len(args
-00020160: 2920 3c3d 2030 3a20 7265 7475 726e 206f  ) <= 0: return o
-00020170: 7074 732e 6765 7428 2764 6566 6175 6c74  pts.get('default
-00020180: 2729 0a20 2020 2023 4c69 7374 2f54 7570  ').    #List/Tup
-00020190: 6c65 0a20 2020 2069 6620 5479 7065 2861  le.    if Type(a
-000201a0: 7267 735b 305d 2c28 6c69 7374 2c74 7570  rgs[0],(list,tup
-000201b0: 6c65 2929 3a0a 2020 2020 2020 2020 7474  le)):.        tt
-000201c0: 3d54 7970 654e 616d 6528 6172 6773 5b30  =TypeName(args[0
-000201d0: 5d29 0a20 2020 2020 2020 2072 743d 6c69  ]).        rt=li
-000201e0: 7374 2861 7267 735b 305d 290a 2020 2020  st(args[0]).    
-000201f0: 2020 2020 6465 6c5f 6461 7461 3d6f 7074      del_data=opt
-00020200: 732e 6765 7428 2776 616c 7565 272c 6f70  s.get('value',op
-00020210: 7473 2e67 6574 2827 6461 7461 272c 4661  ts.get('data',Fa
-00020220: 6c73 6529 290a 2020 2020 2020 2020 6966  lse)).        if
-00020230: 2064 656c 5f64 6174 613a 0a20 2020 2020   del_data:.     
-00020240: 2020 2020 2020 2066 6f72 2069 2069 6e20         for i in 
-00020250: 6172 6773 5b31 3a5d 3a0a 2020 2020 2020  args[1:]:.      
-00020260: 2020 2020 2020 2020 2020 6966 2069 2069            if i i
-00020270: 6e20 7274 3a20 7274 2e72 656d 6f76 6528  n rt: rt.remove(
-00020280: 6929 0a20 2020 2020 2020 2020 2020 2069  i).            i
-00020290: 6620 7474 203d 3d20 2774 7570 6c65 273a  f tt == 'tuple':
-000202a0: 2072 6574 7572 6e20 7475 706c 6528 7274   return tuple(rt
-000202b0: 290a 2020 2020 2020 2020 2020 2020 7265  ).            re
-000202c0: 7475 726e 2072 740a 2020 2020 2020 2020  turn rt.        
-000202d0: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
-000202e0: 2020 746d 703d 5b5d 0a20 2020 2020 2020    tmp=[].       
-000202f0: 2020 2020 2066 6f72 2069 2069 6e20 7261       for i in ra
-00020300: 6e67 6528 302c 6c65 6e28 7274 2929 3a0a  nge(0,len(rt)):.
-00020310: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00020320: 6966 2069 2069 6e20 6172 6773 5b31 3a5d  if i in args[1:]
-00020330: 3a20 636f 6e74 696e 7565 0a20 2020 2020  : continue.     
-00020340: 2020 2020 2020 2020 2020 2074 6d70 2e61             tmp.a
-00020350: 7070 656e 6428 7274 5b69 5d29 0a20 2020  ppend(rt[i]).   
-00020360: 2020 2020 2020 2020 2069 6620 7474 203d           if tt =
-00020370: 3d20 2774 7570 6c65 273a 2072 6574 7572  = 'tuple': retur
-00020380: 6e20 7475 706c 6528 746d 7029 0a20 2020  n tuple(tmp).   
-00020390: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-000203a0: 746d 700a 2020 2020 2344 6963 740a 2020  tmp.    #Dict.  
-000203b0: 2020 656c 6966 2054 7970 6528 6172 6773    elif Type(args
-000203c0: 5b30 5d2c 6469 6374 293a 0a20 2020 2020  [0],dict):.     
-000203d0: 2020 2072 743d 6172 6773 5b30 5d0a 2020     rt=args[0].  
-000203e0: 2020 2020 2020 6465 6c5f 6461 7461 3d6f        del_data=o
-000203f0: 7074 732e 6765 7428 2776 616c 7565 272c  pts.get('value',
-00020400: 6f70 7473 2e67 6574 2827 6461 7461 272c  opts.get('data',
-00020410: 4661 6c73 6529 290a 2020 2020 2020 2020  False)).        
-00020420: 2320 4465 6c20 4461 7461 0a20 2020 2020  # Del Data.     
-00020430: 2020 2069 6620 6465 6c5f 6461 7461 3a20     if del_data: 
-00020440: 0a20 2020 2020 2020 2020 2020 2074 6d70  .            tmp
-00020450: 3d5b 5d0a 2020 2020 2020 2020 2020 2020  =[].            
-00020460: 7274 5f69 7465 6d73 3d6c 6973 7428 7274  rt_items=list(rt
-00020470: 2e69 7465 6d73 2829 290a 2020 2020 2020  .items()).      
-00020480: 2020 2020 2020 666f 7220 6920 696e 2072        for i in r
-00020490: 616e 6765 2830 2c6c 656e 2872 745f 6974  ange(0,len(rt_it
-000204a0: 656d 7329 293a 0a20 2020 2020 2020 2020  ems)):.         
-000204b0: 2020 2020 2020 2023 5265 6375 7272 696e         #Recurrin
-000204c0: 6720 6368 6563 6b0a 2020 2020 2020 2020  g check.        
-000204d0: 2020 2020 2020 2020 6966 206f 7074 732e          if opts.
-000204e0: 6765 7428 2772 6563 7572 7269 6e67 272c  get('recurring',
-000204f0: 4661 6c73 6529 2061 6e64 2054 7970 6528  False) and Type(
-00020500: 7274 5f69 7465 6d73 5b69 5d5b 315d 2c64  rt_items[i][1],d
-00020510: 6963 7429 3a0a 2020 2020 2020 2020 2020  ict):.          
-00020520: 2020 2020 2020 2020 2020 613d 6c69 7374            a=list
-00020530: 2872 745f 6974 656d 735b 695d 290a 2020  (rt_items[i]).  
-00020540: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00020550: 2020 615b 315d 3d72 6d28 7274 5f69 7465    a[1]=rm(rt_ite
-00020560: 6d73 5b69 5d5b 315d 2c2a 6172 6773 5b31  ms[i][1],*args[1
-00020570: 3a5d 2c64 6174 613d 6465 6c5f 6461 7461  :],data=del_data
-00020580: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-00020590: 2020 2020 2020 746d 702e 6170 7065 6e64        tmp.append
-000205a0: 2874 7570 6c65 2861 2929 0a20 2020 2020  (tuple(a)).     
-000205b0: 2020 2020 2020 2020 2020 2065 6c69 6620             elif 
-000205c0: 7274 5f69 7465 6d73 5b69 5d5b 315d 206e  rt_items[i][1] n
-000205d0: 6f74 2069 6e20 6172 6773 5b31 3a5d 3a0a  ot in args[1:]:.
-000205e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000205f0: 2020 2020 746d 702e 6170 7065 6e64 2872      tmp.append(r
-00020600: 745f 6974 656d 735b 695d 290a 2020 2020  t_items[i]).    
-00020610: 2020 2020 2020 2020 7265 7475 726e 2064          return d
-00020620: 6963 7428 746d 7029 0a20 2020 2020 2020  ict(tmp).       
-00020630: 2023 2044 656c 206b 6579 0a20 2020 2020   # Del key.     
-00020640: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
-00020650: 2020 2020 2023 2052 6563 7572 7269 6e67       # Recurring
-00020660: 2063 6865 636b 696e 670a 2020 2020 2020   checking.      
-00020670: 2020 2020 2020 6966 206f 7074 732e 6765        if opts.ge
-00020680: 7428 2772 6563 7572 7269 6e67 272c 4661  t('recurring',Fa
-00020690: 6c73 6529 3a0a 2020 2020 2020 2020 2020  lse):.          
-000206a0: 2020 2020 2020 746d 703d 5b5d 0a20 2020        tmp=[].   
-000206b0: 2020 2020 2020 2020 2020 2020 2072 745f               rt_
-000206c0: 6974 656d 733d 6c69 7374 2872 742e 6974  items=list(rt.it
-000206d0: 656d 7328 2929 0a20 2020 2020 2020 2020  ems()).         
-000206e0: 2020 2020 2020 2066 6f72 2069 2069 6e20         for i in 
-000206f0: 7261 6e67 6528 302c 6c65 6e28 7274 5f69  range(0,len(rt_i
-00020700: 7465 6d73 2929 3a0a 2020 2020 2020 2020  tems)):.        
-00020710: 2020 2020 2020 2020 2020 2020 6966 2072              if r
-00020720: 745f 6974 656d 735b 695d 5b30 5d20 6e6f  t_items[i][0] no
-00020730: 7420 696e 2061 7267 735b 313a 5d3a 0a20  t in args[1:]:. 
-00020740: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00020750: 2020 2020 2020 2069 6620 5479 7065 2872         if Type(r
-00020760: 745f 6974 656d 735b 695d 5b31 5d2c 6469  t_items[i][1],di
-00020770: 6374 293a 0a20 2020 2020 2020 2020 2020  ct):.           
-00020780: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00020790: 2061 3d6c 6973 7428 7274 5f69 7465 6d73   a=list(rt_items
-000207a0: 5b69 5d29 0a20 2020 2020 2020 2020 2020  [i]).           
-000207b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000207c0: 2061 5b31 5d3d 726d 2872 745f 6974 656d   a[1]=rm(rt_item
-000207d0: 735b 695d 5b31 5d2c 2a61 7267 735b 313a  s[i][1],*args[1:
-000207e0: 5d2c 6461 7461 3d64 656c 5f64 6174 6129  ],data=del_data)
-000207f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00020800: 2020 2020 2020 2020 2020 2020 2074 6d70               tmp
-00020810: 2e61 7070 656e 6428 7475 706c 6528 6129  .append(tuple(a)
-00020820: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-00020830: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
-00020840: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00020850: 2020 2020 2020 2020 2020 2020 746d 702e              tmp.
-00020860: 6170 7065 6e64 2872 745f 6974 656d 735b  append(rt_items[
-00020870: 695d 290a 2020 2020 2020 2020 2020 2020  i]).            
-00020880: 2020 2020 7265 7475 726e 2064 6963 7428      return dict(
-00020890: 746d 7029 0a20 2020 2020 2020 2020 2020  tmp).           
-000208a0: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
-000208b0: 2020 2020 2020 2066 6f72 2069 2069 6e20         for i in 
-000208c0: 6172 6773 5b31 3a5d 3a0a 2020 2020 2020  args[1:]:.      
-000208d0: 2020 2020 2020 2020 2020 2020 2020 2350                #P
-000208e0: 6174 6820 6b65 790a 2020 2020 2020 2020  ath key.        
-000208f0: 2020 2020 2020 2020 2020 2020 6966 2027              if '
-00020900: 2f27 2069 6e20 6920 616e 6420 695b 305d  /' in i and i[0]
-00020910: 203d 3d20 272f 273a 0a20 2020 2020 2020   == '/':.       
-00020920: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00020930: 2069 5f61 3d69 2e73 706c 6974 2827 2f27   i_a=i.split('/'
-00020940: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-00020950: 2020 2020 2020 2020 2020 746d 703d 7274            tmp=rt
-00020960: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00020970: 2020 2020 2020 2020 2062 726b 3d46 616c           brk=Fal
-00020980: 7365 0a20 2020 2020 2020 2020 2020 2020  se.             
-00020990: 2020 2020 2020 2020 2020 2066 6f72 207a             for z
-000209a0: 2069 6e20 695f 615b 313a 2d31 5d3a 0a20   in i_a[1:-1]:. 
-000209b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000209c0: 2020 2020 2020 2020 2020 2069 6620 7a20             if z 
-000209d0: 696e 2074 6d70 3a0a 2020 2020 2020 2020  in tmp:.        
-000209e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000209f0: 2020 2020 2020 2020 746d 703d 746d 705b          tmp=tmp[
-00020a00: 7a5d 0a20 2020 2020 2020 2020 2020 2020  z].             
-00020a10: 2020 2020 2020 2020 2020 2020 2020 2065                 e
-00020a20: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
+0001eab0: 2020 6465 6c20 6e66 705b 2d31 5d0a 2020    del nfp[-1].  
+0001eac0: 2020 2020 2020 2020 2020 2020 2020 656c                el
+0001ead0: 6966 2065 7272 3a0a 2020 2020 2020 2020  if err:.        
+0001eae0: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+0001eaf0: 726e 2064 6566 6175 6c74 0a20 2020 2020  rn default.     
+0001eb00: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
+0001eb10: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+0001eb20: 6920 213d 2027 2e27 3a20 2372 656d 6f76  i != '.': #remov
+0001eb30: 6520 272e 270a 2020 2020 2020 2020 2020  e '.'.          
+0001eb40: 2020 2020 2020 2020 2020 6e66 702e 6170            nfp.ap
+0001eb50: 7065 6e64 2869 290a 2020 2020 2020 2020  pend(i).        
+0001eb60: 6675 6c6c 5f70 6174 683d 6e66 700a 2020  full_path=nfp.  
+0001eb70: 2020 666f 7220 6969 2069 6e20 696e 705b    for ii in inp[
+0001eb80: 313a 5d3a 2023 2061 6464 2065 7874 7261  1:]: # add extra
+0001eb90: 2069 6e70 7574 0a20 2020 2020 2020 2069   input.        i
+0001eba0: 6620 6973 696e 7374 616e 6365 2869 692c  f isinstance(ii,
+0001ebb0: 7374 7229 3a0a 2020 2020 2020 2020 2020  str):.          
+0001ebc0: 2020 666f 7220 7a7a 2069 6e20 6969 2e73    for zz in ii.s
+0001ebd0: 706c 6974 2873 796d 293a 0a20 2020 2020  plit(sym):.     
+0001ebe0: 2020 2020 2020 2020 2020 2069 6620 7265             if re
+0001ebf0: 6d6f 7665 5f64 6f74 3a0a 2020 2020 2020  move_dot:.      
+0001ec00: 2020 2020 2020 2020 2020 2020 2020 6966                if
+0001ec10: 207a 7a20 3d3d 2027 2e27 206f 7220 6e6f   zz == '.' or no
+0001ec20: 7420 5479 7065 287a 7a2c 2773 7472 272c  t Type(zz,'str',
+0001ec30: 6461 7461 3d54 7275 6529 3a20 636f 6e74  data=True): cont
+0001ec40: 696e 7565 0a20 2020 2020 2020 2020 2020  inue.           
+0001ec50: 2020 2020 2020 2020 2069 6620 7a7a 203d           if zz =
+0001ec60: 3d20 272e 2e27 3a0a 2020 2020 2020 2020  = '..':.        
+0001ec70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001ec80: 6966 2066 756c 6c5f 7061 7468 3a0a 2020  if full_path:.  
+0001ec90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001eca0: 2020 2020 2020 2020 2020 236b 6565 7020            #keep 
+0001ecb0: 726f 6f74 2070 6174 6820 2827 2f27 290a  root path ('/').
+0001ecc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001ecd0: 2020 2020 2020 2020 2020 2020 6966 206c              if l
+0001ece0: 656e 2866 756c 6c5f 7061 7468 293d 3d31  en(full_path)==1
+0001ecf0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+0001ed00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001ed10: 2020 6966 2066 756c 6c5f 7061 7468 5b30    if full_path[0
+0001ed20: 5d3a 0a20 2020 2020 2020 2020 2020 2020  ]:.             
+0001ed30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001ed40: 2020 2020 2020 2064 656c 2066 756c 6c5f         del full_
+0001ed50: 7061 7468 5b2d 315d 0a20 2020 2020 2020  path[-1].       
+0001ed60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001ed70: 2020 2020 2020 2020 2065 6c69 6620 6572           elif er
+0001ed80: 723a 0a20 2020 2020 2020 2020 2020 2020  r:.             
+0001ed90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001eda0: 2020 2020 2020 2072 6574 7572 6e20 6465         return de
+0001edb0: 6661 756c 740a 2020 2020 2020 2020 2020  fault.          
+0001edc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001edd0: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
+0001ede0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001edf0: 2020 2020 2020 2020 6465 6c20 6675 6c6c          del full
+0001ee00: 5f70 6174 685b 2d31 5d0a 2020 2020 2020  _path[-1].      
+0001ee10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001ee20: 2020 2020 2020 636f 6e74 696e 7565 0a20        continue. 
+0001ee30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001ee40: 2020 2020 2020 2065 6c69 6620 6572 723a         elif err:
+0001ee50: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001ee60: 2020 2020 2020 2020 2020 2020 2072 6574               ret
+0001ee70: 7572 6e20 6465 6661 756c 740a 2020 2020  urn default.    
+0001ee80: 2020 2020 2020 2020 2020 2020 6675 6c6c              full
+0001ee90: 5f70 6174 682e 6170 7065 6e64 287a 7a29  _path.append(zz)
+0001eea0: 0a20 2020 2069 6620 6f75 7420 696e 205b  .    if out in [
+0001eeb0: 7374 722c 2773 7472 275d 3a0a 2020 2020  str,'str']:.    
+0001eec0: 2020 2020 6966 206e 6f74 2066 756c 6c5f      if not full_
+0001eed0: 7061 7468 3a20 7265 7475 726e 2027 270a  path: return ''.
+0001eee0: 2020 2020 2020 2020 7274 3d4a 6f69 6e28          rt=Join(
+0001eef0: 6675 6c6c 5f70 6174 682c 7379 6d62 6f6c  full_path,symbol
+0001ef00: 3d73 796d 290a 2020 2020 2020 2020 6966  =sym).        if
+0001ef10: 206f 7074 732e 6765 7428 2766 6f72 6365   opts.get('force
+0001ef20: 5f72 6f6f 7427 2c6f 7074 732e 6765 7428  _root',opts.get(
+0001ef30: 2772 6f6f 7427 2c46 616c 7365 2929 3a0a  'root',False)):.
+0001ef40: 2020 2020 2020 2020 2020 2020 6966 2072              if r
+0001ef50: 745b 305d 2021 3d20 272f 273a 2072 6574  t[0] != '/': ret
+0001ef60: 7572 6e20 272f 272b 7274 0a20 2020 2020  urn '/'+rt.     
+0001ef70: 2020 2072 6574 7572 6e20 7274 0a20 2020     return rt.   
+0001ef80: 2065 6c73 653a 0a20 2020 2020 2020 2072   else:.        r
+0001ef90: 6574 7572 6e20 6675 6c6c 5f70 6174 680a  eturn full_path.
+0001efa0: 0a64 6566 2043 7574 2873 7263 2c68 6561  .def Cut(src,hea
+0001efb0: 645f 6c65 6e3d 4e6f 6e65 2c62 6f64 795f  d_len=None,body_
+0001efc0: 6c65 6e3d 4e6f 6e65 2c6e 6577 5f6c 696e  len=None,new_lin
+0001efd0: 653d 275c 6e27 2c6f 7574 3d73 7472 293a  e='\n',out=str):
+0001efe0: 0a20 2020 2027 2727 0a20 2020 2043 7574  .    '''.    Cut
+0001eff0: 2073 7472 696e 670a 2020 2020 6865 6164   string.    head
+0001f000: 5f6c 656e 203a 2069 6e74 203a 2066 6972  _len : int : fir
+0001f010: 7374 206c 696e 6520 6c65 6e67 7468 2028  st line length (
+0001f020: 6465 6661 756c 7420 4e6f 6e65 290a 2020  default None).  
+0001f030: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+0001f040: 626f 6479 5f6c 656e 2069 7320 4e6f 6e65  body_len is None
+0001f050: 2074 6865 6e20 6576 6572 7974 6869 6e67   then everything
+0001f060: 2063 7574 2073 616d 6520 6c65 6e67 7468   cut same length
+0001f070: 2077 6974 6820 6865 6164 5f6c 656e 0a20   with head_len. 
+0001f080: 2020 2062 6f64 795f 6c65 6e20 3a20 696e     body_len : in
+0001f090: 7420 3a20 6c69 6e65 206c 656e 6774 6820  t : line length 
+0001f0a0: 6166 7465 7220 6865 6164 5f6c 656e 2028  after head_len (
+0001f0b0: 6465 6661 756c 7420 4e6f 6e65 290a 2020  default None).  
+0001f0c0: 2020 6e65 775f 6c69 6e65 203a 2064 6566    new_line : def
+0001f0d0: 6175 6c74 206c 696e 7578 206e 6577 206c  ault linux new l
+0001f0e0: 696e 650a 2020 2020 6f75 743d 0a20 2020  ine.    out=.   
+0001f0f0: 2020 2020 2073 7472 2020 3a20 6f75 7470       str  : outp
+0001f100: 7574 2074 6f20 7374 7269 6e67 2077 6974  ut to string wit
+0001f110: 6820 6e65 775f 6c69 6e65 2028 6465 6661  h new_line (defa
+0001f120: 756c 7429 0a20 2020 2020 2020 206c 6973  ult).        lis
+0001f130: 7420 3a20 6f75 7470 7574 2074 6f20 6c69  t : output to li
+0001f140: 7374 2069 6e73 7465 6164 206e 6577 5f6c  st instead new_l
+0001f150: 696e 650a 2020 2020 2727 270a 2020 2020  ine.    '''.    
+0001f160: 6966 206e 6f74 2069 7369 6e73 7461 6e63  if not isinstanc
+0001f170: 6528 7372 632c 7374 7229 3a20 7265 7475  e(src,str): retu
+0001f180: 726e 2046 616c 7365 0a20 2020 2073 6f75  rn False.    sou
+0001f190: 7263 653d 7372 632e 7370 6c69 7428 6e65  rce=src.split(ne
+0001f1a0: 775f 6c69 6e65 290a 2020 2020 6966 206c  w_line).    if l
+0001f1b0: 656e 2873 6f75 7263 6529 203d 3d20 3120  en(source) == 1 
+0001f1c0: 616e 6420 6e6f 7420 6865 6164 5f6c 656e  and not head_len
+0001f1d0: 206f 7220 6865 6164 5f6c 656e 203e 3d20   or head_len >= 
+0001f1e0: 6c65 6e28 7372 6329 3a0a 2020 2020 2020  len(src):.      
+0001f1f0: 2069 6620 7372 6320 616e 6420 6f75 7420   if src and out 
+0001f200: 696e 205b 2773 7472 272c 7374 725d 3a20  in ['str',str]: 
+0001f210: 7265 7475 726e 204a 6f69 6e28 7372 632c  return Join(src,
+0001f220: 7379 6d62 6f6c 3d6e 6577 5f6c 696e 6529  symbol=new_line)
+0001f230: 0a20 2020 2020 2020 7265 7475 726e 205b  .       return [
+0001f240: 7372 635d 0a20 2020 2072 743d 5b5d 0a20  src].    rt=[]. 
+0001f250: 2020 2066 6f72 2073 7263 5f69 6478 2069     for src_idx i
+0001f260: 6e20 7261 6e67 6528 302c 6c65 6e28 736f  n range(0,len(so
+0001f270: 7572 6365 2929 3a0a 2020 2020 2020 2020  urce)):.        
+0001f280: 7374 725f 6c65 6e3d 6c65 6e28 736f 7572  str_len=len(sour
+0001f290: 6365 5b73 7263 5f69 6478 5d29 0a0a 2020  ce[src_idx])..  
+0001f2a0: 2020 2020 2020 6966 206e 6f74 2062 6f64        if not bod
+0001f2b0: 795f 6c65 6e3a 0a20 2020 2020 2020 2020  y_len:.         
+0001f2c0: 2020 2072 743d 7274 2b5b 736f 7572 6365     rt=rt+[source
+0001f2d0: 5b73 7263 5f69 6478 5d5b 693a 6920 2b20  [src_idx][i:i + 
+0001f2e0: 6865 6164 5f6c 656e 5d20 666f 7220 6920  head_len] for i 
+0001f2f0: 696e 2072 616e 6765 2830 2c20 7374 725f  in range(0, str_
+0001f300: 6c65 6e2c 2068 6561 645f 6c65 6e29 5d0a  len, head_len)].
+0001f310: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
+0001f320: 2020 2020 2020 2020 2020 6966 2073 7263            if src
+0001f330: 5f69 6478 203d 3d20 303a 0a20 2020 2020  _idx == 0:.     
+0001f340: 2020 2020 2020 2020 2020 2072 742e 6170             rt.ap
+0001f350: 7065 6e64 2873 6f75 7263 655b 7372 635f  pend(source[src_
+0001f360: 6964 785d 5b30 3a68 6561 645f 6c65 6e5d  idx][0:head_len]
+0001f370: 2920 2320 5461 6b65 2068 6561 640a 2020  ) # Take head.  
+0001f380: 2020 2020 2020 2020 2020 2020 2020 6966                if
+0001f390: 2073 7472 5f6c 656e 203e 2068 6561 645f   str_len > head_
+0001f3a0: 6c65 6e3a 0a20 2020 2020 2020 2020 2020  len:.           
+0001f3b0: 2020 2020 2020 2020 2072 743d 7274 2b5b           rt=rt+[
+0001f3c0: 736f 7572 6365 5b73 7263 5f69 6478 5d5b  source[src_idx][
+0001f3d0: 6865 6164 5f6c 656e 3a5d 5b69 3a69 202b  head_len:][i:i +
+0001f3e0: 2062 6f64 795f 6c65 6e5d 2066 6f72 2069   body_len] for i
+0001f3f0: 2069 6e20 7261 6e67 6528 302c 2073 7472   in range(0, str
+0001f400: 5f6c 656e 2d68 6561 645f 6c65 6e2c 2062  _len-head_len, b
+0001f410: 6f64 795f 6c65 6e29 5d0a 2020 2020 2020  ody_len)].      
+0001f420: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
+0001f430: 2020 2020 2020 2020 2020 2020 7274 3d72              rt=r
+0001f440: 742b 5b73 6f75 7263 655b 7372 635f 6964  t+[source[src_id
+0001f450: 785d 5b69 3a69 202b 2062 6f64 795f 6c65  x][i:i + body_le
+0001f460: 6e5d 2066 6f72 2069 2069 6e20 7261 6e67  n] for i in rang
+0001f470: 6528 302c 2073 7472 5f6c 656e 2c20 626f  e(0, str_len, bo
+0001f480: 6479 5f6c 656e 295d 0a20 2020 2069 6620  dy_len)].    if 
+0001f490: 7274 2061 6e64 206f 7574 2069 6e20 5b27  rt and out in ['
+0001f4a0: 7374 7227 2c73 7472 5d3a 2072 6574 7572  str',str]: retur
+0001f4b0: 6e20 4a6f 696e 2872 742c 7379 6d62 6f6c  n Join(rt,symbol
+0001f4c0: 3d6e 6577 5f6c 696e 6529 0a20 2020 2072  =new_line).    r
+0001f4d0: 6574 7572 6e20 7274 0a0a 6465 6620 5370  eturn rt..def Sp
+0001f4e0: 6163 6528 6e75 6d3d 342c 6669 6c6c 3d4e  ace(num=4,fill=N
+0001f4f0: 6f6e 652c 6d6f 6465 3d27 7370 6163 6527  one,mode='space'
+0001f500: 2c74 6170 3d27 2729 3a0a 2020 2020 2727  ,tap=''):.    ''
+0001f510: 270a 2020 2020 6d61 6b65 2061 2063 6861  '.    make a cha
+0001f520: 7261 6374 6f72 2873 7061 6365 2c20 7461  ractor(space, ta
+0001f530: 7029 2067 726f 7570 0a20 2020 206e 756d  p) group.    num
+0001f540: 3a20 6465 6661 756c 7420 342c 2068 6f77  : default 4, how
+0001f550: 206d 616e 7920 6669 6c6c 206f 7574 203c   many fill out <
+0001f560: 6669 6c6c 3e0a 2020 2020 6d6f 6465 3a0a  fill>.    mode:.
+0001f570: 2020 2020 2020 7370 6163 6520 3a20 6465        space : de
+0001f580: 6661 756c 743a 2027 2027 0a20 2020 2020  fault: ' '.     
+0001f590: 2074 6170 2020 203a 205c 5c74 0a20 2020   tap   : \\t.   
+0001f5a0: 2066 696c 6c3a 0a20 2020 2020 204e 6f6e   fill:.      Non
+0001f5b0: 6520 3a20 6465 6661 756c 743a 2066 6f6c  e : default: fol
+0001f5c0: 6c6f 7769 6e67 206d 6f64 6520 696e 666f  lowing mode info
+0001f5d0: 726d 6174 696f 6e0a 2020 2020 2020 3c73  rmation.      <s
+0001f5e0: 7065 6369 616c 2063 6861 7261 6374 6f72  pecial charactor
+0001f5f0: 3e20 3a20 6669 6c6c 206f 7574 2074 6865  > : fill out the
+0001f600: 2063 6861 7261 6374 6f72 0a20 2020 2074   charactor.    t
+0001f610: 6170 3a0a 2020 2020 2020 2727 2020 203a  ap:.      ''   :
+0001f620: 2064 6566 6175 6c74 0a20 2020 2020 203c   default.      <
+0001f630: 7370 6369 616c 2069 6e69 7461 6c20 6368  spcial inital ch
+0001f640: 7261 6374 6f72 3e3a 2070 7265 2d66 696c  ractor>: pre-fil
+0001f650: 6c6f 7574 2077 6974 6820 7468 6973 2063  lout with this c
+0001f660: 6872 6163 746f 720a 2020 2020 2727 270a  hractor.    '''.
+0001f670: 2020 2020 6d6f 6465 3d6d 6f64 652e 6c6f      mode=mode.lo
+0001f680: 7765 7228 290a 2020 2020 6966 206d 6f64  wer().    if mod
+0001f690: 6520 3d3d 2774 6170 273a 0a20 2020 2020  e =='tap':.     
+0001f6a0: 2020 2066 696c 6c3d 275c 7427 0a20 2020     fill='\t'.   
+0001f6b0: 2065 6c69 6620 6d6f 6465 203d 3d20 2773   elif mode == 's
+0001f6c0: 7061 6365 2720 6f72 2066 696c 6c20 6973  pace' or fill is
+0001f6d0: 204e 6f6e 653a 0a20 2020 2020 2020 2066   None:.        f
+0001f6e0: 696c 6c3d 2720 270a 2020 2020 666f 7220  ill=' '.    for 
+0001f6f0: 6920 696e 2072 616e 6765 2830 2c6e 756d  i in range(0,num
+0001f700: 293a 0a20 2020 2020 2020 2074 6170 3d74  ):.        tap=t
+0001f710: 6170 2b66 696c 6c0a 2020 2020 7265 7475  ap+fill.    retu
+0001f720: 726e 2074 6170 0a0a 6465 6620 5772 6170  rn tap..def Wrap
+0001f730: 5374 7269 6e67 2873 7472 696e 672c 6673  String(string,fs
+0001f740: 7061 6365 3d30 2c6e 7370 6163 653d 302c  pace=0,nspace=0,
+0001f750: 6e65 775f 6c69 6e65 3d27 5c6e 272c 666c  new_line='\n',fl
+0001f760: 656e 6774 683d 302c 6e6c 656e 6774 683d  ength=0,nlength=
+0001f770: 302c 6e74 6170 3d30 2c4e 464c 543d 4661  0,ntap=0,NFLT=Fa
+0001f780: 6c73 652c 6d6f 6465 3d27 7370 6163 6527  lse,mode='space'
+0001f790: 2c64 6566 6175 6c74 3d27 272c 6f75 743d  ,default='',out=
+0001f7a0: 2773 7472 2729 3a0a 2020 2020 6966 2049  'str'):.    if I
+0001f7b0: 734e 6f6e 6528 7374 7269 6e67 293a 2072  sNone(string): r
+0001f7c0: 6574 7572 6e20 6465 6661 756c 740a 2020  eturn default.  
+0001f7d0: 2020 6966 206e 6f74 2054 7970 6528 7374    if not Type(st
+0001f7e0: 7269 6e67 2c27 7374 7227 293a 7374 7269  ring,'str'):stri
+0001f7f0: 6e67 3d27 2727 7b7d 2727 272e 666f 726d  ng='''{}'''.form
+0001f800: 6174 2873 7472 696e 6729 0a20 2020 2072  at(string).    r
+0001f810: 635f 7374 723d 5b5d 0a20 2020 2073 7472  c_str=[].    str
+0001f820: 696e 675f 613d 7374 7269 6e67 2e73 706c  ing_a=string.spl
+0001f830: 6974 286e 6577 5f6c 696e 6529 0a20 2020  it(new_line).   
+0001f840: 2023 4669 7273 7420 6c69 6e65 2064 6573   #First line des
+0001f850: 6967 6e0a 2020 2020 6966 204e 464c 543a  ign.    if NFLT:
+0001f860: 2066 7370 6163 653d 300a 2020 2020 7263   fspace=0.    rc
+0001f870: 5f73 7472 2e61 7070 656e 6428 5370 6163  _str.append(Spac
+0001f880: 6528 6673 7061 6365 2c6d 6f64 653d 6d6f  e(fspace,mode=mo
+0001f890: 6465 292b 4a6f 696e 2843 7574 2873 7472  de)+Join(Cut(str
+0001f8a0: 696e 675f 615b 305d 2c68 6561 645f 6c65  ing_a[0],head_le
+0001f8b0: 6e3d 666c 656e 6774 682c 626f 6479 5f6c  n=flength,body_l
+0001f8c0: 656e 3d6e 6c65 6e67 7468 2c6e 6577 5f6c  en=nlength,new_l
+0001f8d0: 696e 653d 6e65 775f 6c69 6e65 2c6f 7574  ine=new_line,out
+0001f8e0: 3d6c 6973 7429 2c27 5c6e 272c 6170 7065  =list),'\n',appe
+0001f8f0: 6e64 5f66 726f 6e74 3d53 7061 6365 286e  nd_front=Space(n
+0001f900: 7370 6163 652c 6d6f 6465 3d6d 6f64 6529  space,mode=mode)
+0001f910: 2929 0a20 2020 2023 426f 6479 206c 696e  )).    #Body lin
+0001f920: 6520 6465 7369 676e 0a20 2020 2066 6f72  e design.    for
+0001f930: 2069 6920 696e 2073 7472 696e 675f 615b   ii in string_a[
+0001f940: 313a 5d3a 0a20 2020 2020 2020 2072 635f  1:]:.        rc_
+0001f950: 7374 722e 6170 7065 6e64 2853 7061 6365  str.append(Space
+0001f960: 286e 7370 6163 652c 6d6f 6465 3d6d 6f64  (nspace,mode=mod
+0001f970: 6529 2b4a 6f69 6e28 4375 7428 6969 2c68  e)+Join(Cut(ii,h
+0001f980: 6561 645f 6c65 6e3d 6e6c 656e 6774 682c  ead_len=nlength,
+0001f990: 6e65 775f 6c69 6e65 3d6e 6577 5f6c 696e  new_line=new_lin
+0001f9a0: 652c 6f75 743d 6c69 7374 292c 275c 6e27  e,out=list),'\n'
+0001f9b0: 2c61 7070 656e 645f 6672 6f6e 743d 5370  ,append_front=Sp
+0001f9c0: 6163 6528 6e73 7061 6365 2c6d 6f64 653d  ace(nspace,mode=
+0001f9d0: 6d6f 6465 2929 290a 2020 2020 2372 6574  mode))).    #ret
+0001f9e0: 7572 6e20 6e65 775f 6c69 6e65 2e6a 6f69  urn new_line.joi
+0001f9f0: 6e28 7263 5f73 7472 290a 2020 2020 6966  n(rc_str).    if
+0001fa00: 206f 7574 2069 6e20 5b6c 6973 742c 276c   out in [list,'l
+0001fa10: 6973 7427 5d3a 2072 6574 7572 6e20 7263  ist']: return rc
+0001fa20: 5f73 7472 0a20 2020 2065 6c69 6620 6f75  _str.    elif ou
+0001fa30: 7420 696e 205b 7475 706c 652c 2774 7570  t in [tuple,'tup
+0001fa40: 6c65 275d 3a20 7265 7475 726e 2074 7570  le']: return tup
+0001fa50: 6c65 2872 635f 7374 7229 0a20 2020 2072  le(rc_str).    r
+0001fa60: 6574 7572 6e20 4a6f 696e 2872 635f 7374  eturn Join(rc_st
+0001fa70: 722c 6e65 775f 6c69 6e65 290a 0a64 6566  r,new_line)..def
+0001fa80: 2047 6574 4b65 7928 7372 632c 6669 6e64   GetKey(src,find
+0001fa90: 3d4e 6f6e 652c 6465 6661 756c 743d 4e6f  =None,default=No
+0001faa0: 6e65 2c6d 6f64 653d 2766 6972 7374 272c  ne,mode='first',
+0001fab0: 726f 6f74 3d4e 6f6e 6529 3a0a 2020 2020  root=None):.    
+0001fac0: 2727 270a 2020 2020 4765 7420 6b65 7920  '''.    Get key 
+0001fad0: 6672 6f6d 2064 6963 742c 6c69 7374 2c74  from dict,list,t
+0001fae0: 7570 6c65 2c73 7472 0a20 2020 2066 696e  uple,str.    fin
+0001faf0: 6420 3a20 6966 206d 6174 6368 6564 2076  d : if matched v
+0001fb00: 616c 7565 2074 6865 6e20 7265 7475 726e  alue then return
+0001fb10: 2074 6865 206b 6579 2f69 6e64 6578 206f   the key/index o
+0001fb20: 6620 7468 6520 6461 7461 0a20 2020 206d  f the data.    m
+0001fb30: 6f64 6520 3a0a 2020 2020 2020 6669 7273  ode :.      firs
+0001fb40: 7420 3a20 6465 6661 756c 743a 2072 6574  t : default: ret
+0001fb50: 7572 6e20 6669 7273 7420 6669 6e64 0a20  urn first find. 
+0001fb60: 2020 2020 2061 6c6c 2020 203a 2072 6574       all   : ret
+0001fb70: 7572 6e20 666f 756e 6420 616c 6c0a 2020  urn found all.  
+0001fb80: 2020 6465 6661 756c 7420 3a20 7265 7475    default : retu
+0001fb90: 726e 2077 6865 6e20 6e6f 7420 666f 756e  rn when not foun
+0001fba0: 640a 2020 2020 2727 270a 2020 2020 7274  d.    '''.    rt
+0001fbb0: 3d5b 5d0a 2020 2020 6966 2069 7369 6e73  =[].    if isins
+0001fbc0: 7461 6e63 6528 7372 632c 6469 6374 293a  tance(src,dict):
+0001fbd0: 0a20 2020 2020 2020 2069 6620 4973 4e6f  .        if IsNo
+0001fbe0: 6e65 2866 696e 6429 3a0a 2020 2020 2020  ne(find):.      
+0001fbf0: 2020 2020 2020 7265 7475 726e 206c 6973        return lis
+0001fc00: 7428 7372 632e 6b65 7973 2829 290a 2020  t(src.keys()).  
+0001fc10: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
+0001fc20: 2020 2020 2020 2020 666f 7220 6b65 792c          for key,
+0001fc30: 7661 6c20 696e 2073 7263 2e69 7465 6d73  val in src.items
+0001fc40: 2829 3a0a 2020 2020 2020 2020 2020 2020  ():.            
+0001fc50: 2020 2020 6966 2069 7369 6e73 7461 6e63      if isinstanc
+0001fc60: 6528 7661 6c2c 6469 6374 293a 0a20 2020  e(val,dict):.   
+0001fc70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001fc80: 2061 3d47 6574 4b65 7928 7661 6c2c 6669   a=GetKey(val,fi
+0001fc90: 6e64 2c64 6566 6175 6c74 2c6d 6f64 652c  nd,default,mode,
+0001fca0: 6b65 7929 0a20 2020 2020 2020 2020 2020  key).           
+0001fcb0: 2020 2020 2020 2020 2069 6620 613a 0a20           if a:. 
+0001fcc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001fcd0: 2020 2020 2020 2069 6620 6973 696e 7374         if isinst
+0001fce0: 616e 6365 2861 2c73 7472 293a 0a20 2020  ance(a,str):.   
+0001fcf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001fd00: 2020 2020 2020 2020 2069 6620 726f 6f74           if root
+0001fd10: 2069 7320 4e6f 6e65 3a0a 2020 2020 2020   is None:.      
+0001fd20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001fd30: 2020 2020 2020 2020 2020 7265 7475 726e            return
+0001fd40: 2027 2f7b 7d2f 7b7d 272e 666f 726d 6174   '/{}/{}'.format
+0001fd50: 286b 6579 2c61 290a 2020 2020 2020 2020  (key,a).        
+0001fd60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001fd70: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+0001fd80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001fd90: 2020 2020 2020 2020 2020 7265 7475 726e            return
+0001fda0: 2027 7b7d 2f7b 7d27 2e66 6f72 6d61 7428   '{}/{}'.format(
+0001fdb0: 6b65 792c 6129 0a20 2020 2020 2020 2020  key,a).         
+0001fdc0: 2020 2020 2020 2020 2020 2020 2020 2065                 e
+0001fdd0: 6c69 6620 6973 696e 7374 616e 6365 2861  lif isinstance(a
+0001fde0: 2c6c 6973 7429 3a0a 2020 2020 2020 2020  ,list):.        
+0001fdf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001fe00: 2020 2020 666f 7220 6920 696e 2061 3a0a      for i in a:.
+0001fe10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001fe20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001fe30: 6966 2072 6f6f 7420 6973 204e 6f6e 653a  if root is None:
+0001fe40: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001fe50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001fe60: 2020 2020 2072 742e 6170 7065 6e64 2827       rt.append('
+0001fe70: 2f7b 7d2f 7b7d 272e 666f 726d 6174 286b  /{}/{}'.format(k
+0001fe80: 6579 2c69 2929 0a20 2020 2020 2020 2020  ey,i)).         
+0001fe90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001fea0: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
+0001feb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001fec0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001fed0: 2072 742e 6170 7065 6e64 2827 7b7d 2f7b   rt.append('{}/{
+0001fee0: 7d27 2e66 6f72 6d61 7428 6b65 792c 6929  }'.format(key,i)
+0001fef0: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+0001ff00: 2020 656c 6966 2076 616c 203d 3d20 6669    elif val == fi
+0001ff10: 6e64 3a0a 2020 2020 2020 2020 2020 2020  nd:.            
+0001ff20: 2020 2020 2020 2020 6966 206d 6f64 6520          if mode 
+0001ff30: 3d3d 2027 6669 7273 7427 3a20 7265 7475  == 'first': retu
+0001ff40: 726e 206b 6579 0a20 2020 2020 2020 2020  rn key.         
+0001ff50: 2020 2020 2020 2020 2020 2072 742e 6170             rt.ap
+0001ff60: 7065 6e64 286b 6579 290a 2020 2020 2020  pend(key).      
+0001ff70: 2020 2020 2020 6966 2072 743a 2072 6574        if rt: ret
+0001ff80: 7572 6e20 7274 0a20 2020 2065 6c69 6620  urn rt.    elif 
+0001ff90: 6973 696e 7374 616e 6365 2873 7263 2c28  isinstance(src,(
+0001ffa0: 6c69 7374 2c74 7570 6c65 2c73 7472 2929  list,tuple,str))
+0001ffb0: 3a0a 2020 2020 2020 2020 6966 2049 734e  :.        if IsN
+0001ffc0: 6f6e 6528 6669 6e64 293a 0a20 2020 2020  one(find):.     
+0001ffd0: 2020 2020 2020 2072 6574 7572 6e20 6c65         return le
+0001ffe0: 6e28 7372 6329 0a20 2020 2020 2020 2065  n(src).        e
+0001fff0: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
+00020000: 2066 6f72 2069 2069 6e20 7261 6e67 6528   for i in range(
+00020010: 302c 6c65 6e28 7372 6329 293a 0a20 2020  0,len(src)):.   
+00020020: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+00020030: 6669 6e64 203d 3d20 7372 635b 695d 3a0a  find == src[i]:.
+00020040: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00020050: 2020 2020 6966 206d 6f64 6520 3d3d 2027      if mode == '
+00020060: 6669 7273 7427 3a20 7265 7475 726e 2069  first': return i
+00020070: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00020080: 2020 2020 2072 742e 6170 7065 6e64 2869       rt.append(i
+00020090: 290a 2020 2020 2020 2020 6966 2072 743a  ).        if rt:
+000200a0: 2072 6574 7572 6e20 7274 0a20 2020 2072   return rt.    r
+000200b0: 6574 7572 6e20 6465 6661 756c 740a 0a64  eturn default..d
+000200c0: 6566 2072 6d28 2a61 7267 732c 2a2a 6f70  ef rm(*args,**op
+000200d0: 7473 293a 0a20 2020 2027 2727 0a20 2020  ts):.    '''.   
+000200e0: 2064 656c 6574 6520 6c6f 6361 6c20 6669   delete local fi
+000200f0: 6c65 2077 6974 6820 6f70 7469 6f6e 206c  le with option l
+00020100: 696b 6520 6173 2043 4c49 0a20 2020 2020  ike as CLI.     
+00020110: 2020 5b3c 6f70 743e 5d20 3c66 696c 6573    [<opt>] <files
+00020120: 3e2f 3c64 6972 6563 746f 7279 3e0a 2020  >/<directory>.  
+00020130: 2020 2020 202d 6620 2020 203a 2064 6f6e       -f    : don
+00020140: 2774 2061 736b 2064 656c 6574 650a 2020  't ask delete.  
+00020150: 2020 2020 202d 7220 2020 203a 203c 6469       -r    : <di
+00020160: 7265 6374 6f72 793e 206f 7220 7265 6375  rectory> or recu
+00020170: 7272 696e 6720 6465 6c65 7465 0a20 2020  rring delete.   
+00020180: 2064 656c 6574 6520 6c6f 6361 6c20 6669   delete local fi
+00020190: 6c65 2077 6974 6820 6f70 7469 6f6e 206c  le with option l
+000201a0: 696b 6520 6173 2046 756e 6374 696f 6e0a  ike as Function.
+000201b0: 2020 2020 2020 203c 6669 6c65 733e 2f3c         <files>/<
+000201c0: 6469 7265 6374 6f72 793e 2c2e 2e2e 0a20  directory>,.... 
+000201d0: 2020 2020 2020 666f 7263 653d 5472 7565        force=True
+000201e0: 2020 2020 3a20 646f 6e27 7420 6173 6b20      : don't ask 
+000201f0: 6465 6c65 7465 2c20 6465 6661 756c 7420  delete, default 
+00020200: 4661 6c73 650a 2020 2020 2020 2072 6563  False.       rec
+00020210: 7572 7269 6e67 3d54 7275 653a 203c 6469  urring=True: <di
+00020220: 7265 6374 6f72 793e 206f 7220 7265 6375  rectory> or recu
+00020230: 7272 696e 6720 6465 6c65 7465 0a20 2020  rring delete.   
+00020240: 2064 656c 6574 6520 6c69 7374 2f74 7570   delete list/tup
+00020250: 6c65 0a20 2020 2020 2020 3c6c 6973 742c  le.       <list,
+00020260: 7475 706c 653e 2c3c 6465 6c20 6974 656d  tuple>,<del item
+00020270: 733e 2c2e 2e2e 0a20 2020 2020 2020 6f70  s>,....       op
+00020280: 7469 6f6e 290a 2020 2020 2020 2020 2064  tion).         d
+00020290: 6174 610a 2020 2020 2020 2020 2020 2054  ata.           T
+000202a0: 7275 6520 3a20 6465 6c65 7465 2064 6174  rue : delete dat
+000202b0: 6120 6c69 6b65 2061 7320 3c64 656c 2069  a like as <del i
+000202c0: 7465 6d73 3e0a 2020 2020 2020 2020 2020  tems>.          
+000202d0: 2046 616c 7365 3a20 2864 6566 6175 6c74   False: (default
+000202e0: 2920 6465 6c65 7465 2069 6e64 6578 2028  ) delete index (
+000202f0: 3c64 656c 2069 7465 6d73 3e20 6172 6520  <del items> are 
+00020300: 696e 7429 0a20 2020 2064 656c 6574 6520  int).    delete 
+00020310: 6469 6374 0a20 2020 2020 2020 3c64 6963  dict.       <dic
+00020320: 743e 2c3c 6465 6c20 6974 656d 733e 2c2e  t>,<del items>,.
+00020330: 2e2e 0a20 2020 2020 2020 6f70 7469 6f6e  ...       option
+00020340: 290a 2020 2020 2020 2020 2064 6174 610a  ).         data.
+00020350: 2020 2020 2020 2020 2020 2054 7275 6520             True 
+00020360: 3a20 6465 6c65 7465 2064 6174 6120 6c69  : delete data li
+00020370: 6b65 2061 7320 3c64 656c 2069 7465 6d73  ke as <del items
+00020380: 3e0a 2020 2020 2020 2020 2020 2046 616c  >.           Fal
+00020390: 7365 3a20 2864 6566 6175 6c74 2920 6465  se: (default) de
+000203a0: 6c65 7465 206b 6579 206c 696b 6520 6173  lete key like as
+000203b0: 203c 6465 6c20 6974 656d 733e 0a20 2020   <del items>.   
+000203c0: 2020 2020 2020 7265 6375 7272 696e 6720        recurring 
+000203d0: 0a20 2020 2020 2020 2020 2020 4661 6c73  .           Fals
+000203e0: 653a 2073 6561 7263 6869 6e67 2064 6174  e: searching dat
+000203f0: 6120 696e 2066 6972 7374 206c 6576 656c  a in first level
+00020400: 0a20 2020 2020 2020 2020 2020 5472 7565  .           True
+00020410: 203a 206b 6565 7020 7365 6172 6368 696e   : keep searchin
+00020420: 6720 696e 7369 6465 2064 6963 7469 6f6e  g inside diction
+00020430: 6172 7920 0a20 2020 2027 2727 0a20 2020  ary .    '''.   
+00020440: 2069 6620 6c65 6e28 6172 6773 2920 3c3d   if len(args) <=
+00020450: 2030 3a20 7265 7475 726e 206f 7074 732e   0: return opts.
+00020460: 6765 7428 2764 6566 6175 6c74 2729 0a20  get('default'). 
+00020470: 2020 2023 4c69 7374 2f54 7570 6c65 0a20     #List/Tuple. 
+00020480: 2020 2069 6620 5479 7065 2861 7267 735b     if Type(args[
+00020490: 305d 2c28 6c69 7374 2c74 7570 6c65 2929  0],(list,tuple))
+000204a0: 3a0a 2020 2020 2020 2020 7474 3d54 7970  :.        tt=Typ
+000204b0: 654e 616d 6528 6172 6773 5b30 5d29 0a20  eName(args[0]). 
+000204c0: 2020 2020 2020 2072 743d 6c69 7374 2861         rt=list(a
+000204d0: 7267 735b 305d 290a 2020 2020 2020 2020  rgs[0]).        
+000204e0: 6465 6c5f 6461 7461 3d6f 7074 732e 6765  del_data=opts.ge
+000204f0: 7428 2776 616c 7565 272c 6f70 7473 2e67  t('value',opts.g
+00020500: 6574 2827 6461 7461 272c 4661 6c73 6529  et('data',False)
+00020510: 290a 2020 2020 2020 2020 6966 2064 656c  ).        if del
+00020520: 5f64 6174 613a 0a20 2020 2020 2020 2020  _data:.         
+00020530: 2020 2066 6f72 2069 2069 6e20 6172 6773     for i in args
+00020540: 5b31 3a5d 3a0a 2020 2020 2020 2020 2020  [1:]:.          
+00020550: 2020 2020 2020 6966 2069 2069 6e20 7274        if i in rt
+00020560: 3a20 7274 2e72 656d 6f76 6528 6929 0a20  : rt.remove(i). 
+00020570: 2020 2020 2020 2020 2020 2069 6620 7474             if tt
+00020580: 203d 3d20 2774 7570 6c65 273a 2072 6574   == 'tuple': ret
+00020590: 7572 6e20 7475 706c 6528 7274 290a 2020  urn tuple(rt).  
+000205a0: 2020 2020 2020 2020 2020 7265 7475 726e            return
+000205b0: 2072 740a 2020 2020 2020 2020 656c 7365   rt.        else
+000205c0: 3a0a 2020 2020 2020 2020 2020 2020 746d  :.            tm
+000205d0: 703d 5b5d 0a20 2020 2020 2020 2020 2020  p=[].           
+000205e0: 2066 6f72 2069 2069 6e20 7261 6e67 6528   for i in range(
+000205f0: 302c 6c65 6e28 7274 2929 3a0a 2020 2020  0,len(rt)):.    
+00020600: 2020 2020 2020 2020 2020 2020 6966 2069              if i
+00020610: 2069 6e20 6172 6773 5b31 3a5d 3a20 636f   in args[1:]: co
+00020620: 6e74 696e 7565 0a20 2020 2020 2020 2020  ntinue.         
+00020630: 2020 2020 2020 2074 6d70 2e61 7070 656e         tmp.appen
+00020640: 6428 7274 5b69 5d29 0a20 2020 2020 2020  d(rt[i]).       
+00020650: 2020 2020 2069 6620 7474 203d 3d20 2774       if tt == 't
+00020660: 7570 6c65 273a 2072 6574 7572 6e20 7475  uple': return tu
+00020670: 706c 6528 746d 7029 0a20 2020 2020 2020  ple(tmp).       
+00020680: 2020 2020 2072 6574 7572 6e20 746d 700a       return tmp.
+00020690: 2020 2020 2344 6963 740a 2020 2020 656c      #Dict.    el
+000206a0: 6966 2054 7970 6528 6172 6773 5b30 5d2c  if Type(args[0],
+000206b0: 6469 6374 293a 0a20 2020 2020 2020 2072  dict):.        r
+000206c0: 743d 6172 6773 5b30 5d0a 2020 2020 2020  t=args[0].      
+000206d0: 2020 6465 6c5f 6461 7461 3d6f 7074 732e    del_data=opts.
+000206e0: 6765 7428 2776 616c 7565 272c 6f70 7473  get('value',opts
+000206f0: 2e67 6574 2827 6461 7461 272c 4661 6c73  .get('data',Fals
+00020700: 6529 290a 2020 2020 2020 2020 2320 4465  e)).        # De
+00020710: 6c20 4461 7461 0a20 2020 2020 2020 2069  l Data.        i
+00020720: 6620 6465 6c5f 6461 7461 3a20 0a20 2020  f del_data: .   
+00020730: 2020 2020 2020 2020 2074 6d70 3d5b 5d0a           tmp=[].
+00020740: 2020 2020 2020 2020 2020 2020 7274 5f69              rt_i
+00020750: 7465 6d73 3d6c 6973 7428 7274 2e69 7465  tems=list(rt.ite
+00020760: 6d73 2829 290a 2020 2020 2020 2020 2020  ms()).          
+00020770: 2020 666f 7220 6920 696e 2072 616e 6765    for i in range
+00020780: 2830 2c6c 656e 2872 745f 6974 656d 7329  (0,len(rt_items)
+00020790: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
+000207a0: 2020 2023 5265 6375 7272 696e 6720 6368     #Recurring ch
+000207b0: 6563 6b0a 2020 2020 2020 2020 2020 2020  eck.            
+000207c0: 2020 2020 6966 206f 7074 732e 6765 7428      if opts.get(
+000207d0: 2772 6563 7572 7269 6e67 272c 4661 6c73  'recurring',Fals
+000207e0: 6529 2061 6e64 2054 7970 6528 7274 5f69  e) and Type(rt_i
+000207f0: 7465 6d73 5b69 5d5b 315d 2c64 6963 7429  tems[i][1],dict)
+00020800: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00020810: 2020 2020 2020 613d 6c69 7374 2872 745f        a=list(rt_
+00020820: 6974 656d 735b 695d 290a 2020 2020 2020  items[i]).      
+00020830: 2020 2020 2020 2020 2020 2020 2020 615b                a[
+00020840: 315d 3d72 6d28 7274 5f69 7465 6d73 5b69  1]=rm(rt_items[i
+00020850: 5d5b 315d 2c2a 6172 6773 5b31 3a5d 2c64  ][1],*args[1:],d
+00020860: 6174 613d 6465 6c5f 6461 7461 290a 2020  ata=del_data).  
+00020870: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00020880: 2020 746d 702e 6170 7065 6e64 2874 7570    tmp.append(tup
+00020890: 6c65 2861 2929 0a20 2020 2020 2020 2020  le(a)).         
+000208a0: 2020 2020 2020 2065 6c69 6620 7274 5f69         elif rt_i
+000208b0: 7465 6d73 5b69 5d5b 315d 206e 6f74 2069  tems[i][1] not i
+000208c0: 6e20 6172 6773 5b31 3a5d 3a0a 2020 2020  n args[1:]:.    
+000208d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000208e0: 746d 702e 6170 7065 6e64 2872 745f 6974  tmp.append(rt_it
+000208f0: 656d 735b 695d 290a 2020 2020 2020 2020  ems[i]).        
+00020900: 2020 2020 7265 7475 726e 2064 6963 7428      return dict(
+00020910: 746d 7029 0a20 2020 2020 2020 2023 2044  tmp).        # D
+00020920: 656c 206b 6579 0a20 2020 2020 2020 2065  el key.        e
+00020930: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
+00020940: 2023 2052 6563 7572 7269 6e67 2063 6865   # Recurring che
+00020950: 636b 696e 670a 2020 2020 2020 2020 2020  cking.          
+00020960: 2020 6966 206f 7074 732e 6765 7428 2772    if opts.get('r
+00020970: 6563 7572 7269 6e67 272c 4661 6c73 6529  ecurring',False)
+00020980: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00020990: 2020 746d 703d 5b5d 0a20 2020 2020 2020    tmp=[].       
+000209a0: 2020 2020 2020 2020 2072 745f 6974 656d           rt_item
+000209b0: 733d 6c69 7374 2872 742e 6974 656d 7328  s=list(rt.items(
+000209c0: 2929 0a20 2020 2020 2020 2020 2020 2020  )).             
+000209d0: 2020 2066 6f72 2069 2069 6e20 7261 6e67     for i in rang
+000209e0: 6528 302c 6c65 6e28 7274 5f69 7465 6d73  e(0,len(rt_items
+000209f0: 2929 3a0a 2020 2020 2020 2020 2020 2020  )):.            
+00020a00: 2020 2020 2020 2020 6966 2072 745f 6974          if rt_it
+00020a10: 656d 735b 695d 5b30 5d20 6e6f 7420 696e  ems[i][0] not in
+00020a20: 2061 7267 735b 313a 5d3a 0a20 2020 2020   args[1:]:.     
 00020a30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00020a40: 2020 2020 2062 726b 3d54 7275 650a 2020       brk=True.  
-00020a50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00020a60: 2020 2020 2020 2020 2020 2020 2020 6272                br
-00020a70: 6561 6b0a 2020 2020 2020 2020 2020 2020  eak.            
-00020a80: 2020 2020 2020 2020 2020 2020 6966 206e              if n
-00020a90: 6f74 2062 726b 2061 6e64 2069 5f61 5b2d  ot brk and i_a[-
-00020aa0: 315d 2069 6e20 746d 703a 2074 6d70 2e70  1] in tmp: tmp.p
-00020ab0: 6f70 2869 5f61 5b2d 315d 290a 2020 2020  op(i_a[-1]).    
-00020ac0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00020ad0: 2020 2020 636f 6e74 696e 7565 0a20 2020      continue.   
+00020a40: 2020 2069 6620 5479 7065 2872 745f 6974     if Type(rt_it
+00020a50: 656d 735b 695d 5b31 5d2c 6469 6374 293a  ems[i][1],dict):
+00020a60: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00020a70: 2020 2020 2020 2020 2020 2020 2061 3d6c               a=l
+00020a80: 6973 7428 7274 5f69 7465 6d73 5b69 5d29  ist(rt_items[i])
+00020a90: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00020aa0: 2020 2020 2020 2020 2020 2020 2061 5b31               a[1
+00020ab0: 5d3d 726d 2872 745f 6974 656d 735b 695d  ]=rm(rt_items[i]
+00020ac0: 5b31 5d2c 2a61 7267 735b 313a 5d2c 6461  [1],*args[1:],da
+00020ad0: 7461 3d64 656c 5f64 6174 6129 0a20 2020  ta=del_data).   
 00020ae0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00020af0: 2065 6c69 6620 6920 696e 2072 743a 0a20   elif i in rt:. 
-00020b00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00020b10: 2020 2020 2020 2072 742e 706f 7028 6929         rt.pop(i)
-00020b20: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-00020b30: 7274 0a20 2020 2065 6c73 653a 0a20 2020  rt.    else:.   
-00020b40: 2020 2020 2020 2020 2023 4669 6c65 2f44           #File/D
-00020b50: 6972 6563 746f 7279 0a20 2020 2020 2020  irectory.       
-00020b60: 2020 2020 2073 7562 5f64 6972 3d6f 7074       sub_dir=opt
-00020b70: 732e 6765 7428 2772 6563 7572 7269 6e67  s.get('recurring
-00020b80: 272c 4661 6c73 6529 0a20 2020 2020 2020  ',False).       
-00020b90: 2020 2020 2066 6f72 6365 3d6f 7074 732e       force=opts.
-00020ba0: 6765 7428 2766 6f72 6365 272c 4661 6c73  get('force',Fals
-00020bb0: 6529 0a20 2020 2020 2020 2020 2020 2069  e).            i
-00020bc0: 6620 6669 6e64 5f65 7865 6375 7461 626c  f find_executabl
-00020bd0: 6528 2772 6d27 293a 0a20 2020 2020 2020  e('rm'):.       
-00020be0: 2020 2020 2020 2020 2073 7562 5f6f 7074           sub_opt
-00020bf0: 3d27 270a 2020 2020 2020 2020 2020 2020  =''.            
-00020c00: 2020 2020 6966 2073 7562 5f64 6972 3a20      if sub_dir: 
-00020c10: 7375 625f 6f70 743d 272d 7227 0a20 2020  sub_opt='-r'.   
-00020c20: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-00020c30: 666f 7263 653a 0a20 2020 2020 2020 2020  force:.         
-00020c40: 2020 2020 2020 2020 2020 2069 6620 7375             if su
-00020c50: 625f 6f70 743a 2073 7562 5f6f 7074 3d73  b_opt: sub_opt=s
-00020c60: 7562 5f6f 7074 2b27 6627 0a20 2020 2020  ub_opt+'f'.     
-00020c70: 2020 2020 2020 2020 2020 2020 2020 2065                 e
-00020c80: 6c73 653a 2073 7562 5f6f 7074 3d27 2d66  lse: sub_opt='-f
-00020c90: 270a 2020 2020 2020 2020 2020 2020 2020  '.              
-00020ca0: 2020 7273 6865 6c6c 2827 726d 202d 6920    rshell('rm -i 
-00020cb0: 7b7d 272e 666f 726d 6174 2873 7562 5f6f  {}'.format(sub_o
-00020cc0: 7074 292b 4a6f 696e 2861 7267 732c 2720  pt)+Join(args,' 
-00020cd0: 2729 2c69 6e74 6572 6163 7469 7665 3d54  '),interactive=T
-00020ce0: 7275 6529 0a20 2020 2020 2020 2020 2020  rue).           
-00020cf0: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
-00020d00: 2020 2020 2020 2066 6f72 2061 7267 2069         for arg i
-00020d10: 6e20 6172 6773 3a0a 2020 2020 2020 2020  n args:.        
-00020d20: 2020 2020 2020 2020 2020 2020 6966 2061              if a
-00020d30: 7267 5b30 5d20 3d3d 2027 2d27 3a0a 2020  rg[0] == '-':.  
+00020af0: 2020 2020 2020 2020 2074 6d70 2e61 7070           tmp.app
+00020b00: 656e 6428 7475 706c 6528 6129 290a 2020  end(tuple(a)).  
+00020b10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00020b20: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
+00020b30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00020b40: 2020 2020 2020 2020 746d 702e 6170 7065          tmp.appe
+00020b50: 6e64 2872 745f 6974 656d 735b 695d 290a  nd(rt_items[i]).
+00020b60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00020b70: 7265 7475 726e 2064 6963 7428 746d 7029  return dict(tmp)
+00020b80: 0a20 2020 2020 2020 2020 2020 2065 6c73  .            els
+00020b90: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
+00020ba0: 2020 2066 6f72 2069 2069 6e20 6172 6773     for i in args
+00020bb0: 5b31 3a5d 3a0a 2020 2020 2020 2020 2020  [1:]:.          
+00020bc0: 2020 2020 2020 2020 2020 2350 6174 6820            #Path 
+00020bd0: 6b65 790a 2020 2020 2020 2020 2020 2020  key.            
+00020be0: 2020 2020 2020 2020 6966 2027 2f27 2069          if '/' i
+00020bf0: 6e20 6920 616e 6420 695b 305d 203d 3d20  n i and i[0] == 
+00020c00: 272f 273a 0a20 2020 2020 2020 2020 2020  '/':.           
+00020c10: 2020 2020 2020 2020 2020 2020 2069 5f61               i_a
+00020c20: 3d69 2e73 706c 6974 2827 2f27 290a 2020  =i.split('/').  
+00020c30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00020c40: 2020 2020 2020 746d 703d 7274 0a20 2020        tmp=rt.   
+00020c50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00020c60: 2020 2020 2062 726b 3d46 616c 7365 0a20       brk=False. 
+00020c70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00020c80: 2020 2020 2020 2066 6f72 207a 2069 6e20         for z in 
+00020c90: 695f 615b 313a 2d31 5d3a 0a20 2020 2020  i_a[1:-1]:.     
+00020ca0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00020cb0: 2020 2020 2020 2069 6620 7a20 696e 2074         if z in t
+00020cc0: 6d70 3a0a 2020 2020 2020 2020 2020 2020  mp:.            
+00020cd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00020ce0: 2020 2020 746d 703d 746d 705b 7a5d 0a20      tmp=tmp[z]. 
+00020cf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00020d00: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
+00020d10: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00020d20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00020d30: 2062 726b 3d54 7275 650a 2020 2020 2020   brk=True.      
 00020d40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00020d50: 2020 2020 2069 6620 2772 2720 696e 2061       if 'r' in a
-00020d60: 7267 3a0a 2020 2020 2020 2020 2020 2020  rg:.            
-00020d70: 2020 2020 2020 2020 2020 2020 2020 7375                su
-00020d80: 625f 6469 723d 5472 7565 0a20 2020 2020  b_dir=True.     
-00020d90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00020da0: 2020 6966 2027 6627 2069 6e20 6172 673a    if 'f' in arg:
-00020db0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00020dc0: 2020 2020 2020 2020 2020 2066 6f72 6365             force
-00020dd0: 3d54 7275 650a 2020 2020 2020 2020 2020  =True.          
-00020de0: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
+00020d50: 2020 2020 2020 2020 2020 6272 6561 6b0a            break.
+00020d60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00020d70: 2020 2020 2020 2020 6966 206e 6f74 2062          if not b
+00020d80: 726b 2061 6e64 2069 5f61 5b2d 315d 2069  rk and i_a[-1] i
+00020d90: 6e20 746d 703a 2074 6d70 2e70 6f70 2869  n tmp: tmp.pop(i
+00020da0: 5f61 5b2d 315d 290a 2020 2020 2020 2020  _a[-1]).        
+00020db0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00020dc0: 636f 6e74 696e 7565 0a20 2020 2020 2020  continue.       
+00020dd0: 2020 2020 2020 2020 2020 2020 2065 6c69               eli
+00020de0: 6620 6920 696e 2072 743a 0a20 2020 2020  f i in rt:.     
 00020df0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00020e00: 2020 2020 2020 2020 6966 206f 732e 6973          if os.is
-00020e10: 6669 6c65 2861 7267 293a 0a20 2020 2020  file(arg):.     
-00020e20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00020e30: 2020 2020 2020 2069 6620 6e6f 7420 666f         if not fo
-00020e40: 7263 653a 0a20 2020 2020 2020 2020 2020  rce:.           
-00020e50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00020e60: 2020 2020 2079 6e3d 636c 695f 696e 7075       yn=cli_inpu
-00020e70: 7428 2744 656c 6574 6520 7b7d 2028 592f  t('Delete {} (Y/
-00020e80: 4e29 3f27 290a 2020 2020 2020 2020 2020  N)?').          
-00020e90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00020ea0: 2020 2020 2020 6966 206e 6f74 2069 7369        if not isi
-00020eb0: 6e73 7461 6e63 6528 796e 2c73 7472 2920  nstance(yn,str) 
-00020ec0: 6f72 2079 6e2e 6c6f 7765 7228 2920 6e6f  or yn.lower() no
-00020ed0: 7420 696e 205b 2779 272c 2779 6573 275d  t in ['y','yes']
-00020ee0: 3a20 636f 6e74 696e 7565 0a20 2020 2020  : continue.     
-00020ef0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00020f00: 2020 2020 2020 2023 6f73 2e72 656d 6f76         #os.remov
-00020f10: 6528 6172 6729 0a20 2020 2020 2020 2020  e(arg).         
-00020f20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00020f30: 2020 206f 732e 756e 6c69 6e6b 2861 7267     os.unlink(arg
-00020f40: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-00020f50: 2020 2020 2020 2020 2020 656c 6966 206f            elif o
-00020f60: 732e 6973 6469 7228 6172 6729 3a0a 2020  s.isdir(arg):.  
-00020f70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00020f80: 2020 2020 2020 2020 2020 6966 2073 7562            if sub
-00020f90: 5f64 6972 3a0a 2020 2020 2020 2020 2020  _dir:.          
-00020fa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00020fb0: 2020 2020 2020 6966 206e 6f74 2066 6f72        if not for
-00020fc0: 6365 3a0a 2020 2020 2020 2020 2020 2020  ce:.            
-00020fd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00020fe0: 2020 2020 2020 2020 796e 3d63 6c69 5f69          yn=cli_i
-00020ff0: 6e70 7574 2827 4465 6c65 7465 207b 7d20  nput('Delete {} 
-00021000: 2859 2f4e 293f 2729 0a20 2020 2020 2020  (Y/N)?').       
-00021010: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00021020: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-00021030: 6e6f 7420 6973 696e 7374 616e 6365 2879  not isinstance(y
-00021040: 6e2c 7374 7229 206f 7220 796e 2e6c 6f77  n,str) or yn.low
-00021050: 6572 2829 206e 6f74 2069 6e20 5b27 7927  er() not in ['y'
-00021060: 2c27 7965 7327 5d3a 2063 6f6e 7469 6e75  ,'yes']: continu
-00021070: 650a 2020 2020 2020 2020 2020 2020 2020  e.              
-00021080: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00021090: 2020 7368 7574 696c 2e72 6d74 7265 6528    shutil.rmtree(
-000210a0: 6172 6729 0a20 2020 2020 2020 2020 2020  arg).           
-000210b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000210c0: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
-000210d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000210e0: 2020 2020 2020 2070 7269 6e74 2827 2727         print('''
-000210f0: 6361 6e27 7420 6465 6c65 7465 2064 6972  can't delete dir
-00021100: 6563 746f 7279 3a7b 7d27 2727 2e66 6f72  ectory:{}'''.for
-00021110: 6d61 7428 6172 6729 290a 2020 2020 2020  mat(arg)).      
-00021120: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00021130: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
+00020e00: 2020 2072 742e 706f 7028 6929 0a20 2020     rt.pop(i).   
+00020e10: 2020 2020 2072 6574 7572 6e20 7274 0a20       return rt. 
+00020e20: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
+00020e30: 2020 2020 2023 4669 6c65 2f44 6972 6563       #File/Direc
+00020e40: 746f 7279 0a20 2020 2020 2020 2020 2020  tory.           
+00020e50: 2073 7562 5f64 6972 3d6f 7074 732e 6765   sub_dir=opts.ge
+00020e60: 7428 2772 6563 7572 7269 6e67 272c 4661  t('recurring',Fa
+00020e70: 6c73 6529 0a20 2020 2020 2020 2020 2020  lse).           
+00020e80: 2066 6f72 6365 3d6f 7074 732e 6765 7428   force=opts.get(
+00020e90: 2766 6f72 6365 272c 4661 6c73 6529 0a20  'force',False). 
+00020ea0: 2020 2020 2020 2020 2020 2069 6620 6669             if fi
+00020eb0: 6e64 5f65 7865 6375 7461 626c 6528 2772  nd_executable('r
+00020ec0: 6d27 293a 0a20 2020 2020 2020 2020 2020  m'):.           
+00020ed0: 2020 2020 2073 7562 5f6f 7074 3d27 270a       sub_opt=''.
+00020ee0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00020ef0: 6966 2073 7562 5f64 6972 3a20 7375 625f  if sub_dir: sub_
+00020f00: 6f70 743d 272d 7227 0a20 2020 2020 2020  opt='-r'.       
+00020f10: 2020 2020 2020 2020 2069 6620 666f 7263           if forc
+00020f20: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
+00020f30: 2020 2020 2020 2069 6620 7375 625f 6f70         if sub_op
+00020f40: 743a 2073 7562 5f6f 7074 3d73 7562 5f6f  t: sub_opt=sub_o
+00020f50: 7074 2b27 6627 0a20 2020 2020 2020 2020  pt+'f'.         
+00020f60: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
+00020f70: 2073 7562 5f6f 7074 3d27 2d66 270a 2020   sub_opt='-f'.  
+00020f80: 2020 2020 2020 2020 2020 2020 2020 7273                rs
+00020f90: 6865 6c6c 2827 726d 202d 6920 7b7d 272e  hell('rm -i {}'.
+00020fa0: 666f 726d 6174 2873 7562 5f6f 7074 292b  format(sub_opt)+
+00020fb0: 4a6f 696e 2861 7267 732c 2720 2729 2c69  Join(args,' '),i
+00020fc0: 6e74 6572 6163 7469 7665 3d54 7275 6529  nteractive=True)
+00020fd0: 0a20 2020 2020 2020 2020 2020 2065 6c73  .            els
+00020fe0: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
+00020ff0: 2020 2066 6f72 2061 7267 2069 6e20 6172     for arg in ar
+00021000: 6773 3a0a 2020 2020 2020 2020 2020 2020  gs:.            
+00021010: 2020 2020 2020 2020 6966 2061 7267 5b30          if arg[0
+00021020: 5d20 3d3d 2027 2d27 3a0a 2020 2020 2020  ] == '-':.      
+00021030: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00021040: 2069 6620 2772 2720 696e 2061 7267 3a0a   if 'r' in arg:.
+00021050: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00021060: 2020 2020 2020 2020 2020 7375 625f 6469            sub_di
+00021070: 723d 5472 7565 0a20 2020 2020 2020 2020  r=True.         
+00021080: 2020 2020 2020 2020 2020 2020 2020 6966                if
+00021090: 2027 6627 2069 6e20 6172 673a 0a20 2020   'f' in arg:.   
+000210a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000210b0: 2020 2020 2020 2066 6f72 6365 3d54 7275         force=Tru
+000210c0: 650a 2020 2020 2020 2020 2020 2020 2020  e.              
+000210d0: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
+000210e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000210f0: 2020 2020 6966 206f 732e 6973 6669 6c65      if os.isfile
+00021100: 2861 7267 293a 0a20 2020 2020 2020 2020  (arg):.         
+00021110: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00021120: 2020 2069 6620 6e6f 7420 666f 7263 653a     if not force:
+00021130: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
 00021140: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00021150: 2020 2020 7072 696e 7428 2727 2763 616e      print('''can
-00021160: 2774 2064 656c 6574 6520 7b7d 2727 272e  't delete {}'''.
-00021170: 666f 726d 6174 2861 7267 2929 0a20 2020  format(arg)).   
-00021180: 2072 6574 7572 6e20 6f70 7473 2e67 6574   return opts.get
-00021190: 2827 6465 6661 756c 7427 290a 0a64 6566  ('default')..def
-000211a0: 204c 6973 7428 2a69 6e70 732c 2a2a 6f70   List(*inps,**op
-000211b0: 7473 293a 0a20 2020 2027 2727 0a20 2020  ts):.    '''.   
-000211c0: 2074 7570 6c65 326c 6973 743a 200a 2020   tuple2list: .  
-000211d0: 2020 2020 2020 5472 7565 203a 2063 6f6e        True : con
-000211e0: 7665 7274 2074 7570 6c65 2064 6174 6120  vert tuple data 
-000211f0: 746f 206c 6973 7420 6461 7461 0a20 2020  to list data.   
-00021200: 2020 2020 2046 616c 7365 3a20 6170 7065       False: appe
-00021210: 6e64 2074 7570 6c65 2069 6e74 6f20 6c69  nd tuple into li
-00021220: 7374 0a20 2020 203c 6469 6374 2069 6e70  st.    <dict inp
-00021230: 7574 3e0a 2020 2020 2069 7465 6d73 203a  ut>.     items :
-00021240: 203c 6469 6374 3e2e 6974 656d 7328 290a   <dict>.items().
-00021250: 2020 2020 2064 6174 6120 203a 203c 6469       data  : <di
-00021260: 6374 3e2e 7661 6c75 6528 290a 2020 2020  ct>.value().    
-00021270: 2070 6174 6820 203a 2063 6f6e 7665 7274   path  : convert
-00021280: 203c 6469 6374 3e20 746f 2070 6174 6820   <dict> to path 
-00021290: 6c69 6b65 206c 6973 7420 285b 2827 2f61  like list ([('/a
-000212a0: 2f62 272c 3129 2c28 272f 612f 6327 2c32  /b',1),('/a/c',2
-000212b0: 292c 2e2e 2e5d 290a 2020 2020 2028 6465  ),...]).     (de
-000212c0: 6661 756c 7429 3a20 3c64 6963 743e 2e6b  fault): <dict>.k
-000212d0: 6579 7328 290a 2020 2020 3c6f 7074 696f  eys().    <optio
-000212e0: 6e3e 0a20 2020 2020 6964 783d 3c69 6e74  n>.     idx=<int
-000212f0: 3e20 2020 203a 2067 6574 203c 6964 783e  >    : get <idx>
-00021300: 2064 6174 610a 2020 2020 2064 656c 3d3c   data.     del=<
-00021310: 696e 743e 2020 2020 3a20 6465 6c65 7465  int>    : delete
-00021320: 203c 6964 783e 0a20 2020 2020 6669 7273   <idx>.     firs
-00021330: 743d 3c64 6174 613e 203a 206d 6f76 6520  t=<data> : move 
-00021340: 3c64 6174 613e 2074 6f20 6669 7273 740a  <data> to first.
-00021350: 2020 2020 2065 6e64 3d3c 6461 7461 3e20       end=<data> 
-00021360: 2020 3a20 6d6f 7665 203c 6461 7461 3e20    : move <data> 
-00021370: 746f 2065 6e64 0a20 2020 2020 6669 6e64  to end.     find
-00021380: 3d3c 6461 7461 3e20 203a 2067 6574 2049  =<data>  : get I
-00021390: 6e64 6578 206c 6973 740a 2020 2020 2075  ndex list.     u
-000213a0: 6e69 713d 4661 6c73 6520 2020 3a20 556e  niq=False   : Un
-000213b0: 6971 2064 6174 610a 2020 2020 2073 7472  iq data.     str
-000213c0: 6970 3d46 616c 7365 2020 3a20 7265 6d6f  ip=False  : remo
-000213d0: 7665 2077 6869 7465 2073 7061 6365 0a20  ve white space. 
-000213e0: 2020 2020 6465 6661 756c 7420 2020 2020      default     
-000213f0: 203a 2046 616c 7365 0a20 2020 2020 6d6f   : False.     mo
-00021400: 6465 200a 2020 2020 2020 2020 6175 746f  de .        auto
-00021410: 2020 2020 2020 3a20 6175 746f 2066 6978        : auto fix
-00021420: 696e 6720 696e 6465 780a 2020 2020 2020  ing index.      
-00021430: 2020 6572 7220 2020 2020 2020 3a20 6e6f    err       : no
-00021440: 7420 666f 756e 6420 7468 656e 2072 6574  t found then ret
-00021450: 7572 6e20 6465 6661 756c 7428 4661 6c73  urn default(Fals
-00021460: 6529 0a20 2020 2020 2020 2069 676e 6f72  e).        ignor
-00021470: 6520 2020 203a 206e 6f74 2066 6f75 6e64  e    : not found
-00021480: 2074 6865 6e20 6967 6e6f 7265 2074 6865   then ignore the
-00021490: 2064 6174 610a 2020 2020 2727 270a 2020   data.    '''.  
-000214a0: 2020 6465 6620 4444 2873 293a 0a20 2020    def DD(s):.   
-000214b0: 2020 2020 2072 743d 5b5d 0a20 2020 2020       rt=[].     
-000214c0: 2020 2066 6f72 2069 2069 6e20 733a 0a20     for i in s:. 
-000214d0: 2020 2020 2020 2020 2020 2069 6620 5479             if Ty
-000214e0: 7065 2873 5b69 5d2c 6469 6374 293a 0a20  pe(s[i],dict):. 
-000214f0: 2020 2020 2020 2020 2020 2020 2020 2066                 f
-00021500: 6f72 207a 2069 6e20 4444 2873 5b69 5d29  or z in DD(s[i])
-00021510: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00021520: 2020 2020 2020 7274 2e61 7070 656e 6428        rt.append(
-00021530: 2869 2b27 2f27 2b7a 5b30 5d2c 7a5b 315d  (i+'/'+z[0],z[1]
-00021540: 2929 0a20 2020 2020 2020 2020 2020 2065  )).            e
-00021550: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
-00021560: 2020 2020 2072 742e 6170 7065 6e64 2828       rt.append((
-00021570: 692c 735b 695d 2929 0a20 2020 2020 2020  i,s[i])).       
-00021580: 2072 6574 7572 6e20 7274 0a0a 2020 2020   return rt..    
-00021590: 7475 706c 6532 6c69 7374 3d6f 7074 732e  tuple2list=opts.
-000215a0: 6765 7428 2774 7570 6c65 326c 6973 7427  get('tuple2list'
-000215b0: 2c54 7275 6529 0a20 2020 206d 6f64 653d  ,True).    mode=
-000215c0: 6f70 7473 2e67 6574 2827 6d6f 6465 272c  opts.get('mode',
-000215d0: 2761 7574 6f27 290a 2020 2020 7274 3d5b  'auto').    rt=[
-000215e0: 5d0a 2020 2020 6966 206c 656e 2869 6e70  ].    if len(inp
-000215f0: 7329 203d 3d20 3020 3a20 7265 7475 726e  s) == 0 : return
-00021600: 2072 740a 2020 2020 6966 2054 7970 6528   rt.    if Type(
-00021610: 696e 7073 5b30 5d2c 6c69 7374 293a 0a20  inps[0],list):. 
-00021620: 2020 2020 2020 2072 743d 696e 7073 5b30         rt=inps[0
-00021630: 5d0a 2020 2020 656c 6966 2054 7970 6528  ].    elif Type(
-00021640: 696e 7073 5b30 5d2c 7475 706c 6529 3a0a  inps[0],tuple):.
-00021650: 2020 2020 2020 2020 6966 2074 7570 6c65          if tuple
-00021660: 326c 6973 743a 0a20 2020 2020 2020 2020  2list:.         
-00021670: 2020 2072 743d 6c69 7374 2869 6e70 735b     rt=list(inps[
-00021680: 305d 290a 2020 2020 2020 2020 656c 7365  0]).        else
-00021690: 3a0a 2020 2020 2020 2020 2020 2020 7274  :.            rt
-000216a0: 2e61 7070 656e 6428 696e 7073 5b30 5d29  .append(inps[0])
-000216b0: 0a20 2020 2065 6c69 6620 5479 7065 2869  .    elif Type(i
-000216c0: 6e70 735b 305d 2c64 6963 7429 3a0a 2020  nps[0],dict):.  
-000216d0: 2020 2020 2020 6966 206f 7074 732e 6765        if opts.ge
-000216e0: 7428 2764 6174 6127 293a 0a20 2020 2020  t('data'):.     
-000216f0: 2020 2020 2020 2072 743d 6c69 7374 2869         rt=list(i
-00021700: 6e70 735b 305d 2e76 616c 7565 7328 2929  nps[0].values())
-00021710: 0a20 2020 2020 2020 2065 6c69 6620 6f70  .        elif op
-00021720: 7473 2e67 6574 2827 616c 6c27 2c6f 7074  ts.get('all',opt
-00021730: 732e 6765 7428 2777 686f 6c65 272c 6f70  s.get('whole',op
-00021740: 7473 2e67 6574 2827 6974 656d 7327 2929  ts.get('items'))
-00021750: 293a 0a20 2020 2020 2020 2020 2020 2072  ):.            r
-00021760: 743d 6c69 7374 2869 6e70 735b 305d 2e69  t=list(inps[0].i
-00021770: 7465 6d73 2829 290a 2020 2020 2020 2020  tems()).        
-00021780: 656c 6966 206f 7074 732e 6765 7428 2770  elif opts.get('p
-00021790: 6174 6827 293a 0a20 2020 2020 2020 2020  ath'):.         
-000217a0: 2020 2074 6d70 3d5b 5d0a 2020 2020 2020     tmp=[].      
-000217b0: 2020 2020 2020 666f 7220 6b20 696e 2069        for k in i
-000217c0: 6e70 735b 305d 3a0a 2020 2020 2020 2020  nps[0]:.        
-000217d0: 2020 2020 2020 2020 6966 2054 7970 6528          if Type(
-000217e0: 696e 7073 5b30 5d5b 6b5d 2c64 6963 7429  inps[0][k],dict)
-000217f0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00021800: 2020 2020 2020 666f 7220 6420 696e 2044        for d in D
-00021810: 4428 696e 7073 5b30 5d5b 6b5d 293a 0a20  D(inps[0][k]):. 
-00021820: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00021830: 2020 2020 2020 2074 6d70 2e61 7070 656e         tmp.appen
-00021840: 6428 2827 2f27 2b6b 2b27 2f27 2b64 5b30  d(('/'+k+'/'+d[0
-00021850: 5d2c 645b 315d 2929 0a20 2020 2020 2020  ],d[1])).       
-00021860: 2020 2020 2020 2020 2065 6c73 653a 0a20           else:. 
-00021870: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00021880: 2020 2074 6d70 2e61 7070 656e 6428 2827     tmp.append(('
-00021890: 2f27 2b6b 2c69 6e70 735b 305d 5b6b 5d29  /'+k,inps[0][k])
-000218a0: 290a 2020 2020 2020 2020 2020 2020 7274  ).            rt
-000218b0: 3d72 742b 746d 700a 2020 2020 2020 2020  =rt+tmp.        
-000218c0: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
-000218d0: 2020 7274 3d6c 6973 7428 696e 7073 5b30    rt=list(inps[0
-000218e0: 5d29 0a20 2020 2066 6f72 2069 2069 6e20  ]).    for i in 
-000218f0: 696e 7073 5b31 3a5d 3a0a 2020 2020 2020  inps[1:]:.      
-00021900: 2020 6966 2054 7970 6528 692c 6c69 7374    if Type(i,list
-00021910: 293a 0a20 2020 2020 2020 2020 2020 2072  ):.            r
-00021920: 743d 7274 2b69 0a20 2020 2020 2020 2065  t=rt+i.        e
-00021930: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
-00021940: 2069 6620 5479 7065 2869 2c74 7570 6c65   if Type(i,tuple
-00021950: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
-00021960: 2020 2069 6620 7475 706c 6532 6c69 7374     if tuple2list
-00021970: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00021980: 2020 2020 2020 7274 3d72 742b 6c69 7374        rt=rt+list
-00021990: 2869 290a 2020 2020 2020 2020 2020 2020  (i).            
-000219a0: 2020 2020 2020 2020 636f 6e74 696e 7565          continue
-000219b0: 0a20 2020 2020 2020 2020 2020 2065 6c69  .            eli
-000219c0: 6620 5479 7065 2869 2c64 6963 7429 3a0a  f Type(i,dict):.
-000219d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000219e0: 7274 3d72 742b 4c69 7374 2872 742c 692c  rt=rt+List(rt,i,
-000219f0: 2a2a 6f70 7473 290a 2020 2020 2020 2020  **opts).        
-00021a00: 2020 2020 2020 2020 636f 6e74 696e 7565          continue
-00021a10: 0a20 2020 2020 2020 2020 2020 2072 742e  .            rt.
-00021a20: 6170 7065 6e64 2869 290a 2020 2020 6966  append(i).    if
-00021a30: 206f 7074 732e 6765 7428 2773 7472 6970   opts.get('strip
-00021a40: 2729 3a0a 2020 2020 2020 2020 7274 3d5b  '):.        rt=[
-00021a50: 692e 7374 7269 7028 2920 6966 2069 7369  i.strip() if isi
-00021a60: 6e73 7461 6e63 6528 692c 2873 7472 2c62  nstance(i,(str,b
-00021a70: 7974 6573 2929 2065 6c73 6520 6920 666f  ytes)) else i fo
-00021a80: 7220 6920 696e 2072 745d 0a20 2020 2069  r i in rt].    i
-00021a90: 6620 6f70 7473 2e67 6574 2827 756e 6971  f opts.get('uniq
-00021aa0: 2729 3a0a 2020 2020 2020 2020 7265 7475  '):.        retu
-00021ab0: 726e 2055 6e69 7128 7274 290a 2020 2020  rn Uniq(rt).    
-00021ac0: 6964 783d 6f70 7473 2e67 6574 2827 6964  idx=opts.get('id
-00021ad0: 7827 290a 2020 2020 6966 206e 6f74 2049  x').    if not I
-00021ae0: 734e 6f6e 6528 6964 7829 3a0a 2020 2020  sNone(idx):.    
-00021af0: 2020 2020 6f6b 2c69 6478 3d49 6e64 6578      ok,idx=Index
-00021b00: 466f 726d 2869 6478 2c69 6478 5f6f 6e6c  Form(idx,idx_onl
-00021b10: 793d 5472 7565 2c73 796d 626f 6c3d 272c  y=True,symbol=',
-00021b20: 2729 0a20 2020 2020 2020 2069 6620 6f6b  ').        if ok
-00021b30: 2069 7320 4661 6c73 653a 2072 6574 7572   is False: retur
-00021b40: 6e20 6f70 7473 2e67 6574 2827 6465 6661  n opts.get('defa
-00021b50: 756c 7427 2c46 616c 7365 290a 2020 2020  ult',False).    
-00021b60: 2020 2020 6966 2069 7369 6e73 7461 6e63      if isinstanc
-00021b70: 6528 6964 782c 7475 706c 6529 2061 6e64  e(idx,tuple) and
-00021b80: 206c 656e 2869 6478 2920 3d3d 2032 3a0a   len(idx) == 2:.
-00021b90: 2020 2020 2020 2020 2020 2020 6964 783d              idx=
-00021ba0: 7261 6e67 6528 6964 785b 305d 2c69 6478  range(idx[0],idx
-00021bb0: 5b31 5d2b 3129 0a20 2020 2020 2020 2069  [1]+1).        i
-00021bc0: 6620 6e6f 7420 5479 7065 2869 6478 2c28  f not Type(idx,(
-00021bd0: 6c69 7374 2c74 7570 6c65 2c27 7261 6e67  list,tuple,'rang
-00021be0: 6527 2929 3a20 6964 783d 5b69 6478 5d0a  e')): idx=[idx].
-00021bf0: 2020 2020 2020 2020 7474 3d5b 5d0a 2020          tt=[].  
-00021c00: 2020 2020 2020 666f 7220 6920 696e 2069        for i in i
-00021c10: 6478 3a0a 2020 2020 2020 2020 2020 2020  dx:.            
-00021c20: 6966 206d 6f64 6520 3d3d 2027 6175 746f  if mode == 'auto
-00021c30: 273a 0a20 2020 2020 2020 2020 2020 2020  ':.             
-00021c40: 2020 2069 3d46 6978 496e 6465 7828 7274     i=FixIndex(rt
-00021c50: 2c69 2c64 6566 6175 6c74 3d46 616c 7365  ,i,default=False
-00021c60: 2c65 7272 3d46 616c 7365 290a 2020 2020  ,err=False).    
-00021c70: 2020 2020 2020 2020 656c 6966 206d 6f64          elif mod
-00021c80: 6520 696e 205b 2765 7272 272c 2769 676e  e in ['err','ign
-00021c90: 6f72 6527 5d3a 0a20 2020 2020 2020 2020  ore']:.         
-00021ca0: 2020 2020 2020 2069 3d46 6978 496e 6465         i=FixInde
-00021cb0: 7828 7274 2c69 2c64 6566 6175 6c74 3d46  x(rt,i,default=F
-00021cc0: 616c 7365 2c65 7272 3d54 7275 6529 0a20  alse,err=True). 
-00021cd0: 2020 2020 2020 2020 2020 2069 6620 6920             if i 
-00021ce0: 6973 2046 616c 7365 3a0a 2020 2020 2020  is False:.      
-00021cf0: 2020 2020 2020 2020 2020 6966 206d 6f64            if mod
-00021d00: 6520 3d3d 2027 6572 7227 3a20 7265 7475  e == 'err': retu
-00021d10: 726e 206f 7074 732e 6765 7428 2764 6566  rn opts.get('def
-00021d20: 6175 6c74 272c 4661 6c73 6529 0a20 2020  ault',False).   
-00021d30: 2020 2020 2020 2020 2065 6c73 653a 0a20           else:. 
-00021d40: 2020 2020 2020 2020 2020 2020 2020 2074                 t
-00021d50: 742e 6170 7065 6e64 2872 745b 695d 290a  t.append(rt[i]).
-00021d60: 2020 2020 2020 2020 7265 7475 726e 2074          return t
-00021d70: 740a 2020 2020 6966 206e 6f74 2049 734e  t.    if not IsN
-00021d80: 6f6e 6528 6f70 7473 2e67 6574 2827 726d  one(opts.get('rm
-00021d90: 2729 293a 0a20 2020 2020 2020 2072 6574  ')):.        ret
-00021da0: 7572 6e20 726d 2872 742c 2a6f 7074 732e  urn rm(rt,*opts.
-00021db0: 6765 7428 2772 6d27 2920 6966 2054 7970  get('rm') if Typ
-00021dc0: 6528 6f70 7473 2e67 6574 2827 726d 2729  e(opts.get('rm')
-00021dd0: 2c28 6c69 7374 2c74 7570 6c65 2929 2065  ,(list,tuple)) e
-00021de0: 6c73 6520 6f70 7473 2e67 6574 2827 726d  lse opts.get('rm
-00021df0: 2729 290a 2020 2020 6669 7273 743d 6f70  ')).    first=op
-00021e00: 7473 2e67 6574 2827 6669 7273 7427 290a  ts.get('first').
-00021e10: 2020 2020 6966 206e 6f74 2049 734e 6f6e      if not IsNon
-00021e20: 6528 6669 7273 7429 2061 6e64 2066 6972  e(first) and fir
-00021e30: 7374 2069 6e20 7274 3a0a 2020 2020 2020  st in rt:.      
-00021e40: 2020 7265 7475 726e 205b 6669 7273 745d    return [first]
-00021e50: 2b5b 6920 666f 7220 6920 696e 2072 7420  +[i for i in rt 
-00021e60: 6966 2069 2021 3d20 6669 7273 745d 0a20  if i != first]. 
-00021e70: 2020 2065 6e64 3d6f 7074 732e 6765 7428     end=opts.get(
-00021e80: 2765 6e64 2729 0a20 2020 2069 6620 6e6f  'end').    if no
-00021e90: 7420 4973 4e6f 6e65 2865 6e64 2920 616e  t IsNone(end) an
-00021ea0: 6420 656e 6420 696e 2072 743a 0a20 2020  d end in rt:.   
-00021eb0: 2020 2020 2072 6574 7572 6e20 5b69 2066       return [i f
-00021ec0: 6f72 2069 2069 6e20 7274 2069 6620 6920  or i in rt if i 
-00021ed0: 213d 2065 6e64 5d2b 5b65 6e64 5d0a 2020  != end]+[end].  
-00021ee0: 2020 6669 6e64 3d6f 7074 732e 6765 7428    find=opts.get(
-00021ef0: 2766 696e 6427 290a 2020 2020 6966 206e  'find').    if n
-00021f00: 6f74 2049 734e 6f6e 6528 6669 6e64 293a  ot IsNone(find):
-00021f10: 0a20 2020 2020 2020 2069 6620 6e6f 7420  .        if not 
-00021f20: 5479 7065 2866 696e 642c 286c 6973 742c  Type(find,(list,
-00021f30: 7475 706c 6529 293a 2066 696e 643d 5b66  tuple)): find=[f
-00021f40: 696e 645d 0a20 2020 2020 2020 2074 743d  ind].        tt=
-00021f50: 5b5d 0a20 2020 2020 2020 2066 6f72 2069  [].        for i
-00021f60: 2069 6e20 6669 6e64 3a0a 2020 2020 2020   in find:.      
-00021f70: 2020 2020 2020 666f 7220 7a20 696e 2072        for z in r
-00021f80: 616e 6765 2830 2c6c 656e 2872 7429 293a  ange(0,len(rt)):
-00021f90: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00021fa0: 206a 3d69 2e72 6570 6c61 6365 2827 2a27   j=i.replace('*'
-00021fb0: 2c27 2e2b 2729 2e72 6570 6c61 6365 2827  ,'.+').replace('
-00021fc0: 3f27 2c27 2e27 290a 2020 2020 2020 2020  ?','.').        
-00021fd0: 2020 2020 2020 2020 6d6d 3d72 652e 636f          mm=re.co
-00021fe0: 6d70 696c 6528 6a29 0a20 2020 2020 2020  mpile(j).       
-00021ff0: 2020 2020 2020 2020 2069 6620 626f 6f6c           if bool
-00022000: 2872 652e 6d61 7463 6828 6d6d 2c72 745b  (re.match(mm,rt[
-00022010: 7a5d 2929 3a0a 2020 2020 2020 2020 2020  z])):.          
-00022020: 2020 2020 2020 2020 2020 7474 2e61 7070            tt.app
-00022030: 656e 6428 7a29 0a20 2020 2020 2020 2020  end(z).         
-00022040: 2020 2020 2020 2023 6966 2072 745b 7a5d         #if rt[z]
-00022050: 203d 3d20 693a 2074 742e 6170 7065 6e64   == i: tt.append
-00022060: 287a 290a 2020 2020 2020 2020 7265 7475  (z).        retu
-00022070: 726e 2074 740a 2020 2020 7265 7475 726e  rn tt.    return
-00022080: 2072 740a 0a64 6566 2052 6570 6c61 6365   rt..def Replace
-00022090: 2873 7263 2c72 6570 6c61 6365 5f77 6861  (src,replace_wha
-000220a0: 742c 7265 706c 6163 655f 746f 2c64 6566  t,replace_to,def
-000220b0: 6175 6c74 3d4e 6f6e 652c 6e65 776c 696e  ault=None,newlin
-000220c0: 653d 275c 6e27 293a 0a20 2020 2027 2727  e='\n'):.    '''
-000220d0: 0a20 2020 2072 6570 6c61 6365 2073 7472  .    replace str
-000220e0: 696e 6720 2873 7263 2c20 6672 6f6d 2c20  ing (src, from, 
-000220f0: 746f 290a 2020 2020 6966 206e 6f74 2073  to).    if not s
-00022100: 7472 696e 6720 7468 656e 2072 6574 7572  tring then retur
-00022110: 6e20 6465 6661 756c 740a 2020 2020 6465  n default.    de
-00022120: 6661 756c 743a 2072 6574 7572 6e20 6465  fault: return de
-00022130: 6669 6e65 6420 7661 6c75 6520 7768 656e  fined value when
-00022140: 206e 6f74 2073 7472 696e 670a 2020 2020   not string.    
-00022150: 2020 276f 7267 273a 2072 6574 7572 6e20    'org': return 
-00022160: 7372 630a 2020 2020 2020 2e2e 2e20 203a  src.      ...  :
-00022170: 2072 6574 7572 6e20 6465 6669 6e65 6420   return defined 
-00022180: 6465 6661 756c 740a 2020 2020 2727 270a  default.    '''.
-00022190: 2020 2020 6465 6620 5f53 5f28 7372 632c      def _S_(src,
-000221a0: 7029 3a0a 2020 2020 2020 2020 6966 2069  p):.        if i
-000221b0: 7369 6e73 7461 6e63 6528 702c 6c69 7374  sinstance(p,list
-000221c0: 293a 0a20 2020 2020 2020 2020 2020 2074  ):.            t
-000221d0: 3d5b 5d0a 2020 2020 2020 2020 2020 2020  =[].            
-000221e0: 6d3d 6c65 6e28 7029 2d31 0a20 2020 2020  m=len(p)-1.     
-000221f0: 2020 2020 2020 2066 6f72 2069 2069 6e20         for i in 
-00022200: 7261 6e67 6528 302c 6d2b 3129 3a0a 2020  range(0,m+1):.  
-00022210: 2020 2020 2020 2020 2020 2020 2020 6966                if
-00022220: 2069 203d 3d20 303a 0a20 2020 2020 2020   i == 0:.       
-00022230: 2020 2020 2020 2020 2020 2020 2074 2e61               t.a
-00022240: 7070 656e 6428 7372 635b 3a70 5b69 5d5b  ppend(src[:p[i][
-00022250: 305d 5d29 0a20 2020 2020 2020 2020 2020  0]]).           
-00022260: 2020 2020 2020 2020 2069 6620 693d 3d6d           if i==m
-00022270: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00022280: 2020 2020 2020 2020 2020 742e 6170 7065            t.appe
-00022290: 6e64 2873 7263 5b70 5b69 5d5b 315d 3a5d  nd(src[p[i][1]:]
-000222a0: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-000222b0: 2020 656c 6966 2069 203c 206d 3a0a 2020    elif i < m:.  
-000222c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000222d0: 2020 742e 6170 7065 6e64 2873 7263 5b70    t.append(src[p
-000222e0: 5b69 2d31 5d5b 315d 3a70 5b69 5d5b 305d  [i-1][1]:p[i][0]
-000222f0: 5d29 0a20 2020 2020 2020 2020 2020 2020  ]).             
-00022300: 2020 2065 6c69 6620 6920 3d3d 206d 3a0a     elif i == m:.
-00022310: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00022320: 2020 2020 742e 6170 7065 6e64 2873 7263      t.append(src
-00022330: 5b70 5b69 2d31 5d5b 315d 3a70 5b69 5d5b  [p[i-1][1]:p[i][
-00022340: 305d 5d29 0a20 2020 2020 2020 2020 2020  0]]).           
-00022350: 2020 2020 2020 2020 2074 2e61 7070 656e           t.appen
-00022360: 6428 7372 635b 705b 695d 5b31 5d3a 5d29  d(src[p[i][1]:])
-00022370: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
-00022380: 7572 6e20 740a 0a20 2020 2073 7263 5f74  urn t..    src_t
-00022390: 7970 653d 5479 7065 4e61 6d65 2873 7263  ype=TypeName(src
-000223a0: 290a 2020 2020 6966 206e 6f74 2073 7263  ).    if not src
-000223b0: 5f74 7970 6520 696e 205b 2773 7472 272c  _type in ['str',
-000223c0: 2762 7974 6573 275d 3a0a 2020 2020 2020  'bytes']:.      
-000223d0: 2020 7265 7475 726e 2044 6566 6175 6c74    return Default
-000223e0: 2873 7263 2c64 6566 6175 6c74 290a 2020  (src,default).  
-000223f0: 2020 6966 2073 7263 5f74 7970 6520 3d3d    if src_type ==
-00022400: 2027 6279 7465 7327 3a0a 2020 2020 2020   'bytes':.      
-00022410: 2020 7265 706c 6163 655f 7768 6174 3d42    replace_what=B
-00022420: 7974 6573 2872 6570 6c61 6365 5f77 6861  ytes(replace_wha
-00022430: 7429 0a20 2020 2020 2020 2072 6570 6c61  t).        repla
-00022440: 6365 5f74 6f3d 4279 7465 7328 7265 706c  ce_to=Bytes(repl
-00022450: 6163 655f 746f 290a 2020 2020 2020 2020  ace_to).        
-00022460: 6e65 776c 696e 653d 4279 7465 7328 6e65  newline=Bytes(ne
-00022470: 776c 696e 6529 0a20 2020 2065 6c73 653a  wline).    else:
-00022480: 0a20 2020 2020 2020 2072 6570 6c61 6365  .        replace
-00022490: 5f77 6861 743d 5374 7228 7265 706c 6163  _what=Str(replac
-000224a0: 655f 7768 6174 290a 2020 2020 2020 2020  e_what).        
-000224b0: 7265 706c 6163 655f 746f 3d53 7472 2872  replace_to=Str(r
-000224c0: 6570 6c61 6365 5f74 6f29 0a20 2020 2020  eplace_to).     
-000224d0: 2020 206e 6577 6c69 6e65 3d53 7472 286e     newline=Str(n
-000224e0: 6577 6c69 6e65 290a 2020 2020 746d 703d  ewline).    tmp=
-000224f0: 5b5d 0a20 2020 2066 6f72 2069 6920 696e  [].    for ii in
-00022500: 2073 7263 2e73 706c 6974 286e 6577 6c69   src.split(newli
-00022510: 6e65 293a 0a20 2020 2020 2020 2074 743d  ne):.        tt=
-00022520: 5f53 5f28 6969 2c46 6f75 6e64 2869 692c  _S_(ii,Found(ii,
-00022530: 7265 706c 6163 655f 7768 6174 2c6c 6f63  replace_what,loc
-00022540: 6174 696f 6e3d 5472 7565 2929 0a20 2020  ation=True)).   
-00022550: 2020 2020 2074 6d70 2e61 7070 656e 6428       tmp.append(
-00022560: 4a6f 696e 2874 742c 7265 706c 6163 655f  Join(tt,replace_
-00022570: 746f 2920 6966 2074 7420 656c 7365 2069  to) if tt else i
-00022580: 6929 0a20 2020 2072 6574 7572 6e20 4a6f  i).    return Jo
-00022590: 696e 2874 6d70 2c6e 6577 6c69 6e65 290a  in(tmp,newline).
-000225a0: 0a64 6566 206b 7263 2872 742c 6368 6b3d  .def krc(rt,chk=
-000225b0: 275f 272c 7274 643d 7b27 474f 4f44 273a  '_',rtd={'GOOD':
-000225c0: 5b54 7275 652c 2754 7275 6527 2c27 476f  [True,'True','Go
-000225d0: 6f64 272c 274f 6b27 2c27 5061 7373 272c  od','Ok','Pass',
-000225e0: 2753 7572 6527 2c7b 274f 4b27 7d2c 305d  'Sure',{'OK'},0]
-000225f0: 2c27 4641 494c 273a 5b46 616c 7365 2c27  ,'FAIL':[False,'
-00022600: 4661 6c73 6527 2c27 4661 696c 272c 7b27  False','Fail',{'
-00022610: 4641 4c27 7d5d 2c27 4e4f 4e45 273a 5b4e  FAL'}],'NONE':[N
-00022620: 6f6e 652c 274e 6f6e 6527 2c27 4e6f 7468  one,'None','Noth
-00022630: 696e 6727 2c27 456d 7074 7927 2c27 4e75  ing','Empty','Nu
-00022640: 6c6c 272c 274e 2f41 272c 7b27 4e41 277d  ll','N/A',{'NA'}
-00022650: 5d2c 2749 474e 4f27 3a5b 2749 474e 4f27  ],'IGNO':['IGNO'
-00022660: 2c27 4967 6e6f 7265 272c 7b27 4947 4e27  ,'Ignore',{'IGN'
-00022670: 7d5d 2c27 4552 524f 273a 5b27 4552 5227  }],'ERRO':['ERR'
-00022680: 2c27 4572 726f 272c 2745 7272 6f72 272c  ,'Erro','Error',
-00022690: 7b27 4552 5227 7d2c 312c 3132 362c 3132  {'ERR'},1,126,12
-000226a0: 382c 3133 302c 3235 355d 2c27 5741 524e  8,130,255],'WARN
-000226b0: 273a 5b27 5761 726e 272c 2757 6172 6e69  ':['Warn','Warni
-000226c0: 6e67 272c 7b27 5741 5227 7d5d 2c27 554e  ng',{'WAR'}],'UN
-000226d0: 4b4e 273a 5b27 556e 6b6e 6f77 6e27 2c27  KN':['Unknown','
-000226e0: 554e 4b4e 272c 2244 6f6e 2774 206b 6e6f  UNKN',"Don't kno
-000226f0: 7722 2c27 4e6f 7420 7375 7265 272c 7b27  w",'Not sure',{'
-00022700: 554e 4b27 7d5d 2c27 4a55 4d50 273a 5b27  UNK'}],'JUMP':['
-00022710: 4a75 6d70 272c 7b27 4a55 4d50 277d 5d2c  Jump',{'JUMP'}],
-00022720: 2754 4f55 5427 3a5b 2754 696d 654f 7574  'TOUT':['TimeOut
-00022730: 272c 2754 696d 6520 4f75 7427 2c27 544d  ','Time Out','TM
-00022740: 4f55 5427 2c27 544f 5554 272c 7b27 544f  OUT','TOUT',{'TO
-00022750: 5554 277d 5d2c 2752 4556 4427 3a5b 2743  UT'}],'REVD':['C
-00022760: 616e 6365 6c27 2c27 4361 6e63 656c 6564  ancel','Canceled
-00022770: 272c 2752 4556 272c 2752 4556 4427 2c27  ','REV','REVD','
-00022780: 5265 766f 6b65 6427 2c27 5265 766f 6b65  Revoked','Revoke
-00022790: 272c 7b27 5245 5644 277d 5d2c 274c 4f53  ',{'REVD'}],'LOS
-000227a0: 5427 3a5b 274c 6f73 7427 2c27 436f 6e6e  T':['Lost','Conn
-000227b0: 6563 7469 6f6e 204c 6f73 7427 2c27 4c6f  ection Lost','Lo
-000227c0: 7374 2043 6f6e 6e65 6374 696f 6e27 2c7b  st Connection',{
-000227d0: 274c 4f53 5427 7d5d 2c27 4e46 4e44 273a  'LOST'}],'NFND':
-000227e0: 5b27 4669 6c65 206e 6f74 2066 6f75 6e64  ['File not found
-000227f0: 272c 274e 6f74 2046 6f75 6e64 272c 2743  ','Not Found','C
-00022800: 616e 206e 6f74 2066 6f75 6e64 272c 7b27  an not found',{'
-00022810: 4e46 4e44 277d 2c31 3237 5d7d 2c64 6566  NFND'},127]},def
-00022820: 6175 6c74 3d46 616c 7365 2c6d 6f64 653d  ault=False,mode=
-00022830: 4e6f 6e65 293a 0a20 2020 2027 2727 0a20  None):.    '''. 
-00022840: 2020 2053 6865 6c6c 2065 7869 7420 636f     Shell exit co
-00022850: 6465 3a0a 2020 2020 2020 3120 2020 2d20  de:.      1   - 
-00022860: 4361 7463 6861 6c6c 2066 6f72 2067 656e  Catchall for gen
-00022870: 6572 616c 2065 7272 6f72 730a 2020 2020  eral errors.    
-00022880: 2020 3220 2020 2d20 4d69 7375 7365 206f    2   - Misuse o
-00022890: 6620 7368 656c 6c20 6275 696c 7469 6e73  f shell builtins
-000228a0: 2028 6163 636f 7264 696e 6720 746f 2042   (according to B
-000228b0: 6173 6820 646f 6375 6d65 6e74 6174 696f  ash documentatio
-000228c0: 6e29 0a20 2020 2031 3236 2020 202d 2043  n).    126   - C
-000228d0: 6f6d 6d61 6e64 2069 6e76 6f6b 6564 2063  ommand invoked c
-000228e0: 616e 6e6f 7420 6578 6563 7574 650a 2020  annot execute.  
-000228f0: 2020 3132 3720 2020 2d20 e280 9c63 6f6d    127   - ...com
-00022900: 6d61 6e64 206e 6f74 2066 6f75 6e64 e280  mand not found..
-00022910: 9d0a 2020 2020 3132 3820 2020 2d20 496e  ..    128   - In
-00022920: 7661 6c69 6420 6172 6775 6d65 6e74 2074  valid argument t
-00022930: 6f20 6578 6974 0a20 2020 2031 3238 2b6e  o exit.    128+n
-00022940: 202d 2046 6174 616c 2065 7272 6f72 2073   - Fatal error s
-00022950: 6967 6e61 6c20 e280 9c6e e280 9d0a 2020  ignal ...n....  
-00022960: 2020 3133 3020 2020 2d20 5363 7269 7074    130   - Script
-00022970: 2074 6572 6d69 6e61 7465 6420 6279 2043   terminated by C
-00022980: 6f6e 7472 6f6c 2d43 0a20 2020 2032 3535  ontrol-C.    255
-00022990: 5c2a 202d 2045 7869 7420 7374 6174 7573  \* - Exit status
-000229a0: 206f 7574 206f 6620 7261 6e67 650a 2020   out of range.  
-000229b0: 2020 2727 270a 2020 2020 6966 206d 6f64    '''.    if mod
-000229c0: 6520 3d3d 2027 6765 7427 3a0a 2020 2020  e == 'get':.    
-000229d0: 2020 2020 7265 7475 726e 2072 7464 0a20      return rtd. 
-000229e0: 2020 2065 6c69 6620 6d6f 6465 203d 3d20     elif mode == 
-000229f0: 276b 6579 7327 3a0a 2020 2020 2020 2020  'keys':.        
-00022a00: 6966 2069 7369 6e73 7461 6e63 6528 7274  if isinstance(rt
-00022a10: 642c 6469 6374 293a 0a20 2020 2020 2020  d,dict):.       
-00022a20: 2020 2020 2072 6574 7572 6e20 7274 642e       return rtd.
-00022a30: 6b65 7973 2829 0a20 2020 2064 6566 2074  keys().    def t
-00022a40: 7261 6e73 2869 7274 293a 0a20 2020 2020  rans(irt):.     
-00022a50: 2020 2074 7970 655f 6972 743d 7479 7065     type_irt=type
-00022a60: 2869 7274 290a 2020 2020 2020 2020 666f  (irt).        fo
-00022a70: 7220 6969 2069 6e20 7274 643a 0a20 2020  r ii in rtd:.   
-00022a80: 2020 2020 2020 2020 2066 6f72 206a 6a20           for jj 
-00022a90: 696e 2072 7464 5b69 695d 3a0a 2020 2020  in rtd[ii]:.    
-00022aa0: 2020 2020 2020 2020 2020 2020 6966 2074              if t
-00022ab0: 7970 6528 6a6a 2920 3d3d 2074 7970 655f  ype(jj) == type_
-00022ac0: 6972 7420 616e 6420 2828 7479 7065 5f69  irt and ((type_i
-00022ad0: 7274 2069 7320 7374 7220 616e 6420 6a6a  rt is str and jj
-00022ae0: 2e6c 6f77 6572 2829 203d 3d20 6972 742e  .lower() == irt.
-00022af0: 6c6f 7765 7228 2929 206f 7220 6a6a 203d  lower()) or jj =
-00022b00: 3d20 6972 7429 3a0a 2020 2020 2020 2020  = irt):.        
-00022b10: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-00022b20: 726e 2069 690a 2020 2020 2020 2020 7265  rn ii.        re
-00022b30: 7475 726e 2027 554e 4b4e 270a 2020 2020  turn 'UNKN'.    
-00022b40: 7274 633d 4765 7428 7274 2c27 307c 7263  rtc=Get(rt,'0|rc
-00022b50: 272c 6572 723d 5472 7565 2c64 6566 6175  ',err=True,defau
-00022b60: 6c74 3d27 6f72 6727 2c74 7970 653d 2862  lt='org',type=(b
-00022b70: 6f6f 6c2c 696e 742c 6c69 7374 2c74 7570  ool,int,list,tup
-00022b80: 6c65 2c64 6963 7429 290a 2020 2020 6e72  le,dict)).    nr
-00022b90: 7463 3d74 7261 6e73 2850 6565 6c28 7274  tc=trans(Peel(rt
-00022ba0: 632c 6572 723d 4661 6c73 652c 6465 6661  c,err=False,defa
-00022bb0: 756c 743d 2775 6e6b 6e6f 776e 2729 2920  ult='unknown')) 
-00022bc0: 2349 6620 4765 7428 2920 676f 7420 6d75  #If Get() got mu
-00022bd0: 6c74 6920 6461 7461 2074 6865 6e20 7573  lti data then us
-00022be0: 6520 6669 7273 7420 6461 7461 0a20 2020  e first data.   
-00022bf0: 2069 6620 6368 6b20 213d 2027 5f27 3a0a   if chk != '_':.
-00022c00: 2020 2020 2020 2020 6966 206e 6f74 2069          if not i
-00022c10: 7369 6e73 7461 6e63 6528 6368 6b2c 6c69  sinstance(chk,li
-00022c20: 7374 293a 2063 686b 3d5b 6368 6b5d 0a20  st): chk=[chk]. 
-00022c30: 2020 2020 2020 2066 6f72 2063 6320 696e         for cc in
-00022c40: 2063 686b 3a0a 2020 2020 2020 2020 2020   chk:.          
-00022c50: 2020 6966 2074 7261 6e73 2863 6329 203d    if trans(cc) =
-00022c60: 3d20 6e72 7463 3a0a 2020 2020 2020 2020  = nrtc:.        
-00022c70: 2020 2020 2020 2020 7265 7475 726e 2054          return T
-00022c80: 7275 650a 2020 2020 2020 2020 2020 2020  rue.            
-00022c90: 6966 206e 7274 6320 3d3d 2027 554e 4b4e  if nrtc == 'UNKN
-00022ca0: 2720 616e 6420 6465 6661 756c 7420 3d3d  ' and default ==
-00022cb0: 2027 6f72 6727 3a0a 2020 2020 2020 2020   'org':.        
-00022cc0: 2020 2020 2020 2020 7265 7475 726e 2072          return r
-00022cd0: 7463 0a20 2020 2020 2020 2072 6574 7572  tc.        retur
-00022ce0: 6e20 4465 6661 756c 7428 7274 2c64 6566  n Default(rt,def
-00022cf0: 6175 6c74 290a 2020 2020 7265 7475 726e  ault).    return
-00022d00: 206e 7274 630a 0a64 6566 204f 7574 466f   nrtc..def OutFo
-00022d10: 726d 6174 2864 6174 612c 6f75 743d 4e6f  rmat(data,out=No
-00022d20: 6e65 2c73 7472 6970 3d46 616c 7365 2c70  ne,strip=False,p
-00022d30: 6565 6c3d 4e6f 6e65 2c6f 7267 3d4e 6f6e  eel=None,org=Non
-00022d40: 652c 6465 6661 756c 743d 4e6f 6e65 293a  e,default=None):
-00022d50: 0a20 2020 2027 2727 0a20 2020 204f 7574  .    '''.    Out
-00022d60: 7075 7420 466f 726d 6174 206d 616b 6572  put Format maker
-00022d70: 0a20 2020 203c 6f70 7469 6f6e 3e0a 2020  .    <option>.  
-00022d80: 2020 2020 6f75 740a 2020 2020 2020 2020      out.        
-00022d90: 4e6f 6e65 3a20 4e6f 7420 636f 6e76 6572  None: Not conver
-00022da0: 740a 2020 2020 2020 2020 7374 722c 696e  t.        str,in
-00022db0: 742c 6c69 7374 2c64 6963 7420 3a20 636f  t,list,dict : co
-00022dc0: 6e76 6572 7420 6461 7461 2074 6f20 7761  nvert data to wa
-00022dd0: 6e74 2066 6f72 6d61 740a 2020 2020 2020  nt format.      
-00022de0: 2020 7261 7720 3a20 5065 656c 6564 2064    raw : Peeled d
-00022df0: 6174 6120 7768 656e 2073 696e 676c 6520  ata when single 
-00022e00: 6461 7461 285b 2761 275d 2c28 2761 2729  data(['a'],('a')
-00022e10: 2c7b 2761 273a 2761 6263 277d 2920 6f74  ,{'a':'abc'}) ot
-00022e20: 6865 7273 2074 6865 6e20 7265 7475 726e  hers then return
-00022e30: 206f 7269 676e 616c 0a20 2020 2020 2070   orignal.      p
-00022e40: 6565 6c0a 2020 2020 2020 2020 4e6f 6e65  eel.        None
-00022e50: 203a 2061 7574 6f6d 6174 6963 616c 6c79   : automatically
-00022e60: 2077 6f72 6b69 6e67 2061 6363 6f72 6469   working accordi
-00022e70: 6e67 2074 6f20 6f75 740a 2020 2020 2020  ng to out.      
-00022e80: 2020 5472 7565 203a 2050 6565 6c69 6e67    True : Peeling
-00022e90: 2064 6174 610a 2020 2020 2020 2020 4661   data.        Fa
-00022ea0: 6c73 653a 204e 6f74 2050 6565 6c69 6e67  lse: Not Peeling
-00022eb0: 0a20 2020 2020 2073 7472 6970 200a 2020  .      strip .  
-00022ec0: 2020 2020 2020 4661 6c73 653a 206e 6f74        False: not
-00022ed0: 2072 656d 6f76 6520 7768 6974 6520 7370   remove white sp
-00022ee0: 6163 650a 2020 2020 2020 2020 5472 7565  ace.        True
-00022ef0: 203a 2072 656d 6f76 6520 7768 6974 6520   : remove white 
-00022f00: 7370 6163 650a 2020 2020 2727 270a 2020  space.    '''.  
-00022f10: 2020 6f75 745f 6461 7461 3d4e 6f6e 650a    out_data=None.
-00022f20: 2020 2020 6966 206f 7574 2069 6e20 5b74      if out in [t
-00022f30: 7570 6c65 2c27 7475 706c 6527 2c6c 6973  uple,'tuple',lis
-00022f40: 742c 276c 6973 7427 5d3a 0a20 2020 2020  t,'list']:.     
-00022f50: 2020 2069 6620 6e6f 7420 6973 696e 7374     if not isinst
-00022f60: 616e 6365 2864 6174 612c 2874 7570 6c65  ance(data,(tuple
-00022f70: 2c6c 6973 7429 293a 0a20 2020 2020 2020  ,list)):.       
-00022f80: 2020 2020 206f 7574 5f64 6174 613d 5b64       out_data=[d
-00022f90: 6174 615d 0a20 2020 2020 2020 2065 6c73  ata].        els
-00022fa0: 653a 0a20 2020 2020 2020 2020 2020 206f  e:.            o
-00022fb0: 7574 5f64 6174 613d 6c69 7374 2864 6174  ut_data=list(dat
-00022fc0: 6129 0a20 2020 2020 2020 2069 6620 6f75  a).        if ou
-00022fd0: 7420 696e 205b 7475 706c 652c 2774 7570  t in [tuple,'tup
-00022fe0: 6c65 275d 3a0a 2020 2020 2020 2020 2020  le']:.          
-00022ff0: 2020 6966 206f 7574 5f64 6174 613a 0a20    if out_data:. 
-00023000: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-00023010: 6574 7572 6e20 7475 706c 6528 6f75 745f  eturn tuple(out_
-00023020: 6461 7461 290a 2020 2020 2020 2020 2020  data).          
-00023030: 2020 656c 6966 2069 7369 6e73 7461 6e63    elif isinstanc
-00023040: 6528 6465 6661 756c 742c 7475 706c 6529  e(default,tuple)
-00023050: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00023060: 2020 7265 7475 726e 2064 6566 6175 6c74    return default
-00023070: 0a20 2020 2020 2020 2020 2020 2065 6c73  .            els
-00023080: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
-00023090: 2020 2072 6574 7572 6e20 2844 6566 6175     return (Defau
-000230a0: 6c74 286f 7267 2c64 6566 6175 6c74 2929  lt(org,default))
-000230b0: 0a20 2020 2020 2020 2069 6620 6f75 745f  .        if out_
-000230c0: 6461 7461 3a0a 2020 2020 2020 2020 2020  data:.          
-000230d0: 2020 7265 7475 726e 206f 7574 5f64 6174    return out_dat
-000230e0: 610a 2020 2020 2020 2020 656c 6966 2069  a.        elif i
-000230f0: 7369 6e73 7461 6e63 6528 6465 6661 756c  sinstance(defaul
-00023100: 742c 6c69 7374 293a 0a20 2020 2020 2020  t,list):.       
-00023110: 2020 2020 2072 6574 7572 6e20 6465 6661       return defa
-00023120: 756c 740a 2020 2020 2020 2020 656c 7365  ult.        else
-00023130: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
-00023140: 7475 726e 205b 4465 6661 756c 7428 6f72  turn [Default(or
-00023150: 672c 6465 6661 756c 7429 5d0a 2020 2020  g,default)].    
-00023160: 656c 6966 206f 7574 2069 6e20 5b64 6963  elif out in [dic
-00023170: 742c 2764 6963 7427 5d3a 0a20 2020 2020  t,'dict']:.     
-00023180: 2020 2069 6620 6461 7461 3a0a 2020 2020     if data:.    
-00023190: 2020 2020 2020 2020 7265 7475 726e 2044          return D
-000231a0: 6963 7428 6461 7461 290a 2020 2020 2020  ict(data).      
-000231b0: 2020 656c 6966 2069 7369 6e73 7461 6e63    elif isinstanc
-000231c0: 6528 6465 6661 756c 742c 6469 6374 293a  e(default,dict):
-000231d0: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
-000231e0: 7572 6e20 6465 6661 756c 740a 2020 2020  urn default.    
-000231f0: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
-00023200: 2020 2020 2020 7265 7475 726e 2044 6566        return Def
-00023210: 6175 6c74 286f 7267 2c64 6566 6175 6c74  ault(org,default
-00023220: 290a 2020 2020 656c 6966 206f 7574 2069  ).    elif out i
-00023230: 6e20 5b27 7374 7227 2c73 7472 5d3a 0a20  n ['str',str]:. 
-00023240: 2020 2020 2020 206f 7574 5f64 6174 613d         out_data=
-00023250: 5768 6974 6553 7472 6970 2850 6565 6c28  WhiteStrip(Peel(
-00023260: 6461 7461 2c70 6565 6c29 2c73 7472 6970  data,peel),strip
-00023270: 290a 2020 2020 656c 6966 206f 7574 2069  ).    elif out i
-00023280: 6e20 5b27 696e 7427 2c69 6e74 5d3a 0a20  n ['int',int]:. 
-00023290: 2020 2020 2020 206f 7574 5f64 6174 613d         out_data=
-000232a0: 496e 7428 5768 6974 6553 7472 6970 2850  Int(WhiteStrip(P
-000232b0: 6565 6c28 6461 7461 2c70 6565 6c29 2c73  eel(data,peel),s
-000232c0: 7472 6970 2929 0a20 2020 2069 6620 6f75  trip)).    if ou
-000232d0: 745f 6461 7461 2069 7320 4661 6c73 653a  t_data is False:
-000232e0: 2023 6966 2073 7472 206f 7220 696e 7420   #if str or int 
-000232f0: 676f 7420 4661 6c73 6520 7468 656e 200a  got False then .
-00023300: 2020 2020 2020 2020 7265 7475 726e 2044          return D
-00023310: 6566 6175 6c74 286f 7267 2c64 6566 6175  efault(org,defau
-00023320: 6c74 290a 2020 2020 6966 206f 7574 203d  lt).    if out =
-00023330: 3d20 2772 6177 2720 6f72 2049 734e 6f6e  = 'raw' or IsNon
-00023340: 6528 6f75 7429 3a0a 2020 2020 2020 2020  e(out):.        
-00023350: 6966 2049 734e 6f6e 6528 7065 656c 293a  if IsNone(peel):
-00023360: 2070 6565 6c3d 5472 7565 0a20 2020 206f   peel=True.    o
-00023370: 7574 5f64 6174 613d 5768 6974 6553 7472  ut_data=WhiteStr
-00023380: 6970 2850 6565 6c28 6461 7461 2c70 6565  ip(Peel(data,pee
-00023390: 6c29 2c73 7472 6970 290a 2020 2020 6966  l),strip).    if
-000233a0: 206f 7574 5f64 6174 613a 2072 6574 7572   out_data: retur
-000233b0: 6e20 6f75 745f 6461 7461 0a20 2020 2072  n out_data.    r
-000233c0: 6574 7572 6e20 4465 6661 756c 7428 6f72  eturn Default(or
-000233d0: 672c 6465 6661 756c 7429 0a0a 6465 6620  g,default)..def 
-000233e0: 4665 6564 4675 6e63 286f 626a 2c2a 696e  FeedFunc(obj,*in
-000233f0: 7073 2c2a 2a6f 7074 7329 3a0a 2020 2020  ps,**opts):.    
-00023400: 2727 270a 2020 2020 4175 746f 6d61 7469  '''.    Automati
-00023410: 6361 6c6c 7920 4665 6564 206d 6174 6368  cally Feed match
-00023420: 6564 2076 6172 6961 626c 6573 2074 6f20  ed variables to 
-00023430: 6675 6e63 7469 6f6e 0a20 2020 2046 6565  function.    Fee
-00023440: 6446 756e 6328 3c66 756e 633e 2c3c 6675  dFunc(<func>,<fu
-00023450: 6e63 7469 6f6e 2773 2061 7267 756d 656e  nction's argumen
-00023460: 7473 3e2c 3c66 756e 6374 696f 6e27 7320  ts>,<function's 
-00023470: 7661 7269 6162 6c65 733e 290a 2020 2020  variables>).    
-00023480: 6966 2073 6f6d 6574 6869 6e67 2077 726f  if something wro
-00023490: 6e67 2074 6865 6e20 7265 7475 726e 2046  ng then return F
-000234a0: 616c 7365 0a20 2020 2069 6620 636f 7272  alse.    if corr
-000234b0: 6563 7420 7468 656e 2072 6574 7572 6e20  ect then return 
-000234c0: 6f75 7470 7574 206f 6620 7261 6e20 7468  output of ran th
-000234d0: 6520 4675 6e63 7469 6f6e 2077 6974 6820  e Function with 
-000234e0: 696e 7075 7473 0a20 2020 2027 2727 0a20  inputs.    '''. 
-000234f0: 2020 206f 626a 5f74 7970 653d 5479 7065     obj_type=Type
-00023500: 4e61 6d65 286f 626a 290a 2020 2020 6966  Name(obj).    if
-00023510: 206f 626a 5f74 7970 6520 3d3d 2027 7374   obj_type == 'st
-00023520: 7227 2061 6e64 206e 6f74 2069 6e73 7065  r' and not inspe
-00023530: 6374 2e69 7363 6c61 7373 286f 626a 293a  ct.isclass(obj):
-00023540: 2023 2066 6f72 2073 7472 2063 6c61 7373   # for str class
-00023550: 0a20 2020 2020 2020 206d 796d 6f64 3d4d  .        mymod=M
-00023560: 794d 6f64 756c 6528 6465 6661 756c 743d  yModule(default=
-00023570: 4661 6c73 652c 7061 7265 6e74 3d31 290a  False,parent=1).
-00023580: 2020 2020 2020 2020 6966 206d 796d 6f64          if mymod
-00023590: 2069 7320 4661 6c73 653a 0a20 2020 2020   is False:.     
-000235a0: 2020 2020 2020 206d 796d 6f64 3d4d 794d         mymod=MyM
-000235b0: 6f64 756c 6528 6465 6661 756c 743d 4661  odule(default=Fa
-000235c0: 6c73 652c 7061 7265 6e74 3d30 290a 2020  lse,parent=0).  
-000235d0: 2020 2020 2020 6966 206d 796d 6f64 2069        if mymod i
-000235e0: 7320 4661 6c73 653a 0a20 2020 2020 2020  s False:.       
-000235f0: 2020 2020 206d 796d 6f64 3d4d 794d 6f64       mymod=MyMod
-00023600: 756c 6528 6465 6661 756c 743d 4661 6c73  ule(default=Fals
-00023610: 652c 7061 7265 6e74 3d2d 3129 0a20 2020  e,parent=-1).   
-00023620: 2020 2020 2069 6620 5479 7065 286d 796d       if Type(mym
-00023630: 6f64 2c27 6d6f 6475 6c65 2729 3a0a 2020  od,'module'):.  
-00023640: 2020 2020 2020 2020 2020 7472 793a 0a20            try:. 
-00023650: 2020 2020 2020 2020 2020 2020 2020 206f                 o
-00023660: 626a 3d67 6574 6174 7472 286d 796d 6f64  bj=getattr(mymod
-00023670: 2c6f 626a 2c4e 6f6e 6529 0a20 2020 2020  ,obj,None).     
-00023680: 2020 2020 2020 2020 2020 206f 626a 5f74             obj_t
-00023690: 7970 653d 5479 7065 4e61 6d65 286f 626a  ype=TypeName(obj
-000236a0: 290a 2020 2020 2020 2020 2020 2020 6578  ).            ex
-000236b0: 6365 7074 3a0a 2020 2020 2020 2020 2020  cept:.          
-000236c0: 2020 2020 2020 5374 6445 7272 2827 4675        StdErr('Fu
-000236d0: 6e63 7469 6f6e 206e 616d 6520 227b 7d22  nction name "{}"
-000236e0: 206e 6f74 2066 6f75 6e64 2069 6e20 7468   not found in th
-000236f0: 6520 6d6f 6475 6c65 5c6e 272e 666f 726d  e module\n'.form
-00023700: 6174 286f 626a 2929 0a20 2020 2020 2020  at(obj)).       
-00023710: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-00023720: 4661 6c73 650a 2020 2020 6966 206f 626a  False.    if obj
-00023730: 5f74 7970 6520 696e 2028 2766 756e 6374  _type in ('funct
-00023740: 696f 6e27 2c27 6275 696c 7469 6e5f 6675  ion','builtin_fu
-00023750: 6e63 7469 6f6e 5f6f 725f 6d65 7468 6f64  nction_or_method
-00023760: 272c 2774 7970 6527 2c27 696e 7427 2c27  ','type','int','
-00023770: 7374 7227 2c27 6c69 7374 272c 2764 6963  str','list','dic
-00023780: 7427 293a 0a20 2020 2020 2020 2066 6361  t'):.        fca
-00023790: 7267 733d 4675 6e63 7469 6f6e 4172 6773  rgs=FunctionArgs
-000237a0: 286f 626a 2c6d 6f64 653d 2764 6574 6169  (obj,mode='detai
-000237b0: 6c27 2c64 6566 6175 6c74 3d7b 7d29 0a20  l',default={}). 
-000237c0: 2020 2020 2020 206e 696e 7073 3d5b 5d0a         ninps=[].
-000237d0: 2020 2020 2020 2020 6e6f 7074 733d 7b7d          nopts={}
-000237e0: 0a20 2020 2020 2020 2023 5370 6563 6961  .        #Specia
-000237f0: 6c20 6361 7365 2069 6e74 2c73 7472 2c6c  l case int,str,l
-00023800: 6973 742c 6469 6374 0a20 2020 2020 2020  ist,dict.       
-00023810: 2069 6620 6f62 6a5f 7479 7065 2069 6e20   if obj_type in 
-00023820: 5b27 696e 7427 2c27 7374 7227 2c27 6c69  ['int','str','li
-00023830: 7374 272c 2764 6963 7427 5d3a 0a20 2020  st','dict']:.   
-00023840: 2020 2020 2020 2020 2069 6620 696e 7073           if inps
-00023850: 3a20 6e69 6e70 732e 6170 7065 6e64 2869  : ninps.append(i
-00023860: 6e70 735b 305d 290a 2020 2020 2020 2020  nps[0]).        
-00023870: 2020 2020 6966 2027 6261 7365 2720 696e      if 'base' in
-00023880: 206f 7074 733a 2023 696e 7428 290a 2020   opts: #int().  
-00023890: 2020 2020 2020 2020 2020 2020 2020 6e6f                no
-000238a0: 7074 735b 2762 6173 6527 5d3d 6f70 7473  pts['base']=opts
-000238b0: 5b27 6261 7365 275d 0a20 2020 2020 2020  ['base'].       
-000238c0: 2020 2020 2069 6620 2765 6e63 6f64 696e       if 'encodin
-000238d0: 6727 2069 6e20 6f70 7473 3a20 2320 7374  g' in opts: # st
-000238e0: 7228 290a 2020 2020 2020 2020 2020 2020  r().            
-000238f0: 2020 2020 6e6f 7074 735b 2765 6e63 6f64      nopts['encod
-00023900: 696e 6727 5d3d 6f70 7473 5b27 656e 636f  ing']=opts['enco
-00023910: 6469 6e67 275d 0a20 2020 2020 2020 2020  ding'].         
-00023920: 2020 2065 6c69 6620 6f62 6a5f 7479 7065     elif obj_type
-00023930: 203d 3d20 2773 7472 2720 616e 6420 6e69   == 'str' and ni
-00023940: 6e70 7320 616e 6420 5479 7065 286e 696e  nps and Type(nin
-00023950: 7073 5b30 5d2c 2762 7974 6573 2729 2061  ps[0],'bytes') a
-00023960: 6e64 2027 656e 636f 6469 6e67 2720 6e6f  nd 'encoding' no
-00023970: 7420 696e 206f 7074 733a 2023 2073 7472  t in opts: # str
-00023980: 2829 0a20 2020 2020 2020 2020 2020 2020  ().             
-00023990: 2020 206e 6f70 7473 5b27 656e 636f 6469     nopts['encodi
-000239a0: 6e67 275d 3d27 6173 6369 6927 0a20 2020  ng']='ascii'.   
-000239b0: 2020 2020 2069 6478 3d30 0a20 2020 2020       idx=0.     
-000239c0: 2020 2069 6620 2761 7267 7327 2069 6e20     if 'args' in 
-000239d0: 6663 6172 6773 3a0a 2020 2020 2020 2020  fcargs:.        
-000239e0: 2020 2020 666f 7220 6920 696e 2066 6361      for i in fca
-000239f0: 7267 735b 2761 7267 7327 5d3a 0a20 2020  rgs['args']:.   
-00023a00: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-00023a10: 6c65 6e28 696e 7073 2920 3e20 6964 783a  len(inps) > idx:
-00023a20: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00023a30: 2020 2020 206e 696e 7073 2e61 7070 656e       ninps.appen
-00023a40: 6428 696e 7073 5b69 6478 5d29 0a20 2020  d(inps[idx]).   
-00023a50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00023a60: 2069 6478 2b3d 310a 2020 2020 2020 2020   idx+=1.        
-00023a70: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
-00023a80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00023a90: 2020 6966 2069 2069 6e20 6f70 7473 3a0a    if i in opts:.
-00023aa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00023ab0: 2020 2020 2020 2020 6e69 6e70 732e 6170          ninps.ap
-00023ac0: 7065 6e64 286f 7074 732e 706f 7028 6929  pend(opts.pop(i)
-00023ad0: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-00023ae0: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
-00023af0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00023b00: 2020 2020 5374 6445 7272 2827 696e 7075      StdErr('inpu
-00023b10: 7420 7061 7261 6d65 7465 7220 227b 7d22  t parameter "{}"
-00023b20: 206e 6f74 2066 6f75 6e64 5c6e 272e 666f   not found\n'.fo
-00023b30: 726d 6174 2869 2929 0a20 2020 2020 2020  rmat(i)).       
-00023b40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00023b50: 2072 6574 7572 6e20 4661 6c73 650a 2020   return False.  
-00023b60: 2020 2020 2020 6966 2027 7661 7261 7267        if 'vararg
-00023b70: 7327 2069 6e20 6663 6172 6773 3a0a 2020  s' in fcargs:.  
-00023b80: 2020 2020 2020 2020 2020 6e69 6e70 733d            ninps=
-00023b90: 6e69 6e70 732b 6c69 7374 2869 6e70 735b  ninps+list(inps[
-00023ba0: 6964 783a 5d29 0a20 2020 2020 2020 2069  idx:]).        i
-00023bb0: 6620 2764 6566 6175 6c74 7327 2069 6e20  f 'defaults' in 
-00023bc0: 6663 6172 6773 3a0a 2020 2020 2020 2020  fcargs:.        
-00023bd0: 2020 2020 666f 7220 6920 696e 2066 6361      for i in fca
-00023be0: 7267 735b 2764 6566 6175 6c74 7327 5d3a  rgs['defaults']:
-00023bf0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00023c00: 2069 6620 6920 696e 206f 7074 733a 0a20   if i in opts:. 
-00023c10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00023c20: 2020 206e 6f70 7473 5b69 5d3d 6f70 7473     nopts[i]=opts
-00023c30: 2e70 6f70 2869 2920 236d 616b 6520 7769  .pop(i) #make wi
-00023c40: 7468 2069 6e70 7574 2076 616c 7565 0a20  th input value. 
-00023c50: 2020 2020 2020 2020 2020 2020 2020 2065                 e
-00023c60: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
-00023c70: 2020 2020 2020 2020 206e 6f70 7473 5b69           nopts[i
-00023c80: 5d3d 6663 6172 6773 5b27 6465 6661 756c  ]=fcargs['defaul
-00023c90: 7473 275d 5b69 5d20 2320 6d61 6b65 2077  ts'][i] # make w
-00023ca0: 6974 6820 6465 6661 756c 7420 7661 6c75  ith default valu
-00023cb0: 650a 2020 2020 2020 2020 6966 2027 6b65  e.        if 'ke
-00023cc0: 7977 6f72 6473 2720 696e 2066 6361 7267  ywords' in fcarg
-00023cd0: 733a 0a20 2020 2020 2020 2020 2020 206e  s:.            n
-00023ce0: 6f70 7473 2e75 7064 6174 6528 6f70 7473  opts.update(opts
-00023cf0: 290a 2020 2020 2020 2020 2352 756e 2066  ).        #Run f
-00023d00: 756e 6374 696f 6e20 7769 7468 2066 6f75  unction with fou
-00023d10: 6e64 2061 7267 756d 656e 7473 0a20 2020  nd arguments.   
-00023d20: 2020 2020 2069 6620 6e69 6e70 7320 616e       if ninps an
-00023d30: 6420 6e6f 7074 733a 0a20 2020 2020 2020  d nopts:.       
-00023d40: 2020 2020 2069 6620 6f62 6a5f 7479 7065       if obj_type
-00023d50: 2069 6e20 5b27 696e 7427 2c27 7374 7227   in ['int','str'
-00023d60: 5d3a 0a20 2020 2020 2020 2020 2020 2020  ]:.             
-00023d70: 2020 2072 6574 7572 6e20 6f62 6a28 6e69     return obj(ni
-00023d80: 6e70 735b 305d 2c2a 2a6e 6f70 7473 290a  nps[0],**nopts).
-00023d90: 2020 2020 2020 2020 2020 2020 656c 7365              else
-00023da0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00023db0: 2020 7265 7475 726e 206f 626a 282a 6e69    return obj(*ni
-00023dc0: 6e70 732c 2a2a 6e6f 7074 7329 0a20 2020  nps,**nopts).   
-00023dd0: 2020 2020 2065 6c69 6620 6e69 6e70 733a       elif ninps:
-00023de0: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-00023df0: 6f62 6a5f 7479 7065 2069 6e20 5b27 696e  obj_type in ['in
-00023e00: 7427 2c27 7374 7227 2c27 6c69 7374 272c  t','str','list',
-00023e10: 2764 6963 7427 5d3a 0a20 2020 2020 2020  'dict']:.       
-00023e20: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-00023e30: 6f62 6a28 6e69 6e70 735b 305d 290a 2020  obj(ninps[0]).  
-00023e40: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
-00023e50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00023e60: 7265 7475 726e 206f 626a 282a 6e69 6e70  return obj(*ninp
-00023e70: 7329 0a20 2020 2020 2020 2065 6c69 6620  s).        elif 
-00023e80: 6e6f 7074 733a 0a20 2020 2020 2020 2020  nopts:.         
-00023e90: 2020 2072 6574 7572 6e20 6f62 6a28 2a2a     return obj(**
-00023ea0: 6e6f 7074 7329 0a20 2020 2020 2020 2065  nopts).        e
-00023eb0: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
-00023ec0: 2074 7279 3a0a 2020 2020 2020 2020 2020   try:.          
-00023ed0: 2020 2020 2020 7265 7475 726e 206f 626a        return obj
-00023ee0: 2829 0a20 2020 2020 2020 2020 2020 2065  ().            e
-00023ef0: 7863 6570 743a 0a20 2020 2020 2020 2020  xcept:.         
-00023f00: 2020 2020 2020 2065 3d45 7863 6570 744d         e=ExceptM
-00023f10: 7367 2829 0a20 2020 2020 2020 2020 2020  sg().           
-00023f20: 2020 2020 2053 7464 4572 7228 6529 0a20       StdErr(e). 
-00023f30: 2020 2072 6574 7572 6e20 4661 6c73 650a     return False.
-00023f40: 0a64 6566 2070 7269 6e74 6628 2a6d 7367  .def printf(*msg
-00023f50: 2c2a 2a6f 7074 7329 3a0a 2020 2020 6461  ,**opts):.    da
-00023f60: 7465 5f66 6f72 6d61 743d 6f70 7473 2e67  te_format=opts.g
-00023f70: 6574 2827 6461 7465 5f66 6f72 6d61 7427  et('date_format'
-00023f80: 2c27 256d 2f25 642f 2559 2025 483a 254d  ,'%m/%d/%Y %H:%M
-00023f90: 3a25 5327 2069 6620 6f70 7473 2e67 6574  :%S' if opts.get
-00023fa0: 2827 6461 7465 2729 2065 6c73 6520 4e6f  ('date') else No
-00023fb0: 6e65 290a 2020 2020 6469 7265 6374 3d6f  ne).    direct=o
-00023fc0: 7074 732e 6765 7428 2764 6972 6563 7427  pts.get('direct'
-00023fd0: 2c46 616c 7365 290a 2020 2020 6473 703d  ,False).    dsp=
-00023fe0: 6f70 7473 2e67 6574 2827 6473 7027 2c27  opts.get('dsp','
-00023ff0: 6127 290a 2020 2020 6c6f 673d 6f70 7473  a').    log=opts
-00024000: 2e67 6574 2827 6c6f 6727 2c4e 6f6e 6529  .get('log',None)
-00024010: 0a20 2020 206c 6f67 5f6c 6576 656c 3d6f  .    log_level=o
-00024020: 7074 732e 6765 7428 276c 6f67 5f6c 6576  pts.get('log_lev
-00024030: 656c 272c 3829 0a20 2020 2063 616c 6c65  el',8).    calle
-00024040: 723d 6f70 7473 2e67 6574 2827 6361 6c6c  r=opts.get('call
-00024050: 6572 272c 2764 6574 6169 6c27 2069 6620  er','detail' if 
-00024060: 6f70 7473 2e67 6574 2827 6361 6c6c 6572  opts.get('caller
-00024070: 5f64 6574 6169 6c27 2920 656c 7365 204e  _detail') else N
-00024080: 6f6e 6529 0a20 2020 2063 616c 6c65 725f  one).    caller_
-00024090: 7472 6565 3d6f 7074 732e 6765 7428 2763  tree=opts.get('c
-000240a0: 616c 6c65 725f 7472 6565 272c 6f70 7473  aller_tree',opts
-000240b0: 2e67 6574 2827 6361 6c6c 6572 5f68 6973  .get('caller_his
-000240c0: 746f 7279 2729 290a 2020 2020 7379 736c  tory')).    sysl
-000240d0: 6f67 643d 6f70 7473 2e67 6574 2827 7379  ogd=opts.get('sy
-000240e0: 736c 6f67 6427 2c4e 6f6e 6529 0a20 2020  slogd',None).   
-000240f0: 206e 6577 5f6c 696e 653d 6f70 7473 2e67   new_line=opts.g
-00024100: 6574 2827 6e65 775f 6c69 6e65 272c 6f70  et('new_line',op
-00024110: 7473 2e67 6574 2827 6e65 776c 696e 6527  ts.get('newline'
-00024120: 2c27 2720 6966 2064 6972 6563 7420 656c  ,'' if direct el
-00024130: 7365 2027 5c6e 2729 290a 2020 2020 666f  se '\n')).    fo
-00024140: 726d 3d6f 7074 732e 6765 7428 2766 6f72  rm=opts.get('for
-00024150: 6d27 290a 2020 2020 696e 7472 6f3d 6f70  m').    intro=op
-00024160: 7473 2e67 6574 2827 696e 7472 6f27 2c4e  ts.get('intro',N
-00024170: 6f6e 6529 0a20 2020 206c 6f67 6669 6c65  one).    logfile
-00024180: 3d6f 7074 732e 6765 7428 276c 6f67 6669  =opts.get('logfi
-00024190: 6c65 272c 5b5d 290a 0a20 2020 2023 4c6f  le',[])..    #Lo
-000241a0: 6766 696c 650a 2020 2020 6966 2069 7369  gfile.    if isi
-000241b0: 6e73 7461 6e63 6528 6c6f 6766 696c 652c  nstance(logfile,
-000241c0: 7374 7229 3a0a 2020 2020 2020 2020 6c6f  str):.        lo
-000241d0: 6766 696c 653d 6c6f 6766 696c 652e 7370  gfile=logfile.sp
-000241e0: 6c69 7428 272c 2729 0a20 2020 2066 6f72  lit(',').    for
-000241f0: 2069 6920 696e 206d 7367 3a0a 2020 2020   ii in msg:.    
-00024200: 2020 2020 6966 2069 7369 6e73 7461 6e63      if isinstanc
-00024210: 6528 6969 2c73 7472 2920 616e 6420 273a  e(ii,str) and ':
-00024220: 2720 696e 2069 693a 0a20 2020 2020 2020  ' in ii:.       
-00024230: 2020 2020 206c 6f67 6669 6c65 5f6c 6973       logfile_lis
-00024240: 743d 6969 2e73 706c 6974 2827 3a27 290a  t=ii.split(':').
-00024250: 2020 2020 2020 2020 2020 2020 6966 206c              if l
-00024260: 6f67 6669 6c65 5f6c 6973 745b 305d 2069  ogfile_list[0] i
-00024270: 6e20 5b27 6c6f 675f 6669 6c65 272c 276c  n ['log_file','l
-00024280: 6f67 6669 6c65 275d 3a0a 2020 2020 2020  ogfile']:.      
-00024290: 2020 2020 2020 2020 2020 6966 206c 656e            if len
-000242a0: 286c 6f67 6669 6c65 5f6c 6973 7429 203e  (logfile_list) >
-000242b0: 2032 3a0a 2020 2020 2020 2020 2020 2020   2:.            
-000242c0: 2020 2020 2020 2020 666f 7220 6a6a 2069          for jj i
-000242d0: 6e20 6c6f 6766 696c 655f 6c69 7374 5b31  n logfile_list[1
-000242e0: 3a5d 3a0a 2020 2020 2020 2020 2020 2020  :]:.            
-000242f0: 2020 2020 2020 2020 2020 2020 6c6f 6766              logf
-00024300: 696c 652e 6170 7065 6e64 286a 6a29 0a20  ile.append(jj). 
-00024310: 2020 2020 2020 2020 2020 2020 2020 2065                 e
-00024320: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
-00024330: 2020 2020 2020 2020 206c 6f67 6669 6c65           logfile
-00024340: 3d6c 6f67 6669 6c65 2b6c 6f67 6669 6c65  =logfile+logfile
-00024350: 5f6c 6973 745b 315d 2e73 706c 6974 2827  _list[1].split('
-00024360: 2c27 290a 2020 2020 2020 2020 2020 2020  ,').            
-00024370: 2020 2020 6d73 672e 7265 6d6f 7665 2869      msg.remove(i
-00024380: 6929 0a20 2020 2023 2073 6176 6520 6d73  i).    # save ms
-00024390: 6728 7265 6d6f 7665 6420 6c6f 675f 6669  g(removed log_fi
-000243a0: 6c65 2069 6e66 6f72 6d61 7469 6f6e 2920  le information) 
-000243b0: 746f 2073 7973 6c6f 6764 200a 2020 2020  to syslogd .    
-000243c0: 6966 2073 7973 6c6f 6764 3a0a 2020 2020  if syslogd:.    
-000243d0: 2020 2020 6966 2073 7973 6c6f 6764 2069      if syslogd i
-000243e0: 6e20 5b27 494e 464f 272c 2769 6e66 6f27  n ['INFO','info'
-000243f0: 5d3a 0a20 2020 2020 2020 2020 2020 2073  ]:.            s
-00024400: 7973 6c6f 672e 7379 736c 6f67 2873 7973  yslog.syslog(sys
-00024410: 6c6f 672e 4c4f 475f 494e 464f 2c6d 7367  log.LOG_INFO,msg
-00024420: 290a 2020 2020 2020 2020 656c 6966 2073  ).        elif s
-00024430: 7973 6c6f 6764 2069 6e20 5b27 4b45 524e  yslogd in ['KERN
-00024440: 272c 276b 6572 6e27 5d3a 0a20 2020 2020  ','kern']:.     
-00024450: 2020 2020 2020 2073 7973 6c6f 672e 7379         syslog.sy
-00024460: 736c 6f67 2873 7973 6c6f 672e 4c4f 475f  slog(syslog.LOG_
-00024470: 4b45 524e 2c6d 7367 290a 2020 2020 2020  KERN,msg).      
-00024480: 2020 656c 6966 2073 7973 6c6f 6764 2069    elif syslogd i
-00024490: 6e20 5b27 4552 5227 2c27 6572 7227 5d3a  n ['ERR','err']:
-000244a0: 0a20 2020 2020 2020 2020 2020 2073 7973  .            sys
-000244b0: 6c6f 672e 7379 736c 6f67 2873 7973 6c6f  log.syslog(syslo
-000244c0: 672e 4c4f 475f 4552 522c 6d73 6729 0a20  g.LOG_ERR,msg). 
-000244d0: 2020 2020 2020 2065 6c69 6620 7379 736c         elif sysl
-000244e0: 6f67 6420 696e 205b 2743 5249 5427 2c27  ogd in ['CRIT','
-000244f0: 6372 6974 275d 3a0a 2020 2020 2020 2020  crit']:.        
-00024500: 2020 2020 7379 736c 6f67 2e73 7973 6c6f      syslog.syslo
-00024510: 6728 7379 736c 6f67 2e4c 4f47 5f43 5249  g(syslog.LOG_CRI
-00024520: 542c 6d73 6729 0a20 2020 2020 2020 2065  T,msg).        e
-00024530: 6c69 6620 7379 736c 6f67 6420 696e 205b  lif syslogd in [
-00024540: 2757 4152 4e27 2c27 7761 726e 275d 3a0a  'WARN','warn']:.
-00024550: 2020 2020 2020 2020 2020 2020 7379 736c              sysl
-00024560: 6f67 2e73 7973 6c6f 6728 7379 736c 6f67  og.syslog(syslog
-00024570: 2e4c 4f47 5f57 4152 4e49 4e47 2c6d 7367  .LOG_WARNING,msg
-00024580: 290a 2020 2020 2020 2020 656c 6966 2073  ).        elif s
-00024590: 7973 6c6f 6764 2069 6e20 5b27 4442 4727  yslogd in ['DBG'
-000245a0: 2c27 4445 4255 4727 2c27 6462 6727 2c27  ,'DEBUG','dbg','
-000245b0: 6465 6275 6727 5d3a 0a20 2020 2020 2020  debug']:.       
-000245c0: 2020 2020 2073 7973 6c6f 672e 7379 736c       syslog.sysl
-000245d0: 6f67 2873 7973 6c6f 672e 4c4f 475f 4445  og(syslog.LOG_DE
-000245e0: 4255 472c 6d73 6729 0a20 2020 2020 2020  BUG,msg).       
-000245f0: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
-00024600: 2020 2073 7973 6c6f 672e 7379 736c 6f67     syslog.syslog
-00024610: 286d 7367 290a 2020 2020 2320 4d61 6b65  (msg).    # Make
-00024620: 2061 2049 6e74 726f 0a20 2020 2069 6e74   a Intro.    int
-00024630: 726f 5f6d 7367 3d27 270a 2020 2020 6966  ro_msg=''.    if
-00024640: 2064 6174 655f 666f 726d 6174 2061 6e64   date_format and
-00024650: 206e 6f74 2073 7973 6c6f 6764 3a0a 2020   not syslogd:.  
-00024660: 2020 2020 2020 696e 7472 6f5f 6d73 673d        intro_msg=
-00024670: 277b 307d 2027 2e66 6f72 6d61 7428 5449  '{0} '.format(TI
-00024680: 4d45 2829 2e4e 6f77 2829 2e73 7472 6674  ME().Now().strft
-00024690: 696d 6528 6461 7465 5f66 6f72 6d61 7429  ime(date_format)
-000246a0: 290a 2020 2020 696e 7472 6f5f 6c65 6e3d  ).    intro_len=
-000246b0: 6c65 6e28 696e 7472 6f5f 6d73 6729 0a20  len(intro_msg). 
-000246c0: 2020 2069 6620 6361 6c6c 6572 3a0a 2020     if caller:.  
-000246d0: 2020 2020 2020 6172 673d 7b27 7061 7265        arg={'pare
-000246e0: 6e74 273a 312c 2761 7267 7327 3a54 7275  nt':1,'args':Tru
-000246f0: 657d 0a20 2020 2020 2020 2069 6620 6361  e}.        if ca
-00024700: 6c6c 6572 203d 3d20 2764 6574 6169 6c27  ller == 'detail'
-00024710: 3a0a 2020 2020 2020 2020 2020 2020 6172  :.            ar
-00024720: 672e 7570 6461 7465 287b 276c 696e 655f  g.update({'line_
-00024730: 6e75 6d62 6572 273a 5472 7565 2c27 6669  number':True,'fi
-00024740: 6c65 6e61 6d65 273a 5472 7565 7d29 0a20  lename':True}). 
-00024750: 2020 2020 2020 2069 6620 6361 6c6c 6572         if caller
-00024760: 5f74 7265 6520 6973 2054 7275 653a 0a20  _tree is True:. 
-00024770: 2020 2020 2020 2020 2020 2061 7267 2e75             arg.u
-00024780: 7064 6174 6528 7b27 6869 7374 6f72 7927  pdate({'history'
-00024790: 3a54 7275 652c 2774 7265 6527 3a54 7275  :True,'tree':Tru
-000247a0: 657d 290a 2020 2020 2020 2020 6361 6c6c  e}).        call
-000247b0: 5f6e 616d 653d 4675 6e63 7469 6f6e 4e61  _name=FunctionNa
-000247c0: 6d65 282a 2a61 7267 290a 2020 2020 2020  me(**arg).      
-000247d0: 2020 6966 2063 616c 6c5f 6e61 6d65 3a0a    if call_name:.
-000247e0: 2020 2020 2020 2020 2020 2020 696e 7472              intr
-000247f0: 6f5f 6d73 673d 696e 7472 6f5f 6d73 672b  o_msg=intro_msg+
-00024800: 5772 6170 5374 7269 6e67 284a 6f69 6e28  WrapString(Join(
-00024810: 6361 6c6c 5f6e 616d 652c 275c 6e27 292c  call_name,'\n'),
-00024820: 6673 7061 6365 3d30 2c20 6e73 7061 6365  fspace=0, nspace
-00024830: 3d6c 656e 2869 6e74 726f 5f6d 7367 292c  =len(intro_msg),
-00024840: 6d6f 6465 3d27 7370 6163 6527 292b 273a  mode='space')+':
-00024850: 2027 0a20 2020 2020 2020 2020 2020 2069   '.            i
-00024860: 6e74 726f 5f6c 656e 3d69 6e74 726f 5f6c  ntro_len=intro_l
-00024870: 656e 2b6c 656e 2863 616c 6c5f 6e61 6d65  en+len(call_name
-00024880: 5b2d 315d 292b 320a 2020 2020 6966 2054  [-1])+2.    if T
-00024890: 7970 6528 696e 7472 6f2c 2773 7472 2729  ype(intro,'str')
-000248a0: 2061 6e64 2069 6e74 726f 3a0a 2020 2020   and intro:.    
-000248b0: 2020 2020 696e 7472 6f5f 6d73 673d 696e      intro_msg=in
-000248c0: 7472 6f5f 6d73 672b 696e 7472 6f2b 273a  tro_msg+intro+':
-000248d0: 2027 0a20 2020 2020 2020 2069 6e74 726f   '.        intro
-000248e0: 5f6c 656e 3d69 6e74 726f 5f6c 656e 2b6c  _len=intro_len+l
-000248f0: 656e 2869 6e74 726f 290a 0a20 2020 2023  en(intro)..    #
-00024900: 204d 616b 6520 6120 6d73 670a 2020 2020   Make a msg.    
-00024910: 6d73 675f 7374 723d 2727 0a20 2020 2066  msg_str=''.    f
-00024920: 6f72 2069 6920 696e 206d 7367 3a0a 2020  or ii in msg:.  
-00024930: 2020 2020 2020 6966 2066 6f72 6d3a 0a20        if form:. 
-00024940: 2020 2020 2020 2020 2020 206d 7367 5f73             msg_s
-00024950: 7472 3d6d 7367 5f73 7472 2069 6620 6d73  tr=msg_str if ms
-00024960: 675f 7374 7220 656c 7365 2069 6e74 726f  g_str else intro
-00024970: 5f6d 7367 202b 2043 6f6c 6f72 5374 7228  _msg + ColorStr(
-00024980: 5772 6170 5374 7269 6e67 2853 7472 2870  WrapString(Str(p
-00024990: 7072 696e 742e 7066 6f72 6d61 7428 6969  print.pformat(ii
-000249a0: 292c 6465 6661 756c 743d 276f 7267 2729  ),default='org')
-000249b0: 2c66 7370 6163 653d 696e 7472 6f5f 6c65  ,fspace=intro_le
-000249c0: 6e20 6966 206d 7367 5f73 7472 2065 6c73  n if msg_str els
-000249d0: 6520 302c 206e 7370 6163 653d 696e 7472  e 0, nspace=intr
-000249e0: 6f5f 6c65 6e2c 6d6f 6465 3d27 7370 6163  o_len,mode='spac
-000249f0: 6527 292c 2a2a 6f70 7473 290a 2020 2020  e'),**opts).    
-00024a00: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
-00024a10: 2020 2020 2020 6d73 675f 7374 723d 6d73        msg_str=ms
-00024a20: 675f 7374 7220 6966 206d 7367 5f73 7472  g_str if msg_str
-00024a30: 2065 6c73 6520 696e 7472 6f5f 6d73 6720   else intro_msg 
-00024a40: 2b20 436f 6c6f 7253 7472 2857 7261 7053  + ColorStr(WrapS
-00024a50: 7472 696e 6728 5374 7228 6969 2c64 6566  tring(Str(ii,def
-00024a60: 6175 6c74 3d27 6f72 6727 292c 6673 7061  ault='org'),fspa
-00024a70: 6365 3d69 6e74 726f 5f6c 656e 2069 6620  ce=intro_len if 
-00024a80: 6d73 675f 7374 7220 656c 7365 2030 2c20  msg_str else 0, 
-00024a90: 6e73 7061 6365 3d69 6e74 726f 5f6c 656e  nspace=intro_len
-00024aa0: 2c6d 6f64 653d 2773 7061 6365 2729 2c2a  ,mode='space'),*
-00024ab0: 2a6f 7074 7329 0a0a 2020 2020 6c6f 675f  *opts)..    log_
-00024ac0: 703d 4661 6c73 650a 2020 2020 234c 6f67  p=False.    #Log
-00024ad0: 2066 756e 6374 696f 6e0a 2020 2020 6966   function.    if
-00024ae0: 2054 7970 6528 6c6f 672c 2766 756e 6374   Type(log,'funct
-00024af0: 696f 6e27 293a 0a20 2020 2020 2020 206c  ion'):.        l
-00024b00: 6f67 5f70 3d54 7275 650a 2020 2020 2020  og_p=True.      
-00024b10: 2020 4665 6564 4675 6e63 286c 6f67 2c6d    FeedFunc(log,m
-00024b20: 7367 5f73 7472 2c2a 2a6f 7074 7329 0a20  sg_str,**opts). 
-00024b30: 2020 2069 6620 6973 696e 7374 616e 6365     if isinstance
-00024b40: 2870 7269 6e74 665f 6c6f 675f 6261 7365  (printf_log_base
-00024b50: 2c69 6e74 2920 616e 6420 6e6f 7420 6973  ,int) and not is
-00024b60: 696e 7374 616e 6365 2870 7269 6e74 665f  instance(printf_
-00024b70: 6c6f 675f 6261 7365 2c62 6f6f 6c29 3a0a  log_base,bool):.
-00024b80: 2020 2020 2020 2020 6966 2070 7269 6e74          if print
-00024b90: 665f 6c6f 675f 6261 7365 203c 206c 6f67  f_log_base < log
-00024ba0: 5f6c 6576 656c 3a0a 2020 2020 2020 2020  _level:.        
-00024bb0: 2020 2020 7265 7475 726e 0a20 2020 2023      return.    #
-00024bc0: 2053 6176 6520 6d73 6720 746f 2066 696c   Save msg to fil
-00024bd0: 650a 2020 2020 6966 2027 6627 2069 6e20  e.    if 'f' in 
-00024be0: 6473 7020 6f72 2027 6127 2069 6e20 6473  dsp or 'a' in ds
-00024bf0: 703a 0a20 2020 2020 2020 2066 6f72 2069  p:.        for i
-00024c00: 6920 696e 206c 6f67 6669 6c65 3a0a 2020  i in logfile:.  
-00024c10: 2020 2020 2020 2020 2020 6966 2069 6920            if ii 
-00024c20: 616e 6420 6f73 2e70 6174 682e 6973 6469  and os.path.isdi
-00024c30: 7228 6f73 2e70 6174 682e 6469 726e 616d  r(os.path.dirnam
-00024c40: 6528 6969 2929 3a0a 2020 2020 2020 2020  e(ii)):.        
-00024c50: 2020 2020 2020 2020 6c6f 675f 703d 5472          log_p=Tr
-00024c60: 7565 0a20 2020 2020 2020 2020 2020 2020  ue.             
-00024c70: 2020 2077 6974 6820 6f70 656e 2869 692c     with open(ii,
-00024c80: 2761 2b27 2920 6173 2066 3a0a 2020 2020  'a+') as f:.    
-00024c90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00024ca0: 662e 7772 6974 6528 6d73 675f 7374 722b  f.write(msg_str+
-00024cb0: 6e65 775f 6c69 6e65 290a 2020 2020 2320  new_line).    # 
-00024cc0: 7072 696e 7420 6d73 6720 746f 2073 6372  print msg to scr
-00024cd0: 6565 6e0a 2020 2020 6966 2028 6c6f 675f  een.    if (log_
-00024ce0: 7020 6973 2046 616c 7365 2061 6e64 2027  p is False and '
-00024cf0: 6127 2069 6e20 6473 7029 206f 7220 2773  a' in dsp) or 's
-00024d00: 2720 696e 2064 7370 206f 7220 2765 2720  ' in dsp or 'e' 
-00024d10: 696e 2064 7370 3a0a 2020 2020 2020 2020  in dsp:.        
-00024d20: 2069 6620 2765 2720 696e 2064 7370 3a0a   if 'e' in dsp:.
-00024d30: 2020 2020 2020 2020 2020 2020 2053 7464               Std
-00024d40: 4572 7228 6d73 675f 7374 722b 6e65 775f  Err(msg_str+new_
-00024d50: 6c69 6e65 290a 2020 2020 2020 2020 2065  line).         e
-00024d60: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
-00024d70: 2020 5374 644f 7574 286d 7367 5f73 7472    StdOut(msg_str
-00024d80: 2b6e 6577 5f6c 696e 6529 0a20 2020 2023  +new_line).    #
-00024d90: 2072 6574 7572 6e20 6d73 670a 2020 2020   return msg.    
-00024da0: 6966 2027 7227 2069 6e20 6473 703a 0a20  if 'r' in dsp:. 
-00024db0: 2020 2020 2020 2020 7265 7475 726e 206d          return m
-00024dc0: 7367 5f73 7472 0a0a 6465 6620 436f 6c6f  sg_str..def Colo
-00024dd0: 7253 7472 286d 7367 2c2a 2a6f 7074 7329  rStr(msg,**opts)
-00024de0: 3a0a 2020 2020 636f 6c6f 723d 6f70 7473  :.    color=opts
-00024df0: 2e67 6574 2827 636f 6c6f 7227 2c4e 6f6e  .get('color',Non
-00024e00: 6529 0a20 2020 2063 6f6c 6f72 5f64 623d  e).    color_db=
-00024e10: 6f70 7473 2e67 6574 2827 636f 6c6f 725f  opts.get('color_
-00024e20: 6462 272c 7b27 626c 7565 273a 2033 342c  db',{'blue': 34,
-00024e30: 2027 6772 6579 273a 2033 302c 2027 7965   'grey': 30, 'ye
-00024e40: 6c6c 6f77 273a 2033 332c 2027 6772 6565  llow': 33, 'gree
-00024e50: 6e27 3a20 3332 2c20 2763 7961 6e27 3a20  n': 32, 'cyan': 
-00024e60: 3336 2c20 276d 6167 656e 7461 273a 2033  36, 'magenta': 3
-00024e70: 352c 2027 7768 6974 6527 3a20 3337 2c20  5, 'white': 37, 
-00024e80: 2772 6564 273a 2033 317d 290a 2020 2020  'red': 31}).    
-00024e90: 6267 5f63 6f6c 6f72 3d6f 7074 732e 6765  bg_color=opts.ge
-00024ea0: 7428 2762 675f 636f 6c6f 7227 2c4e 6f6e  t('bg_color',Non
-00024eb0: 6529 0a20 2020 2062 675f 636f 6c6f 725f  e).    bg_color_
-00024ec0: 6462 3d6f 7074 732e 6765 7428 2762 675f  db=opts.get('bg_
-00024ed0: 636f 6c6f 725f 6462 272c 7b27 6379 616e  color_db',{'cyan
-00024ee0: 273a 2034 362c 2027 7768 6974 6527 3a20  ': 46, 'white': 
-00024ef0: 3437 2c20 2767 7265 7927 3a20 3430 2c20  47, 'grey': 40, 
-00024f00: 2779 656c 6c6f 7727 3a20 3433 2c20 2762  'yellow': 43, 'b
-00024f10: 6c75 6527 3a20 3434 2c20 276d 6167 656e  lue': 44, 'magen
-00024f20: 7461 273a 2034 352c 2027 7265 6427 3a20  ta': 45, 'red': 
-00024f30: 3431 2c20 2767 7265 656e 273a 2034 327d  41, 'green': 42}
-00024f40: 290a 2020 2020 6174 7472 3d6f 7074 732e  ).    attr=opts.
-00024f50: 6765 7428 2761 7474 7227 2c4e 6f6e 6529  get('attr',None)
-00024f60: 0a20 2020 2061 7474 725f 6462 3d6f 7074  .    attr_db=opt
-00024f70: 732e 6765 7428 2761 7474 725f 6462 272c  s.get('attr_db',
-00024f80: 7b27 7265 7665 7273 6527 3a20 372c 2027  {'reverse': 7, '
-00024f90: 626c 696e 6b27 3a20 352c 2763 6f6e 6365  blink': 5,'conce
-00024fa0: 616c 6564 273a 2038 2c20 2775 6e64 6572  aled': 8, 'under
-00024fb0: 6c69 6e65 273a 2034 2c20 2762 6f6c 6427  line': 4, 'bold'
-00024fc0: 3a20 317d 290a 2020 2020 6966 2049 734e  : 1}).    if IsN
-00024fd0: 6f6e 6528 6f73 2e67 6574 656e 7628 2741  one(os.getenv('A
-00024fe0: 4e53 495f 434f 4c4f 5253 5f44 4953 4142  NSI_COLORS_DISAB
-00024ff0: 4c45 4427 2929 2061 6e64 2028 636f 6c6f  LED')) and (colo
-00025000: 7220 6f72 2062 675f 636f 6c6f 7220 6f72  r or bg_color or
-00025010: 2061 7474 7229 3a0a 2020 2020 2020 2020   attr):.        
-00025020: 7265 7365 743d 2727 275c 3033 335b 306d  reset='''\033[0m
-00025030: 2727 270a 2020 2020 2020 2020 666d 745f  '''.        fmt_
-00025040: 6d73 673d 2727 275c 3033 335b 2564 6d25  msg='''\033[%dm%
-00025050: 7327 2727 0a20 2020 2020 2020 2069 6620  s'''.        if 
-00025060: 636f 6c6f 7220 616e 6420 636f 6c6f 7220  color and color 
-00025070: 696e 2063 6f6c 6f72 5f64 623a 0a20 2020  in color_db:.   
-00025080: 2020 2020 2020 2020 206d 7367 3d66 6d74           msg=fmt
-00025090: 5f6d 7367 2025 2028 636f 6c6f 725f 6462  _msg % (color_db
-000250a0: 5b63 6f6c 6f72 5d2c 6d73 6729 0a20 2020  [color],msg).   
-000250b0: 2020 2020 2069 6620 6267 5f63 6f6c 6f72       if bg_color
-000250c0: 2061 6e64 2062 675f 636f 6c6f 7220 696e   and bg_color in
-000250d0: 2062 675f 636f 6c6f 725f 6462 3a0a 2020   bg_color_db:.  
-000250e0: 2020 2020 2020 2020 2020 6d73 673d 666d            msg=fm
-000250f0: 745f 6d73 6720 2520 2863 6f6c 6f72 5f64  t_msg % (color_d
-00025100: 625b 6267 5f63 6f6c 6f72 5d2c 6d73 6729  b[bg_color],msg)
-00025110: 0a20 2020 2020 2020 2069 6620 6174 7472  .        if attr
-00025120: 2061 6e64 2061 7474 7220 696e 2061 7474   and attr in att
-00025130: 725f 6462 3a0a 2020 2020 2020 2020 2020  r_db:.          
-00025140: 2020 6d73 673d 666d 745f 6d73 6720 2520    msg=fmt_msg % 
-00025150: 2861 7474 725f 6462 5b61 7474 725d 2c6d  (attr_db[attr],m
-00025160: 7367 290a 2020 2020 2020 2020 7265 7475  sg).        retu
-00025170: 726e 206d 7367 2b72 6573 6574 2023 5375  rn msg+reset #Su
-00025180: 7070 6f72 7420 436f 6c6f 720a 2020 2020  pport Color.    
-00025190: 7265 7475 726e 206d 7367 2023 4e6f 7420  return msg #Not 
-000251a0: 7375 7070 6f72 7420 636f 6c6f 720a 0a64  support color..d
-000251b0: 6566 2043 6c65 616e 416e 7369 2864 6174  ef CleanAnsi(dat
-000251c0: 6129 3a0a 2020 2020 616e 7369 5f65 7363  a):.    ansi_esc
-000251d0: 6170 6520 3d20 7265 2e63 6f6d 7069 6c65  ape = re.compile
-000251e0: 2872 275c 7831 425c 5b5b 302d 3f5d 2a5b  (r'\x1B\[[0-?]*[
-000251f0: 202d 2f5d 2a5b 402d 7e5d 2729 0a20 2020   -/]*[@-~]').   
-00025200: 2064 6174 615f 7479 7065 3d54 7970 654e   data_type=TypeN
-00025210: 616d 6528 6461 7461 290a 2020 2020 6966  ame(data).    if
-00025220: 2064 6174 615f 7479 7065 2069 6e20 5b27   data_type in ['
-00025230: 7374 7227 2c27 6279 7465 7327 5d3a 0a20  str','bytes']:. 
-00025240: 2020 2020 2020 2072 6574 7572 6e20 616e         return an
-00025250: 7369 5f65 7363 6170 652e 7375 6228 2727  si_escape.sub(''
-00025260: 2c53 7472 2864 6174 6129 290a 2020 2020  ,Str(data)).    
-00025270: 656c 6966 2064 6174 615f 7479 7065 2069  elif data_type i
-00025280: 6e20 2827 6c69 7374 272c 2774 7570 6c65  n ('list','tuple
-00025290: 2729 3a0a 2020 2020 2020 2020 7265 7475  '):.        retu
-000252a0: 726e 205b 436c 6561 6e41 6e73 6928 6969  rn [CleanAnsi(ii
-000252b0: 2920 666f 7220 6969 2069 6e20 6461 7461  ) for ii in data
-000252c0: 5d0a 2020 2020 656c 6966 2064 6174 615f  ].    elif data_
-000252d0: 7479 7065 203d 3d20 2764 6963 7427 3a0a  type == 'dict':.
-000252e0: 2020 2020 2020 2020 666f 7220 6920 696e          for i in
-000252f0: 2064 6174 613a 0a20 2020 2020 2020 2020   data:.         
-00025300: 2020 2064 6174 615b 695d 3d43 6c65 616e     data[i]=Clean
-00025310: 416e 7369 2864 6174 615b 695d 290a 2020  Ansi(data[i]).  
-00025320: 2020 7265 7475 726e 2064 6174 610a 0a64    return data..d
-00025330: 6566 2063 6c69 5f69 6e70 7574 286d 7367  ef cli_input(msg
-00025340: 2c2a 2a6f 7074 7329 3a0a 2020 2020 2727  ,**opts):.    ''
-00025350: 270a 2020 2020 434c 4920 496e 7075 7420  '.    CLI Input 
-00025360: 636f 6d6d 616e 640a 2020 2020 2727 270a  command.    '''.
-00025370: 2020 2020 6869 6464 656e 3d6f 7074 732e      hidden=opts.
-00025380: 6765 7428 2768 6964 6465 6e27 2c6f 7074  get('hidden',opt
-00025390: 732e 6765 7428 2770 6173 7377 6427 2c6f  s.get('passwd',o
-000253a0: 7074 732e 6765 7428 2770 6173 7377 6f72  pts.get('passwor
-000253b0: 6427 2c46 616c 7365 2929 290a 2020 2020  d',False))).    
-000253c0: 6966 2068 6964 6465 6e3a 0a20 2020 2020  if hidden:.     
-000253d0: 2020 2069 6620 7379 732e 7374 6469 6e2e     if sys.stdin.
-000253e0: 6973 6174 7479 2829 3a0a 2020 2020 2020  isatty():.      
-000253f0: 2020 2020 2020 7020 3d20 6765 7470 6173        p = getpas
-00025400: 732e 6765 7470 6173 7328 6d73 6729 0a20  s.getpass(msg). 
-00025410: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
-00025420: 2020 2020 2020 2020 2070 7269 6e74 6628           printf(
-00025430: 6d73 672c 656e 645f 6c69 6e65 3d27 2729  msg,end_line='')
-00025440: 0a20 2020 2020 2020 2020 2020 2070 203d  .            p =
-00025450: 2073 7973 2e73 7464 696e 2e72 6561 646c   sys.stdin.readl
-00025460: 696e 6528 292e 7273 7472 6970 2829 0a20  ine().rstrip(). 
-00025470: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
-00025480: 2069 6620 5079 5665 7228 3229 3a0a 2020   if PyVer(2):.  
-00025490: 2020 2020 2020 2020 2020 703d 7261 775f            p=raw_
-000254a0: 696e 7075 7428 6d73 6729 0a20 2020 2020  input(msg).     
-000254b0: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
-000254c0: 2020 2020 2070 3d69 6e70 7574 286d 7367       p=input(msg
-000254d0: 290a 2020 2020 7265 7475 726e 2070 0a0a  ).    return p..
-000254e0: 6465 6620 5479 7065 4461 7461 2873 7263  def TypeData(src
-000254f0: 2c77 616e 745f 7479 7065 3d4e 6f6e 652c  ,want_type=None,
-00025500: 6465 6661 756c 743d 276f 7267 272c 7370  default='org',sp
-00025510: 6c69 7465 723d 4e6f 6e65 293a 0a20 2020  liter=None):.   
-00025520: 2027 2727 436f 6e76 6572 7420 2869 6e70   '''Convert (inp
-00025530: 7574 2964 6174 6120 746f 2077 616e 7420  ut)data to want 
-00025540: 7479 7065 2028 6578 3a20 7374 7220 2d3e  type (ex: str ->
-00025550: 206c 6973 742c 2069 6e74 2c20 2e2e 2e29   list, int, ...)
-00025560: 2c20 6361 6e20 6e6f 7420 636f 6e76 6572  , can not conver
-00025570: 7420 746f 2074 7970 6520 7468 656e 2072  t to type then r
-00025580: 6574 7572 6e20 4661 6c73 6527 2727 0a20  eturn False'''. 
-00025590: 2020 2077 616e 745f 7479 7065 3d54 7970     want_type=Typ
-000255a0: 654e 616d 6528 7761 6e74 5f74 7970 6529  eName(want_type)
-000255b0: 0a20 2020 2069 6620 7761 6e74 5f74 7970  .    if want_typ
-000255c0: 6520 3d3d 2027 7374 7227 3a0a 2020 2020  e == 'str':.    
-000255d0: 2020 2020 6966 2069 7369 6e73 7461 6e63      if isinstanc
-000255e0: 6528 7372 632c 286c 6973 742c 7475 706c  e(src,(list,tupl
-000255f0: 6529 293a 0a20 2020 2020 2020 2020 2020  e)):.           
-00025600: 2069 6620 6e6f 7420 6973 696e 7374 616e   if not isinstan
-00025610: 6365 2873 706c 6974 6572 2c73 7472 293a  ce(spliter,str):
-00025620: 2073 706c 6974 6572 3d27 2027 0a20 2020   spliter=' '.   
-00025630: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-00025640: 4a6f 696e 2873 7263 2c73 706c 6974 6572  Join(src,spliter
-00025650: 290a 2020 2020 2020 2020 656c 7365 3a0a  ).        else:.
-00025660: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-00025670: 726e 2053 7472 2873 7263 2c6d 6f64 653d  rn Str(src,mode=
-00025680: 2766 6f72 6365 2729 0a20 2020 2065 6c69  'force').    eli
-00025690: 6620 7761 6e74 5f74 7970 6520 3d3d 2027  f want_type == '
-000256a0: 696e 7427 3a0a 2020 2020 2020 2020 7265  int':.        re
-000256b0: 7475 726e 2049 6e74 2873 7263 2c65 7272  turn Int(src,err
-000256c0: 3d54 7275 6529 0a20 2020 2065 6c69 6620  =True).    elif 
-000256d0: 7761 6e74 5f74 7970 6520 696e 205b 276c  want_type in ['l
-000256e0: 6973 7427 2c27 7475 706c 6527 5d20 616e  ist','tuple'] an
-000256f0: 6420 6973 696e 7374 616e 6365 2873 7263  d isinstance(src
-00025700: 2c73 7472 2920 616e 6420 6973 696e 7374  ,str) and isinst
-00025710: 616e 6365 2873 706c 6974 6572 2c73 7472  ance(spliter,str
-00025720: 293a 0a20 2020 2020 2020 2069 6620 7761  ):.        if wa
-00025730: 6e74 5f74 7970 6520 3d3d 2027 7475 706c  nt_type == 'tupl
-00025740: 6527 3a0a 2020 2020 2020 2020 2020 2020  e':.            
-00025750: 7265 7475 726e 2074 7570 6c65 2853 706c  return tuple(Spl
-00025760: 6974 2873 7263 2c73 706c 6974 6572 2929  it(src,spliter))
-00025770: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-00025780: 5370 6c69 7428 7372 632c 7370 6c69 7465  Split(src,splite
-00025790: 7229 0a20 2020 2065 6c69 6620 7761 6e74  r).    elif want
-000257a0: 5f74 7970 6520 3d3d 2027 7475 706c 6527  _type == 'tuple'
-000257b0: 2061 6e64 2069 7369 6e73 7461 6e63 6528   and isinstance(
-000257c0: 7372 632c 286c 6973 742c 6469 6374 2929  src,(list,dict))
-000257d0: 3a0a 2020 2020 2020 2020 6966 2069 7369  :.        if isi
-000257e0: 6e73 7461 6e63 6528 7372 632c 6469 6374  nstance(src,dict
-000257f0: 293a 0a20 2020 2020 2020 2020 2020 2069  ):.            i
-00025800: 6620 7370 6c69 7465 7220 3d3d 2027 6b65  f spliter == 'ke
-00025810: 7927 3a0a 2020 2020 2020 2020 2020 2020  y':.            
-00025820: 2020 2020 7265 7475 726e 2074 7570 6c65      return tuple
-00025830: 2873 7263 2e6b 6579 7328 2929 0a20 2020  (src.keys()).   
-00025840: 2020 2020 2020 2020 2065 6c69 6620 7370           elif sp
-00025850: 6c69 7465 7220 3d3d 2027 7661 6c75 6527  liter == 'value'
-00025860: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00025870: 2020 7265 7475 726e 2074 7570 6c65 2873    return tuple(s
-00025880: 7263 2e76 616c 7565 7328 2929 0a20 2020  rc.values()).   
-00025890: 2020 2020 2020 2020 2065 6c73 653a 0a20           else:. 
-000258a0: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-000258b0: 6574 7572 6e20 7475 706c 6528 7372 632e  eturn tuple(src.
-000258c0: 6974 656d 7328 2929 0a20 2020 2020 2020  items()).       
-000258d0: 2072 6574 7572 6e20 7475 706c 6528 7372   return tuple(sr
-000258e0: 6329 0a20 2020 2065 6c69 6620 7761 6e74  c).    elif want
-000258f0: 5f74 7970 6520 3d3d 2027 6c69 7374 2720  _type == 'list' 
-00025900: 616e 6420 6973 696e 7374 616e 6365 2873  and isinstance(s
-00025910: 7263 2c28 7475 706c 652c 6469 6374 2929  rc,(tuple,dict))
-00025920: 3a0a 2020 2020 2020 2020 6966 2069 7369  :.        if isi
-00025930: 6e73 7461 6e63 6528 7372 632c 6469 6374  nstance(src,dict
-00025940: 293a 0a20 2020 2020 2020 2020 2020 2069  ):.            i
-00025950: 6620 7370 6c69 7465 7220 3d3d 2027 6b65  f spliter == 'ke
-00025960: 7927 3a0a 2020 2020 2020 2020 2020 2020  y':.            
-00025970: 2020 2020 7265 7475 726e 206c 6973 7428      return list(
-00025980: 7372 632e 6b65 7973 2829 290a 2020 2020  src.keys()).    
-00025990: 2020 2020 2020 2020 656c 6966 2073 706c          elif spl
-000259a0: 6974 6572 203d 3d20 2776 616c 7565 273a  iter == 'value':
-000259b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000259c0: 2072 6574 7572 6e20 6c69 7374 2873 7263   return list(src
-000259d0: 2e76 616c 7565 7328 2929 0a20 2020 2020  .values()).     
-000259e0: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
-000259f0: 2020 2020 2020 2020 2020 2020 2072 6574               ret
-00025a00: 7572 6e20 6c69 7374 2873 7263 2e69 7465  urn list(src.ite
-00025a10: 6d73 2829 290a 2020 2020 2020 2020 7265  ms()).        re
-00025a20: 7475 726e 206c 6973 7428 7372 6329 0a20  turn list(src). 
-00025a30: 2020 2065 6c69 6620 5479 7065 2873 7263     elif Type(src
-00025a40: 2c77 616e 745f 7479 7065 293a 0a20 2020  ,want_type):.   
-00025a50: 2020 2020 2072 6574 7572 6e20 7372 630a       return src.
-00025a60: 2020 2020 6966 2069 7369 6e73 7461 6e63      if isinstanc
-00025a70: 6528 7372 632c 7374 7229 3a0a 2020 2020  e(src,str):.    
-00025a80: 2020 2020 7265 7475 726e 2046 6f72 6d44      return FormD
-00025a90: 6174 6128 7372 632c 6465 6661 756c 743d  ata(src,default=
-00025aa0: 276f 7267 2729 0a20 2020 2072 6574 7572  'org').    retur
-00025ab0: 6e20 4465 6661 756c 7428 7372 632c 6465  n Default(src,de
-00025ac0: 6661 756c 7429 0a0a 6465 6620 4d6f 7665  fault)..def Move
-00025ad0: 4461 7461 2873 7263 2c64 6174 613d 4e6f  Data(src,data=No
-00025ae0: 6e65 2c74 6f3d 4e6f 6e65 2c66 726f 6d5f  ne,to=None,from_
-00025af0: 6964 783d 4e6f 6e65 2c66 6f72 6365 3d46  idx=None,force=F
-00025b00: 616c 7365 2c64 6566 6175 6c74 3d27 6f72  alse,default='or
-00025b10: 6727 293a 0a20 2020 2027 2727 0a20 2020  g'):.    '''.   
-00025b20: 2073 7570 706f 7274 2073 7263 2074 7970   support src typ
-00025b30: 6520 6973 206c 6973 742c 7374 722c 2874  e is list,str,(t
-00025b40: 7570 6c65 290a 2020 2020 6d6f 7669 6e67  uple).    moving
-00025b50: 2066 6f72 6d61 7420 3a20 6461 7461 2864   format : data(d
-00025b60: 6174 6129 206f 7220 6672 6f6d 5f69 6478  ata) or from_idx
-00025b70: 2869 6e74 290a 2020 2020 2020 2d20 6461  (int).      - da
-00025b80: 7461 203a 2069 6620 7372 6320 6861 7320  ta : if src has 
-00025b90: 6d61 6e79 2073 616d 6520 6461 7461 2074  many same data t
-00025ba0: 6865 6e20 6a75 7374 206b 6565 7020 7369  hen just keep si
-00025bb0: 6e67 6c65 2064 6174 6120 6174 206d 6f76  ngle data at mov
-00025bc0: 6564 0a20 2020 206d 6f76 696e 6720 6465  ed.    moving de
-00025bd0: 7374 2020 203a 2074 6f28 696e 7429 0a20  st   : to(int). 
-00025be0: 2020 206d 6f76 6520 6461 7461 206f 7220     move data or 
-00025bf0: 696e 6465 7828 6672 6f6d 5f69 6478 2920  index(from_idx) 
-00025c00: 746f 2077 616e 7420 696e 6465 7828 746f  to want index(to
-00025c10: 290a 2020 2020 2020 666f 7263 653d 5472  ).      force=Tr
-00025c20: 7565 3a20 6576 656e 2074 7570 6c65 2074  ue: even tuple t
-00025c30: 6f20 6d6f 7665 0a20 2020 2069 6620 6e6f  o move.    if no
-00025c40: 7420 7375 7070 6f72 7420 7468 656e 2072  t support then r
-00025c50: 6574 7572 6e20 6465 6661 756c 740a 2020  eturn default.  
-00025c60: 2020 6465 6661 756c 7420 3a20 6f72 670a    default : org.
-00025c70: 2020 2020 2727 270a 2020 2020 5f74 7570      '''.    _tup
-00025c80: 6c65 3d46 616c 7365 0a20 2020 2073 7263  le=False.    src
-00025c90: 5f74 7970 653d 5479 7065 4e61 6d65 2873  _type=TypeName(s
-00025ca0: 7263 290a 2020 2020 6966 2073 7263 5f74  rc).    if src_t
-00025cb0: 7970 6520 3d3d 2027 7475 706c 6527 3a0a  ype == 'tuple':.
-00025cc0: 2020 2020 2020 2020 6966 206e 6f74 2066          if not f
-00025cd0: 6f72 6365 3a20 7265 7475 726e 2044 6566  orce: return Def
-00025ce0: 6175 6c74 2873 7263 2c64 6566 6175 6c74  ault(src,default
-00025cf0: 290a 2020 2020 2020 2020 5f74 7570 6c65  ).        _tuple
-00025d00: 3d54 7275 650a 2020 2020 2020 2020 7372  =True.        sr
-00025d10: 635f 7479 7065 3d27 6c69 7374 270a 2020  c_type='list'.  
-00025d20: 2020 6966 2073 7263 5f74 7970 6520 696e    if src_type in
-00025d30: 205b 276c 6973 7427 2c27 7374 7227 5d20   ['list','str'] 
-00025d40: 616e 6420 7372 633a 0a20 2020 2020 2020  and src:.       
-00025d50: 2073 7263 3d6c 6973 7428 7372 6329 0a20   src=list(src). 
-00025d60: 2020 2020 2020 2069 6620 746f 203d 3d20         if to == 
-00025d70: 276c 6173 7427 3a20 746f 3d2d 310a 2020  'last': to=-1.  
-00025d80: 2020 2020 2020 656c 6966 2074 6f20 3d3d        elif to ==
-00025d90: 2027 6669 7273 7427 3a20 746f 3d30 0a20   'first': to=0. 
-00025da0: 2020 2020 2020 2069 6620 6973 696e 7374         if isinst
-00025db0: 616e 6365 2866 726f 6d5f 6964 782c 696e  ance(from_idx,in
-00025dc0: 7429 2061 6e64 2069 7369 6e73 7461 6e63  t) and isinstanc
-00025dd0: 6528 746f 2c69 6e74 293a 0a20 2020 2020  e(to,int):.     
-00025de0: 2020 2020 2020 2069 6620 6c65 6e28 7372         if len(sr
-00025df0: 6329 203e 2061 6273 2866 726f 6d5f 6964  c) > abs(from_id
-00025e00: 7829 3a0a 2020 2020 2020 2020 2020 2020  x):.            
-00025e10: 2020 2020 746f 3d46 6978 496e 6465 7828      to=FixIndex(
-00025e20: 7372 632c 746f 290a 2020 2020 2020 2020  src,to).        
-00025e30: 2020 2020 2020 2020 6966 2066 726f 6d5f          if from_
-00025e40: 6964 7821 3d74 6f3a 0a20 2020 2020 2020  idx!=to:.       
-00025e50: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-00025e60: 746f 203d 3d20 2d31 3a0a 2020 2020 2020  to == -1:.      
-00025e70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00025e80: 2020 7372 632e 6170 7065 6e64 2873 7263    src.append(src
-00025e90: 5b66 726f 6d5f 6964 785d 290a 2020 2020  [from_idx]).    
-00025ea0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00025eb0: 656c 6966 2074 6f20 3d3d 2030 3a0a 2020  elif to == 0:.  
-00025ec0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00025ed0: 2020 2020 2020 7372 633d 5b73 7263 5b66        src=[src[f
-00025ee0: 726f 6d5f 6964 785d 5d2b 7372 630a 2020  rom_idx]]+src.  
-00025ef0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00025f00: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
-00025f10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00025f20: 7372 633d 7372 635b 3a74 6f5d 2b5b 7372  src=src[:to]+[sr
-00025f30: 635b 6672 6f6d 5f69 6478 5d5d 2b73 7263  c[from_idx]]+src
-00025f40: 5b74 6f3a 5d0a 2020 2020 2020 2020 2020  [to:].          
-00025f50: 2020 2020 2020 2020 2020 7372 635b 746f            src[to
-00025f60: 5d3d 7372 635b 6672 6f6d 5f69 6478 5d0a  ]=src[from_idx].
-00025f70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00025f80: 2020 2020 6465 6c20 7372 635b 6672 6f6d      del src[from
-00025f90: 5f69 6478 5d0a 2020 2020 2020 2020 656c  _idx].        el
-00025fa0: 6966 206e 6f74 2049 734e 6f6e 6528 6461  if not IsNone(da
-00025fb0: 7461 2920 616e 6420 6973 696e 7374 616e  ta) and isinstan
-00025fc0: 6365 2874 6f2c 696e 7429 3a0a 2020 2020  ce(to,int):.    
-00025fd0: 2020 2020 2020 2020 746f 3d46 6978 496e          to=FixIn
-00025fe0: 6465 7828 7372 632c 746f 290a 2020 2020  dex(src,to).    
-00025ff0: 2020 2020 2020 2020 7372 633d 5b69 2066          src=[i f
-00026000: 6f72 2069 2069 6e20 7372 6320 6966 2069  or i in src if i
-00026010: 213d 6461 7461 5d0a 2020 2020 2020 2020  !=data].        
-00026020: 2020 2020 6966 2074 6f20 3d3d 202d 313a      if to == -1:
-00026030: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00026040: 2073 7263 2e61 7070 656e 6428 6461 7461   src.append(data
-00026050: 290a 2020 2020 2020 2020 2020 2020 656c  ).            el
-00026060: 6966 2074 6f20 3d3d 2030 3a0a 2020 2020  if to == 0:.    
-00026070: 2020 2020 2020 2020 2020 2020 7372 633d              src=
-00026080: 5b64 6174 615d 2b73 7263 0a20 2020 2020  [data]+src.     
-00026090: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
-000260a0: 2020 2020 2020 2020 2020 2020 2073 7263               src
-000260b0: 3d73 7263 5b3a 746f 5d2b 5b64 6174 615d  =src[:to]+[data]
-000260c0: 2b73 7263 5b74 6f3a 5d0a 2020 2020 2020  +src[to:].      
-000260d0: 2020 6966 205f 7475 706c 653a 2072 6574    if _tuple: ret
-000260e0: 7572 6e20 7475 706c 6528 7372 6329 0a20  urn tuple(src). 
-000260f0: 2020 2020 2020 2065 6c69 6620 7372 635f         elif src_
-00026100: 7479 7065 203d 3d20 2773 7472 273a 2072  type == 'str': r
-00026110: 6574 7572 6e20 4a6f 696e 2873 7263 2c27  eturn Join(src,'
-00026120: 2729 0a20 2020 2020 2020 2072 6574 7572  ').        retur
-00026130: 6e20 7372 630a 2020 2020 7265 7475 726e  n src.    return
-00026140: 2044 6566 6175 6c74 2873 7263 2c64 6566   Default(src,def
-00026150: 6175 6c74 290a 0a0a 2369 6620 5f5f 6e61  ault)...#if __na
-00026160: 6d65 5f5f 203d 3d20 225f 5f6d 6169 6e5f  me__ == "__main_
-00026170: 5f22 3a0a 2320 2020 2023 2049 6e74 6567  _":.#    # Integ
-00026180: 6572 0a23 2020 2020 7072 696e 7428 2247  er.#    print("G
-00026190: 6574 2831 3233 3435 293a 222c 4765 7428  et(12345):",Get(
-000261a0: 3132 3334 3529 290a 2320 2020 2070 7269  12345)).#    pri
-000261b0: 6e74 2822 4765 7428 3132 3334 352c 3129  nt("Get(12345,1)
-000261c0: 3a22 2c47 6574 2831 3233 3435 2c31 2929  :",Get(12345,1))
-000261d0: 0a23 2020 2020 2320 5374 7269 6e67 0a23  .#    # String.#
-000261e0: 2020 2020 7072 696e 7428 2247 6574 2827      print("Get('
-000261f0: 3132 3334 3527 293a 222c 4765 7428 2731  12345'):",Get('1
-00026200: 3233 3435 2729 290a 2320 2020 2070 7269  2345')).#    pri
-00026210: 6e74 2822 4765 7428 2731 3233 3435 272c  nt("Get('12345',
-00026220: 3029 3a22 2c47 6574 2827 3132 3334 3527  0):",Get('12345'
-00026230: 2c30 2929 0a23 2020 2020 7072 696e 7428  ,0)).#    print(
-00026240: 2247 6574 2827 3132 3334 3527 2c31 293a  "Get('12345',1):
-00026250: 222c 4765 7428 2731 3233 3435 272c 3129  ",Get('12345',1)
-00026260: 290a 2320 2020 2070 7269 6e74 2822 4765  ).#    print("Ge
-00026270: 7428 2731 3233 3435 272c 3429 3a22 2c47  t('12345',4):",G
-00026280: 6574 2827 3132 3334 3527 2c34 2929 0a23  et('12345',4)).#
-00026290: 2020 2020 7072 696e 7428 2247 6574 2827      print("Get('
-000262a0: 3132 3334 3527 2c35 293a 222c 4765 7428  12345',5):",Get(
-000262b0: 2731 3233 3435 272c 3529 290a 2320 2020  '12345',5)).#   
-000262c0: 2070 7269 6e74 2822 4765 7428 2731 3233   print("Get('123
-000262d0: 3435 272c 2d31 293a 222c 4765 7428 2731  45',-1):",Get('1
-000262e0: 3233 3435 272c 2d31 2929 0a23 2020 2020  2345',-1)).#    
-000262f0: 7072 696e 7428 2247 6574 2827 3132 3334  print("Get('1234
-00026300: 3527 2c2d 3529 3a22 2c47 6574 2827 3132  5',-5):",Get('12
-00026310: 3334 3527 2c2d 3529 290a 2320 2020 2070  345',-5)).#    p
-00026320: 7269 6e74 2822 4765 7428 2731 3233 3435  rint("Get('12345
-00026330: 272c 2d37 293a 222c 4765 7428 2731 3233  ',-7):",Get('123
-00026340: 3435 272c 2d37 2929 0a23 2020 2020 2320  45',-7)).#    # 
-00026350: 4c69 7374 0a23 2020 2020 7072 696e 7428  List.#    print(
-00026360: 2247 6574 285b 312c 322c 332c 342c 355d  "Get([1,2,3,4,5]
-00026370: 293a 222c 4765 7428 5b31 2c32 2c33 2c34  ):",Get([1,2,3,4
-00026380: 2c35 5d29 290a 2320 2020 2070 7269 6e74  ,5])).#    print
-00026390: 2822 4765 7428 5b31 2c32 2c33 2c34 2c35  ("Get([1,2,3,4,5
-000263a0: 5d2c 3129 3a22 2c47 6574 285b 312c 322c  ],1):",Get([1,2,
-000263b0: 332c 342c 355d 2c31 2929 0a23 2020 2020  3,4,5],1)).#    
-000263c0: 7072 696e 7428 2247 6574 285b 312c 322c  print("Get([1,2,
-000263d0: 332c 342c 355d 2c28 312c 3329 293a 222c  3,4,5],(1,3)):",
-000263e0: 4765 7428 5b31 2c32 2c33 2c34 2c35 5d2c  Get([1,2,3,4,5],
-000263f0: 2831 2c33 2929 290a 2320 2020 2070 7269  (1,3))).#    pri
-00026400: 6e74 2822 4765 7428 5b31 2c32 2c33 2c34  nt("Get([1,2,3,4
-00026410: 2c35 5d2c 2731 2d33 2729 293a 222c 4765  ,5],'1-3')):",Ge
-00026420: 7428 5b31 2c32 2c33 2c34 2c35 5d2c 2731  t([1,2,3,4,5],'1
-00026430: 2d33 2729 290a 2320 2020 2070 7269 6e74  -3')).#    print
-00026440: 2822 4765 7428 5b31 2c32 2c33 2c34 2c35  ("Get([1,2,3,4,5
-00026450: 5d2c 2d31 2929 3a22 2c47 6574 285b 312c  ],-1)):",Get([1,
-00026460: 322c 332c 342c 355d 2c2d 3129 290a 2320  2,3,4,5],-1)).# 
-00026470: 2020 2070 7269 6e74 2822 4765 7428 5b31     print("Get([1
-00026480: 2c32 2c33 2c34 2c35 5d2c 2d35 2929 3a22  ,2,3,4,5],-5)):"
-00026490: 2c47 6574 285b 312c 322c 332c 342c 355d  ,Get([1,2,3,4,5]
-000264a0: 2c2d 3529 290a 2320 2020 2070 7269 6e74  ,-5)).#    print
-000264b0: 2822 4765 7428 5b31 2c32 2c33 2c34 2c35  ("Get([1,2,3,4,5
-000264c0: 5d2c 2d36 2929 3a22 2c47 6574 285b 312c  ],-6)):",Get([1,
-000264d0: 322c 332c 342c 355d 2c2d 3629 290a 2320  2,3,4,5],-6)).# 
-000264e0: 2020 2070 7269 6e74 2822 4765 7428 5b31     print("Get([1
-000264f0: 2c32 2c33 2c34 2c35 5d2c 3529 293a 222c  ,2,3,4,5],5)):",
-00026500: 4765 7428 5b31 2c32 2c33 2c34 2c35 5d2c  Get([1,2,3,4,5],
-00026510: 3529 290a 2320 2020 2070 7269 6e74 2822  5)).#    print("
-00026520: 4765 7428 5b31 2c32 2c33 2c34 2c35 5d2c  Get([1,2,3,4,5],
-00026530: 2731 7c32 2729 293a 222c 4765 7428 5b31  '1|2')):",Get([1
-00026540: 2c32 2c33 2c34 2c35 5d2c 2731 7c32 2729  ,2,3,4,5],'1|2')
-00026550: 290a 2320 2020 2070 7269 6e74 2822 4765  ).#    print("Ge
-00026560: 7428 5b31 2c32 2c33 2c34 2c35 5d2c 2731  t([1,2,3,4,5],'1
-00026570: 7c32 272c 6964 785f 6f6e 6c79 3d54 7275  |2',idx_only=Tru
-00026580: 6529 293a 222c 4765 7428 5b31 2c32 2c33  e)):",Get([1,2,3
-00026590: 2c34 2c35 5d2c 2731 7c32 272c 6964 785f  ,4,5],'1|2',idx_
-000265a0: 6f6e 6c79 3d54 7275 6529 290a 2320 2020  only=True)).#   
-000265b0: 2023 2044 6963 740a 2320 2020 2070 7269   # Dict.#    pri
-000265c0: 6e74 2822 4765 7428 7b27 6127 3a7b 2762  nt("Get({'a':{'b
-000265d0: 273a 7b27 6327 3a31 2c27 6427 3a32 7d2c  ':{'c':1,'d':2},
-000265e0: 2765 273a 337d 2c27 6627 3a34 7d29 3a22  'e':3},'f':4}):"
-000265f0: 2c47 6574 287b 2761 273a 7b27 6227 3a7b  ,Get({'a':{'b':{
-00026600: 2763 273a 312c 2764 273a 327d 2c27 6527  'c':1,'d':2},'e'
-00026610: 3a33 7d2c 2766 273a 347d 2929 0a23 2020  :3},'f':4})).#  
-00026620: 2020 7072 696e 7428 2247 6574 287b 2761    print("Get({'a
-00026630: 273a 7b27 6227 3a7b 2763 273a 312c 2764  ':{'b':{'c':1,'d
-00026640: 273a 327d 2c27 6527 3a33 7d2c 2766 273a  ':2},'e':3},'f':
-00026650: 347d 2c27 2f61 2f62 2f63 2729 3a22 2c47  4},'/a/b/c'):",G
-00026660: 6574 287b 2761 273a 7b27 6227 3a7b 2763  et({'a':{'b':{'c
-00026670: 273a 312c 2764 273a 327d 2c27 6527 3a33  ':1,'d':2},'e':3
-00026680: 7d2c 2766 273a 347d 2c27 2f61 2f62 2f63  },'f':4},'/a/b/c
-00026690: 2729 290a 2320 2020 2070 7269 6e74 2822  ')).#    print("
-000266a0: 4765 7428 7b27 6127 3a7b 2762 273a 7b27  Get({'a':{'b':{'
-000266b0: 6327 3a31 2c27 6427 3a32 7d2c 2765 273a  c':1,'d':2},'e':
-000266c0: 337d 2c27 6627 3a34 7d2c 2761 2f62 2f64  3},'f':4},'a/b/d
-000266d0: 2729 3a22 2c47 6574 287b 2761 273a 7b27  '):",Get({'a':{'
-000266e0: 6227 3a7b 2763 273a 312c 2764 273a 327d  b':{'c':1,'d':2}
-000266f0: 2c27 6527 3a33 7d2c 2766 273a 347d 2c27  ,'e':3},'f':4},'
-00026700: 612f 622f 6427 2929 0a23 2020 2020 7072  a/b/d')).#    pr
-00026710: 696e 7428 2247 6574 287b 2761 273a 7b27  int("Get({'a':{'
-00026720: 6227 3a7b 2763 273a 312c 2764 273a 327d  b':{'c':1,'d':2}
-00026730: 2c27 6527 3a33 7d2c 2766 273a 347d 2c27  ,'e':3},'f':4},'
-00026740: 6627 293a 222c 4765 7428 7b27 6127 3a7b  f'):",Get({'a':{
-00026750: 2762 273a 7b27 6327 3a31 2c27 6427 3a32  'b':{'c':1,'d':2
-00026760: 7d2c 2765 273a 337d 2c27 6627 3a34 7d2c  },'e':3},'f':4},
-00026770: 2766 2729 290a 2320 2020 2070 7269 6e74  'f')).#    print
-00026780: 2822 4765 7428 7b27 6127 3a7b 2762 273a  ("Get({'a':{'b':
-00026790: 7b27 6327 3a31 2c27 6427 3a32 7d2c 2765  {'c':1,'d':2},'e
-000267a0: 273a 337d 2c27 6627 3a34 7d2c 2761 2729  ':3},'f':4},'a')
-000267b0: 3a22 2c47 6574 287b 2761 273a 7b27 6227  :",Get({'a':{'b'
-000267c0: 3a7b 2763 273a 312c 2764 273a 327d 2c27  :{'c':1,'d':2},'
-000267d0: 6527 3a33 7d2c 2766 273a 347d 2c27 6127  e':3},'f':4},'a'
-000267e0: 2929 0a23 2020 2020 7072 696e 7428 2247  )).#    print("G
-000267f0: 6574 287b 2761 273a 7b27 6227 3a7b 2763  et({'a':{'b':{'c
-00026800: 273a 312c 2764 273a 327d 2c27 6527 3a33  ':1,'d':2},'e':3
-00026810: 7d2c 2766 273a 347d 2c2d 3129 3a22 2c47  },'f':4},-1):",G
-00026820: 6574 287b 2761 273a 7b27 6227 3a7b 2763  et({'a':{'b':{'c
-00026830: 273a 312c 2764 273a 327d 2c27 6527 3a33  ':1,'d':2},'e':3
-00026840: 7d2c 2766 273a 347d 2c2d 3129 290a 2320  },'f':4},-1)).# 
-00026850: 2020 2070 7269 6e74 2822 4765 7428 7b27     print("Get({'
-00026860: 6127 3a7b 2762 273a 7b27 6327 3a31 2c27  a':{'b':{'c':1,'
-00026870: 6427 3a32 7d2c 2765 273a 337d 2c27 6627  d':2},'e':3},'f'
-00026880: 3a34 7d2c 2d31 2c69 6478 5f6f 6e6c 793d  :4},-1,idx_only=
-00026890: 5472 7565 293a 222c 4765 7428 7b27 6127  True):",Get({'a'
-000268a0: 3a7b 2762 273a 7b27 6327 3a31 2c27 6427  :{'b':{'c':1,'d'
-000268b0: 3a32 7d2c 2765 273a 337d 2c27 6627 3a34  :2},'e':3},'f':4
-000268c0: 7d2c 2d31 2c69 6478 5f6f 6e6c 793d 5472  },-1,idx_only=Tr
-000268d0: 7565 2929 0a23 2020 2020 7072 696e 7428  ue)).#    print(
-000268e0: 2247 6574 287b 2761 273a 7b27 6227 3a7b  "Get({'a':{'b':{
-000268f0: 2763 273a 312c 2764 273a 327d 2c27 6527  'c':1,'d':2},'e'
-00026900: 3a33 7d2c 2766 273a 342c 2767 273a 357d  :3},'f':4,'g':5}
-00026910: 2c28 312c 3229 293a 222c 4765 7428 7b27  ,(1,2)):",Get({'
-00026920: 6127 3a7b 2762 273a 7b27 6327 3a31 2c27  a':{'b':{'c':1,'
-00026930: 6427 3a32 7d2c 2765 273a 337d 2c27 6627  d':2},'e':3},'f'
-00026940: 3a34 2c27 6727 3a35 7d2c 2831 2c32 2929  :4,'g':5},(1,2))
-00026950: 290a 2320 2020 2023 204d 6f64 756c 650a  ).#    # Module.
-00026960: 2320 2020 206d 653d 4d79 4d6f 6475 6c65  #    me=MyModule
-00026970: 2829 0a23 2020 2020 2370 7269 6e74 2822  ().#    #print("
-00026980: 4765 7428 6d65 293a 222c 4765 7428 6d65  Get(me):",Get(me
-00026990: 2929 0a23 2020 2020 7072 696e 7428 2247  )).#    print("G
-000269a0: 6574 286d 652c 2747 6574 2729 3a22 2c47  et(me,'Get'):",G
-000269b0: 6574 286d 652c 2747 6574 2729 290a 2320  et(me,'Get')).# 
-000269c0: 2020 2070 7269 6e74 2822 4765 7428 6d65     print("Get(me
-000269d0: 2c27 4765 7427 2c27 496d 706f 7274 2729  ,'Get','Import')
-000269e0: 3a22 2c47 6574 286d 652c 2747 6574 272c  :",Get(me,'Get',
-000269f0: 2749 6d70 6f72 7427 2929 0a23 2020 2020  'Import')).#    
-00026a00: 7072 696e 7428 2247 6574 286d 652c 2766  print("Get(me,'f
-00026a10: 756e 635f 6c69 7374 2729 3a22 2c47 6574  unc_list'):",Get
-00026a20: 286d 652c 2766 756e 635f 6c69 7374 2729  (me,'func_list')
-00026a30: 290a 2320 2020 200a 2320 2020 2070 7269  ).#    .#    pri
-00026a40: 6e74 2827 3120 3a20 272c 5479 7065 4e61  nt('1 : ',TypeNa
-00026a50: 6d65 2831 2929 0a23 2020 2020 7072 696e  me(1)).#    prin
-00026a60: 7428 2770 696e 6720 3a20 272c 5479 7065  t('ping : ',Type
-00026a70: 4e61 6d65 2827 7069 6e67 2729 290a 2320  Name('ping')).# 
-00026a80: 2020 2070 7269 6e74 2827 6675 6e63 7469     print('functi
-00026a90: 6f6e 2070 696e 6720 3a20 272c 5479 7065  on ping : ',Type
-00026aa0: 4e61 6d65 2870 696e 6729 290a 2320 2020  Name(ping)).#   
-00026ab0: 2070 7269 6e74 2827 696e 7420 3a20 272c   print('int : ',
-00026ac0: 5479 7065 4e61 6d65 2869 6e74 2929 0a23  TypeName(int)).#
-00026ad0: 2020 2020 7072 696e 7428 2773 7472 203a      print('str :
-00026ae0: 2027 2c54 7970 654e 616d 6528 7374 7229   ',TypeName(str)
-00026af0: 290a 2320 2020 2070 7269 6e74 2827 6675  ).#    print('fu
-00026b00: 6e63 7469 6f6e 203a 2027 2c54 7970 654e  nction : ',TypeN
-00026b10: 616d 6528 2766 756e 6374 696f 6e27 2929  ame('function'))
-00026b20: 0a23 2020 2020 7072 696e 7428 2763 6c61  .#    print('cla
-00026b30: 7373 6f62 6a20 3a20 272c 5479 7065 4e61  ssobj : ',TypeNa
-00026b40: 6d65 2827 636c 6173 736f 626a 2729 290a  me('classobj')).
-00026b50: 2320 2020 2070 7269 6e74 2827 332e 3134  #    print('3.14
-00026b60: 203a 2027 2c54 7970 654e 616d 6528 332e   : ',TypeName(3.
-00026b70: 3134 2929 0a23 2020 2020 7072 696e 7428  14)).#    print(
-00026b80: 2757 4542 203a 2027 2c54 7970 654e 616d  'WEB : ',TypeNam
-00026b90: 6528 2757 4542 2729 290a 2320 2020 2070  e('WEB')).#    p
-00026ba0: 7269 6e74 2827 636c 6173 7320 5745 4220  rint('class WEB 
-00026bb0: 3a20 272c 5479 7065 4e61 6d65 2857 4542  : ',TypeName(WEB
-00026bc0: 2929 0a23 2020 2020 7072 696e 7428 2762  )).#    print('b
-00026bd0: 6f6f 6c20 3a20 272c 5479 7065 4e61 6d65  ool : ',TypeName
-00026be0: 2862 6f6f 6c29 290a 2320 2020 2070 7269  (bool)).#    pri
-00026bf0: 6e74 2827 4661 6c73 6520 3a20 272c 5479  nt('False : ',Ty
-00026c00: 7065 4e61 6d65 2846 616c 7365 2929 0a23  peName(False)).#
-00026c10: 2020 2020 7072 696e 7428 2754 7275 6520      print('True 
-00026c20: 3a20 272c 5479 7065 4e61 6d65 2854 7275  : ',TypeName(Tru
-00026c30: 6529 290a 2320 2020 2070 7269 6e74 2827  e)).#    print('
-00026c40: 4e6f 6e65 203a 2027 2c54 7970 654e 616d  None : ',TypeNam
-00026c50: 6528 4e6f 6e65 2929 0a20 2020 2023 2046  e(None)).    # F
-00026c60: 756e 6374 696f 6e0a 2320 2020 2064 6566  unction.#    def
-00026c70: 204b 4c6f 6728 696e 7073 2c6c 6f67 5f6c   KLog(inps,log_l
-00026c80: 6576 656c 3d33 2c2a 2a6f 7074 7329 3a0a  evel=3,**opts):.
-00026c90: 2320 2020 2020 2020 2070 7269 6e74 2822  #        print("
-00026ca0: 4b4c 6f67 3a22 2c27 3a27 2c69 6e70 732c  KLog:",':',inps,
-00026cb0: 276c 6f67 5f6c 6576 656c 3d27 2c6c 6f67  'log_level=',log
-00026cc0: 5f6c 6576 656c 290a 2320 0a23 2020 2020  _level).# .#    
-00026cd0: 7072 696e 7428 274b 6c6f 6731 3a27 2c46  print('Klog1:',F
-00026ce0: 6565 6446 756e 6328 274b 4c6f 6727 2c69  eedFunc('KLog',i
-00026cf0: 6e70 733d 2731 3131 3127 2c6c 6f67 5f6c  nps='1111',log_l
-00026d00: 6576 656c 3d39 2929 0a23 2020 2020 7072  evel=9)).#    pr
-00026d10: 696e 7428 274b 6c6f 6732 3a27 2c46 6565  int('Klog2:',Fee
-00026d20: 6446 756e 6328 274b 4c6f 6727 2c27 616b  dFunc('KLog','ak
-00026d30: 6427 2c27 7575 7575 7575 272c 6c6f 675f  d','uuuuuu',log_
-00026d40: 6c65 7665 6c3d 382c 6162 633d 3333 2929  level=8,abc=33))
-00026d50: 0a23 2020 2020 7072 696e 7428 274b 6c6f  .#    print('Klo
-00026d60: 6733 3a27 2c46 6565 6446 756e 6328 274b  g3:',FeedFunc('K
-00026d70: 4c6f 6727 2c6c 6f67 5f6c 6576 656c 3d38  Log',log_level=8
-00026d80: 2c61 6263 3d33 3329 290a 2320 2020 2070  ,abc=33)).#    p
-00026d90: 7269 6e74 2827 696e 743a 272c 4665 6564  rint('int:',Feed
-00026da0: 4675 6e63 2869 6e74 2c27 3333 272c 6261  Func(int,'33',ba
-00026db0: 7365 3d31 3029 290a 2320 2020 2070 7269  se=10)).#    pri
-00026dc0: 6e74 2827 7374 723a 272c 4665 6564 4675  nt('str:',FeedFu
-00026dd0: 6e63 2873 7472 2c33 3329 290a 2320 2020  nc(str,33)).#   
-00026de0: 2070 7269 6e74 2827 7374 723a 272c 4665   print('str:',Fe
-00026df0: 6564 4675 6e63 2873 7472 2c62 2733 3327  edFunc(str,b'33'
-00026e00: 2929 0a23 2020 2020 7072 696e 7428 276c  )).#    print('l
-00026e10: 6973 743a 272c 4665 6564 4675 6e63 286c  ist:',FeedFunc(l
-00026e20: 6973 742c 2733 3327 2929 0a23 2020 2020  ist,'33')).#    
-00026e30: 7072 696e 7428 276c 6973 743a 272c 4665  print('list:',Fe
-00026e40: 6564 4675 6e63 286c 6973 7429 290a 2320  edFunc(list)).# 
-00026e50: 2020 2070 7269 6e74 2827 6469 6374 3a27     print('dict:'
-00026e60: 2c46 6565 6446 756e 6328 6469 6374 2c5b  ,FeedFunc(dict,[
-00026e70: 2827 6161 272c 2733 3327 295d 2929 0a23  ('aa','33')])).#
-00026e80: 2020 2020 7072 696e 7428 2764 6963 743a      print('dict:
-00026e90: 272c 4665 6564 4675 6e63 2864 6963 7429  ',FeedFunc(dict)
-00026ea0: 290a                                     ).
+00021150: 2079 6e3d 636c 695f 696e 7075 7428 2744   yn=cli_input('D
+00021160: 656c 6574 6520 7b7d 2028 592f 4e29 3f27  elete {} (Y/N)?'
+00021170: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+00021180: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00021190: 2020 6966 206e 6f74 2069 7369 6e73 7461    if not isinsta
+000211a0: 6e63 6528 796e 2c73 7472 2920 6f72 2079  nce(yn,str) or y
+000211b0: 6e2e 6c6f 7765 7228 2920 6e6f 7420 696e  n.lower() not in
+000211c0: 205b 2779 272c 2779 6573 275d 3a20 636f   ['y','yes']: co
+000211d0: 6e74 696e 7565 0a20 2020 2020 2020 2020  ntinue.         
+000211e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000211f0: 2020 2023 6f73 2e72 656d 6f76 6528 6172     #os.remove(ar
+00021200: 6729 0a20 2020 2020 2020 2020 2020 2020  g).             
+00021210: 2020 2020 2020 2020 2020 2020 2020 206f                 o
+00021220: 732e 756e 6c69 6e6b 2861 7267 290a 2020  s.unlink(arg).  
+00021230: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00021240: 2020 2020 2020 656c 6966 206f 732e 6973        elif os.is
+00021250: 6469 7228 6172 6729 3a0a 2020 2020 2020  dir(arg):.      
+00021260: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00021270: 2020 2020 2020 6966 2073 7562 5f64 6972        if sub_dir
+00021280: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00021290: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000212a0: 2020 6966 206e 6f74 2066 6f72 6365 3a0a    if not force:.
+000212b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000212c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000212d0: 2020 2020 796e 3d63 6c69 5f69 6e70 7574      yn=cli_input
+000212e0: 2827 4465 6c65 7465 207b 7d20 2859 2f4e  ('Delete {} (Y/N
+000212f0: 293f 2729 0a20 2020 2020 2020 2020 2020  )?').           
+00021300: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00021310: 2020 2020 2020 2020 2069 6620 6e6f 7420           if not 
+00021320: 6973 696e 7374 616e 6365 2879 6e2c 7374  isinstance(yn,st
+00021330: 7229 206f 7220 796e 2e6c 6f77 6572 2829  r) or yn.lower()
+00021340: 206e 6f74 2069 6e20 5b27 7927 2c27 7965   not in ['y','ye
+00021350: 7327 5d3a 2063 6f6e 7469 6e75 650a 2020  s']: continue.  
+00021360: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00021370: 2020 2020 2020 2020 2020 2020 2020 7368                sh
+00021380: 7574 696c 2e72 6d74 7265 6528 6172 6729  util.rmtree(arg)
+00021390: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000213a0: 2020 2020 2020 2020 2020 2020 2065 6c73               els
+000213b0: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
+000213c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000213d0: 2020 2070 7269 6e74 2827 2727 6361 6e27     print('''can'
+000213e0: 7420 6465 6c65 7465 2064 6972 6563 746f  t delete directo
+000213f0: 7279 3a7b 7d27 2727 2e66 6f72 6d61 7428  ry:{}'''.format(
+00021400: 6172 6729 290a 2020 2020 2020 2020 2020  arg)).          
+00021410: 2020 2020 2020 2020 2020 2020 2020 656c                el
+00021420: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
+00021430: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00021440: 7072 696e 7428 2727 2763 616e 2774 2064  print('''can't d
+00021450: 656c 6574 6520 7b7d 2727 272e 666f 726d  elete {}'''.form
+00021460: 6174 2861 7267 2929 0a20 2020 2072 6574  at(arg)).    ret
+00021470: 7572 6e20 6f70 7473 2e67 6574 2827 6465  urn opts.get('de
+00021480: 6661 756c 7427 290a 0a64 6566 204c 6973  fault')..def Lis
+00021490: 7428 2a69 6e70 732c 2a2a 6f70 7473 293a  t(*inps,**opts):
+000214a0: 0a20 2020 2027 2727 0a20 2020 2074 7570  .    '''.    tup
+000214b0: 6c65 326c 6973 743a 200a 2020 2020 2020  le2list: .      
+000214c0: 2020 5472 7565 203a 2063 6f6e 7665 7274    True : convert
+000214d0: 2074 7570 6c65 2064 6174 6120 746f 206c   tuple data to l
+000214e0: 6973 7420 6461 7461 0a20 2020 2020 2020  ist data.       
+000214f0: 2046 616c 7365 3a20 6170 7065 6e64 2074   False: append t
+00021500: 7570 6c65 2069 6e74 6f20 6c69 7374 0a20  uple into list. 
+00021510: 2020 203c 6469 6374 2069 6e70 7574 3e0a     <dict input>.
+00021520: 2020 2020 2069 7465 6d73 203a 203c 6469       items : <di
+00021530: 6374 3e2e 6974 656d 7328 290a 2020 2020  ct>.items().    
+00021540: 2064 6174 6120 203a 203c 6469 6374 3e2e   data  : <dict>.
+00021550: 7661 6c75 6528 290a 2020 2020 2070 6174  value().     pat
+00021560: 6820 203a 2063 6f6e 7665 7274 203c 6469  h  : convert <di
+00021570: 6374 3e20 746f 2070 6174 6820 6c69 6b65  ct> to path like
+00021580: 206c 6973 7420 285b 2827 2f61 2f62 272c   list ([('/a/b',
+00021590: 3129 2c28 272f 612f 6327 2c32 292c 2e2e  1),('/a/c',2),..
+000215a0: 2e5d 290a 2020 2020 2028 6465 6661 756c  .]).     (defaul
+000215b0: 7429 3a20 3c64 6963 743e 2e6b 6579 7328  t): <dict>.keys(
+000215c0: 290a 2020 2020 3c6f 7074 696f 6e3e 0a20  ).    <option>. 
+000215d0: 2020 2020 6964 783d 3c69 6e74 3e20 2020      idx=<int>   
+000215e0: 203a 2067 6574 203c 6964 783e 2064 6174   : get <idx> dat
+000215f0: 610a 2020 2020 2064 656c 3d3c 696e 743e  a.     del=<int>
+00021600: 2020 2020 3a20 6465 6c65 7465 203c 6964      : delete <id
+00021610: 783e 0a20 2020 2020 6669 7273 743d 3c64  x>.     first=<d
+00021620: 6174 613e 203a 206d 6f76 6520 3c64 6174  ata> : move <dat
+00021630: 613e 2074 6f20 6669 7273 740a 2020 2020  a> to first.    
+00021640: 2065 6e64 3d3c 6461 7461 3e20 2020 3a20   end=<data>   : 
+00021650: 6d6f 7665 203c 6461 7461 3e20 746f 2065  move <data> to e
+00021660: 6e64 0a20 2020 2020 6669 6e64 3d3c 6461  nd.     find=<da
+00021670: 7461 3e20 203a 2067 6574 2049 6e64 6578  ta>  : get Index
+00021680: 206c 6973 740a 2020 2020 2075 6e69 713d   list.     uniq=
+00021690: 4661 6c73 6520 2020 3a20 556e 6971 2064  False   : Uniq d
+000216a0: 6174 610a 2020 2020 2073 7472 6970 3d46  ata.     strip=F
+000216b0: 616c 7365 2020 3a20 7265 6d6f 7665 2077  alse  : remove w
+000216c0: 6869 7465 2073 7061 6365 0a20 2020 2020  hite space.     
+000216d0: 6465 6661 756c 7420 2020 2020 203a 2046  default      : F
+000216e0: 616c 7365 0a20 2020 2020 6d6f 6465 200a  alse.     mode .
+000216f0: 2020 2020 2020 2020 6175 746f 2020 2020          auto    
+00021700: 2020 3a20 6175 746f 2066 6978 696e 6720    : auto fixing 
+00021710: 696e 6465 780a 2020 2020 2020 2020 6572  index.        er
+00021720: 7220 2020 2020 2020 3a20 6e6f 7420 666f  r       : not fo
+00021730: 756e 6420 7468 656e 2072 6574 7572 6e20  und then return 
+00021740: 6465 6661 756c 7428 4661 6c73 6529 0a20  default(False). 
+00021750: 2020 2020 2020 2069 676e 6f72 6520 2020         ignore   
+00021760: 203a 206e 6f74 2066 6f75 6e64 2074 6865   : not found the
+00021770: 6e20 6967 6e6f 7265 2074 6865 2064 6174  n ignore the dat
+00021780: 610a 2020 2020 2727 270a 2020 2020 6465  a.    '''.    de
+00021790: 6620 4444 2873 293a 0a20 2020 2020 2020  f DD(s):.       
+000217a0: 2072 743d 5b5d 0a20 2020 2020 2020 2066   rt=[].        f
+000217b0: 6f72 2069 2069 6e20 733a 0a20 2020 2020  or i in s:.     
+000217c0: 2020 2020 2020 2069 6620 5479 7065 2873         if Type(s
+000217d0: 5b69 5d2c 6469 6374 293a 0a20 2020 2020  [i],dict):.     
+000217e0: 2020 2020 2020 2020 2020 2066 6f72 207a             for z
+000217f0: 2069 6e20 4444 2873 5b69 5d29 3a0a 2020   in DD(s[i]):.  
+00021800: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00021810: 2020 7274 2e61 7070 656e 6428 2869 2b27    rt.append((i+'
+00021820: 2f27 2b7a 5b30 5d2c 7a5b 315d 2929 0a20  /'+z[0],z[1])). 
+00021830: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
+00021840: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00021850: 2072 742e 6170 7065 6e64 2828 692c 735b   rt.append((i,s[
+00021860: 695d 2929 0a20 2020 2020 2020 2072 6574  i])).        ret
+00021870: 7572 6e20 7274 0a0a 2020 2020 7475 706c  urn rt..    tupl
+00021880: 6532 6c69 7374 3d6f 7074 732e 6765 7428  e2list=opts.get(
+00021890: 2774 7570 6c65 326c 6973 7427 2c54 7275  'tuple2list',Tru
+000218a0: 6529 0a20 2020 206d 6f64 653d 6f70 7473  e).    mode=opts
+000218b0: 2e67 6574 2827 6d6f 6465 272c 2761 7574  .get('mode','aut
+000218c0: 6f27 290a 2020 2020 7274 3d5b 5d0a 2020  o').    rt=[].  
+000218d0: 2020 6966 206c 656e 2869 6e70 7329 203d    if len(inps) =
+000218e0: 3d20 3020 3a20 7265 7475 726e 2072 740a  = 0 : return rt.
+000218f0: 2020 2020 6966 2054 7970 6528 696e 7073      if Type(inps
+00021900: 5b30 5d2c 6c69 7374 293a 0a20 2020 2020  [0],list):.     
+00021910: 2020 2072 743d 696e 7073 5b30 5d0a 2020     rt=inps[0].  
+00021920: 2020 656c 6966 2054 7970 6528 696e 7073    elif Type(inps
+00021930: 5b30 5d2c 7475 706c 6529 3a0a 2020 2020  [0],tuple):.    
+00021940: 2020 2020 6966 2074 7570 6c65 326c 6973      if tuple2lis
+00021950: 743a 0a20 2020 2020 2020 2020 2020 2072  t:.            r
+00021960: 743d 6c69 7374 2869 6e70 735b 305d 290a  t=list(inps[0]).
+00021970: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
+00021980: 2020 2020 2020 2020 2020 7274 2e61 7070            rt.app
+00021990: 656e 6428 696e 7073 5b30 5d29 0a20 2020  end(inps[0]).   
+000219a0: 2065 6c69 6620 5479 7065 2869 6e70 735b   elif Type(inps[
+000219b0: 305d 2c64 6963 7429 3a0a 2020 2020 2020  0],dict):.      
+000219c0: 2020 6966 206f 7074 732e 6765 7428 2764    if opts.get('d
+000219d0: 6174 6127 293a 0a20 2020 2020 2020 2020  ata'):.         
+000219e0: 2020 2072 743d 6c69 7374 2869 6e70 735b     rt=list(inps[
+000219f0: 305d 2e76 616c 7565 7328 2929 0a20 2020  0].values()).   
+00021a00: 2020 2020 2065 6c69 6620 6f70 7473 2e67       elif opts.g
+00021a10: 6574 2827 616c 6c27 2c6f 7074 732e 6765  et('all',opts.ge
+00021a20: 7428 2777 686f 6c65 272c 6f70 7473 2e67  t('whole',opts.g
+00021a30: 6574 2827 6974 656d 7327 2929 293a 0a20  et('items'))):. 
+00021a40: 2020 2020 2020 2020 2020 2072 743d 6c69             rt=li
+00021a50: 7374 2869 6e70 735b 305d 2e69 7465 6d73  st(inps[0].items
+00021a60: 2829 290a 2020 2020 2020 2020 656c 6966  ()).        elif
+00021a70: 206f 7074 732e 6765 7428 2770 6174 6827   opts.get('path'
+00021a80: 293a 0a20 2020 2020 2020 2020 2020 2074  ):.            t
+00021a90: 6d70 3d5b 5d0a 2020 2020 2020 2020 2020  mp=[].          
+00021aa0: 2020 666f 7220 6b20 696e 2069 6e70 735b    for k in inps[
+00021ab0: 305d 3a0a 2020 2020 2020 2020 2020 2020  0]:.            
+00021ac0: 2020 2020 6966 2054 7970 6528 696e 7073      if Type(inps
+00021ad0: 5b30 5d5b 6b5d 2c64 6963 7429 3a0a 2020  [0][k],dict):.  
+00021ae0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00021af0: 2020 666f 7220 6420 696e 2044 4428 696e    for d in DD(in
+00021b00: 7073 5b30 5d5b 6b5d 293a 0a20 2020 2020  ps[0][k]):.     
+00021b10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00021b20: 2020 2074 6d70 2e61 7070 656e 6428 2827     tmp.append(('
+00021b30: 2f27 2b6b 2b27 2f27 2b64 5b30 5d2c 645b  /'+k+'/'+d[0],d[
+00021b40: 315d 2929 0a20 2020 2020 2020 2020 2020  1])).           
+00021b50: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
+00021b60: 2020 2020 2020 2020 2020 2020 2020 2074                 t
+00021b70: 6d70 2e61 7070 656e 6428 2827 2f27 2b6b  mp.append(('/'+k
+00021b80: 2c69 6e70 735b 305d 5b6b 5d29 290a 2020  ,inps[0][k])).  
+00021b90: 2020 2020 2020 2020 2020 7274 3d72 742b            rt=rt+
+00021ba0: 746d 700a 2020 2020 2020 2020 656c 7365  tmp.        else
+00021bb0: 3a0a 2020 2020 2020 2020 2020 2020 7274  :.            rt
+00021bc0: 3d6c 6973 7428 696e 7073 5b30 5d29 0a20  =list(inps[0]). 
+00021bd0: 2020 2066 6f72 2069 2069 6e20 696e 7073     for i in inps
+00021be0: 5b31 3a5d 3a0a 2020 2020 2020 2020 6966  [1:]:.        if
+00021bf0: 2054 7970 6528 692c 6c69 7374 293a 0a20   Type(i,list):. 
+00021c00: 2020 2020 2020 2020 2020 2072 743d 7274             rt=rt
+00021c10: 2b69 0a20 2020 2020 2020 2065 6c73 653a  +i.        else:
+00021c20: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+00021c30: 5479 7065 2869 2c74 7570 6c65 293a 0a20  Type(i,tuple):. 
+00021c40: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+00021c50: 6620 7475 706c 6532 6c69 7374 3a0a 2020  f tuple2list:.  
+00021c60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00021c70: 2020 7274 3d72 742b 6c69 7374 2869 290a    rt=rt+list(i).
+00021c80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00021c90: 2020 2020 636f 6e74 696e 7565 0a20 2020      continue.   
+00021ca0: 2020 2020 2020 2020 2065 6c69 6620 5479           elif Ty
+00021cb0: 7065 2869 2c64 6963 7429 3a0a 2020 2020  pe(i,dict):.    
+00021cc0: 2020 2020 2020 2020 2020 2020 7274 3d72              rt=r
+00021cd0: 742b 4c69 7374 2872 742c 692c 2a2a 6f70  t+List(rt,i,**op
+00021ce0: 7473 290a 2020 2020 2020 2020 2020 2020  ts).            
+00021cf0: 2020 2020 636f 6e74 696e 7565 0a20 2020      continue.   
+00021d00: 2020 2020 2020 2020 2072 742e 6170 7065           rt.appe
+00021d10: 6e64 2869 290a 2020 2020 6966 206f 7074  nd(i).    if opt
+00021d20: 732e 6765 7428 2773 7472 6970 2729 3a0a  s.get('strip'):.
+00021d30: 2020 2020 2020 2020 7274 3d5b 692e 7374          rt=[i.st
+00021d40: 7269 7028 2920 6966 2069 7369 6e73 7461  rip() if isinsta
+00021d50: 6e63 6528 692c 2873 7472 2c62 7974 6573  nce(i,(str,bytes
+00021d60: 2929 2065 6c73 6520 6920 666f 7220 6920  )) else i for i 
+00021d70: 696e 2072 745d 0a20 2020 2069 6620 6f70  in rt].    if op
+00021d80: 7473 2e67 6574 2827 756e 6971 2729 3a0a  ts.get('uniq'):.
+00021d90: 2020 2020 2020 2020 7265 7475 726e 2055          return U
+00021da0: 6e69 7128 7274 290a 2020 2020 6964 783d  niq(rt).    idx=
+00021db0: 6f70 7473 2e67 6574 2827 6964 7827 290a  opts.get('idx').
+00021dc0: 2020 2020 6966 206e 6f74 2049 734e 6f6e      if not IsNon
+00021dd0: 6528 6964 7829 3a0a 2020 2020 2020 2020  e(idx):.        
+00021de0: 6f6b 2c69 6478 3d49 6e64 6578 466f 726d  ok,idx=IndexForm
+00021df0: 2869 6478 2c69 6478 5f6f 6e6c 793d 5472  (idx,idx_only=Tr
+00021e00: 7565 2c73 796d 626f 6c3d 272c 2729 0a20  ue,symbol=','). 
+00021e10: 2020 2020 2020 2069 6620 6f6b 2069 7320         if ok is 
+00021e20: 4661 6c73 653a 2072 6574 7572 6e20 6f70  False: return op
+00021e30: 7473 2e67 6574 2827 6465 6661 756c 7427  ts.get('default'
+00021e40: 2c46 616c 7365 290a 2020 2020 2020 2020  ,False).        
+00021e50: 6966 2069 7369 6e73 7461 6e63 6528 6964  if isinstance(id
+00021e60: 782c 7475 706c 6529 2061 6e64 206c 656e  x,tuple) and len
+00021e70: 2869 6478 2920 3d3d 2032 3a0a 2020 2020  (idx) == 2:.    
+00021e80: 2020 2020 2020 2020 6964 783d 7261 6e67          idx=rang
+00021e90: 6528 6964 785b 305d 2c69 6478 5b31 5d2b  e(idx[0],idx[1]+
+00021ea0: 3129 0a20 2020 2020 2020 2069 6620 6e6f  1).        if no
+00021eb0: 7420 5479 7065 2869 6478 2c28 6c69 7374  t Type(idx,(list
+00021ec0: 2c74 7570 6c65 2c27 7261 6e67 6527 2929  ,tuple,'range'))
+00021ed0: 3a20 6964 783d 5b69 6478 5d0a 2020 2020  : idx=[idx].    
+00021ee0: 2020 2020 7474 3d5b 5d0a 2020 2020 2020      tt=[].      
+00021ef0: 2020 666f 7220 6920 696e 2069 6478 3a0a    for i in idx:.
+00021f00: 2020 2020 2020 2020 2020 2020 6966 206d              if m
+00021f10: 6f64 6520 3d3d 2027 6175 746f 273a 0a20  ode == 'auto':. 
+00021f20: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+00021f30: 3d46 6978 496e 6465 7828 7274 2c69 2c64  =FixIndex(rt,i,d
+00021f40: 6566 6175 6c74 3d46 616c 7365 2c65 7272  efault=False,err
+00021f50: 3d46 616c 7365 290a 2020 2020 2020 2020  =False).        
+00021f60: 2020 2020 656c 6966 206d 6f64 6520 696e      elif mode in
+00021f70: 205b 2765 7272 272c 2769 676e 6f72 6527   ['err','ignore'
+00021f80: 5d3a 0a20 2020 2020 2020 2020 2020 2020  ]:.             
+00021f90: 2020 2069 3d46 6978 496e 6465 7828 7274     i=FixIndex(rt
+00021fa0: 2c69 2c64 6566 6175 6c74 3d46 616c 7365  ,i,default=False
+00021fb0: 2c65 7272 3d54 7275 6529 0a20 2020 2020  ,err=True).     
+00021fc0: 2020 2020 2020 2069 6620 6920 6973 2046         if i is F
+00021fd0: 616c 7365 3a0a 2020 2020 2020 2020 2020  alse:.          
+00021fe0: 2020 2020 2020 6966 206d 6f64 6520 3d3d        if mode ==
+00021ff0: 2027 6572 7227 3a20 7265 7475 726e 206f   'err': return o
+00022000: 7074 732e 6765 7428 2764 6566 6175 6c74  pts.get('default
+00022010: 272c 4661 6c73 6529 0a20 2020 2020 2020  ',False).       
+00022020: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
+00022030: 2020 2020 2020 2020 2020 2074 742e 6170             tt.ap
+00022040: 7065 6e64 2872 745b 695d 290a 2020 2020  pend(rt[i]).    
+00022050: 2020 2020 7265 7475 726e 2074 740a 2020      return tt.  
+00022060: 2020 6966 206e 6f74 2049 734e 6f6e 6528    if not IsNone(
+00022070: 6f70 7473 2e67 6574 2827 726d 2729 293a  opts.get('rm')):
+00022080: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+00022090: 726d 2872 742c 2a6f 7074 732e 6765 7428  rm(rt,*opts.get(
+000220a0: 2772 6d27 2920 6966 2054 7970 6528 6f70  'rm') if Type(op
+000220b0: 7473 2e67 6574 2827 726d 2729 2c28 6c69  ts.get('rm'),(li
+000220c0: 7374 2c74 7570 6c65 2929 2065 6c73 6520  st,tuple)) else 
+000220d0: 6f70 7473 2e67 6574 2827 726d 2729 290a  opts.get('rm')).
+000220e0: 2020 2020 6669 7273 743d 6f70 7473 2e67      first=opts.g
+000220f0: 6574 2827 6669 7273 7427 290a 2020 2020  et('first').    
+00022100: 6966 206e 6f74 2049 734e 6f6e 6528 6669  if not IsNone(fi
+00022110: 7273 7429 2061 6e64 2066 6972 7374 2069  rst) and first i
+00022120: 6e20 7274 3a0a 2020 2020 2020 2020 7265  n rt:.        re
+00022130: 7475 726e 205b 6669 7273 745d 2b5b 6920  turn [first]+[i 
+00022140: 666f 7220 6920 696e 2072 7420 6966 2069  for i in rt if i
+00022150: 2021 3d20 6669 7273 745d 0a20 2020 2065   != first].    e
+00022160: 6e64 3d6f 7074 732e 6765 7428 2765 6e64  nd=opts.get('end
+00022170: 2729 0a20 2020 2069 6620 6e6f 7420 4973  ').    if not Is
+00022180: 4e6f 6e65 2865 6e64 2920 616e 6420 656e  None(end) and en
+00022190: 6420 696e 2072 743a 0a20 2020 2020 2020  d in rt:.       
+000221a0: 2072 6574 7572 6e20 5b69 2066 6f72 2069   return [i for i
+000221b0: 2069 6e20 7274 2069 6620 6920 213d 2065   in rt if i != e
+000221c0: 6e64 5d2b 5b65 6e64 5d0a 2020 2020 6669  nd]+[end].    fi
+000221d0: 6e64 3d6f 7074 732e 6765 7428 2766 696e  nd=opts.get('fin
+000221e0: 6427 290a 2020 2020 6966 206e 6f74 2049  d').    if not I
+000221f0: 734e 6f6e 6528 6669 6e64 293a 0a20 2020  sNone(find):.   
+00022200: 2020 2020 2069 6620 6e6f 7420 5479 7065       if not Type
+00022210: 2866 696e 642c 286c 6973 742c 7475 706c  (find,(list,tupl
+00022220: 6529 293a 2066 696e 643d 5b66 696e 645d  e)): find=[find]
+00022230: 0a20 2020 2020 2020 2074 743d 5b5d 0a20  .        tt=[]. 
+00022240: 2020 2020 2020 2066 6f72 2069 2069 6e20         for i in 
+00022250: 6669 6e64 3a0a 2020 2020 2020 2020 2020  find:.          
+00022260: 2020 666f 7220 7a20 696e 2072 616e 6765    for z in range
+00022270: 2830 2c6c 656e 2872 7429 293a 0a20 2020  (0,len(rt)):.   
+00022280: 2020 2020 2020 2020 2020 2020 206a 3d69               j=i
+00022290: 2e72 6570 6c61 6365 2827 2a27 2c27 2e2b  .replace('*','.+
+000222a0: 2729 2e72 6570 6c61 6365 2827 3f27 2c27  ').replace('?','
+000222b0: 2e27 290a 2020 2020 2020 2020 2020 2020  .').            
+000222c0: 2020 2020 6d6d 3d72 652e 636f 6d70 696c      mm=re.compil
+000222d0: 6528 6a29 0a20 2020 2020 2020 2020 2020  e(j).           
+000222e0: 2020 2020 2069 6620 626f 6f6c 2872 652e       if bool(re.
+000222f0: 6d61 7463 6828 6d6d 2c72 745b 7a5d 2929  match(mm,rt[z]))
+00022300: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00022310: 2020 2020 2020 7474 2e61 7070 656e 6428        tt.append(
+00022320: 7a29 0a20 2020 2020 2020 2020 2020 2020  z).             
+00022330: 2020 2023 6966 2072 745b 7a5d 203d 3d20     #if rt[z] == 
+00022340: 693a 2074 742e 6170 7065 6e64 287a 290a  i: tt.append(z).
+00022350: 2020 2020 2020 2020 7265 7475 726e 2074          return t
+00022360: 740a 2020 2020 7265 7475 726e 2072 740a  t.    return rt.
+00022370: 0a64 6566 2052 6570 6c61 6365 2873 7263  .def Replace(src
+00022380: 2c72 6570 6c61 6365 5f77 6861 742c 7265  ,replace_what,re
+00022390: 706c 6163 655f 746f 2c64 6566 6175 6c74  place_to,default
+000223a0: 3d4e 6f6e 652c 6e65 776c 696e 653d 275c  =None,newline='\
+000223b0: 6e27 293a 0a20 2020 2027 2727 0a20 2020  n'):.    '''.   
+000223c0: 2072 6570 6c61 6365 2073 7472 696e 6720   replace string 
+000223d0: 2873 7263 2c20 6672 6f6d 2c20 746f 290a  (src, from, to).
+000223e0: 2020 2020 6966 206e 6f74 2073 7472 696e      if not strin
+000223f0: 6720 7468 656e 2072 6574 7572 6e20 6465  g then return de
+00022400: 6661 756c 740a 2020 2020 6465 6661 756c  fault.    defaul
+00022410: 743a 2072 6574 7572 6e20 6465 6669 6e65  t: return define
+00022420: 6420 7661 6c75 6520 7768 656e 206e 6f74  d value when not
+00022430: 2073 7472 696e 670a 2020 2020 2020 276f   string.      'o
+00022440: 7267 273a 2072 6574 7572 6e20 7372 630a  rg': return src.
+00022450: 2020 2020 2020 2e2e 2e20 203a 2072 6574        ...  : ret
+00022460: 7572 6e20 6465 6669 6e65 6420 6465 6661  urn defined defa
+00022470: 756c 740a 2020 2020 2727 270a 2020 2020  ult.    '''.    
+00022480: 6465 6620 5f53 5f28 7372 632c 7029 3a0a  def _S_(src,p):.
+00022490: 2020 2020 2020 2020 6966 2069 7369 6e73          if isins
+000224a0: 7461 6e63 6528 702c 6c69 7374 293a 0a20  tance(p,list):. 
+000224b0: 2020 2020 2020 2020 2020 2074 3d5b 5d0a             t=[].
+000224c0: 2020 2020 2020 2020 2020 2020 6d3d 6c65              m=le
+000224d0: 6e28 7029 2d31 0a20 2020 2020 2020 2020  n(p)-1.         
+000224e0: 2020 2066 6f72 2069 2069 6e20 7261 6e67     for i in rang
+000224f0: 6528 302c 6d2b 3129 3a0a 2020 2020 2020  e(0,m+1):.      
+00022500: 2020 2020 2020 2020 2020 6966 2069 203d            if i =
+00022510: 3d20 303a 0a20 2020 2020 2020 2020 2020  = 0:.           
+00022520: 2020 2020 2020 2020 2074 2e61 7070 656e           t.appen
+00022530: 6428 7372 635b 3a70 5b69 5d5b 305d 5d29  d(src[:p[i][0]])
+00022540: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00022550: 2020 2020 2069 6620 693d 3d6d 3a0a 2020       if i==m:.  
+00022560: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00022570: 2020 2020 2020 742e 6170 7065 6e64 2873        t.append(s
+00022580: 7263 5b70 5b69 5d5b 315d 3a5d 290a 2020  rc[p[i][1]:]).  
+00022590: 2020 2020 2020 2020 2020 2020 2020 656c                el
+000225a0: 6966 2069 203c 206d 3a0a 2020 2020 2020  if i < m:.      
+000225b0: 2020 2020 2020 2020 2020 2020 2020 742e                t.
+000225c0: 6170 7065 6e64 2873 7263 5b70 5b69 2d31  append(src[p[i-1
+000225d0: 5d5b 315d 3a70 5b69 5d5b 305d 5d29 0a20  ][1]:p[i][0]]). 
+000225e0: 2020 2020 2020 2020 2020 2020 2020 2065                 e
+000225f0: 6c69 6620 6920 3d3d 206d 3a0a 2020 2020  lif i == m:.    
+00022600: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00022610: 742e 6170 7065 6e64 2873 7263 5b70 5b69  t.append(src[p[i
+00022620: 2d31 5d5b 315d 3a70 5b69 5d5b 305d 5d29  -1][1]:p[i][0]])
+00022630: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00022640: 2020 2020 2074 2e61 7070 656e 6428 7372       t.append(sr
+00022650: 635b 705b 695d 5b31 5d3a 5d29 0a20 2020  c[p[i][1]:]).   
+00022660: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+00022670: 740a 0a20 2020 2073 7263 5f74 7970 653d  t..    src_type=
+00022680: 5479 7065 4e61 6d65 2873 7263 290a 2020  TypeName(src).  
+00022690: 2020 6966 206e 6f74 2073 7263 5f74 7970    if not src_typ
+000226a0: 6520 696e 205b 2773 7472 272c 2762 7974  e in ['str','byt
+000226b0: 6573 275d 3a0a 2020 2020 2020 2020 7265  es']:.        re
+000226c0: 7475 726e 2044 6566 6175 6c74 2873 7263  turn Default(src
+000226d0: 2c64 6566 6175 6c74 290a 2020 2020 6966  ,default).    if
+000226e0: 2073 7263 5f74 7970 6520 3d3d 2027 6279   src_type == 'by
+000226f0: 7465 7327 3a0a 2020 2020 2020 2020 7265  tes':.        re
+00022700: 706c 6163 655f 7768 6174 3d42 7974 6573  place_what=Bytes
+00022710: 2872 6570 6c61 6365 5f77 6861 7429 0a20  (replace_what). 
+00022720: 2020 2020 2020 2072 6570 6c61 6365 5f74         replace_t
+00022730: 6f3d 4279 7465 7328 7265 706c 6163 655f  o=Bytes(replace_
+00022740: 746f 290a 2020 2020 2020 2020 6e65 776c  to).        newl
+00022750: 696e 653d 4279 7465 7328 6e65 776c 696e  ine=Bytes(newlin
+00022760: 6529 0a20 2020 2065 6c73 653a 0a20 2020  e).    else:.   
+00022770: 2020 2020 2072 6570 6c61 6365 5f77 6861       replace_wha
+00022780: 743d 5374 7228 7265 706c 6163 655f 7768  t=Str(replace_wh
+00022790: 6174 290a 2020 2020 2020 2020 7265 706c  at).        repl
+000227a0: 6163 655f 746f 3d53 7472 2872 6570 6c61  ace_to=Str(repla
+000227b0: 6365 5f74 6f29 0a20 2020 2020 2020 206e  ce_to).        n
+000227c0: 6577 6c69 6e65 3d53 7472 286e 6577 6c69  ewline=Str(newli
+000227d0: 6e65 290a 2020 2020 746d 703d 5b5d 0a20  ne).    tmp=[]. 
+000227e0: 2020 2066 6f72 2069 6920 696e 2073 7263     for ii in src
+000227f0: 2e73 706c 6974 286e 6577 6c69 6e65 293a  .split(newline):
+00022800: 0a20 2020 2020 2020 2074 743d 5f53 5f28  .        tt=_S_(
+00022810: 6969 2c46 6f75 6e64 2869 692c 7265 706c  ii,Found(ii,repl
+00022820: 6163 655f 7768 6174 2c6c 6f63 6174 696f  ace_what,locatio
+00022830: 6e3d 5472 7565 2929 0a20 2020 2020 2020  n=True)).       
+00022840: 2074 6d70 2e61 7070 656e 6428 4a6f 696e   tmp.append(Join
+00022850: 2874 742c 7265 706c 6163 655f 746f 2920  (tt,replace_to) 
+00022860: 6966 2074 7420 656c 7365 2069 6929 0a20  if tt else ii). 
+00022870: 2020 2072 6574 7572 6e20 4a6f 696e 2874     return Join(t
+00022880: 6d70 2c6e 6577 6c69 6e65 290a 0a64 6566  mp,newline)..def
+00022890: 206b 7263 2872 742c 6368 6b3d 275f 272c   krc(rt,chk='_',
+000228a0: 7274 643d 7b27 474f 4f44 273a 5b54 7275  rtd={'GOOD':[Tru
+000228b0: 652c 2754 7275 6527 2c27 476f 6f64 272c  e,'True','Good',
+000228c0: 274f 6b27 2c27 5061 7373 272c 2753 7572  'Ok','Pass','Sur
+000228d0: 6527 2c7b 274f 4b27 7d2c 305d 2c27 4641  e',{'OK'},0],'FA
+000228e0: 494c 273a 5b46 616c 7365 2c27 4661 6c73  IL':[False,'Fals
+000228f0: 6527 2c27 4661 696c 272c 7b27 4641 4c27  e','Fail',{'FAL'
+00022900: 7d5d 2c27 4e4f 4e45 273a 5b4e 6f6e 652c  }],'NONE':[None,
+00022910: 274e 6f6e 6527 2c27 4e6f 7468 696e 6727  'None','Nothing'
+00022920: 2c27 456d 7074 7927 2c27 4e75 6c6c 272c  ,'Empty','Null',
+00022930: 274e 2f41 272c 7b27 4e41 277d 5d2c 2749  'N/A',{'NA'}],'I
+00022940: 474e 4f27 3a5b 2749 474e 4f27 2c27 4967  GNO':['IGNO','Ig
+00022950: 6e6f 7265 272c 7b27 4947 4e27 7d5d 2c27  nore',{'IGN'}],'
+00022960: 4552 524f 273a 5b27 4552 5227 2c27 4572  ERRO':['ERR','Er
+00022970: 726f 272c 2745 7272 6f72 272c 7b27 4552  ro','Error',{'ER
+00022980: 5227 7d2c 312c 3132 362c 3132 382c 3133  R'},1,126,128,13
+00022990: 302c 3235 355d 2c27 5741 524e 273a 5b27  0,255],'WARN':['
+000229a0: 5761 726e 272c 2757 6172 6e69 6e67 272c  Warn','Warning',
+000229b0: 7b27 5741 5227 7d5d 2c27 554e 4b4e 273a  {'WAR'}],'UNKN':
+000229c0: 5b27 556e 6b6e 6f77 6e27 2c27 554e 4b4e  ['Unknown','UNKN
+000229d0: 272c 2244 6f6e 2774 206b 6e6f 7722 2c27  ',"Don't know",'
+000229e0: 4e6f 7420 7375 7265 272c 7b27 554e 4b27  Not sure',{'UNK'
+000229f0: 7d5d 2c27 4a55 4d50 273a 5b27 4a75 6d70  }],'JUMP':['Jump
+00022a00: 272c 7b27 4a55 4d50 277d 5d2c 2754 4f55  ',{'JUMP'}],'TOU
+00022a10: 5427 3a5b 2754 696d 654f 7574 272c 2754  T':['TimeOut','T
+00022a20: 696d 6520 4f75 7427 2c27 544d 4f55 5427  ime Out','TMOUT'
+00022a30: 2c27 544f 5554 272c 7b27 544f 5554 277d  ,'TOUT',{'TOUT'}
+00022a40: 5d2c 2752 4556 4427 3a5b 2743 616e 6365  ],'REVD':['Cance
+00022a50: 6c27 2c27 4361 6e63 656c 6564 272c 2752  l','Canceled','R
+00022a60: 4556 272c 2752 4556 4427 2c27 5265 766f  EV','REVD','Revo
+00022a70: 6b65 6427 2c27 5265 766f 6b65 272c 7b27  ked','Revoke',{'
+00022a80: 5245 5644 277d 5d2c 274c 4f53 5427 3a5b  REVD'}],'LOST':[
+00022a90: 274c 6f73 7427 2c27 436f 6e6e 6563 7469  'Lost','Connecti
+00022aa0: 6f6e 204c 6f73 7427 2c27 4c6f 7374 2043  on Lost','Lost C
+00022ab0: 6f6e 6e65 6374 696f 6e27 2c7b 274c 4f53  onnection',{'LOS
+00022ac0: 5427 7d5d 2c27 4e46 4e44 273a 5b27 4669  T'}],'NFND':['Fi
+00022ad0: 6c65 206e 6f74 2066 6f75 6e64 272c 274e  le not found','N
+00022ae0: 6f74 2046 6f75 6e64 272c 2743 616e 206e  ot Found','Can n
+00022af0: 6f74 2066 6f75 6e64 272c 7b27 4e46 4e44  ot found',{'NFND
+00022b00: 277d 2c31 3237 5d7d 2c64 6566 6175 6c74  '},127]},default
+00022b10: 3d46 616c 7365 2c6d 6f64 653d 4e6f 6e65  =False,mode=None
+00022b20: 293a 0a20 2020 2027 2727 0a20 2020 2053  ):.    '''.    S
+00022b30: 6865 6c6c 2065 7869 7420 636f 6465 3a0a  hell exit code:.
+00022b40: 2020 2020 2020 3120 2020 2d20 4361 7463        1   - Catc
+00022b50: 6861 6c6c 2066 6f72 2067 656e 6572 616c  hall for general
+00022b60: 2065 7272 6f72 730a 2020 2020 2020 3220   errors.      2 
+00022b70: 2020 2d20 4d69 7375 7365 206f 6620 7368    - Misuse of sh
+00022b80: 656c 6c20 6275 696c 7469 6e73 2028 6163  ell builtins (ac
+00022b90: 636f 7264 696e 6720 746f 2042 6173 6820  cording to Bash 
+00022ba0: 646f 6375 6d65 6e74 6174 696f 6e29 0a20  documentation). 
+00022bb0: 2020 2031 3236 2020 202d 2043 6f6d 6d61     126   - Comma
+00022bc0: 6e64 2069 6e76 6f6b 6564 2063 616e 6e6f  nd invoked canno
+00022bd0: 7420 6578 6563 7574 650a 2020 2020 3132  t execute.    12
+00022be0: 3720 2020 2d20 e280 9c63 6f6d 6d61 6e64  7   - ...command
+00022bf0: 206e 6f74 2066 6f75 6e64 e280 9d0a 2020   not found....  
+00022c00: 2020 3132 3820 2020 2d20 496e 7661 6c69    128   - Invali
+00022c10: 6420 6172 6775 6d65 6e74 2074 6f20 6578  d argument to ex
+00022c20: 6974 0a20 2020 2031 3238 2b6e 202d 2046  it.    128+n - F
+00022c30: 6174 616c 2065 7272 6f72 2073 6967 6e61  atal error signa
+00022c40: 6c20 e280 9c6e e280 9d0a 2020 2020 3133  l ...n....    13
+00022c50: 3020 2020 2d20 5363 7269 7074 2074 6572  0   - Script ter
+00022c60: 6d69 6e61 7465 6420 6279 2043 6f6e 7472  minated by Contr
+00022c70: 6f6c 2d43 0a20 2020 2032 3535 5c2a 202d  ol-C.    255\* -
+00022c80: 2045 7869 7420 7374 6174 7573 206f 7574   Exit status out
+00022c90: 206f 6620 7261 6e67 650a 2020 2020 2727   of range.    ''
+00022ca0: 270a 2020 2020 6966 206d 6f64 6520 3d3d  '.    if mode ==
+00022cb0: 2027 6765 7427 3a0a 2020 2020 2020 2020   'get':.        
+00022cc0: 7265 7475 726e 2072 7464 0a20 2020 2065  return rtd.    e
+00022cd0: 6c69 6620 6d6f 6465 203d 3d20 276b 6579  lif mode == 'key
+00022ce0: 7327 3a0a 2020 2020 2020 2020 6966 2069  s':.        if i
+00022cf0: 7369 6e73 7461 6e63 6528 7274 642c 6469  sinstance(rtd,di
+00022d00: 6374 293a 0a20 2020 2020 2020 2020 2020  ct):.           
+00022d10: 2072 6574 7572 6e20 7274 642e 6b65 7973   return rtd.keys
+00022d20: 2829 0a20 2020 2064 6566 2074 7261 6e73  ().    def trans
+00022d30: 2869 7274 293a 0a20 2020 2020 2020 2074  (irt):.        t
+00022d40: 7970 655f 6972 743d 7479 7065 2869 7274  ype_irt=type(irt
+00022d50: 290a 2020 2020 2020 2020 666f 7220 6969  ).        for ii
+00022d60: 2069 6e20 7274 643a 0a20 2020 2020 2020   in rtd:.       
+00022d70: 2020 2020 2066 6f72 206a 6a20 696e 2072       for jj in r
+00022d80: 7464 5b69 695d 3a0a 2020 2020 2020 2020  td[ii]:.        
+00022d90: 2020 2020 2020 2020 6966 2074 7970 6528          if type(
+00022da0: 6a6a 2920 3d3d 2074 7970 655f 6972 7420  jj) == type_irt 
+00022db0: 616e 6420 2828 7479 7065 5f69 7274 2069  and ((type_irt i
+00022dc0: 7320 7374 7220 616e 6420 6a6a 2e6c 6f77  s str and jj.low
+00022dd0: 6572 2829 203d 3d20 6972 742e 6c6f 7765  er() == irt.lowe
+00022de0: 7228 2929 206f 7220 6a6a 203d 3d20 6972  r()) or jj == ir
+00022df0: 7429 3a0a 2020 2020 2020 2020 2020 2020  t):.            
+00022e00: 2020 2020 2020 2020 7265 7475 726e 2069          return i
+00022e10: 690a 2020 2020 2020 2020 7265 7475 726e  i.        return
+00022e20: 2027 554e 4b4e 270a 2020 2020 7274 633d   'UNKN'.    rtc=
+00022e30: 4765 7428 7274 2c27 307c 7263 272c 6572  Get(rt,'0|rc',er
+00022e40: 723d 5472 7565 2c64 6566 6175 6c74 3d27  r=True,default='
+00022e50: 6f72 6727 2c74 7970 653d 2862 6f6f 6c2c  org',type=(bool,
+00022e60: 696e 742c 6c69 7374 2c74 7570 6c65 2c64  int,list,tuple,d
+00022e70: 6963 7429 290a 2020 2020 6e72 7463 3d74  ict)).    nrtc=t
+00022e80: 7261 6e73 2850 6565 6c28 7274 632c 6572  rans(Peel(rtc,er
+00022e90: 723d 4661 6c73 652c 6465 6661 756c 743d  r=False,default=
+00022ea0: 2775 6e6b 6e6f 776e 2729 2920 2349 6620  'unknown')) #If 
+00022eb0: 4765 7428 2920 676f 7420 6d75 6c74 6920  Get() got multi 
+00022ec0: 6461 7461 2074 6865 6e20 7573 6520 6669  data then use fi
+00022ed0: 7273 7420 6461 7461 0a20 2020 2069 6620  rst data.    if 
+00022ee0: 6368 6b20 213d 2027 5f27 3a0a 2020 2020  chk != '_':.    
+00022ef0: 2020 2020 6966 206e 6f74 2069 7369 6e73      if not isins
+00022f00: 7461 6e63 6528 6368 6b2c 6c69 7374 293a  tance(chk,list):
+00022f10: 2063 686b 3d5b 6368 6b5d 0a20 2020 2020   chk=[chk].     
+00022f20: 2020 2066 6f72 2063 6320 696e 2063 686b     for cc in chk
+00022f30: 3a0a 2020 2020 2020 2020 2020 2020 6966  :.            if
+00022f40: 2074 7261 6e73 2863 6329 203d 3d20 6e72   trans(cc) == nr
+00022f50: 7463 3a0a 2020 2020 2020 2020 2020 2020  tc:.            
+00022f60: 2020 2020 7265 7475 726e 2054 7275 650a      return True.
+00022f70: 2020 2020 2020 2020 2020 2020 6966 206e              if n
+00022f80: 7274 6320 3d3d 2027 554e 4b4e 2720 616e  rtc == 'UNKN' an
+00022f90: 6420 6465 6661 756c 7420 3d3d 2027 6f72  d default == 'or
+00022fa0: 6727 3a0a 2020 2020 2020 2020 2020 2020  g':.            
+00022fb0: 2020 2020 7265 7475 726e 2072 7463 0a20      return rtc. 
+00022fc0: 2020 2020 2020 2072 6574 7572 6e20 4465         return De
+00022fd0: 6661 756c 7428 7274 2c64 6566 6175 6c74  fault(rt,default
+00022fe0: 290a 2020 2020 7265 7475 726e 206e 7274  ).    return nrt
+00022ff0: 630a 0a64 6566 204f 7574 466f 726d 6174  c..def OutFormat
+00023000: 2864 6174 612c 6f75 743d 4e6f 6e65 2c73  (data,out=None,s
+00023010: 7472 6970 3d46 616c 7365 2c70 6565 6c3d  trip=False,peel=
+00023020: 4e6f 6e65 2c6f 7267 3d4e 6f6e 652c 6465  None,org=None,de
+00023030: 6661 756c 743d 4e6f 6e65 293a 0a20 2020  fault=None):.   
+00023040: 2027 2727 0a20 2020 204f 7574 7075 7420   '''.    Output 
+00023050: 466f 726d 6174 206d 616b 6572 0a20 2020  Format maker.   
+00023060: 203c 6f70 7469 6f6e 3e0a 2020 2020 2020   <option>.      
+00023070: 6f75 740a 2020 2020 2020 2020 4e6f 6e65  out.        None
+00023080: 3a20 4e6f 7420 636f 6e76 6572 740a 2020  : Not convert.  
+00023090: 2020 2020 2020 7374 722c 696e 742c 6c69        str,int,li
+000230a0: 7374 2c64 6963 7420 3a20 636f 6e76 6572  st,dict : conver
+000230b0: 7420 6461 7461 2074 6f20 7761 6e74 2066  t data to want f
+000230c0: 6f72 6d61 740a 2020 2020 2020 2020 7261  ormat.        ra
+000230d0: 7720 3a20 5065 656c 6564 2064 6174 6120  w : Peeled data 
+000230e0: 7768 656e 2073 696e 676c 6520 6461 7461  when single data
+000230f0: 285b 2761 275d 2c28 2761 2729 2c7b 2761  (['a'],('a'),{'a
+00023100: 273a 2761 6263 277d 2920 6f74 6865 7273  ':'abc'}) others
+00023110: 2074 6865 6e20 7265 7475 726e 206f 7269   then return ori
+00023120: 676e 616c 0a20 2020 2020 2070 6565 6c0a  gnal.      peel.
+00023130: 2020 2020 2020 2020 4e6f 6e65 203a 2061          None : a
+00023140: 7574 6f6d 6174 6963 616c 6c79 2077 6f72  utomatically wor
+00023150: 6b69 6e67 2061 6363 6f72 6469 6e67 2074  king according t
+00023160: 6f20 6f75 740a 2020 2020 2020 2020 5472  o out.        Tr
+00023170: 7565 203a 2050 6565 6c69 6e67 2064 6174  ue : Peeling dat
+00023180: 610a 2020 2020 2020 2020 4661 6c73 653a  a.        False:
+00023190: 204e 6f74 2050 6565 6c69 6e67 0a20 2020   Not Peeling.   
+000231a0: 2020 2073 7472 6970 200a 2020 2020 2020     strip .      
+000231b0: 2020 4661 6c73 653a 206e 6f74 2072 656d    False: not rem
+000231c0: 6f76 6520 7768 6974 6520 7370 6163 650a  ove white space.
+000231d0: 2020 2020 2020 2020 5472 7565 203a 2072          True : r
+000231e0: 656d 6f76 6520 7768 6974 6520 7370 6163  emove white spac
+000231f0: 650a 2020 2020 2727 270a 2020 2020 6f75  e.    '''.    ou
+00023200: 745f 6461 7461 3d4e 6f6e 650a 2020 2020  t_data=None.    
+00023210: 6966 206f 7574 2069 6e20 5b74 7570 6c65  if out in [tuple
+00023220: 2c27 7475 706c 6527 2c6c 6973 742c 276c  ,'tuple',list,'l
+00023230: 6973 7427 5d3a 0a20 2020 2020 2020 2069  ist']:.        i
+00023240: 6620 6e6f 7420 6973 696e 7374 616e 6365  f not isinstance
+00023250: 2864 6174 612c 2874 7570 6c65 2c6c 6973  (data,(tuple,lis
+00023260: 7429 293a 0a20 2020 2020 2020 2020 2020  t)):.           
+00023270: 206f 7574 5f64 6174 613d 5b64 6174 615d   out_data=[data]
+00023280: 0a20 2020 2020 2020 2065 6c73 653a 0a20  .        else:. 
+00023290: 2020 2020 2020 2020 2020 206f 7574 5f64             out_d
+000232a0: 6174 613d 6c69 7374 2864 6174 6129 0a20  ata=list(data). 
+000232b0: 2020 2020 2020 2069 6620 6f75 7420 696e         if out in
+000232c0: 205b 7475 706c 652c 2774 7570 6c65 275d   [tuple,'tuple']
+000232d0: 3a0a 2020 2020 2020 2020 2020 2020 6966  :.            if
+000232e0: 206f 7574 5f64 6174 613a 0a20 2020 2020   out_data:.     
+000232f0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+00023300: 6e20 7475 706c 6528 6f75 745f 6461 7461  n tuple(out_data
+00023310: 290a 2020 2020 2020 2020 2020 2020 656c  ).            el
+00023320: 6966 2069 7369 6e73 7461 6e63 6528 6465  if isinstance(de
+00023330: 6661 756c 742c 7475 706c 6529 3a0a 2020  fault,tuple):.  
+00023340: 2020 2020 2020 2020 2020 2020 2020 7265                re
+00023350: 7475 726e 2064 6566 6175 6c74 0a20 2020  turn default.   
+00023360: 2020 2020 2020 2020 2065 6c73 653a 0a20           else:. 
+00023370: 2020 2020 2020 2020 2020 2020 2020 2072                 r
+00023380: 6574 7572 6e20 2844 6566 6175 6c74 286f  eturn (Default(o
+00023390: 7267 2c64 6566 6175 6c74 2929 0a20 2020  rg,default)).   
+000233a0: 2020 2020 2069 6620 6f75 745f 6461 7461       if out_data
+000233b0: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
+000233c0: 7475 726e 206f 7574 5f64 6174 610a 2020  turn out_data.  
+000233d0: 2020 2020 2020 656c 6966 2069 7369 6e73        elif isins
+000233e0: 7461 6e63 6528 6465 6661 756c 742c 6c69  tance(default,li
+000233f0: 7374 293a 0a20 2020 2020 2020 2020 2020  st):.           
+00023400: 2072 6574 7572 6e20 6465 6661 756c 740a   return default.
+00023410: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
+00023420: 2020 2020 2020 2020 2020 7265 7475 726e            return
+00023430: 205b 4465 6661 756c 7428 6f72 672c 6465   [Default(org,de
+00023440: 6661 756c 7429 5d0a 2020 2020 656c 6966  fault)].    elif
+00023450: 206f 7574 2069 6e20 5b64 6963 742c 2764   out in [dict,'d
+00023460: 6963 7427 5d3a 0a20 2020 2020 2020 2069  ict']:.        i
+00023470: 6620 6461 7461 3a0a 2020 2020 2020 2020  f data:.        
+00023480: 2020 2020 7265 7475 726e 2044 6963 7428      return Dict(
+00023490: 6461 7461 290a 2020 2020 2020 2020 656c  data).        el
+000234a0: 6966 2069 7369 6e73 7461 6e63 6528 6465  if isinstance(de
+000234b0: 6661 756c 742c 6469 6374 293a 0a20 2020  fault,dict):.   
+000234c0: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+000234d0: 6465 6661 756c 740a 2020 2020 2020 2020  default.        
+000234e0: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
+000234f0: 2020 7265 7475 726e 2044 6566 6175 6c74    return Default
+00023500: 286f 7267 2c64 6566 6175 6c74 290a 2020  (org,default).  
+00023510: 2020 656c 6966 206f 7574 2069 6e20 5b27    elif out in ['
+00023520: 7374 7227 2c73 7472 5d3a 0a20 2020 2020  str',str]:.     
+00023530: 2020 206f 7574 5f64 6174 613d 5768 6974     out_data=Whit
+00023540: 6553 7472 6970 2850 6565 6c28 6461 7461  eStrip(Peel(data
+00023550: 2c70 6565 6c29 2c73 7472 6970 290a 2020  ,peel),strip).  
+00023560: 2020 656c 6966 206f 7574 2069 6e20 5b27    elif out in ['
+00023570: 696e 7427 2c69 6e74 5d3a 0a20 2020 2020  int',int]:.     
+00023580: 2020 206f 7574 5f64 6174 613d 496e 7428     out_data=Int(
+00023590: 5768 6974 6553 7472 6970 2850 6565 6c28  WhiteStrip(Peel(
+000235a0: 6461 7461 2c70 6565 6c29 2c73 7472 6970  data,peel),strip
+000235b0: 2929 0a20 2020 2069 6620 6f75 745f 6461  )).    if out_da
+000235c0: 7461 2069 7320 4661 6c73 653a 2023 6966  ta is False: #if
+000235d0: 2073 7472 206f 7220 696e 7420 676f 7420   str or int got 
+000235e0: 4661 6c73 6520 7468 656e 200a 2020 2020  False then .    
+000235f0: 2020 2020 7265 7475 726e 2044 6566 6175      return Defau
+00023600: 6c74 286f 7267 2c64 6566 6175 6c74 290a  lt(org,default).
+00023610: 2020 2020 6966 206f 7574 203d 3d20 2772      if out == 'r
+00023620: 6177 2720 6f72 2049 734e 6f6e 6528 6f75  aw' or IsNone(ou
+00023630: 7429 3a0a 2020 2020 2020 2020 6966 2049  t):.        if I
+00023640: 734e 6f6e 6528 7065 656c 293a 2070 6565  sNone(peel): pee
+00023650: 6c3d 5472 7565 0a20 2020 206f 7574 5f64  l=True.    out_d
+00023660: 6174 613d 5768 6974 6553 7472 6970 2850  ata=WhiteStrip(P
+00023670: 6565 6c28 6461 7461 2c70 6565 6c29 2c73  eel(data,peel),s
+00023680: 7472 6970 290a 2020 2020 6966 206f 7574  trip).    if out
+00023690: 5f64 6174 613a 2072 6574 7572 6e20 6f75  _data: return ou
+000236a0: 745f 6461 7461 0a20 2020 2072 6574 7572  t_data.    retur
+000236b0: 6e20 4465 6661 756c 7428 6f72 672c 6465  n Default(org,de
+000236c0: 6661 756c 7429 0a0a 6465 6620 4665 6564  fault)..def Feed
+000236d0: 4675 6e63 286f 626a 2c2a 696e 7073 2c2a  Func(obj,*inps,*
+000236e0: 2a6f 7074 7329 3a0a 2020 2020 2727 270a  *opts):.    '''.
+000236f0: 2020 2020 4175 746f 6d61 7469 6361 6c6c      Automaticall
+00023700: 7920 4665 6564 206d 6174 6368 6564 2076  y Feed matched v
+00023710: 6172 6961 626c 6573 2074 6f20 6675 6e63  ariables to func
+00023720: 7469 6f6e 0a20 2020 2046 6565 6446 756e  tion.    FeedFun
+00023730: 6328 3c66 756e 633e 2c3c 6675 6e63 7469  c(<func>,<functi
+00023740: 6f6e 2773 2061 7267 756d 656e 7473 3e2c  on's arguments>,
+00023750: 3c66 756e 6374 696f 6e27 7320 7661 7269  <function's vari
+00023760: 6162 6c65 733e 290a 2020 2020 6966 2073  ables>).    if s
+00023770: 6f6d 6574 6869 6e67 2077 726f 6e67 2074  omething wrong t
+00023780: 6865 6e20 7265 7475 726e 2046 616c 7365  hen return False
+00023790: 0a20 2020 2069 6620 636f 7272 6563 7420  .    if correct 
+000237a0: 7468 656e 2072 6574 7572 6e20 6f75 7470  then return outp
+000237b0: 7574 206f 6620 7261 6e20 7468 6520 4675  ut of ran the Fu
+000237c0: 6e63 7469 6f6e 2077 6974 6820 696e 7075  nction with inpu
+000237d0: 7473 0a20 2020 2027 2727 0a20 2020 206f  ts.    '''.    o
+000237e0: 626a 5f74 7970 653d 5479 7065 4e61 6d65  bj_type=TypeName
+000237f0: 286f 626a 290a 2020 2020 6966 206f 626a  (obj).    if obj
+00023800: 5f74 7970 6520 3d3d 2027 7374 7227 2061  _type == 'str' a
+00023810: 6e64 206e 6f74 2069 6e73 7065 6374 2e69  nd not inspect.i
+00023820: 7363 6c61 7373 286f 626a 293a 2023 2066  sclass(obj): # f
+00023830: 6f72 2073 7472 2063 6c61 7373 0a20 2020  or str class.   
+00023840: 2020 2020 206d 796d 6f64 3d4d 794d 6f64       mymod=MyMod
+00023850: 756c 6528 6465 6661 756c 743d 4661 6c73  ule(default=Fals
+00023860: 652c 7061 7265 6e74 3d31 290a 2020 2020  e,parent=1).    
+00023870: 2020 2020 6966 206d 796d 6f64 2069 7320      if mymod is 
+00023880: 4661 6c73 653a 0a20 2020 2020 2020 2020  False:.         
+00023890: 2020 206d 796d 6f64 3d4d 794d 6f64 756c     mymod=MyModul
+000238a0: 6528 6465 6661 756c 743d 4661 6c73 652c  e(default=False,
+000238b0: 7061 7265 6e74 3d30 290a 2020 2020 2020  parent=0).      
+000238c0: 2020 6966 206d 796d 6f64 2069 7320 4661    if mymod is Fa
+000238d0: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
+000238e0: 206d 796d 6f64 3d4d 794d 6f64 756c 6528   mymod=MyModule(
+000238f0: 6465 6661 756c 743d 4661 6c73 652c 7061  default=False,pa
+00023900: 7265 6e74 3d2d 3129 0a20 2020 2020 2020  rent=-1).       
+00023910: 2069 6620 5479 7065 286d 796d 6f64 2c27   if Type(mymod,'
+00023920: 6d6f 6475 6c65 2729 3a0a 2020 2020 2020  module'):.      
+00023930: 2020 2020 2020 7472 793a 0a20 2020 2020        try:.     
+00023940: 2020 2020 2020 2020 2020 206f 626a 3d67             obj=g
+00023950: 6574 6174 7472 286d 796d 6f64 2c6f 626a  etattr(mymod,obj
+00023960: 2c4e 6f6e 6529 0a20 2020 2020 2020 2020  ,None).         
+00023970: 2020 2020 2020 206f 626a 5f74 7970 653d         obj_type=
+00023980: 5479 7065 4e61 6d65 286f 626a 290a 2020  TypeName(obj).  
+00023990: 2020 2020 2020 2020 2020 6578 6365 7074            except
+000239a0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+000239b0: 2020 5374 6445 7272 2827 4675 6e63 7469    StdErr('Functi
+000239c0: 6f6e 206e 616d 6520 227b 7d22 206e 6f74  on name "{}" not
+000239d0: 2066 6f75 6e64 2069 6e20 7468 6520 6d6f   found in the mo
+000239e0: 6475 6c65 5c6e 272e 666f 726d 6174 286f  dule\n'.format(o
+000239f0: 626a 2929 0a20 2020 2020 2020 2020 2020  bj)).           
+00023a00: 2020 2020 2072 6574 7572 6e20 4661 6c73       return Fals
+00023a10: 650a 2020 2020 6966 206f 626a 5f74 7970  e.    if obj_typ
+00023a20: 6520 696e 2028 2766 756e 6374 696f 6e27  e in ('function'
+00023a30: 2c27 6275 696c 7469 6e5f 6675 6e63 7469  ,'builtin_functi
+00023a40: 6f6e 5f6f 725f 6d65 7468 6f64 272c 2774  on_or_method','t
+00023a50: 7970 6527 2c27 696e 7427 2c27 7374 7227  ype','int','str'
+00023a60: 2c27 6c69 7374 272c 2764 6963 7427 293a  ,'list','dict'):
+00023a70: 0a20 2020 2020 2020 2066 6361 7267 733d  .        fcargs=
+00023a80: 4675 6e63 7469 6f6e 4172 6773 286f 626a  FunctionArgs(obj
+00023a90: 2c6d 6f64 653d 2764 6574 6169 6c27 2c64  ,mode='detail',d
+00023aa0: 6566 6175 6c74 3d7b 7d29 0a20 2020 2020  efault={}).     
+00023ab0: 2020 206e 696e 7073 3d5b 5d0a 2020 2020     ninps=[].    
+00023ac0: 2020 2020 6e6f 7074 733d 7b7d 0a20 2020      nopts={}.   
+00023ad0: 2020 2020 2023 5370 6563 6961 6c20 6361       #Special ca
+00023ae0: 7365 2069 6e74 2c73 7472 2c6c 6973 742c  se int,str,list,
+00023af0: 6469 6374 0a20 2020 2020 2020 2069 6620  dict.        if 
+00023b00: 6f62 6a5f 7479 7065 2069 6e20 5b27 696e  obj_type in ['in
+00023b10: 7427 2c27 7374 7227 2c27 6c69 7374 272c  t','str','list',
+00023b20: 2764 6963 7427 5d3a 0a20 2020 2020 2020  'dict']:.       
+00023b30: 2020 2020 2069 6620 696e 7073 3a20 6e69       if inps: ni
+00023b40: 6e70 732e 6170 7065 6e64 2869 6e70 735b  nps.append(inps[
+00023b50: 305d 290a 2020 2020 2020 2020 2020 2020  0]).            
+00023b60: 6966 2027 6261 7365 2720 696e 206f 7074  if 'base' in opt
+00023b70: 733a 2023 696e 7428 290a 2020 2020 2020  s: #int().      
+00023b80: 2020 2020 2020 2020 2020 6e6f 7074 735b            nopts[
+00023b90: 2762 6173 6527 5d3d 6f70 7473 5b27 6261  'base']=opts['ba
+00023ba0: 7365 275d 0a20 2020 2020 2020 2020 2020  se'].           
+00023bb0: 2069 6620 2765 6e63 6f64 696e 6727 2069   if 'encoding' i
+00023bc0: 6e20 6f70 7473 3a20 2320 7374 7228 290a  n opts: # str().
+00023bd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00023be0: 6e6f 7074 735b 2765 6e63 6f64 696e 6727  nopts['encoding'
+00023bf0: 5d3d 6f70 7473 5b27 656e 636f 6469 6e67  ]=opts['encoding
+00023c00: 275d 0a20 2020 2020 2020 2020 2020 2065  '].            e
+00023c10: 6c69 6620 6f62 6a5f 7479 7065 203d 3d20  lif obj_type == 
+00023c20: 2773 7472 2720 616e 6420 6e69 6e70 7320  'str' and ninps 
+00023c30: 616e 6420 5479 7065 286e 696e 7073 5b30  and Type(ninps[0
+00023c40: 5d2c 2762 7974 6573 2729 2061 6e64 2027  ],'bytes') and '
+00023c50: 656e 636f 6469 6e67 2720 6e6f 7420 696e  encoding' not in
+00023c60: 206f 7074 733a 2023 2073 7472 2829 0a20   opts: # str(). 
+00023c70: 2020 2020 2020 2020 2020 2020 2020 206e                 n
+00023c80: 6f70 7473 5b27 656e 636f 6469 6e67 275d  opts['encoding']
+00023c90: 3d27 6173 6369 6927 0a20 2020 2020 2020  ='ascii'.       
+00023ca0: 2069 6478 3d30 0a20 2020 2020 2020 2069   idx=0.        i
+00023cb0: 6620 2761 7267 7327 2069 6e20 6663 6172  f 'args' in fcar
+00023cc0: 6773 3a0a 2020 2020 2020 2020 2020 2020  gs:.            
+00023cd0: 666f 7220 6920 696e 2066 6361 7267 735b  for i in fcargs[
+00023ce0: 2761 7267 7327 5d3a 0a20 2020 2020 2020  'args']:.       
+00023cf0: 2020 2020 2020 2020 2069 6620 6c65 6e28           if len(
+00023d00: 696e 7073 2920 3e20 6964 783a 0a20 2020  inps) > idx:.   
+00023d10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00023d20: 206e 696e 7073 2e61 7070 656e 6428 696e   ninps.append(in
+00023d30: 7073 5b69 6478 5d29 0a20 2020 2020 2020  ps[idx]).       
+00023d40: 2020 2020 2020 2020 2020 2020 2069 6478               idx
+00023d50: 2b3d 310a 2020 2020 2020 2020 2020 2020  +=1.            
+00023d60: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+00023d70: 2020 2020 2020 2020 2020 2020 2020 6966                if
+00023d80: 2069 2069 6e20 6f70 7473 3a0a 2020 2020   i in opts:.    
+00023d90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00023da0: 2020 2020 6e69 6e70 732e 6170 7065 6e64      ninps.append
+00023db0: 286f 7074 732e 706f 7028 6929 290a 2020  (opts.pop(i)).  
+00023dc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00023dd0: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
+00023de0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00023df0: 5374 6445 7272 2827 696e 7075 7420 7061  StdErr('input pa
+00023e00: 7261 6d65 7465 7220 227b 7d22 206e 6f74  rameter "{}" not
+00023e10: 2066 6f75 6e64 5c6e 272e 666f 726d 6174   found\n'.format
+00023e20: 2869 2929 0a20 2020 2020 2020 2020 2020  (i)).           
+00023e30: 2020 2020 2020 2020 2020 2020 2072 6574               ret
+00023e40: 7572 6e20 4661 6c73 650a 2020 2020 2020  urn False.      
+00023e50: 2020 6966 2027 7661 7261 7267 7327 2069    if 'varargs' i
+00023e60: 6e20 6663 6172 6773 3a0a 2020 2020 2020  n fcargs:.      
+00023e70: 2020 2020 2020 6e69 6e70 733d 6e69 6e70        ninps=ninp
+00023e80: 732b 6c69 7374 2869 6e70 735b 6964 783a  s+list(inps[idx:
+00023e90: 5d29 0a20 2020 2020 2020 2069 6620 2764  ]).        if 'd
+00023ea0: 6566 6175 6c74 7327 2069 6e20 6663 6172  efaults' in fcar
+00023eb0: 6773 3a0a 2020 2020 2020 2020 2020 2020  gs:.            
+00023ec0: 666f 7220 6920 696e 2066 6361 7267 735b  for i in fcargs[
+00023ed0: 2764 6566 6175 6c74 7327 5d3a 0a20 2020  'defaults']:.   
+00023ee0: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+00023ef0: 6920 696e 206f 7074 733a 0a20 2020 2020  i in opts:.     
+00023f00: 2020 2020 2020 2020 2020 2020 2020 206e                 n
+00023f10: 6f70 7473 5b69 5d3d 6f70 7473 2e70 6f70  opts[i]=opts.pop
+00023f20: 2869 2920 236d 616b 6520 7769 7468 2069  (i) #make with i
+00023f30: 6e70 7574 2076 616c 7565 0a20 2020 2020  nput value.     
+00023f40: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
+00023f50: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00023f60: 2020 2020 206e 6f70 7473 5b69 5d3d 6663       nopts[i]=fc
+00023f70: 6172 6773 5b27 6465 6661 756c 7473 275d  args['defaults']
+00023f80: 5b69 5d20 2320 6d61 6b65 2077 6974 6820  [i] # make with 
+00023f90: 6465 6661 756c 7420 7661 6c75 650a 2020  default value.  
+00023fa0: 2020 2020 2020 6966 2027 6b65 7977 6f72        if 'keywor
+00023fb0: 6473 2720 696e 2066 6361 7267 733a 0a20  ds' in fcargs:. 
+00023fc0: 2020 2020 2020 2020 2020 206e 6f70 7473             nopts
+00023fd0: 2e75 7064 6174 6528 6f70 7473 290a 2020  .update(opts).  
+00023fe0: 2020 2020 2020 2352 756e 2066 756e 6374        #Run funct
+00023ff0: 696f 6e20 7769 7468 2066 6f75 6e64 2061  ion with found a
+00024000: 7267 756d 656e 7473 0a20 2020 2020 2020  rguments.       
+00024010: 2069 6620 6e69 6e70 7320 616e 6420 6e6f   if ninps and no
+00024020: 7074 733a 0a20 2020 2020 2020 2020 2020  pts:.           
+00024030: 2069 6620 6f62 6a5f 7479 7065 2069 6e20   if obj_type in 
+00024040: 5b27 696e 7427 2c27 7374 7227 5d3a 0a20  ['int','str']:. 
+00024050: 2020 2020 2020 2020 2020 2020 2020 2072                 r
+00024060: 6574 7572 6e20 6f62 6a28 6e69 6e70 735b  eturn obj(ninps[
+00024070: 305d 2c2a 2a6e 6f70 7473 290a 2020 2020  0],**nopts).    
+00024080: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
+00024090: 2020 2020 2020 2020 2020 2020 2020 7265                re
+000240a0: 7475 726e 206f 626a 282a 6e69 6e70 732c  turn obj(*ninps,
+000240b0: 2a2a 6e6f 7074 7329 0a20 2020 2020 2020  **nopts).       
+000240c0: 2065 6c69 6620 6e69 6e70 733a 0a20 2020   elif ninps:.   
+000240d0: 2020 2020 2020 2020 2069 6620 6f62 6a5f           if obj_
+000240e0: 7479 7065 2069 6e20 5b27 696e 7427 2c27  type in ['int','
+000240f0: 7374 7227 2c27 6c69 7374 272c 2764 6963  str','list','dic
+00024100: 7427 5d3a 0a20 2020 2020 2020 2020 2020  t']:.           
+00024110: 2020 2020 2072 6574 7572 6e20 6f62 6a28       return obj(
+00024120: 6e69 6e70 735b 305d 290a 2020 2020 2020  ninps[0]).      
+00024130: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
+00024140: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+00024150: 726e 206f 626a 282a 6e69 6e70 7329 0a20  rn obj(*ninps). 
+00024160: 2020 2020 2020 2065 6c69 6620 6e6f 7074         elif nopt
+00024170: 733a 0a20 2020 2020 2020 2020 2020 2072  s:.            r
+00024180: 6574 7572 6e20 6f62 6a28 2a2a 6e6f 7074  eturn obj(**nopt
+00024190: 7329 0a20 2020 2020 2020 2065 6c73 653a  s).        else:
+000241a0: 0a20 2020 2020 2020 2020 2020 2074 7279  .            try
+000241b0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+000241c0: 2020 7265 7475 726e 206f 626a 2829 0a20    return obj(). 
+000241d0: 2020 2020 2020 2020 2020 2065 7863 6570             excep
+000241e0: 743a 0a20 2020 2020 2020 2020 2020 2020  t:.             
+000241f0: 2020 2065 3d45 7863 6570 744d 7367 2829     e=ExceptMsg()
+00024200: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00024210: 2053 7464 4572 7228 6529 0a20 2020 2072   StdErr(e).    r
+00024220: 6574 7572 6e20 4661 6c73 650a 0a64 6566  eturn False..def
+00024230: 2070 7269 6e74 6628 2a6d 7367 2c2a 2a6f   printf(*msg,**o
+00024240: 7074 7329 3a0a 2020 2020 6461 7465 5f66  pts):.    date_f
+00024250: 6f72 6d61 743d 6f70 7473 2e67 6574 2827  ormat=opts.get('
+00024260: 6461 7465 5f66 6f72 6d61 7427 2c27 256d  date_format','%m
+00024270: 2f25 642f 2559 2025 483a 254d 3a25 5327  /%d/%Y %H:%M:%S'
+00024280: 2069 6620 6f70 7473 2e67 6574 2827 6461   if opts.get('da
+00024290: 7465 2729 2065 6c73 6520 4e6f 6e65 290a  te') else None).
+000242a0: 2020 2020 6469 7265 6374 3d6f 7074 732e      direct=opts.
+000242b0: 6765 7428 2764 6972 6563 7427 2c46 616c  get('direct',Fal
+000242c0: 7365 290a 2020 2020 6473 703d 6f70 7473  se).    dsp=opts
+000242d0: 2e67 6574 2827 6473 7027 2c27 6127 290a  .get('dsp','a').
+000242e0: 2020 2020 6c6f 673d 6f70 7473 2e67 6574      log=opts.get
+000242f0: 2827 6c6f 6727 2c4e 6f6e 6529 0a20 2020  ('log',None).   
+00024300: 206c 6f67 5f6c 6576 656c 3d6f 7074 732e   log_level=opts.
+00024310: 6765 7428 276c 6f67 5f6c 6576 656c 272c  get('log_level',
+00024320: 3829 0a20 2020 2063 616c 6c65 723d 6f70  8).    caller=op
+00024330: 7473 2e67 6574 2827 6361 6c6c 6572 272c  ts.get('caller',
+00024340: 2764 6574 6169 6c27 2069 6620 6f70 7473  'detail' if opts
+00024350: 2e67 6574 2827 6361 6c6c 6572 5f64 6574  .get('caller_det
+00024360: 6169 6c27 2920 656c 7365 204e 6f6e 6529  ail') else None)
+00024370: 0a20 2020 2063 616c 6c65 725f 7472 6565  .    caller_tree
+00024380: 3d6f 7074 732e 6765 7428 2763 616c 6c65  =opts.get('calle
+00024390: 725f 7472 6565 272c 6f70 7473 2e67 6574  r_tree',opts.get
+000243a0: 2827 6361 6c6c 6572 5f68 6973 746f 7279  ('caller_history
+000243b0: 2729 290a 2020 2020 7379 736c 6f67 643d  ')).    syslogd=
+000243c0: 6f70 7473 2e67 6574 2827 7379 736c 6f67  opts.get('syslog
+000243d0: 6427 2c4e 6f6e 6529 0a20 2020 206e 6577  d',None).    new
+000243e0: 5f6c 696e 653d 6f70 7473 2e67 6574 2827  _line=opts.get('
+000243f0: 6e65 775f 6c69 6e65 272c 6f70 7473 2e67  new_line',opts.g
+00024400: 6574 2827 6e65 776c 696e 6527 2c27 2720  et('newline','' 
+00024410: 6966 2064 6972 6563 7420 656c 7365 2027  if direct else '
+00024420: 5c6e 2729 290a 2020 2020 666f 726d 3d6f  \n')).    form=o
+00024430: 7074 732e 6765 7428 2766 6f72 6d27 290a  pts.get('form').
+00024440: 2020 2020 696e 7472 6f3d 6f70 7473 2e67      intro=opts.g
+00024450: 6574 2827 696e 7472 6f27 2c4e 6f6e 6529  et('intro',None)
+00024460: 0a20 2020 206c 6f67 6669 6c65 3d6f 7074  .    logfile=opt
+00024470: 732e 6765 7428 276c 6f67 6669 6c65 272c  s.get('logfile',
+00024480: 5b5d 290a 0a20 2020 2023 4c6f 6766 696c  [])..    #Logfil
+00024490: 650a 2020 2020 6966 2069 7369 6e73 7461  e.    if isinsta
+000244a0: 6e63 6528 6c6f 6766 696c 652c 7374 7229  nce(logfile,str)
+000244b0: 3a0a 2020 2020 2020 2020 6c6f 6766 696c  :.        logfil
+000244c0: 653d 6c6f 6766 696c 652e 7370 6c69 7428  e=logfile.split(
+000244d0: 272c 2729 0a20 2020 2066 6f72 2069 6920  ',').    for ii 
+000244e0: 696e 206d 7367 3a0a 2020 2020 2020 2020  in msg:.        
+000244f0: 6966 2069 7369 6e73 7461 6e63 6528 6969  if isinstance(ii
+00024500: 2c73 7472 2920 616e 6420 273a 2720 696e  ,str) and ':' in
+00024510: 2069 693a 0a20 2020 2020 2020 2020 2020   ii:.           
+00024520: 206c 6f67 6669 6c65 5f6c 6973 743d 6969   logfile_list=ii
+00024530: 2e73 706c 6974 2827 3a27 290a 2020 2020  .split(':').    
+00024540: 2020 2020 2020 2020 6966 206c 6f67 6669          if logfi
+00024550: 6c65 5f6c 6973 745b 305d 2069 6e20 5b27  le_list[0] in ['
+00024560: 6c6f 675f 6669 6c65 272c 276c 6f67 6669  log_file','logfi
+00024570: 6c65 275d 3a0a 2020 2020 2020 2020 2020  le']:.          
+00024580: 2020 2020 2020 6966 206c 656e 286c 6f67        if len(log
+00024590: 6669 6c65 5f6c 6973 7429 203e 2032 3a0a  file_list) > 2:.
+000245a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000245b0: 2020 2020 666f 7220 6a6a 2069 6e20 6c6f      for jj in lo
+000245c0: 6766 696c 655f 6c69 7374 5b31 3a5d 3a0a  gfile_list[1:]:.
+000245d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000245e0: 2020 2020 2020 2020 6c6f 6766 696c 652e          logfile.
+000245f0: 6170 7065 6e64 286a 6a29 0a20 2020 2020  append(jj).     
+00024600: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
+00024610: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00024620: 2020 2020 206c 6f67 6669 6c65 3d6c 6f67       logfile=log
+00024630: 6669 6c65 2b6c 6f67 6669 6c65 5f6c 6973  file+logfile_lis
+00024640: 745b 315d 2e73 706c 6974 2827 2c27 290a  t[1].split(',').
+00024650: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00024660: 6d73 672e 7265 6d6f 7665 2869 6929 0a20  msg.remove(ii). 
+00024670: 2020 2023 2073 6176 6520 6d73 6728 7265     # save msg(re
+00024680: 6d6f 7665 6420 6c6f 675f 6669 6c65 2069  moved log_file i
+00024690: 6e66 6f72 6d61 7469 6f6e 2920 746f 2073  nformation) to s
+000246a0: 7973 6c6f 6764 200a 2020 2020 6966 2073  yslogd .    if s
+000246b0: 7973 6c6f 6764 3a0a 2020 2020 2020 2020  yslogd:.        
+000246c0: 6966 2073 7973 6c6f 6764 2069 6e20 5b27  if syslogd in ['
+000246d0: 494e 464f 272c 2769 6e66 6f27 5d3a 0a20  INFO','info']:. 
+000246e0: 2020 2020 2020 2020 2020 2073 7973 6c6f             syslo
+000246f0: 672e 7379 736c 6f67 2873 7973 6c6f 672e  g.syslog(syslog.
+00024700: 4c4f 475f 494e 464f 2c6d 7367 290a 2020  LOG_INFO,msg).  
+00024710: 2020 2020 2020 656c 6966 2073 7973 6c6f        elif syslo
+00024720: 6764 2069 6e20 5b27 4b45 524e 272c 276b  gd in ['KERN','k
+00024730: 6572 6e27 5d3a 0a20 2020 2020 2020 2020  ern']:.         
+00024740: 2020 2073 7973 6c6f 672e 7379 736c 6f67     syslog.syslog
+00024750: 2873 7973 6c6f 672e 4c4f 475f 4b45 524e  (syslog.LOG_KERN
+00024760: 2c6d 7367 290a 2020 2020 2020 2020 656c  ,msg).        el
+00024770: 6966 2073 7973 6c6f 6764 2069 6e20 5b27  if syslogd in ['
+00024780: 4552 5227 2c27 6572 7227 5d3a 0a20 2020  ERR','err']:.   
+00024790: 2020 2020 2020 2020 2073 7973 6c6f 672e           syslog.
+000247a0: 7379 736c 6f67 2873 7973 6c6f 672e 4c4f  syslog(syslog.LO
+000247b0: 475f 4552 522c 6d73 6729 0a20 2020 2020  G_ERR,msg).     
+000247c0: 2020 2065 6c69 6620 7379 736c 6f67 6420     elif syslogd 
+000247d0: 696e 205b 2743 5249 5427 2c27 6372 6974  in ['CRIT','crit
+000247e0: 275d 3a0a 2020 2020 2020 2020 2020 2020  ']:.            
+000247f0: 7379 736c 6f67 2e73 7973 6c6f 6728 7379  syslog.syslog(sy
+00024800: 736c 6f67 2e4c 4f47 5f43 5249 542c 6d73  slog.LOG_CRIT,ms
+00024810: 6729 0a20 2020 2020 2020 2065 6c69 6620  g).        elif 
+00024820: 7379 736c 6f67 6420 696e 205b 2757 4152  syslogd in ['WAR
+00024830: 4e27 2c27 7761 726e 275d 3a0a 2020 2020  N','warn']:.    
+00024840: 2020 2020 2020 2020 7379 736c 6f67 2e73          syslog.s
+00024850: 7973 6c6f 6728 7379 736c 6f67 2e4c 4f47  yslog(syslog.LOG
+00024860: 5f57 4152 4e49 4e47 2c6d 7367 290a 2020  _WARNING,msg).  
+00024870: 2020 2020 2020 656c 6966 2073 7973 6c6f        elif syslo
+00024880: 6764 2069 6e20 5b27 4442 4727 2c27 4445  gd in ['DBG','DE
+00024890: 4255 4727 2c27 6462 6727 2c27 6465 6275  BUG','dbg','debu
+000248a0: 6727 5d3a 0a20 2020 2020 2020 2020 2020  g']:.           
+000248b0: 2073 7973 6c6f 672e 7379 736c 6f67 2873   syslog.syslog(s
+000248c0: 7973 6c6f 672e 4c4f 475f 4445 4255 472c  yslog.LOG_DEBUG,
+000248d0: 6d73 6729 0a20 2020 2020 2020 2065 6c73  msg).        els
+000248e0: 653a 0a20 2020 2020 2020 2020 2020 2073  e:.            s
+000248f0: 7973 6c6f 672e 7379 736c 6f67 286d 7367  yslog.syslog(msg
+00024900: 290a 2020 2020 2320 4d61 6b65 2061 2049  ).    # Make a I
+00024910: 6e74 726f 0a20 2020 2069 6e74 726f 5f6d  ntro.    intro_m
+00024920: 7367 3d27 270a 2020 2020 6966 2064 6174  sg=''.    if dat
+00024930: 655f 666f 726d 6174 2061 6e64 206e 6f74  e_format and not
+00024940: 2073 7973 6c6f 6764 3a0a 2020 2020 2020   syslogd:.      
+00024950: 2020 696e 7472 6f5f 6d73 673d 277b 307d    intro_msg='{0}
+00024960: 2027 2e66 6f72 6d61 7428 5449 4d45 2829   '.format(TIME()
+00024970: 2e4e 6f77 2829 2e73 7472 6674 696d 6528  .Now().strftime(
+00024980: 6461 7465 5f66 6f72 6d61 7429 290a 2020  date_format)).  
+00024990: 2020 696e 7472 6f5f 6c65 6e3d 6c65 6e28    intro_len=len(
+000249a0: 696e 7472 6f5f 6d73 6729 0a20 2020 2069  intro_msg).    i
+000249b0: 6620 6361 6c6c 6572 3a0a 2020 2020 2020  f caller:.      
+000249c0: 2020 6172 673d 7b27 7061 7265 6e74 273a    arg={'parent':
+000249d0: 312c 2761 7267 7327 3a54 7275 657d 0a20  1,'args':True}. 
+000249e0: 2020 2020 2020 2069 6620 6361 6c6c 6572         if caller
+000249f0: 203d 3d20 2764 6574 6169 6c27 3a0a 2020   == 'detail':.  
+00024a00: 2020 2020 2020 2020 2020 6172 672e 7570            arg.up
+00024a10: 6461 7465 287b 276c 696e 655f 6e75 6d62  date({'line_numb
+00024a20: 6572 273a 5472 7565 2c27 6669 6c65 6e61  er':True,'filena
+00024a30: 6d65 273a 5472 7565 7d29 0a20 2020 2020  me':True}).     
+00024a40: 2020 2069 6620 6361 6c6c 6572 5f74 7265     if caller_tre
+00024a50: 6520 6973 2054 7275 653a 0a20 2020 2020  e is True:.     
+00024a60: 2020 2020 2020 2061 7267 2e75 7064 6174         arg.updat
+00024a70: 6528 7b27 6869 7374 6f72 7927 3a54 7275  e({'history':Tru
+00024a80: 652c 2774 7265 6527 3a54 7275 657d 290a  e,'tree':True}).
+00024a90: 2020 2020 2020 2020 6361 6c6c 5f6e 616d          call_nam
+00024aa0: 653d 4675 6e63 7469 6f6e 4e61 6d65 282a  e=FunctionName(*
+00024ab0: 2a61 7267 290a 2020 2020 2020 2020 6966  *arg).        if
+00024ac0: 2063 616c 6c5f 6e61 6d65 3a0a 2020 2020   call_name:.    
+00024ad0: 2020 2020 2020 2020 696e 7472 6f5f 6d73          intro_ms
+00024ae0: 673d 696e 7472 6f5f 6d73 672b 5772 6170  g=intro_msg+Wrap
+00024af0: 5374 7269 6e67 284a 6f69 6e28 6361 6c6c  String(Join(call
+00024b00: 5f6e 616d 652c 275c 6e27 292c 6673 7061  _name,'\n'),fspa
+00024b10: 6365 3d30 2c20 6e73 7061 6365 3d6c 656e  ce=0, nspace=len
+00024b20: 2869 6e74 726f 5f6d 7367 292c 6d6f 6465  (intro_msg),mode
+00024b30: 3d27 7370 6163 6527 292b 273a 2027 0a20  ='space')+': '. 
+00024b40: 2020 2020 2020 2020 2020 2069 6e74 726f             intro
+00024b50: 5f6c 656e 3d69 6e74 726f 5f6c 656e 2b6c  _len=intro_len+l
+00024b60: 656e 2863 616c 6c5f 6e61 6d65 5b2d 315d  en(call_name[-1]
+00024b70: 292b 320a 2020 2020 6966 2054 7970 6528  )+2.    if Type(
+00024b80: 696e 7472 6f2c 2773 7472 2729 2061 6e64  intro,'str') and
+00024b90: 2069 6e74 726f 3a0a 2020 2020 2020 2020   intro:.        
+00024ba0: 696e 7472 6f5f 6d73 673d 696e 7472 6f5f  intro_msg=intro_
+00024bb0: 6d73 672b 696e 7472 6f2b 273a 2027 0a20  msg+intro+': '. 
+00024bc0: 2020 2020 2020 2069 6e74 726f 5f6c 656e         intro_len
+00024bd0: 3d69 6e74 726f 5f6c 656e 2b6c 656e 2869  =intro_len+len(i
+00024be0: 6e74 726f 290a 0a20 2020 2023 204d 616b  ntro)..    # Mak
+00024bf0: 6520 6120 6d73 670a 2020 2020 6d73 675f  e a msg.    msg_
+00024c00: 7374 723d 2727 0a20 2020 2066 6f72 2069  str=''.    for i
+00024c10: 6920 696e 206d 7367 3a0a 2020 2020 2020  i in msg:.      
+00024c20: 2020 6966 2066 6f72 6d3a 0a20 2020 2020    if form:.     
+00024c30: 2020 2020 2020 206d 7367 5f73 7472 3d6d         msg_str=m
+00024c40: 7367 5f73 7472 2069 6620 6d73 675f 7374  sg_str if msg_st
+00024c50: 7220 656c 7365 2069 6e74 726f 5f6d 7367  r else intro_msg
+00024c60: 202b 2043 6f6c 6f72 5374 7228 5772 6170   + ColorStr(Wrap
+00024c70: 5374 7269 6e67 2853 7472 2870 7072 696e  String(Str(pprin
+00024c80: 742e 7066 6f72 6d61 7428 6969 292c 6465  t.pformat(ii),de
+00024c90: 6661 756c 743d 276f 7267 2729 2c66 7370  fault='org'),fsp
+00024ca0: 6163 653d 696e 7472 6f5f 6c65 6e20 6966  ace=intro_len if
+00024cb0: 206d 7367 5f73 7472 2065 6c73 6520 302c   msg_str else 0,
+00024cc0: 206e 7370 6163 653d 696e 7472 6f5f 6c65   nspace=intro_le
+00024cd0: 6e2c 6d6f 6465 3d27 7370 6163 6527 292c  n,mode='space'),
+00024ce0: 2a2a 6f70 7473 290a 2020 2020 2020 2020  **opts).        
+00024cf0: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
+00024d00: 2020 6d73 675f 7374 723d 6d73 675f 7374    msg_str=msg_st
+00024d10: 7220 6966 206d 7367 5f73 7472 2065 6c73  r if msg_str els
+00024d20: 6520 696e 7472 6f5f 6d73 6720 2b20 436f  e intro_msg + Co
+00024d30: 6c6f 7253 7472 2857 7261 7053 7472 696e  lorStr(WrapStrin
+00024d40: 6728 5374 7228 6969 2c64 6566 6175 6c74  g(Str(ii,default
+00024d50: 3d27 6f72 6727 292c 6673 7061 6365 3d69  ='org'),fspace=i
+00024d60: 6e74 726f 5f6c 656e 2069 6620 6d73 675f  ntro_len if msg_
+00024d70: 7374 7220 656c 7365 2030 2c20 6e73 7061  str else 0, nspa
+00024d80: 6365 3d69 6e74 726f 5f6c 656e 2c6d 6f64  ce=intro_len,mod
+00024d90: 653d 2773 7061 6365 2729 2c2a 2a6f 7074  e='space'),**opt
+00024da0: 7329 0a0a 2020 2020 6c6f 675f 703d 4661  s)..    log_p=Fa
+00024db0: 6c73 650a 2020 2020 234c 6f67 2066 756e  lse.    #Log fun
+00024dc0: 6374 696f 6e0a 2020 2020 6966 2054 7970  ction.    if Typ
+00024dd0: 6528 6c6f 672c 2766 756e 6374 696f 6e27  e(log,'function'
+00024de0: 293a 0a20 2020 2020 2020 206c 6f67 5f70  ):.        log_p
+00024df0: 3d54 7275 650a 2020 2020 2020 2020 4665  =True.        Fe
+00024e00: 6564 4675 6e63 286c 6f67 2c6d 7367 5f73  edFunc(log,msg_s
+00024e10: 7472 2c2a 2a6f 7074 7329 0a20 2020 2069  tr,**opts).    i
+00024e20: 6620 6973 696e 7374 616e 6365 2870 7269  f isinstance(pri
+00024e30: 6e74 665f 6c6f 675f 6261 7365 2c69 6e74  ntf_log_base,int
+00024e40: 2920 616e 6420 6e6f 7420 6973 696e 7374  ) and not isinst
+00024e50: 616e 6365 2870 7269 6e74 665f 6c6f 675f  ance(printf_log_
+00024e60: 6261 7365 2c62 6f6f 6c29 3a0a 2020 2020  base,bool):.    
+00024e70: 2020 2020 6966 2070 7269 6e74 665f 6c6f      if printf_lo
+00024e80: 675f 6261 7365 203c 206c 6f67 5f6c 6576  g_base < log_lev
+00024e90: 656c 3a0a 2020 2020 2020 2020 2020 2020  el:.            
+00024ea0: 7265 7475 726e 0a20 2020 2023 2053 6176  return.    # Sav
+00024eb0: 6520 6d73 6720 746f 2066 696c 650a 2020  e msg to file.  
+00024ec0: 2020 6966 2027 6627 2069 6e20 6473 7020    if 'f' in dsp 
+00024ed0: 6f72 2027 6127 2069 6e20 6473 703a 0a20  or 'a' in dsp:. 
+00024ee0: 2020 2020 2020 2066 6f72 2069 6920 696e         for ii in
+00024ef0: 206c 6f67 6669 6c65 3a0a 2020 2020 2020   logfile:.      
+00024f00: 2020 2020 2020 6966 2069 6920 616e 6420        if ii and 
+00024f10: 6f73 2e70 6174 682e 6973 6469 7228 6f73  os.path.isdir(os
+00024f20: 2e70 6174 682e 6469 726e 616d 6528 6969  .path.dirname(ii
+00024f30: 2929 3a0a 2020 2020 2020 2020 2020 2020  )):.            
+00024f40: 2020 2020 6c6f 675f 703d 5472 7565 0a20      log_p=True. 
+00024f50: 2020 2020 2020 2020 2020 2020 2020 2077                 w
+00024f60: 6974 6820 6f70 656e 2869 692c 2761 2b27  ith open(ii,'a+'
+00024f70: 2920 6173 2066 3a0a 2020 2020 2020 2020  ) as f:.        
+00024f80: 2020 2020 2020 2020 2020 2020 662e 7772              f.wr
+00024f90: 6974 6528 6d73 675f 7374 722b 6e65 775f  ite(msg_str+new_
+00024fa0: 6c69 6e65 290a 2020 2020 2320 7072 696e  line).    # prin
+00024fb0: 7420 6d73 6720 746f 2073 6372 6565 6e0a  t msg to screen.
+00024fc0: 2020 2020 6966 2028 6c6f 675f 7020 6973      if (log_p is
+00024fd0: 2046 616c 7365 2061 6e64 2027 6127 2069   False and 'a' i
+00024fe0: 6e20 6473 7029 206f 7220 2773 2720 696e  n dsp) or 's' in
+00024ff0: 2064 7370 206f 7220 2765 2720 696e 2064   dsp or 'e' in d
+00025000: 7370 3a0a 2020 2020 2020 2020 2069 6620  sp:.         if 
+00025010: 2765 2720 696e 2064 7370 3a0a 2020 2020  'e' in dsp:.    
+00025020: 2020 2020 2020 2020 2053 7464 4572 7228           StdErr(
+00025030: 6d73 675f 7374 722b 6e65 775f 6c69 6e65  msg_str+new_line
+00025040: 290a 2020 2020 2020 2020 2065 6c73 653a  ).         else:
+00025050: 0a20 2020 2020 2020 2020 2020 2020 5374  .             St
+00025060: 644f 7574 286d 7367 5f73 7472 2b6e 6577  dOut(msg_str+new
+00025070: 5f6c 696e 6529 0a20 2020 2023 2072 6574  _line).    # ret
+00025080: 7572 6e20 6d73 670a 2020 2020 6966 2027  urn msg.    if '
+00025090: 7227 2069 6e20 6473 703a 0a20 2020 2020  r' in dsp:.     
+000250a0: 2020 2020 7265 7475 726e 206d 7367 5f73      return msg_s
+000250b0: 7472 0a0a 6465 6620 436f 6c6f 7253 7472  tr..def ColorStr
+000250c0: 286d 7367 2c2a 2a6f 7074 7329 3a0a 2020  (msg,**opts):.  
+000250d0: 2020 636f 6c6f 723d 6f70 7473 2e67 6574    color=opts.get
+000250e0: 2827 636f 6c6f 7227 2c4e 6f6e 6529 0a20  ('color',None). 
+000250f0: 2020 2063 6f6c 6f72 5f64 623d 6f70 7473     color_db=opts
+00025100: 2e67 6574 2827 636f 6c6f 725f 6462 272c  .get('color_db',
+00025110: 7b27 626c 7565 273a 2033 342c 2027 6772  {'blue': 34, 'gr
+00025120: 6579 273a 2033 302c 2027 7965 6c6c 6f77  ey': 30, 'yellow
+00025130: 273a 2033 332c 2027 6772 6565 6e27 3a20  ': 33, 'green': 
+00025140: 3332 2c20 2763 7961 6e27 3a20 3336 2c20  32, 'cyan': 36, 
+00025150: 276d 6167 656e 7461 273a 2033 352c 2027  'magenta': 35, '
+00025160: 7768 6974 6527 3a20 3337 2c20 2772 6564  white': 37, 'red
+00025170: 273a 2033 317d 290a 2020 2020 6267 5f63  ': 31}).    bg_c
+00025180: 6f6c 6f72 3d6f 7074 732e 6765 7428 2762  olor=opts.get('b
+00025190: 675f 636f 6c6f 7227 2c4e 6f6e 6529 0a20  g_color',None). 
+000251a0: 2020 2062 675f 636f 6c6f 725f 6462 3d6f     bg_color_db=o
+000251b0: 7074 732e 6765 7428 2762 675f 636f 6c6f  pts.get('bg_colo
+000251c0: 725f 6462 272c 7b27 6379 616e 273a 2034  r_db',{'cyan': 4
+000251d0: 362c 2027 7768 6974 6527 3a20 3437 2c20  6, 'white': 47, 
+000251e0: 2767 7265 7927 3a20 3430 2c20 2779 656c  'grey': 40, 'yel
+000251f0: 6c6f 7727 3a20 3433 2c20 2762 6c75 6527  low': 43, 'blue'
+00025200: 3a20 3434 2c20 276d 6167 656e 7461 273a  : 44, 'magenta':
+00025210: 2034 352c 2027 7265 6427 3a20 3431 2c20   45, 'red': 41, 
+00025220: 2767 7265 656e 273a 2034 327d 290a 2020  'green': 42}).  
+00025230: 2020 6174 7472 3d6f 7074 732e 6765 7428    attr=opts.get(
+00025240: 2761 7474 7227 2c4e 6f6e 6529 0a20 2020  'attr',None).   
+00025250: 2061 7474 725f 6462 3d6f 7074 732e 6765   attr_db=opts.ge
+00025260: 7428 2761 7474 725f 6462 272c 7b27 7265  t('attr_db',{'re
+00025270: 7665 7273 6527 3a20 372c 2027 626c 696e  verse': 7, 'blin
+00025280: 6b27 3a20 352c 2763 6f6e 6365 616c 6564  k': 5,'concealed
+00025290: 273a 2038 2c20 2775 6e64 6572 6c69 6e65  ': 8, 'underline
+000252a0: 273a 2034 2c20 2762 6f6c 6427 3a20 317d  ': 4, 'bold': 1}
+000252b0: 290a 2020 2020 6966 2049 734e 6f6e 6528  ).    if IsNone(
+000252c0: 6f73 2e67 6574 656e 7628 2741 4e53 495f  os.getenv('ANSI_
+000252d0: 434f 4c4f 5253 5f44 4953 4142 4c45 4427  COLORS_DISABLED'
+000252e0: 2929 2061 6e64 2028 636f 6c6f 7220 6f72  )) and (color or
+000252f0: 2062 675f 636f 6c6f 7220 6f72 2061 7474   bg_color or att
+00025300: 7229 3a0a 2020 2020 2020 2020 7265 7365  r):.        rese
+00025310: 743d 2727 275c 3033 335b 306d 2727 270a  t='''\033[0m'''.
+00025320: 2020 2020 2020 2020 666d 745f 6d73 673d          fmt_msg=
+00025330: 2727 275c 3033 335b 2564 6d25 7327 2727  '''\033[%dm%s'''
+00025340: 0a20 2020 2020 2020 2069 6620 636f 6c6f  .        if colo
+00025350: 7220 616e 6420 636f 6c6f 7220 696e 2063  r and color in c
+00025360: 6f6c 6f72 5f64 623a 0a20 2020 2020 2020  olor_db:.       
+00025370: 2020 2020 206d 7367 3d66 6d74 5f6d 7367       msg=fmt_msg
+00025380: 2025 2028 636f 6c6f 725f 6462 5b63 6f6c   % (color_db[col
+00025390: 6f72 5d2c 6d73 6729 0a20 2020 2020 2020  or],msg).       
+000253a0: 2069 6620 6267 5f63 6f6c 6f72 2061 6e64   if bg_color and
+000253b0: 2062 675f 636f 6c6f 7220 696e 2062 675f   bg_color in bg_
+000253c0: 636f 6c6f 725f 6462 3a0a 2020 2020 2020  color_db:.      
+000253d0: 2020 2020 2020 6d73 673d 666d 745f 6d73        msg=fmt_ms
+000253e0: 6720 2520 2863 6f6c 6f72 5f64 625b 6267  g % (color_db[bg
+000253f0: 5f63 6f6c 6f72 5d2c 6d73 6729 0a20 2020  _color],msg).   
+00025400: 2020 2020 2069 6620 6174 7472 2061 6e64       if attr and
+00025410: 2061 7474 7220 696e 2061 7474 725f 6462   attr in attr_db
+00025420: 3a0a 2020 2020 2020 2020 2020 2020 6d73  :.            ms
+00025430: 673d 666d 745f 6d73 6720 2520 2861 7474  g=fmt_msg % (att
+00025440: 725f 6462 5b61 7474 725d 2c6d 7367 290a  r_db[attr],msg).
+00025450: 2020 2020 2020 2020 7265 7475 726e 206d          return m
+00025460: 7367 2b72 6573 6574 2023 5375 7070 6f72  sg+reset #Suppor
+00025470: 7420 436f 6c6f 720a 2020 2020 7265 7475  t Color.    retu
+00025480: 726e 206d 7367 2023 4e6f 7420 7375 7070  rn msg #Not supp
+00025490: 6f72 7420 636f 6c6f 720a 0a64 6566 2043  ort color..def C
+000254a0: 6c65 616e 416e 7369 2864 6174 6129 3a0a  leanAnsi(data):.
+000254b0: 2020 2020 616e 7369 5f65 7363 6170 6520      ansi_escape 
+000254c0: 3d20 7265 2e63 6f6d 7069 6c65 2872 275c  = re.compile(r'\
+000254d0: 7831 425c 5b5b 302d 3f5d 2a5b 202d 2f5d  x1B\[[0-?]*[ -/]
+000254e0: 2a5b 402d 7e5d 2729 0a20 2020 2064 6174  *[@-~]').    dat
+000254f0: 615f 7479 7065 3d54 7970 654e 616d 6528  a_type=TypeName(
+00025500: 6461 7461 290a 2020 2020 6966 2064 6174  data).    if dat
+00025510: 615f 7479 7065 2069 6e20 5b27 7374 7227  a_type in ['str'
+00025520: 2c27 6279 7465 7327 5d3a 0a20 2020 2020  ,'bytes']:.     
+00025530: 2020 2072 6574 7572 6e20 616e 7369 5f65     return ansi_e
+00025540: 7363 6170 652e 7375 6228 2727 2c53 7472  scape.sub('',Str
+00025550: 2864 6174 6129 290a 2020 2020 656c 6966  (data)).    elif
+00025560: 2064 6174 615f 7479 7065 2069 6e20 2827   data_type in ('
+00025570: 6c69 7374 272c 2774 7570 6c65 2729 3a0a  list','tuple'):.
+00025580: 2020 2020 2020 2020 7265 7475 726e 205b          return [
+00025590: 436c 6561 6e41 6e73 6928 6969 2920 666f  CleanAnsi(ii) fo
+000255a0: 7220 6969 2069 6e20 6461 7461 5d0a 2020  r ii in data].  
+000255b0: 2020 656c 6966 2064 6174 615f 7479 7065    elif data_type
+000255c0: 203d 3d20 2764 6963 7427 3a0a 2020 2020   == 'dict':.    
+000255d0: 2020 2020 666f 7220 6920 696e 2064 6174      for i in dat
+000255e0: 613a 0a20 2020 2020 2020 2020 2020 2064  a:.            d
+000255f0: 6174 615b 695d 3d43 6c65 616e 416e 7369  ata[i]=CleanAnsi
+00025600: 2864 6174 615b 695d 290a 2020 2020 7265  (data[i]).    re
+00025610: 7475 726e 2064 6174 610a 0a64 6566 2063  turn data..def c
+00025620: 6c69 5f69 6e70 7574 286d 7367 2c2a 2a6f  li_input(msg,**o
+00025630: 7074 7329 3a0a 2020 2020 2727 270a 2020  pts):.    '''.  
+00025640: 2020 434c 4920 496e 7075 7420 636f 6d6d    CLI Input comm
+00025650: 616e 640a 2020 2020 2727 270a 2020 2020  and.    '''.    
+00025660: 6869 6464 656e 3d6f 7074 732e 6765 7428  hidden=opts.get(
+00025670: 2768 6964 6465 6e27 2c6f 7074 732e 6765  'hidden',opts.ge
+00025680: 7428 2770 6173 7377 6427 2c6f 7074 732e  t('passwd',opts.
+00025690: 6765 7428 2770 6173 7377 6f72 6427 2c46  get('password',F
+000256a0: 616c 7365 2929 290a 2020 2020 6966 2068  alse))).    if h
+000256b0: 6964 6465 6e3a 0a20 2020 2020 2020 2069  idden:.        i
+000256c0: 6620 7379 732e 7374 6469 6e2e 6973 6174  f sys.stdin.isat
+000256d0: 7479 2829 3a0a 2020 2020 2020 2020 2020  ty():.          
+000256e0: 2020 7020 3d20 6765 7470 6173 732e 6765    p = getpass.ge
+000256f0: 7470 6173 7328 6d73 6729 0a20 2020 2020  tpass(msg).     
+00025700: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
+00025710: 2020 2020 2070 7269 6e74 6628 6d73 672c       printf(msg,
+00025720: 656e 645f 6c69 6e65 3d27 2729 0a20 2020  end_line='').   
+00025730: 2020 2020 2020 2020 2070 203d 2073 7973           p = sys
+00025740: 2e73 7464 696e 2e72 6561 646c 696e 6528  .stdin.readline(
+00025750: 292e 7273 7472 6970 2829 0a20 2020 2065  ).rstrip().    e
+00025760: 6c73 653a 0a20 2020 2020 2020 2069 6620  lse:.        if 
+00025770: 5079 5665 7228 3229 3a0a 2020 2020 2020  PyVer(2):.      
+00025780: 2020 2020 2020 703d 7261 775f 696e 7075        p=raw_inpu
+00025790: 7428 6d73 6729 0a20 2020 2020 2020 2065  t(msg).        e
+000257a0: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
+000257b0: 2070 3d69 6e70 7574 286d 7367 290a 2020   p=input(msg).  
+000257c0: 2020 7265 7475 726e 2070 0a0a 6465 6620    return p..def 
+000257d0: 5479 7065 4461 7461 2873 7263 2c77 616e  TypeData(src,wan
+000257e0: 745f 7479 7065 3d4e 6f6e 652c 6465 6661  t_type=None,defa
+000257f0: 756c 743d 276f 7267 272c 7370 6c69 7465  ult='org',splite
+00025800: 723d 4e6f 6e65 293a 0a20 2020 2027 2727  r=None):.    '''
+00025810: 436f 6e76 6572 7420 2869 6e70 7574 2964  Convert (input)d
+00025820: 6174 6120 746f 2077 616e 7420 7479 7065  ata to want type
+00025830: 2028 6578 3a20 7374 7220 2d3e 206c 6973   (ex: str -> lis
+00025840: 742c 2069 6e74 2c20 2e2e 2e29 2c20 6361  t, int, ...), ca
+00025850: 6e20 6e6f 7420 636f 6e76 6572 7420 746f  n not convert to
+00025860: 2074 7970 6520 7468 656e 2072 6574 7572   type then retur
+00025870: 6e20 4661 6c73 6527 2727 0a20 2020 2077  n False'''.    w
+00025880: 616e 745f 7479 7065 3d54 7970 654e 616d  ant_type=TypeNam
+00025890: 6528 7761 6e74 5f74 7970 6529 0a20 2020  e(want_type).   
+000258a0: 2069 6620 7761 6e74 5f74 7970 6520 3d3d   if want_type ==
+000258b0: 2027 7374 7227 3a0a 2020 2020 2020 2020   'str':.        
+000258c0: 6966 2069 7369 6e73 7461 6e63 6528 7372  if isinstance(sr
+000258d0: 632c 286c 6973 742c 7475 706c 6529 293a  c,(list,tuple)):
+000258e0: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+000258f0: 6e6f 7420 6973 696e 7374 616e 6365 2873  not isinstance(s
+00025900: 706c 6974 6572 2c73 7472 293a 2073 706c  pliter,str): spl
+00025910: 6974 6572 3d27 2027 0a20 2020 2020 2020  iter=' '.       
+00025920: 2020 2020 2072 6574 7572 6e20 4a6f 696e       return Join
+00025930: 2873 7263 2c73 706c 6974 6572 290a 2020  (src,spliter).  
+00025940: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
+00025950: 2020 2020 2020 2020 7265 7475 726e 2053          return S
+00025960: 7472 2873 7263 2c6d 6f64 653d 2766 6f72  tr(src,mode='for
+00025970: 6365 2729 0a20 2020 2065 6c69 6620 7761  ce').    elif wa
+00025980: 6e74 5f74 7970 6520 3d3d 2027 696e 7427  nt_type == 'int'
+00025990: 3a0a 2020 2020 2020 2020 7265 7475 726e  :.        return
+000259a0: 2049 6e74 2873 7263 2c65 7272 3d54 7275   Int(src,err=Tru
+000259b0: 6529 0a20 2020 2065 6c69 6620 7761 6e74  e).    elif want
+000259c0: 5f74 7970 6520 696e 205b 276c 6973 7427  _type in ['list'
+000259d0: 2c27 7475 706c 6527 5d20 616e 6420 6973  ,'tuple'] and is
+000259e0: 696e 7374 616e 6365 2873 7263 2c73 7472  instance(src,str
+000259f0: 2920 616e 6420 6973 696e 7374 616e 6365  ) and isinstance
+00025a00: 2873 706c 6974 6572 2c73 7472 293a 0a20  (spliter,str):. 
+00025a10: 2020 2020 2020 2069 6620 7761 6e74 5f74         if want_t
+00025a20: 7970 6520 3d3d 2027 7475 706c 6527 3a0a  ype == 'tuple':.
+00025a30: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+00025a40: 726e 2074 7570 6c65 2853 706c 6974 2873  rn tuple(Split(s
+00025a50: 7263 2c73 706c 6974 6572 2929 0a20 2020  rc,spliter)).   
+00025a60: 2020 2020 2072 6574 7572 6e20 5370 6c69       return Spli
+00025a70: 7428 7372 632c 7370 6c69 7465 7229 0a20  t(src,spliter). 
+00025a80: 2020 2065 6c69 6620 7761 6e74 5f74 7970     elif want_typ
+00025a90: 6520 3d3d 2027 7475 706c 6527 2061 6e64  e == 'tuple' and
+00025aa0: 2069 7369 6e73 7461 6e63 6528 7372 632c   isinstance(src,
+00025ab0: 286c 6973 742c 6469 6374 2929 3a0a 2020  (list,dict)):.  
+00025ac0: 2020 2020 2020 6966 2069 7369 6e73 7461        if isinsta
+00025ad0: 6e63 6528 7372 632c 6469 6374 293a 0a20  nce(src,dict):. 
+00025ae0: 2020 2020 2020 2020 2020 2069 6620 7370             if sp
+00025af0: 6c69 7465 7220 3d3d 2027 6b65 7927 3a0a  liter == 'key':.
+00025b00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00025b10: 7265 7475 726e 2074 7570 6c65 2873 7263  return tuple(src
+00025b20: 2e6b 6579 7328 2929 0a20 2020 2020 2020  .keys()).       
+00025b30: 2020 2020 2065 6c69 6620 7370 6c69 7465       elif splite
+00025b40: 7220 3d3d 2027 7661 6c75 6527 3a0a 2020  r == 'value':.  
+00025b50: 2020 2020 2020 2020 2020 2020 2020 7265                re
+00025b60: 7475 726e 2074 7570 6c65 2873 7263 2e76  turn tuple(src.v
+00025b70: 616c 7565 7328 2929 0a20 2020 2020 2020  alues()).       
+00025b80: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
+00025b90: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+00025ba0: 6e20 7475 706c 6528 7372 632e 6974 656d  n tuple(src.item
+00025bb0: 7328 2929 0a20 2020 2020 2020 2072 6574  s()).        ret
+00025bc0: 7572 6e20 7475 706c 6528 7372 6329 0a20  urn tuple(src). 
+00025bd0: 2020 2065 6c69 6620 7761 6e74 5f74 7970     elif want_typ
+00025be0: 6520 3d3d 2027 6c69 7374 2720 616e 6420  e == 'list' and 
+00025bf0: 6973 696e 7374 616e 6365 2873 7263 2c28  isinstance(src,(
+00025c00: 7475 706c 652c 6469 6374 2929 3a0a 2020  tuple,dict)):.  
+00025c10: 2020 2020 2020 6966 2069 7369 6e73 7461        if isinsta
+00025c20: 6e63 6528 7372 632c 6469 6374 293a 0a20  nce(src,dict):. 
+00025c30: 2020 2020 2020 2020 2020 2069 6620 7370             if sp
+00025c40: 6c69 7465 7220 3d3d 2027 6b65 7927 3a0a  liter == 'key':.
+00025c50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00025c60: 7265 7475 726e 206c 6973 7428 7372 632e  return list(src.
+00025c70: 6b65 7973 2829 290a 2020 2020 2020 2020  keys()).        
+00025c80: 2020 2020 656c 6966 2073 706c 6974 6572      elif spliter
+00025c90: 203d 3d20 2776 616c 7565 273a 0a20 2020   == 'value':.   
+00025ca0: 2020 2020 2020 2020 2020 2020 2072 6574               ret
+00025cb0: 7572 6e20 6c69 7374 2873 7263 2e76 616c  urn list(src.val
+00025cc0: 7565 7328 2929 0a20 2020 2020 2020 2020  ues()).         
+00025cd0: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
+00025ce0: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+00025cf0: 6c69 7374 2873 7263 2e69 7465 6d73 2829  list(src.items()
+00025d00: 290a 2020 2020 2020 2020 7265 7475 726e  ).        return
+00025d10: 206c 6973 7428 7372 6329 0a20 2020 2065   list(src).    e
+00025d20: 6c69 6620 5479 7065 2873 7263 2c77 616e  lif Type(src,wan
+00025d30: 745f 7479 7065 293a 0a20 2020 2020 2020  t_type):.       
+00025d40: 2072 6574 7572 6e20 7372 630a 2020 2020   return src.    
+00025d50: 6966 2069 7369 6e73 7461 6e63 6528 7372  if isinstance(sr
+00025d60: 632c 7374 7229 3a0a 2020 2020 2020 2020  c,str):.        
+00025d70: 7265 7475 726e 2046 6f72 6d44 6174 6128  return FormData(
+00025d80: 7372 632c 6465 6661 756c 743d 276f 7267  src,default='org
+00025d90: 2729 0a20 2020 2072 6574 7572 6e20 4465  ').    return De
+00025da0: 6661 756c 7428 7372 632c 6465 6661 756c  fault(src,defaul
+00025db0: 7429 0a0a 6465 6620 4d6f 7665 4461 7461  t)..def MoveData
+00025dc0: 2873 7263 2c64 6174 613d 4e6f 6e65 2c74  (src,data=None,t
+00025dd0: 6f3d 4e6f 6e65 2c66 726f 6d5f 6964 783d  o=None,from_idx=
+00025de0: 4e6f 6e65 2c66 6f72 6365 3d46 616c 7365  None,force=False
+00025df0: 2c64 6566 6175 6c74 3d27 6f72 6727 293a  ,default='org'):
+00025e00: 0a20 2020 2027 2727 0a20 2020 2073 7570  .    '''.    sup
+00025e10: 706f 7274 2073 7263 2074 7970 6520 6973  port src type is
+00025e20: 206c 6973 742c 7374 722c 2874 7570 6c65   list,str,(tuple
+00025e30: 290a 2020 2020 6d6f 7669 6e67 2066 6f72  ).    moving for
+00025e40: 6d61 7420 3a20 6461 7461 2864 6174 6129  mat : data(data)
+00025e50: 206f 7220 6672 6f6d 5f69 6478 2869 6e74   or from_idx(int
+00025e60: 290a 2020 2020 2020 2d20 6461 7461 203a  ).      - data :
+00025e70: 2069 6620 7372 6320 6861 7320 6d61 6e79   if src has many
+00025e80: 2073 616d 6520 6461 7461 2074 6865 6e20   same data then 
+00025e90: 6a75 7374 206b 6565 7020 7369 6e67 6c65  just keep single
+00025ea0: 2064 6174 6120 6174 206d 6f76 6564 0a20   data at moved. 
+00025eb0: 2020 206d 6f76 696e 6720 6465 7374 2020     moving dest  
+00025ec0: 203a 2074 6f28 696e 7429 0a20 2020 206d   : to(int).    m
+00025ed0: 6f76 6520 6461 7461 206f 7220 696e 6465  ove data or inde
+00025ee0: 7828 6672 6f6d 5f69 6478 2920 746f 2077  x(from_idx) to w
+00025ef0: 616e 7420 696e 6465 7828 746f 290a 2020  ant index(to).  
+00025f00: 2020 2020 666f 7263 653d 5472 7565 3a20      force=True: 
+00025f10: 6576 656e 2074 7570 6c65 2074 6f20 6d6f  even tuple to mo
+00025f20: 7665 0a20 2020 2069 6620 6e6f 7420 7375  ve.    if not su
+00025f30: 7070 6f72 7420 7468 656e 2072 6574 7572  pport then retur
+00025f40: 6e20 6465 6661 756c 740a 2020 2020 6465  n default.    de
+00025f50: 6661 756c 7420 3a20 6f72 670a 2020 2020  fault : org.    
+00025f60: 2727 270a 2020 2020 5f74 7570 6c65 3d46  '''.    _tuple=F
+00025f70: 616c 7365 0a20 2020 2073 7263 5f74 7970  alse.    src_typ
+00025f80: 653d 5479 7065 4e61 6d65 2873 7263 290a  e=TypeName(src).
+00025f90: 2020 2020 6966 2073 7263 5f74 7970 6520      if src_type 
+00025fa0: 3d3d 2027 7475 706c 6527 3a0a 2020 2020  == 'tuple':.    
+00025fb0: 2020 2020 6966 206e 6f74 2066 6f72 6365      if not force
+00025fc0: 3a20 7265 7475 726e 2044 6566 6175 6c74  : return Default
+00025fd0: 2873 7263 2c64 6566 6175 6c74 290a 2020  (src,default).  
+00025fe0: 2020 2020 2020 5f74 7570 6c65 3d54 7275        _tuple=Tru
+00025ff0: 650a 2020 2020 2020 2020 7372 635f 7479  e.        src_ty
+00026000: 7065 3d27 6c69 7374 270a 2020 2020 6966  pe='list'.    if
+00026010: 2073 7263 5f74 7970 6520 696e 205b 276c   src_type in ['l
+00026020: 6973 7427 2c27 7374 7227 5d20 616e 6420  ist','str'] and 
+00026030: 7372 633a 0a20 2020 2020 2020 2073 7263  src:.        src
+00026040: 3d6c 6973 7428 7372 6329 0a20 2020 2020  =list(src).     
+00026050: 2020 2069 6620 746f 203d 3d20 276c 6173     if to == 'las
+00026060: 7427 3a20 746f 3d2d 310a 2020 2020 2020  t': to=-1.      
+00026070: 2020 656c 6966 2074 6f20 3d3d 2027 6669    elif to == 'fi
+00026080: 7273 7427 3a20 746f 3d30 0a20 2020 2020  rst': to=0.     
+00026090: 2020 2069 6620 6973 696e 7374 616e 6365     if isinstance
+000260a0: 2866 726f 6d5f 6964 782c 696e 7429 2061  (from_idx,int) a
+000260b0: 6e64 2069 7369 6e73 7461 6e63 6528 746f  nd isinstance(to
+000260c0: 2c69 6e74 293a 0a20 2020 2020 2020 2020  ,int):.         
+000260d0: 2020 2069 6620 6c65 6e28 7372 6329 203e     if len(src) >
+000260e0: 2061 6273 2866 726f 6d5f 6964 7829 3a0a   abs(from_idx):.
+000260f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00026100: 746f 3d46 6978 496e 6465 7828 7372 632c  to=FixIndex(src,
+00026110: 746f 290a 2020 2020 2020 2020 2020 2020  to).            
+00026120: 2020 2020 6966 2066 726f 6d5f 6964 7821      if from_idx!
+00026130: 3d74 6f3a 0a20 2020 2020 2020 2020 2020  =to:.           
+00026140: 2020 2020 2020 2020 2069 6620 746f 203d           if to =
+00026150: 3d20 2d31 3a0a 2020 2020 2020 2020 2020  = -1:.          
+00026160: 2020 2020 2020 2020 2020 2020 2020 7372                sr
+00026170: 632e 6170 7065 6e64 2873 7263 5b66 726f  c.append(src[fro
+00026180: 6d5f 6964 785d 290a 2020 2020 2020 2020  m_idx]).        
+00026190: 2020 2020 2020 2020 2020 2020 656c 6966              elif
+000261a0: 2074 6f20 3d3d 2030 3a0a 2020 2020 2020   to == 0:.      
+000261b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000261c0: 2020 7372 633d 5b73 7263 5b66 726f 6d5f    src=[src[from_
+000261d0: 6964 785d 5d2b 7372 630a 2020 2020 2020  idx]]+src.      
+000261e0: 2020 2020 2020 2020 2020 2020 2020 656c                el
+000261f0: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
+00026200: 2020 2020 2020 2020 2020 2020 7372 633d              src=
+00026210: 7372 635b 3a74 6f5d 2b5b 7372 635b 6672  src[:to]+[src[fr
+00026220: 6f6d 5f69 6478 5d5d 2b73 7263 5b74 6f3a  om_idx]]+src[to:
+00026230: 5d0a 2020 2020 2020 2020 2020 2020 2020  ].              
+00026240: 2020 2020 2020 7372 635b 746f 5d3d 7372        src[to]=sr
+00026250: 635b 6672 6f6d 5f69 6478 5d0a 2020 2020  c[from_idx].    
+00026260: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00026270: 6465 6c20 7372 635b 6672 6f6d 5f69 6478  del src[from_idx
+00026280: 5d0a 2020 2020 2020 2020 656c 6966 206e  ].        elif n
+00026290: 6f74 2049 734e 6f6e 6528 6461 7461 2920  ot IsNone(data) 
+000262a0: 616e 6420 6973 696e 7374 616e 6365 2874  and isinstance(t
+000262b0: 6f2c 696e 7429 3a0a 2020 2020 2020 2020  o,int):.        
+000262c0: 2020 2020 746f 3d46 6978 496e 6465 7828      to=FixIndex(
+000262d0: 7372 632c 746f 290a 2020 2020 2020 2020  src,to).        
+000262e0: 2020 2020 7372 633d 5b69 2066 6f72 2069      src=[i for i
+000262f0: 2069 6e20 7372 6320 6966 2069 213d 6461   in src if i!=da
+00026300: 7461 5d0a 2020 2020 2020 2020 2020 2020  ta].            
+00026310: 6966 2074 6f20 3d3d 202d 313a 0a20 2020  if to == -1:.   
+00026320: 2020 2020 2020 2020 2020 2020 2073 7263               src
+00026330: 2e61 7070 656e 6428 6461 7461 290a 2020  .append(data).  
+00026340: 2020 2020 2020 2020 2020 656c 6966 2074            elif t
+00026350: 6f20 3d3d 2030 3a0a 2020 2020 2020 2020  o == 0:.        
+00026360: 2020 2020 2020 2020 7372 633d 5b64 6174          src=[dat
+00026370: 615d 2b73 7263 0a20 2020 2020 2020 2020  a]+src.         
+00026380: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
+00026390: 2020 2020 2020 2020 2073 7263 3d73 7263           src=src
+000263a0: 5b3a 746f 5d2b 5b64 6174 615d 2b73 7263  [:to]+[data]+src
+000263b0: 5b74 6f3a 5d0a 2020 2020 2020 2020 6966  [to:].        if
+000263c0: 205f 7475 706c 653a 2072 6574 7572 6e20   _tuple: return 
+000263d0: 7475 706c 6528 7372 6329 0a20 2020 2020  tuple(src).     
+000263e0: 2020 2065 6c69 6620 7372 635f 7479 7065     elif src_type
+000263f0: 203d 3d20 2773 7472 273a 2072 6574 7572   == 'str': retur
+00026400: 6e20 4a6f 696e 2873 7263 2c27 2729 0a20  n Join(src,''). 
+00026410: 2020 2020 2020 2072 6574 7572 6e20 7372         return sr
+00026420: 630a 2020 2020 7265 7475 726e 2044 6566  c.    return Def
+00026430: 6175 6c74 2873 7263 2c64 6566 6175 6c74  ault(src,default
+00026440: 290a 0a0a 2369 6620 5f5f 6e61 6d65 5f5f  )...#if __name__
+00026450: 203d 3d20 225f 5f6d 6169 6e5f 5f22 3a0a   == "__main__":.
+00026460: 2320 2020 2023 2049 6e74 6567 6572 0a23  #    # Integer.#
+00026470: 2020 2020 7072 696e 7428 2247 6574 2831      print("Get(1
+00026480: 3233 3435 293a 222c 4765 7428 3132 3334  2345):",Get(1234
+00026490: 3529 290a 2320 2020 2070 7269 6e74 2822  5)).#    print("
+000264a0: 4765 7428 3132 3334 352c 3129 3a22 2c47  Get(12345,1):",G
+000264b0: 6574 2831 3233 3435 2c31 2929 0a23 2020  et(12345,1)).#  
+000264c0: 2020 2320 5374 7269 6e67 0a23 2020 2020    # String.#    
+000264d0: 7072 696e 7428 2247 6574 2827 3132 3334  print("Get('1234
+000264e0: 3527 293a 222c 4765 7428 2731 3233 3435  5'):",Get('12345
+000264f0: 2729 290a 2320 2020 2070 7269 6e74 2822  ')).#    print("
+00026500: 4765 7428 2731 3233 3435 272c 3029 3a22  Get('12345',0):"
+00026510: 2c47 6574 2827 3132 3334 3527 2c30 2929  ,Get('12345',0))
+00026520: 0a23 2020 2020 7072 696e 7428 2247 6574  .#    print("Get
+00026530: 2827 3132 3334 3527 2c31 293a 222c 4765  ('12345',1):",Ge
+00026540: 7428 2731 3233 3435 272c 3129 290a 2320  t('12345',1)).# 
+00026550: 2020 2070 7269 6e74 2822 4765 7428 2731     print("Get('1
+00026560: 3233 3435 272c 3429 3a22 2c47 6574 2827  2345',4):",Get('
+00026570: 3132 3334 3527 2c34 2929 0a23 2020 2020  12345',4)).#    
+00026580: 7072 696e 7428 2247 6574 2827 3132 3334  print("Get('1234
+00026590: 3527 2c35 293a 222c 4765 7428 2731 3233  5',5):",Get('123
+000265a0: 3435 272c 3529 290a 2320 2020 2070 7269  45',5)).#    pri
+000265b0: 6e74 2822 4765 7428 2731 3233 3435 272c  nt("Get('12345',
+000265c0: 2d31 293a 222c 4765 7428 2731 3233 3435  -1):",Get('12345
+000265d0: 272c 2d31 2929 0a23 2020 2020 7072 696e  ',-1)).#    prin
+000265e0: 7428 2247 6574 2827 3132 3334 3527 2c2d  t("Get('12345',-
+000265f0: 3529 3a22 2c47 6574 2827 3132 3334 3527  5):",Get('12345'
+00026600: 2c2d 3529 290a 2320 2020 2070 7269 6e74  ,-5)).#    print
+00026610: 2822 4765 7428 2731 3233 3435 272c 2d37  ("Get('12345',-7
+00026620: 293a 222c 4765 7428 2731 3233 3435 272c  ):",Get('12345',
+00026630: 2d37 2929 0a23 2020 2020 2320 4c69 7374  -7)).#    # List
+00026640: 0a23 2020 2020 7072 696e 7428 2247 6574  .#    print("Get
+00026650: 285b 312c 322c 332c 342c 355d 293a 222c  ([1,2,3,4,5]):",
+00026660: 4765 7428 5b31 2c32 2c33 2c34 2c35 5d29  Get([1,2,3,4,5])
+00026670: 290a 2320 2020 2070 7269 6e74 2822 4765  ).#    print("Ge
+00026680: 7428 5b31 2c32 2c33 2c34 2c35 5d2c 3129  t([1,2,3,4,5],1)
+00026690: 3a22 2c47 6574 285b 312c 322c 332c 342c  :",Get([1,2,3,4,
+000266a0: 355d 2c31 2929 0a23 2020 2020 7072 696e  5],1)).#    prin
+000266b0: 7428 2247 6574 285b 312c 322c 332c 342c  t("Get([1,2,3,4,
+000266c0: 355d 2c28 312c 3329 293a 222c 4765 7428  5],(1,3)):",Get(
+000266d0: 5b31 2c32 2c33 2c34 2c35 5d2c 2831 2c33  [1,2,3,4,5],(1,3
+000266e0: 2929 290a 2320 2020 2070 7269 6e74 2822  ))).#    print("
+000266f0: 4765 7428 5b31 2c32 2c33 2c34 2c35 5d2c  Get([1,2,3,4,5],
+00026700: 2731 2d33 2729 293a 222c 4765 7428 5b31  '1-3')):",Get([1
+00026710: 2c32 2c33 2c34 2c35 5d2c 2731 2d33 2729  ,2,3,4,5],'1-3')
+00026720: 290a 2320 2020 2070 7269 6e74 2822 4765  ).#    print("Ge
+00026730: 7428 5b31 2c32 2c33 2c34 2c35 5d2c 2d31  t([1,2,3,4,5],-1
+00026740: 2929 3a22 2c47 6574 285b 312c 322c 332c  )):",Get([1,2,3,
+00026750: 342c 355d 2c2d 3129 290a 2320 2020 2070  4,5],-1)).#    p
+00026760: 7269 6e74 2822 4765 7428 5b31 2c32 2c33  rint("Get([1,2,3
+00026770: 2c34 2c35 5d2c 2d35 2929 3a22 2c47 6574  ,4,5],-5)):",Get
+00026780: 285b 312c 322c 332c 342c 355d 2c2d 3529  ([1,2,3,4,5],-5)
+00026790: 290a 2320 2020 2070 7269 6e74 2822 4765  ).#    print("Ge
+000267a0: 7428 5b31 2c32 2c33 2c34 2c35 5d2c 2d36  t([1,2,3,4,5],-6
+000267b0: 2929 3a22 2c47 6574 285b 312c 322c 332c  )):",Get([1,2,3,
+000267c0: 342c 355d 2c2d 3629 290a 2320 2020 2070  4,5],-6)).#    p
+000267d0: 7269 6e74 2822 4765 7428 5b31 2c32 2c33  rint("Get([1,2,3
+000267e0: 2c34 2c35 5d2c 3529 293a 222c 4765 7428  ,4,5],5)):",Get(
+000267f0: 5b31 2c32 2c33 2c34 2c35 5d2c 3529 290a  [1,2,3,4,5],5)).
+00026800: 2320 2020 2070 7269 6e74 2822 4765 7428  #    print("Get(
+00026810: 5b31 2c32 2c33 2c34 2c35 5d2c 2731 7c32  [1,2,3,4,5],'1|2
+00026820: 2729 293a 222c 4765 7428 5b31 2c32 2c33  ')):",Get([1,2,3
+00026830: 2c34 2c35 5d2c 2731 7c32 2729 290a 2320  ,4,5],'1|2')).# 
+00026840: 2020 2070 7269 6e74 2822 4765 7428 5b31     print("Get([1
+00026850: 2c32 2c33 2c34 2c35 5d2c 2731 7c32 272c  ,2,3,4,5],'1|2',
+00026860: 6964 785f 6f6e 6c79 3d54 7275 6529 293a  idx_only=True)):
+00026870: 222c 4765 7428 5b31 2c32 2c33 2c34 2c35  ",Get([1,2,3,4,5
+00026880: 5d2c 2731 7c32 272c 6964 785f 6f6e 6c79  ],'1|2',idx_only
+00026890: 3d54 7275 6529 290a 2320 2020 2023 2044  =True)).#    # D
+000268a0: 6963 740a 2320 2020 2070 7269 6e74 2822  ict.#    print("
+000268b0: 4765 7428 7b27 6127 3a7b 2762 273a 7b27  Get({'a':{'b':{'
+000268c0: 6327 3a31 2c27 6427 3a32 7d2c 2765 273a  c':1,'d':2},'e':
+000268d0: 337d 2c27 6627 3a34 7d29 3a22 2c47 6574  3},'f':4}):",Get
+000268e0: 287b 2761 273a 7b27 6227 3a7b 2763 273a  ({'a':{'b':{'c':
+000268f0: 312c 2764 273a 327d 2c27 6527 3a33 7d2c  1,'d':2},'e':3},
+00026900: 2766 273a 347d 2929 0a23 2020 2020 7072  'f':4})).#    pr
+00026910: 696e 7428 2247 6574 287b 2761 273a 7b27  int("Get({'a':{'
+00026920: 6227 3a7b 2763 273a 312c 2764 273a 327d  b':{'c':1,'d':2}
+00026930: 2c27 6527 3a33 7d2c 2766 273a 347d 2c27  ,'e':3},'f':4},'
+00026940: 2f61 2f62 2f63 2729 3a22 2c47 6574 287b  /a/b/c'):",Get({
+00026950: 2761 273a 7b27 6227 3a7b 2763 273a 312c  'a':{'b':{'c':1,
+00026960: 2764 273a 327d 2c27 6527 3a33 7d2c 2766  'd':2},'e':3},'f
+00026970: 273a 347d 2c27 2f61 2f62 2f63 2729 290a  ':4},'/a/b/c')).
+00026980: 2320 2020 2070 7269 6e74 2822 4765 7428  #    print("Get(
+00026990: 7b27 6127 3a7b 2762 273a 7b27 6327 3a31  {'a':{'b':{'c':1
+000269a0: 2c27 6427 3a32 7d2c 2765 273a 337d 2c27  ,'d':2},'e':3},'
+000269b0: 6627 3a34 7d2c 2761 2f62 2f64 2729 3a22  f':4},'a/b/d'):"
+000269c0: 2c47 6574 287b 2761 273a 7b27 6227 3a7b  ,Get({'a':{'b':{
+000269d0: 2763 273a 312c 2764 273a 327d 2c27 6527  'c':1,'d':2},'e'
+000269e0: 3a33 7d2c 2766 273a 347d 2c27 612f 622f  :3},'f':4},'a/b/
+000269f0: 6427 2929 0a23 2020 2020 7072 696e 7428  d')).#    print(
+00026a00: 2247 6574 287b 2761 273a 7b27 6227 3a7b  "Get({'a':{'b':{
+00026a10: 2763 273a 312c 2764 273a 327d 2c27 6527  'c':1,'d':2},'e'
+00026a20: 3a33 7d2c 2766 273a 347d 2c27 6627 293a  :3},'f':4},'f'):
+00026a30: 222c 4765 7428 7b27 6127 3a7b 2762 273a  ",Get({'a':{'b':
+00026a40: 7b27 6327 3a31 2c27 6427 3a32 7d2c 2765  {'c':1,'d':2},'e
+00026a50: 273a 337d 2c27 6627 3a34 7d2c 2766 2729  ':3},'f':4},'f')
+00026a60: 290a 2320 2020 2070 7269 6e74 2822 4765  ).#    print("Ge
+00026a70: 7428 7b27 6127 3a7b 2762 273a 7b27 6327  t({'a':{'b':{'c'
+00026a80: 3a31 2c27 6427 3a32 7d2c 2765 273a 337d  :1,'d':2},'e':3}
+00026a90: 2c27 6627 3a34 7d2c 2761 2729 3a22 2c47  ,'f':4},'a'):",G
+00026aa0: 6574 287b 2761 273a 7b27 6227 3a7b 2763  et({'a':{'b':{'c
+00026ab0: 273a 312c 2764 273a 327d 2c27 6527 3a33  ':1,'d':2},'e':3
+00026ac0: 7d2c 2766 273a 347d 2c27 6127 2929 0a23  },'f':4},'a')).#
+00026ad0: 2020 2020 7072 696e 7428 2247 6574 287b      print("Get({
+00026ae0: 2761 273a 7b27 6227 3a7b 2763 273a 312c  'a':{'b':{'c':1,
+00026af0: 2764 273a 327d 2c27 6527 3a33 7d2c 2766  'd':2},'e':3},'f
+00026b00: 273a 347d 2c2d 3129 3a22 2c47 6574 287b  ':4},-1):",Get({
+00026b10: 2761 273a 7b27 6227 3a7b 2763 273a 312c  'a':{'b':{'c':1,
+00026b20: 2764 273a 327d 2c27 6527 3a33 7d2c 2766  'd':2},'e':3},'f
+00026b30: 273a 347d 2c2d 3129 290a 2320 2020 2070  ':4},-1)).#    p
+00026b40: 7269 6e74 2822 4765 7428 7b27 6127 3a7b  rint("Get({'a':{
+00026b50: 2762 273a 7b27 6327 3a31 2c27 6427 3a32  'b':{'c':1,'d':2
+00026b60: 7d2c 2765 273a 337d 2c27 6627 3a34 7d2c  },'e':3},'f':4},
+00026b70: 2d31 2c69 6478 5f6f 6e6c 793d 5472 7565  -1,idx_only=True
+00026b80: 293a 222c 4765 7428 7b27 6127 3a7b 2762  ):",Get({'a':{'b
+00026b90: 273a 7b27 6327 3a31 2c27 6427 3a32 7d2c  ':{'c':1,'d':2},
+00026ba0: 2765 273a 337d 2c27 6627 3a34 7d2c 2d31  'e':3},'f':4},-1
+00026bb0: 2c69 6478 5f6f 6e6c 793d 5472 7565 2929  ,idx_only=True))
+00026bc0: 0a23 2020 2020 7072 696e 7428 2247 6574  .#    print("Get
+00026bd0: 287b 2761 273a 7b27 6227 3a7b 2763 273a  ({'a':{'b':{'c':
+00026be0: 312c 2764 273a 327d 2c27 6527 3a33 7d2c  1,'d':2},'e':3},
+00026bf0: 2766 273a 342c 2767 273a 357d 2c28 312c  'f':4,'g':5},(1,
+00026c00: 3229 293a 222c 4765 7428 7b27 6127 3a7b  2)):",Get({'a':{
+00026c10: 2762 273a 7b27 6327 3a31 2c27 6427 3a32  'b':{'c':1,'d':2
+00026c20: 7d2c 2765 273a 337d 2c27 6627 3a34 2c27  },'e':3},'f':4,'
+00026c30: 6727 3a35 7d2c 2831 2c32 2929 290a 2320  g':5},(1,2))).# 
+00026c40: 2020 2023 204d 6f64 756c 650a 2320 2020     # Module.#   
+00026c50: 206d 653d 4d79 4d6f 6475 6c65 2829 0a23   me=MyModule().#
+00026c60: 2020 2020 2370 7269 6e74 2822 4765 7428      #print("Get(
+00026c70: 6d65 293a 222c 4765 7428 6d65 2929 0a23  me):",Get(me)).#
+00026c80: 2020 2020 7072 696e 7428 2247 6574 286d      print("Get(m
+00026c90: 652c 2747 6574 2729 3a22 2c47 6574 286d  e,'Get'):",Get(m
+00026ca0: 652c 2747 6574 2729 290a 2320 2020 2070  e,'Get')).#    p
+00026cb0: 7269 6e74 2822 4765 7428 6d65 2c27 4765  rint("Get(me,'Ge
+00026cc0: 7427 2c27 496d 706f 7274 2729 3a22 2c47  t','Import'):",G
+00026cd0: 6574 286d 652c 2747 6574 272c 2749 6d70  et(me,'Get','Imp
+00026ce0: 6f72 7427 2929 0a23 2020 2020 7072 696e  ort')).#    prin
+00026cf0: 7428 2247 6574 286d 652c 2766 756e 635f  t("Get(me,'func_
+00026d00: 6c69 7374 2729 3a22 2c47 6574 286d 652c  list'):",Get(me,
+00026d10: 2766 756e 635f 6c69 7374 2729 290a 2320  'func_list')).# 
+00026d20: 2020 200a 2320 2020 2070 7269 6e74 2827     .#    print('
+00026d30: 3120 3a20 272c 5479 7065 4e61 6d65 2831  1 : ',TypeName(1
+00026d40: 2929 0a23 2020 2020 7072 696e 7428 2770  )).#    print('p
+00026d50: 696e 6720 3a20 272c 5479 7065 4e61 6d65  ing : ',TypeName
+00026d60: 2827 7069 6e67 2729 290a 2320 2020 2070  ('ping')).#    p
+00026d70: 7269 6e74 2827 6675 6e63 7469 6f6e 2070  rint('function p
+00026d80: 696e 6720 3a20 272c 5479 7065 4e61 6d65  ing : ',TypeName
+00026d90: 2870 696e 6729 290a 2320 2020 2070 7269  (ping)).#    pri
+00026da0: 6e74 2827 696e 7420 3a20 272c 5479 7065  nt('int : ',Type
+00026db0: 4e61 6d65 2869 6e74 2929 0a23 2020 2020  Name(int)).#    
+00026dc0: 7072 696e 7428 2773 7472 203a 2027 2c54  print('str : ',T
+00026dd0: 7970 654e 616d 6528 7374 7229 290a 2320  ypeName(str)).# 
+00026de0: 2020 2070 7269 6e74 2827 6675 6e63 7469     print('functi
+00026df0: 6f6e 203a 2027 2c54 7970 654e 616d 6528  on : ',TypeName(
+00026e00: 2766 756e 6374 696f 6e27 2929 0a23 2020  'function')).#  
+00026e10: 2020 7072 696e 7428 2763 6c61 7373 6f62    print('classob
+00026e20: 6a20 3a20 272c 5479 7065 4e61 6d65 2827  j : ',TypeName('
+00026e30: 636c 6173 736f 626a 2729 290a 2320 2020  classobj')).#   
+00026e40: 2070 7269 6e74 2827 332e 3134 203a 2027   print('3.14 : '
+00026e50: 2c54 7970 654e 616d 6528 332e 3134 2929  ,TypeName(3.14))
+00026e60: 0a23 2020 2020 7072 696e 7428 2757 4542  .#    print('WEB
+00026e70: 203a 2027 2c54 7970 654e 616d 6528 2757   : ',TypeName('W
+00026e80: 4542 2729 290a 2320 2020 2070 7269 6e74  EB')).#    print
+00026e90: 2827 636c 6173 7320 5745 4220 3a20 272c  ('class WEB : ',
+00026ea0: 5479 7065 4e61 6d65 2857 4542 2929 0a23  TypeName(WEB)).#
+00026eb0: 2020 2020 7072 696e 7428 2762 6f6f 6c20      print('bool 
+00026ec0: 3a20 272c 5479 7065 4e61 6d65 2862 6f6f  : ',TypeName(boo
+00026ed0: 6c29 290a 2320 2020 2070 7269 6e74 2827  l)).#    print('
+00026ee0: 4661 6c73 6520 3a20 272c 5479 7065 4e61  False : ',TypeNa
+00026ef0: 6d65 2846 616c 7365 2929 0a23 2020 2020  me(False)).#    
+00026f00: 7072 696e 7428 2754 7275 6520 3a20 272c  print('True : ',
+00026f10: 5479 7065 4e61 6d65 2854 7275 6529 290a  TypeName(True)).
+00026f20: 2320 2020 2070 7269 6e74 2827 4e6f 6e65  #    print('None
+00026f30: 203a 2027 2c54 7970 654e 616d 6528 4e6f   : ',TypeName(No
+00026f40: 6e65 2929 0a20 2020 2023 2046 756e 6374  ne)).    # Funct
+00026f50: 696f 6e0a 2320 2020 2064 6566 204b 4c6f  ion.#    def KLo
+00026f60: 6728 696e 7073 2c6c 6f67 5f6c 6576 656c  g(inps,log_level
+00026f70: 3d33 2c2a 2a6f 7074 7329 3a0a 2320 2020  =3,**opts):.#   
+00026f80: 2020 2020 2070 7269 6e74 2822 4b4c 6f67       print("KLog
+00026f90: 3a22 2c27 3a27 2c69 6e70 732c 276c 6f67  :",':',inps,'log
+00026fa0: 5f6c 6576 656c 3d27 2c6c 6f67 5f6c 6576  _level=',log_lev
+00026fb0: 656c 290a 2320 0a23 2020 2020 7072 696e  el).# .#    prin
+00026fc0: 7428 274b 6c6f 6731 3a27 2c46 6565 6446  t('Klog1:',FeedF
+00026fd0: 756e 6328 274b 4c6f 6727 2c69 6e70 733d  unc('KLog',inps=
+00026fe0: 2731 3131 3127 2c6c 6f67 5f6c 6576 656c  '1111',log_level
+00026ff0: 3d39 2929 0a23 2020 2020 7072 696e 7428  =9)).#    print(
+00027000: 274b 6c6f 6732 3a27 2c46 6565 6446 756e  'Klog2:',FeedFun
+00027010: 6328 274b 4c6f 6727 2c27 616b 6427 2c27  c('KLog','akd','
+00027020: 7575 7575 7575 272c 6c6f 675f 6c65 7665  uuuuuu',log_leve
+00027030: 6c3d 382c 6162 633d 3333 2929 0a23 2020  l=8,abc=33)).#  
+00027040: 2020 7072 696e 7428 274b 6c6f 6733 3a27    print('Klog3:'
+00027050: 2c46 6565 6446 756e 6328 274b 4c6f 6727  ,FeedFunc('KLog'
+00027060: 2c6c 6f67 5f6c 6576 656c 3d38 2c61 6263  ,log_level=8,abc
+00027070: 3d33 3329 290a 2320 2020 2070 7269 6e74  =33)).#    print
+00027080: 2827 696e 743a 272c 4665 6564 4675 6e63  ('int:',FeedFunc
+00027090: 2869 6e74 2c27 3333 272c 6261 7365 3d31  (int,'33',base=1
+000270a0: 3029 290a 2320 2020 2070 7269 6e74 2827  0)).#    print('
+000270b0: 7374 723a 272c 4665 6564 4675 6e63 2873  str:',FeedFunc(s
+000270c0: 7472 2c33 3329 290a 2320 2020 2070 7269  tr,33)).#    pri
+000270d0: 6e74 2827 7374 723a 272c 4665 6564 4675  nt('str:',FeedFu
+000270e0: 6e63 2873 7472 2c62 2733 3327 2929 0a23  nc(str,b'33')).#
+000270f0: 2020 2020 7072 696e 7428 276c 6973 743a      print('list:
+00027100: 272c 4665 6564 4675 6e63 286c 6973 742c  ',FeedFunc(list,
+00027110: 2733 3327 2929 0a23 2020 2020 7072 696e  '33')).#    prin
+00027120: 7428 276c 6973 743a 272c 4665 6564 4675  t('list:',FeedFu
+00027130: 6e63 286c 6973 7429 290a 2320 2020 2070  nc(list)).#    p
+00027140: 7269 6e74 2827 6469 6374 3a27 2c46 6565  rint('dict:',Fee
+00027150: 6446 756e 6328 6469 6374 2c5b 2827 6161  dFunc(dict,[('aa
+00027160: 272c 2733 3327 295d 2929 0a23 2020 2020  ','33')])).#    
+00027170: 7072 696e 7428 2764 6963 743a 272c 4665  print('dict:',Fe
+00027180: 6564 4675 6e63 2864 6963 7429 290a       edFunc(dict)).
```

### Comparing `kmport-2.0.8/kmport.egg-info/PKG-INFO` & `kmport-2.0.9/kmport.egg-info/PKG-INFO`

 * *Files 0% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: kmport
-Version: 2.0.8
+Version: 2.0.9
 Summary: Extended import function
 Home-page: https://github.com/kagepark/Import
 Author: Kage Park
 License: MIT
 Description: Open Kage's useful tools and class to public.
         (Long time used and upgraded)
         But, this is develope version.
```

### Comparing `kmport-2.0.8/README.md` & `kmport-2.0.9/README.md`

 * *Files identical despite different names*

### Comparing `kmport-2.0.8/setup.py` & `kmport-2.0.9/setup.py`

 * *Files identical despite different names*

### Comparing `kmport-2.0.8/PKG-INFO` & `kmport-2.0.9/PKG-INFO`

 * *Files 0% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: kmport
-Version: 2.0.8
+Version: 2.0.9
 Summary: Extended import function
 Home-page: https://github.com/kagepark/Import
 Author: Kage Park
 License: MIT
 Description: Open Kage's useful tools and class to public.
         (Long time used and upgraded)
         But, this is develope version.
```

